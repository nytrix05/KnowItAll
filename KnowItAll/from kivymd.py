from kivy.uix.actionbar import Spinner
from datetime import datetime, timedelta
from kivy.clock import Clock
from threading import Thread
import time
import numpy as np 
import sqlite3
import plotly.graph_objects as go 
import pygal 
import matplotlib.pyplot as plt
from kivy.uix.accordion import StringProperty
from kivy.app import App
from kivy.uix.spinner import Spinner
from kivy_garden.matplotlib.backend_kivy import FigureCanvasKivy
from kivy.uix.gridlayout import GridLayout
from kivy.uix.image import Image 
from kivy.uix.image import Image as KivyImage
from kivy.uix.label import Label
from kivy.uix.button import Button
from kivy.uix.textinput import TextInput
from kivy.core.window import Window
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.screenmanager import ScreenManager, Screen
from kivy.uix.scrollview import ScrollView
from kivy.uix.popup import Popup
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.modalview import ModalView
from kivy.uix.scrollview import ScrollView

conn = sqlite3.connect("locked.db")
cursor = conn.cursor()

# Erstellen der users-Tabelle
cursor.execute('''
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    total_questions INTEGER DEFAULT 0,
    correct_answers INTEGER DEFAULT 0,
    wrong_answers INTEGER DEFAULT 0,
    premium INTEGER DEFAULT 0,
    last_close_time TEXT
);
''')

# Erstellen der progress-Tabelle ohne lives-Spalte
cursor.execute('''
CREATE TABLE IF NOT EXISTS progress (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    topic TEXT NOT NULL,
    current_question INTEGER DEFAULT 0,
    UNIQUE(user_id, topic), 
    FOREIGN KEY (user_id) REFERENCES users (id)
);
''')
cursor.execute('''
CREATE TABLE IF NOT EXISTS questions_log (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    question_id INTEGER,
    answer TEXT,
    is_correct BOOLEAN,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (id)

);
''')

conn.commit()
conn.close()

class Start(Screen):
    def __init__(self, **kwargs):
        super(Start, self).__init__(**kwargs)
        Window.clearcolor = ('#069AF3')
        self.window = GridLayout(cols=1, size_hint=(0.5, 0.5), pos_hint={"center_x": 0.5, "center_y": 0.5})

        self.window.add_widget(Image(source="logo-1.png"))

        self.wclm = Label(text="Enter Username")
        self.window.add_widget(self.wclm)

        self.user = TextInput(multiline=False, padding_y=(10, 10), size_hint=(1, 0.7))
        self.window.add_widget(self.user)

        self.button = Button(text="Apply", size_hint=(1, 0.7), background_color='#069AF3', background_normal="")
        self.button.bind(on_press=self.continues)
        self.window.add_widget(self.button)

        self.add_widget(self.window)

    def continues(self, instance):
        if self.user.text:
            self.manager.username = self.user.text  # Speichere den Benutzernamen im ScreenManager
            self.register_or_user(self.user.text)
            self.manager.current = "menu"
        else:
            if not hasattr(self, 'enter'):
                self.enter = Label(text="Please Enter Username!")
                self.window.add_widget(self.enter)

    def register_or_user(self, username):
        conn = sqlite3.connect('locked.db')
        cursor = conn.cursor()

        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()

        if result:
            self.user_id = result[0]
        else:
            cursor.execute('INSERT INTO users (username, correct_answers, wrong_answers, total_questions, premium, last_close_time) VALUES (?, 0, 0, 0, 0,0)', (username,))
            self.user_id = cursor.lastrowid
            conn.commit()

        conn.close()

class Menu(Screen):
    def __init__(self, **kwargs):
        super(Menu, self).__init__(**kwargs)

        # Erstelle das Haupt-Layout
        self.layout = FloatLayout()

        # Erstelle ein GridLayout für die Buttons mit fester Breite
        self.grid = GridLayout(cols=2, spacing=[2, 10], padding=[10, 100],
                               size_hint=(None, None))
        
        # Feste Breite und Höhe für das GridLayout setzen
        self.grid.width = 2 * 170 + self.grid.spacing[0]  # Breite der Buttons + Abstand
        self.grid.bind(minimum_height=self.grid.setter('height'))

        # Erstelle die Buttons und füge sie zum GridLayout hinzu
        button_size = (160, 130)  # Einheitliche Größe für alle Buttons
        
        self.pltk = Button(background_normal="politik.jpg", background_down="politik.jpg",
                           size_hint=(None, None), size=button_size,)
        self.pltk.bind(on_press=self.wechselpltk)

        self.fkt = Button(background_normal="fakten.jpg", background_down="fakten.jpg",
                          size_hint=(None, None), size=button_size)
        self.fkt.bind(on_press=self.wechselfkt)

        self.hbs = Button(background_normal="hobbys.jpg", background_down="hobbys.jpg",
                          size_hint=(None, None), size=button_size)
        self.hbs.bind(on_press=self.wechselhbs)

        self.nws = Button( background_normal="naturwissenschaften.jpg", background_down="naturwissenschaften.jpg",
                          size_hint=(None, None), size=button_size)
        self.nws.bind(on_press=self.wechselnws)

        self.gst = Button(background_normal="geschichte.jpg", background_down="geschichte.jpg",
                          size_hint=(None, None), size=button_size)
        self.gst.bind(on_press=self.wechselgst)

        self.ggp = Button(background_normal="geographie.jpg", background_down="geographie.jpg",
                          size_hint=(None, None), size=button_size)
        self.ggp.bind(on_press=self.wechselggp)

        self.sprt = Button(background_normal="sport.jpg", background_down="sport.jpg",
                           size_hint=(None, None), size=button_size)
        self.sprt.bind(on_press=self.wechselsprt)

        self.gesund = Button(background_normal="gesundheit.jpg", background_down="gesundheit.jpg",
                             size_hint=(None, None), size=button_size)
        self.gesund.bind(on_press=self.wechselgesund)

        # Füge alle Buttons dem GridLayout hinzu
        self.grid.add_widget(self.pltk)
        self.grid.add_widget(self.fkt)
        self.grid.add_widget(self.hbs)
        self.grid.add_widget(self.nws)
        self.grid.add_widget(self.gst)
        self.grid.add_widget(self.ggp)
        self.grid.add_widget(self.sprt)
        self.grid.add_widget(self.gesund)

        # Erstelle ein ScrollView und füge das GridLayout hinzu
        scrollView = ScrollView(size_hint=(None, 0.7), pos_hint={'center_x': 0.5, 'center_y': 0.5}, do_scroll_y=True)
        scrollView.width = self.grid.width  # ScrollView-Breite auf GridLayout-Breite setzen
        scrollView.add_widget(self.grid)

        # Füge das ScrollView dem Haupt-Layout hinzu
        self.layout.add_widget(scrollView)

        # Füge das Logo zum Layout hinzu
        self.layout.add_widget(Image(source="logo-1.png",
                                     size_hint=(None, None),
                                     size=(150, 150),
                                     pos_hint={"center_x": 0.5, "top": 1}))

        # Button 1 (Linker unterer Rand)
        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100, 100),
                           pos_hint={"center_x": 0.15, "y": 0}
                           )
        self.layout.add_widget(self.btn1)

        # Button 2 (Zentriert unten)
        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0}
                           )
        self.btn2.bind(on_press=self.wechseltrp)
        self.layout.add_widget(self.btn2)

        # Button 3 (Rechter unterer Rand)
        self.btn3 = Button(background_normal='profile.png', background_down='profile.png',
                           size_hint=(None, None),
                           size=(100, 100),
                           pos_hint={"center_x": 0.85, "y": 0}
                           )
        self.btn3.bind(on_press=self.wechselprfl)
        self.layout.add_widget(self.btn3)

        # Füge das Haupt-Layout dem Screen hinzu
        self.add_widget(self.layout)

    def wechseltrp(self, instance):
        self.manager.current = 'trophe'
        
    def wechselprfl(self, instance):
        self.manager.current = 'profile'
        
    def wechselpltk(self, instance):
        self.manager.current = 'politik'
        
    def wechselfkt(self, instance):
        self.manager.current = 'fakten'

    def wechselhbs(self, instance):
        self.manager.current = 'hobbys'
        
    def wechselnws(self, instance):
        self.manager.current = 'naturwissenschaften'
    
    def wechselgst(self, instance):
        self.manager.current = 'geschichte'
        
    def wechselggp(self, instance):
        self.manager.current = 'geographie'
    
    def wechselsprt(self, instance):
        self.manager.current = 'sport'
    
    def wechselgesund(self, instance):
        self.manager.current = 'gesundheit'
        

class Politik(Screen):
    def __init__(self, **kwargs):
        super(Politik, self).__init__(**kwargs)
        self.lyt = FloatLayout()
        
        self.label = Label (text="Starten = Themenbereich wählen", size_hint=(None, None), size=(100,100), pos_hint={"center_x":0.5,"center_y":0.65})
        self.lyt.add_widget(self.label)       
        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100,100),
                           pos_hint={"center_x":0.15,"y":0}
                           )                   
        self.btn1.bind(on_press=self.wechselmenu) 
        self.lyt.add_widget(self.btn1)  
                       
        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0}
                           )
        self.btn2.bind(on_press=self.wechseltrp)
        self.lyt.add_widget(self.btn2)
      
        self.btn3 = Button (background_normal='profile.png', background_down='profile.png',
                            size_hint=(None, None),
                            size=(100,100),
                            pos_hint={"center_x":0.85,"y":0}
                            )
        self.btn3.bind(on_press=self.wechselprfl)
        self.lyt.add_widget(self.btn3)
        
        
        
        self.lyt.add_widget(Image(source="logo-1.png",
                                   size_hint=(None, None),
                                   size=(150, 150),
                                   pos_hint={'center_x': 0.5, 'top': 1.0}))
        
        self.themen = Button(text="Themenbereiche", background_color = '#069AF3',
                              size_hint=(None, None), size=(150,100), pos_hint={"center_x":0.5, "center_y":0.45})
        self.themen.bind(on_press=self.open_topic_list)
        
        self.lyt.add_widget(self.themen) 
        
        self.add_widget(self.lyt) 
    
    def wechselmenu (self, instance):
        self.manager.current = 'menu'
    
    def wechseltrp (self, instance):
        self.manager.current = 'trophe'
        
    def wechselprfl (self, instance):
        self.manager.current = 'profile'
    
    def open_topic_list(self, instance):
       # Popup-Inhalt erstellen
      popup_content = GridLayout(cols=1, spacing=10, size_hint_y=None)
      popup_content.bind(minimum_height=popup_content.setter('height'))
    
      # Topics hinzufügen
      topics = ['Systeme und Regierungsformen', 'Internationale Beziehungen', 'Ideologien und Werte', 'Wirtschaft']
      for topic in topics:
        btn = Button(text=topic, size_hint_y=None, height=40)
        btn.bind(on_press=self.switch_to_topic)
        popup_content.add_widget(btn)
    
    # Popup erstellen und öffnen
      self.popup = Popup(title="Themenbereiche", size_hint=(None, None), size=(300, 400), auto_dismiss=True)
      self.popup.content= popup_content
      self.popup.open()
      
    
    def switch_to_topic(self, instance):
        self.popup.dismiss()
        topic_key = instance.text.lower().replace(' ', '_')
        questions = self.manager.fragen.get(topic_key, [])
        
        if questions:
            screen_name = f"pol_{topic_key}_0"
            if not self.manager.has_screen(screen_name):
                for i, frage in enumerate(questions):
                    text, antwort, antwortmöglichkeiten, info_text = frage
                    screen_name = f"pol_{topic_key}_{i}"
                    if topic_key == 'systeme_und_regierungsformen':
                        screen = PolSystem(name=screen_name, frage=text, antwort=antwort, antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == 'internationale_beziehungen':
                        screen = PolBeziehungen(name=screen_name, frage=text, antwort=antwort, antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == 'ideologien_und_werte':
                        screen = PolIdeol(name=screen_name, frage=text, antwort=antwort, antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == 'wirtschaft':
                        screen = PolWirtschaft(name=screen_name, frage=text, antwort=antwort, antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    
                    self.manager.add_widget(screen)
            
            self.manager.current = f"pol_{topic_key}_0"


fragenpol = [
    ("Was ist ein zentrales Merkmal eines demokratischen Systems?", 
     "Macht wird durch die Bürger direkt oder durch gewählte Vertreter ausgeübt.", 
     ["Eine einzige politische Partei kontrolliert die Regierung.", 
      "Macht wird durch die Bürger direkt oder durch gewählte Vertreter ausgeübt.", 
      "Militärische Führung übernimmt die Kontrolle.", 
      "Könige oder Königinnen erben die Macht."], 
     "Ein demokratisches politisches System ist eines, in dem die Macht in den Händen der Bürger liegt, die sie direkt oder durch gewählte Vertreter ausüben. Zu den Merkmalen einer Demokratie gehören freie und faire Wahlen, der Schutz der Menschenrechte, die Rechtsstaatlichkeit und die Möglichkeit für Bürger, an der politischen Entscheidungsfindung teilzunehmen."),
     
    ("Was zeichnet eine Diktatur aus?",
     "Die Macht liegt bei einem Einzelnen oder einer kleinen Gruppe.",
     ["Freie und faire Wahlen.",
    "Politische Freiheiten und Menschenrechte werden respektiert",
      "Die Macht liegt bei einem Einzelnen oder einer kleinen Gruppe.",
      "Bürger haben direkte Einflussmöglichkeiten auf politische Entscheidungen."],
     "Eine Diktatur ist ein autoritäres Regierungssystem, in dem die Macht in den Händen eines Einzelnen oder einer kleinen Gruppe liegt. Diktaturen zeichnen sich durch das Fehlen politischer Freiheiten, Zensur, die Unterdrückung politischer Opposition und oft durch Menschenrechtsverletzungen aus. Die Machtübernahme erfolgt häufig durch Gewalt oder einen Staatsstreich."),
    
    ("Was ist ein charakteristisches Merkmal des Parlamentarismus?",
     "Die Regierung benötigt das Vertrauen des Parlaments, um im Amt zu bleiben.",
     ["Das Militär kontrolliert die Regierung.",
       "Die Regierung benötigt das Vertrauen des Parlaments, um im Amt zu bleiben.",
       "Ein Monarch hat die absolute Macht.",
      "Wahlen werden alle 10 Jahre abgehalten."],
     "Der Präsidentialismus ist ein Regierungssystem, in dem der Präsident sowohl das Staatsoberhaupt als auch der Regierungschef ist. In präsidentiellen Systemen wird der Präsident direkt vom Volk gewählt und hat in der Regel eine festgelegte Amtszeit. Die Exekutive ist von der Legislative unabhängig."),
    
    ("Welches Merkmal ist typisch für ein präsidentielles System?",
     "Der Präsident ist sowohl Staatsoberhaupt als auch Regierungschef.",
     ["Der Präsident wird vom Parlament gewählt.",
      "Der Präsident ist sowohl Staatsoberhaupt als auch Regierungschef.",
      "Die Exekutive ist von der Legislative abhängig.",
      "Es gibt keine festgelegte Amtszeit für den Präsidenten. "],
     "Der Präsidentialismus ist ein Regierungssystem, in dem der Präsident sowohl das Staatsoberhaupt als auch der Regierungschef ist. In präsidentiellen Systemen wird der Präsident direkt vom Volk gewählt und hat in der Regel eine festgelegte Amtszeit. Die Exekutive ist von der Legislative unabhängig." ),
    
    ("Was ist typisch für ein Einparteiensystem?",
     "Nur eine politische Partei ist erlaubt und übt die Regierungsgewalt aus.",
     ["Die Bürger haben umfassende politische Freiheiten.",
      "Es gibt mehrere politische Parteien.",
      "Freie und faire Wahlen finden regelmäßig statt.",
      "Nur eine politische Partei ist erlaubt und übt die Regierungsgewalt aus."],
     "Ein Einparteiensystem ist ein politisches System, in dem nur eine einzige politische Partei erlaubt ist, die Regierungsgewalt auszuüben. Solche Systeme kommen häufig in autoritären Staaten vor, in denen politische Opposition unterdrückt wird und die Regierung strenge Kontrolle über das öffentliche und private Leben der Bürger ausübt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Was kennzeichnet ein Mehrparteiensystem?",
     "Mehrere politische Parteien existieren und nehmen an Wahlen teil.",
     ["Mehrere politische Parteien existieren und nehmen an Wahlen teil.",
      "Nur eine politische Partei ist erlaubt.",
      "Es gibt keine Wahlen.",
      "Politischer Wettbewerb ist verboten."],
     "Ein Mehrparteiensystem ist ein politisches System, in dem mehrere politische Parteien existieren und an den Wahlen teilnehmen. Dieses System fördert politischen Wettbewerb und bietet den Wählern eine Auswahl. In Demokratien mit Mehrparteiensystemen führen oft Koalitionsregierungen, in denen mehrere Parteien zusammenarbeiten müssen, um eine Mehrheit zu bilden." ),
    
    ("Was ist ein Hauptmerkmal des Föderalismus?",
     "Die Macht wird zwischen nationalen und regionalen Regierungen aufgeteilt.",
     ["Alle Macht liegt bei der zentralen Regierung.",
     "Es gibt keine regionalen Regierungen.",
     "Die Macht wird zwischen nationalen und regionalen Regierungen aufgeteilt.",
     "Nur die regionale Regierung hat die Macht."],
     "Föderalismus ist ein politisches System, in dem die Macht zwischen einer zentralen nationalen Regierung und regionalen Regierungen aufgeteilt ist. Jede Ebene hat ihre eigenen Zuständigkeiten und Befugnisse. Dies ermöglicht eine gewisse Autonomie der regionalen Regierungen, während die nationale Einheit gewahrt bleibt."),
    
    ("Was zeichnet ein totalitäres System aus?",
     "Die Regierung kontrolliert nahezu alle Aspekte des Lebens.",
     ["Hohe politische Freiheiten.",
     "Freie Medien und Meinungsfreiheit.",
      "Demokratische Wahlen. ",
      "Die Regierung kontrolliert nahezu alle Aspekte des Lebens."],
     "Der Totalitarismus ist eine extreme Form der autoritären Herrschaft, in der die Regierung nahezu alle Aspekte des öffentlichen und privaten Lebens kontrolliert. Totalitäre Regierungen nutzen Propaganda, Zensur und Überwachung, um die Bevölkerung zu kontrollieren und jegliche Opposition zu unterdrücken."),

    ("Was ist ein Merkmal einer konstitutionellen Monarchie?",
     "Die Macht des Monarchen wird durch eine Verfassung begrenzt.",
     ["Der Monarch hat uneingeschränkte Macht.",
      "Es gibt keine Verfassung.",
      "Die Macht des Monarchen wird durch eine Verfassung begrenzt.",
      "Der Monarch wird durch das Volk gewählt."],
     "Eine Monarchie ist eine Form der Regierung, in der ein Monarch (König, Königin, Kaiser usw.) als Staatsoberhaupt dient. Es gibt verschiedene Arten von Monarchien, wie konstitutionelle Monarchien, wo die Macht des Monarchen durch eine Verfassung begrenzt wird, und absolute Monarchien, wo der Monarch nahezu uneingeschränkte Macht besitzt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    
    ("Was ist ein grundlegendes Merkmal einer Republik?",
     "Das Staatsoberhaupt wird durch Wahlen oder Auswahl bestimmt.",
     ["Es gibt keinen Präsidenten.",
      "Das Staatsoberhaupt wird durch Wahlen oder Auswahl bestimmt.",
      "Der Monarch hat die absolute Macht.",
      "Das Staatsoberhaupt wird durch Erbfolge bestimmt."],
     "Eine Republik ist ein politisches System, in dem das Staatsoberhaupt nicht durch Erbfolge bestimmt wird, sondern durch Wahlen oder andere Formen der Auswahl. Republiken können verschiedene Regierungsformen annehmen, wie präsidentielle oder parlamentarische Systeme, aber alle haben gemeinsam, dass das Amt des Staatsoberhauptes nicht erblich ist."),
    

    ("Was kennzeichnet ein Merkmal einer aristokratischen Regierung?",
     "Die politische Macht liegt in den Händen einer privilegierten Klasse oder Elite.",
     ["Die Bürger wählen Vertreter, die in ihrem Namen Entscheidungen treffen.",
      "Die politische Macht wird von einer militärischen Junta kontrolliert.",
      "Die politische Macht liegt in den Händen einer privilegierten Klasse oder Elite.",
      "Die politische Macht wird von einer Einzelperson ausgeübt, die vom Volk gewählt wurde."],
     "In einer aristokratischen Regierung liegt die politische Macht in den Händen einer privilegierten Klasse oder Elite, die oft aufgrund von erblichem Reichtum, sozialem Status oder anderen privilegierten Eigenschaften herrscht. Mitglieder dieser Elite haben oft mehr Einfluss und Entscheidungsbefugnisse als der Rest der Bevölkerung."),
    
    (" Was ist ein charakteristisches Merkmal einer Theokratie?",
     "Die politische Macht wird von religiösen Führern oder Institutionen ausgeübt.",
     [ "Die Bürger wählen Vertreter, die in ihrem Namen Entscheidungen treffen.",
     "Die politische Macht wird von einer militärischen Junta kontrolliert.",
     "Die politische Macht wird von einer Einzelperson ausgeübt, die vom Volk gewählt wurde.",
     "Die politische Macht wird von religiösen Führern oder Institutionen ausgeübt."],
     " In einer Theokratie wird die politische Macht von religiösen Führern oder Institutionen ausgeübt, die behaupten, göttliche Autorität oder göttliche Inspiration zu besitzen. Die Regierungsgesetze und -richtlinien basieren oft auf religiösen Doktrinen oder heiligen Schriften."),
    
    (" Was kennzeichnet ein Merkmal einer technokratischen Regierung?",
     "Die politische Macht wird von einer Gruppe von Experten in technischen oder wissenschaftlichen Bereichen ausgeübt.",
     ["Die politische Macht wird von einer Gruppe von Experten in technischen oder wissenschaftlichen Bereichen ausgeübt.",
      "Die politische Macht wird von einer Einzelperson ausgeübt, die vom Volk gewählt wurde.",
      "Die Regierung wird von einer einzigen politischen Partei kontrolliert.",
      "Die politische Macht wird von einer religiösen Institution ausgeübt."],
     " In einer technokratischen Regierung wird die politische Macht von einer Gruppe von Experten in technischen oder wissenschaftlichen Bereichen ausgeübt. Diese Experten werden aufgrund ihres Fachwissens und ihrer Kompetenz in ihren jeweiligen Fachgebieten ausgewählt und spielen eine entscheidende Rolle bei der Politikgestaltung und Entscheidungsfindung."),
   
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
   
    ("Was ist ein typisches Merkmal einer Meritokratie?",
     "Die politische Macht wird von Personen aufgrund ihrer Fähigkeiten, Leistungen und Verdienste vergeben.",
     ["Die Bürger wählen Vertreter, die in ihrem Namen Entscheidungen treffen.",
     "Die politische Macht wird von einer militärischen Junta kontrolliert.",
     "Die politische Macht wird von Personen aufgrund ihrer Fähigkeiten, Leistungen und Verdienste vergeben.",
     "Die politische Macht wird von einer militärischen Junta kontrolliert."],
     "In einer Meritokratie wird die politische Macht von Personen aufgrund ihrer Fähigkeiten, Leistungen und Verdienste vergeben. Personen werden basierend auf ihrer Kompetenz und ihrem Beitrag zur Gesellschaft ausgewählt und in Positionen politischer Autorität oder Führung berufen."),
    

    
    ("Was kennzeichnet ein Merkmal einer Plutokratie?",
     "Die politische Macht liegt in den Händen einer kleinen Gruppe von wohlhabenden Personen oder Unternehmen.",
     ["Die politische Macht wird von einer religiösen Institution ausgeübt.",
      "Die politische Macht liegt in den Händen einer kleinen Gruppe von wohlhabenden Personen oder Unternehmen.",
      "Die politische Macht wird von einer Einzelperson ausgeübt, die vom Volk gewählt wurde.",
      "Die politische Macht wird von einer Gruppe von Experten ausgeübt."],
     "In einer Plutokratie liegt die politische Macht in den Händen einer kleinen Gruppe von wohlhabenden Personen oder Unternehmen, die durch ihren Reichtum erheblichen Einfluss auf politische Entscheidungen ausüben. Plutokratische Systeme werden oft durch wirtschaftliche Ungleichheit und Lobbyismus gekennzeichnet."),
    

    ("Was ist ein wesentliches Merkmal einer föderalen Republik?",
     "Die politische Macht ist zwischen einer Zentralregierung und den Teilstaaten aufgeteilt, und es gibt ein demokratisches Staatsoberhaupt.",
     ["Die politische Macht wird von einer einzigen Partei kontrolliert.",
      "Die politische Macht wird von einer religiösen Institution ausgeübt.",
      "Die Bürger treffen politische Entscheidungen direkt durch Abstimmungen und Referenden.",
      "Die politische Macht ist zwischen einer Zentralregierung und den Teilstaaten aufgeteilt, und es gibt ein demokratisches Staatsoberhaupt."],
     "In einer föderalen Republik ist die politische Macht zwischen einer Zentralregierung und den Teilstaaten oder Regionen aufgeteilt. Es gibt ein demokratisch gewähltes Staatsoberhaupt, das als Symbol der nationalen Einheit fungiert, während die Teilstaaten oder Regionen über eine gewisse Autonomie verfügen."),
    
    ("Was ist ein charakteristisches Merkmal einer Kleptokratie?",
     "Die politische Macht wird genutzt, um persönlichen Reichtum und Bereicherung zu fördern, oft auf Kosten der öffentlichen Mittel.",
     ["Die politische Macht wird genutzt, um persönlichen Reichtum und Bereicherung zu fördern, oft auf Kosten der öffentlichen Mittel.",
      "Die Bürger treffen politische Entscheidungen direkt durch Abstimmungen und Referenden.",
      "Die politische Macht wird von einer religiösen Institution ausgeübt.",
      "Die politische Macht wird von einer einzigen Partei kontrolliert."],
     " In einer Kleptokratie wird die politische Macht genutzt, um persönlichen Reichtum und Bereicherung zu fördern, oft auf Kosten der öffentlichen Mittel und Ressourcen. Korruption, Nepotismus und Misswirtschaft sind weit verbreitet, während die Regierung das Land zum eigenen Vorteil ausbeutet."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Was ist ein charakteristisches Merkmal einer Anarchie?",
     "Die politische Macht liegt dezentralisiert bei den Individuen oder Gemeinschaften.",
     ["Die politische Macht liegt dezentralisiert bei den Individuen oder Gemeinschaften.",
      "Die politische Macht wird von einer einzigen Partei kontrolliert.",
      "Die politische Macht wird von einer religiösen Institution ausgeübt.",
      "Die Bürger treffen politische Entscheidungen direkt durch Abstimmungen und Referenden."],
     "In einer Anarchie gibt es keine zentrale Regierung oder Autorität, und politische Macht liegt dezentralisiert bei den Individuen oder Gemeinschaften. Anarchistische Gesellschaften streben oft nach vollständiger Freiheit und Gleichheit und lehnen jede Form von staatlicher Hierarchie oder Zwang ab."),

    (
        "Was beschreibt die Gewaltenteilung?",
        "Die Aufteilung der Macht in verschiedene Institutionen.",
        ["Die Macht liegt bei einer einzelnen Institution.",
         "Die Aufteilung der Macht in verschiedene Institutionen.",
         "Der Monarch hat alle Macht.",
         "Die Macht wird ausschließlich durch die Bürger ausgeübt."],
        "Die Gewaltenteilung ist ein Prinzip, das die politische Macht in verschiedene Institutionen aufteilt, um Machtmissbrauch zu verhindern. Typischerweise werden die Exekutive, Legislative und Judikative getrennt, um die Balance der Macht zu gewährleisten."
    ),
    (
        "Was ist ein Merkmal einer konstitutionellen Demokratie?",
        "Die Verfassung legt die Regeln für die Regierungsführung fest.",
        ["Die Regierung ist absolut.",
         "Die Verfassung legt die Regeln für die Regierungsführung fest.",
         "Es gibt keine Verfassung.",
         "Die Bürger haben keine politischen Rechte."],
        "In einer konstitutionellen Demokratie definiert die Verfassung die Struktur der Regierung und schützt die Rechte der Bürger. Sie stellt sicher, dass die Macht auf gesetzlich festgelegte Weise ausgeübt wird und nicht willkürlich."
    ),
    (
        "Wie werden in einem parlamentarischen System Regierungsvertreter gewählt?",
        "Durch Wahlen zum Parlament.",
        ["Durch Ernennung durch das Militär.",
         "Durch direkte Volksabstimmung.",
         "Durch Wahlen zum Parlament.",
         "Durch Erbfolge."],
        "In einem parlamentarischen System wählen die Bürger Vertreter für das Parlament. Die Regierung wird dann durch das Parlament gebildet, und der Premierminister ist meist der Vorsitzende der stärksten Partei."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist ein typisches Merkmal einer Oligarchie?",
        "Macht liegt bei einer kleinen Gruppe von Personen oder Familien.",
        ["Macht wird durch das Militär kontrolliert.",
         "Macht liegt bei einer großen Anzahl von Bürgern.",
         "Macht liegt bei einer kleinen Gruppe von Personen oder Familien.",
         "Macht wird durch Wahlen erlangt."],
        "In einer Oligarchie haben nur eine kleine Gruppe von Personen oder Familien die politische Macht. Diese Gruppe trifft alle wichtigen Entscheidungen und kontrolliert die Regierung und oft auch die Wirtschaft."
    ),
    (
        "Wie funktioniert ein Referendum?",
        "Bürger stimmen direkt über Gesetze oder politische Fragen ab.",
        ["Ein Referendum wählt Regierungsvertreter.",
         "Bürger stimmen direkt über Gesetze oder politische Fragen ab.",
         "Regierungsvertreter entscheiden über alle Fragen.",
         "Die Verfassung regelt die Gesetze durch die Legislative."],
        "Ein Referendum ist eine direkte Abstimmung der Bürger über bestimmte Gesetze oder politische Fragen. Es ermöglicht den Bürgern, direkt Einfluss auf die Gesetzgebung oder politische Entscheidungen zu nehmen."
    ),
    (
        "Was kennzeichnet eine parlamentarische Monarchie?",
        "Der Monarch hat eine repräsentative Rolle, während das Parlament die Macht ausübt.",
        ["Der Monarch hat uneingeschränkte Macht.",
         "Das Parlament wird durch das Militär gewählt.",
         "Der Monarch hat eine repräsentative Rolle, während das Parlament die Macht ausübt.",
         "Es gibt keine parlamentarischen Wahlen."],
        "In einer parlamentarischen Monarchie ist der Monarch vorwiegend ein Symbol oder Repräsentant des Staates, während das Parlament die wirkliche politische Macht innehat und die Regierung leitet."
    ),
    (
        "Was ist ein Hauptmerkmal einer Volksdemokratie?",
        "Die Macht liegt offiziell beim Volk, wird aber oft durch eine Partei kontrolliert.",
        ["Die Macht liegt bei einer Einzelperson.",
         "Es gibt keine Wahlen.",
         "Die Macht liegt offiziell beim Volk, wird aber oft durch eine Partei kontrolliert.",
         "Die Macht wird durch eine militärische Junta ausgeübt."],
        "In einer Volksdemokratie wird die Macht formal dem Volk zugeschrieben, aber häufig kontrolliert eine politische Partei oder eine Gruppe die Entscheidungsprozesse und die politische Landschaft."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Wie wird in einer Demokratie die Gewaltenteilung sichergestellt?",
        "Durch unabhängige Institutionen, die unterschiedliche Funktionen haben.",
        ["Durch die zentrale Regierung.",
         "Durch unabhängige Institutionen, die unterschiedliche Funktionen haben.",
         "Durch die Entscheidung des Monarchen.",
         "Durch die militärische Führung."],
        "Die Gewaltenteilung in einer Demokratie wird durch verschiedene unabhängige Institutionen sichergestellt, wie Legislative, Exekutive und Judikative, die jeweils unterschiedliche Funktionen und Befugnisse haben, um Machtmissbrauch zu verhindern."
    ),
    (
        "Was ist ein wesentliches Merkmal eines sozialistischen Systems?",
        "Die Wirtschaft wird überwiegend von der Regierung kontrolliert.",
        ["Die Wirtschaft ist vollständig privat.",
         "Die Wirtschaft wird überwiegend von der Regierung kontrolliert.",
         "Der Monarch kontrolliert die Wirtschaft.",
         "Es gibt keine wirtschaftliche Planung."],
        "In einem sozialistischen System hat die Regierung eine bedeutende Rolle in der Wirtschaft, oft durch Planwirtschaft oder staatliche Kontrolle wichtiger Industrien und Ressourcen."
    ),
    (
        "Was unterscheidet eine Präsidialrepublik von einer parlamentarischen Republik?",
        "Der Präsident hat in der Präsidialrepublik umfassende Exekutivbefugnisse.",
        ["Der Präsident hat keine Macht.",
         "Der Präsident wird vom Parlament gewählt.",
         "Der Präsident hat in der Präsidialrepublik umfassende Exekutivbefugnisse.",
         "Der Präsident hat nur repräsentative Aufgaben."],
        "In einer Präsidialrepublik hat der Präsident umfassende Exekutivbefugnisse und ist sowohl Staatsoberhaupt als auch Regierungschef. In einer parlamentarischen Republik wird der Regierungschef durch das Parlament gewählt und hat weniger Macht als der Präsident."
    ),
    (
        "Wie werden in einem autoritären Regime Entscheidungen getroffen?",
        "Von einer Einzelperson oder einer kleinen Gruppe.",
        ["Durch ein gewähltes Parlament.",
         "Durch die Bürger direkt.",
         "Von einer Einzelperson oder einer kleinen Gruppe.",
         "Durch regionale Gouverneure."],
        "In einem autoritären Regime trifft eine Einzelperson oder eine kleine Gruppe alle wichtigen Entscheidungen, oft ohne breite politische Beteiligung oder Konsultation der Bevölkerung."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt den Begriff 'Konsensdemokratie'?",
        "Politische Entscheidungen werden durch breite Einigung getroffen.",
        ["Alle Entscheidungen werden von einer Partei getroffen.",
         "Politische Entscheidungen werden durch breite Einigung getroffen.",
         "Die Regierung hat uneingeschränkte Macht.",
         "Das Militär kontrolliert die Entscheidungen."],
        "In einer Konsensdemokratie werden politische Entscheidungen durch Konsens und breite Einigung getroffen, oft mit dem Ziel, möglichst viele Interessen und Meinungen zu berücksichtigen und Konflikte zu minimieren."
    ),
    (
        "Wie wird in einem Einparteiensystem die politische Macht organisiert?",
        "Eine einzige Partei kontrolliert alle Regierungsfunktionen.",
        ["Die Macht liegt bei mehreren Parteien.",
         "Ein Militärregime übernimmt die Macht.",
         "Eine einzige Partei kontrolliert alle Regierungsfunktionen.",
         "Es gibt regelmäßige Wahlen zwischen verschiedenen Parteien."],
        "In einem Einparteiensystem hat nur eine Partei die Kontrolle über alle Regierungsfunktionen, ohne ernsthafte Opposition oder politische Wettbewerber."
    ),
    (
        "Was ist ein typisches Merkmal eines autoritären Regimes?",
        "Eingeschränkte politische Freiheiten und Zensur.",
        ["Freie und faire Wahlen.",
         "Eingeschränkte politische Freiheiten und Zensur.",
         "Vollständige Pressefreiheit.",
         "Breite politische Partizipation."],
        "In einem autoritären Regime sind politische Freiheiten oft stark eingeschränkt, und es gibt häufig Zensur der Medien sowie eine Unterdrückung politischer Opposition."
    ),
    (
        "Was kennzeichnet eine politische Union?",
        "Verschiedene Staaten oder Regionen arbeiten politisch zusammen.",
        ["Ein einzelner Staat kontrolliert alle Regionen.",
         "Verschiedene Staaten oder Regionen arbeiten politisch zusammen.",
         "Es gibt keine formale Zusammenarbeit zwischen Staaten.",
         "Die Macht liegt bei einer einzelnen Region."],
        "Eine politische Union ist ein Zusammenschluss von verschiedenen Staaten oder Regionen, die politische Zusammenarbeit und gemeinsame politische Ziele verfolgen, oft durch ein gemeinsames Regierungssystem oder Verträge."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist ein Hauptmerkmal eines Souveränitätskonzepts?",
        "Die höchste Autorität liegt bei der Nation oder dem Staat.",
        ["Die Macht liegt bei internationalen Organisationen.",
         "Die höchste Autorität liegt bei der Nation oder dem Staat.",
         "Die Macht wird durch ein Überstaatliches Organ kontrolliert.",
         "Die Macht liegt bei einer regionalen Regierung."],
        "Souveränität bedeutet, dass ein Staat die höchste Autorität über sein eigenes Territorium und seine Angelegenheiten hat, ohne Einmischung von außen."
    ),
    (
        "Wie erfolgt in einem parlamentarischen System die Regierungsbildung?",
        "Durch die Mehrheitspartei im Parlament.",
        ["Durch die Verfassung.",
         "Durch die Mehrheitspartei im Parlament.",
         "Durch den Präsidenten direkt.",
         "Durch das Militär."],
        "In einem parlamentarischen System wird die Regierung von der Partei oder Koalition gebildet, die die Mehrheit im Parlament hat. Der Regierungschef wird aus der Mehrheit im Parlament ausgewählt."
    ),
    (
        "Was beschreibt der Begriff 'Demokratische Zentralisierung'?",
        "Entscheidungen werden zentral getroffen, aber nach unten kommuniziert.",
        ["Alle Entscheidungen werden auf regionaler Ebene getroffen.",
         "Entscheidungen werden zentral getroffen, aber nach unten kommuniziert.",
         "Die Macht liegt bei lokalen Regierungen.",
         "Entscheidungen werden direkt durch Volksabstimmungen getroffen."],
        "Demokratische Zentralisierung beschreibt ein System, in dem Entscheidungen zentral getroffen werden, aber auch nach unten kommuniziert werden, um die politische Einheit zu wahren und gleichzeitig die Meinung der Basis zu berücksichtigen."
    ),
    (
        "Was ist ein Kennzeichen eines autoritären Regimes?",
        "Mangel an politischen Freiheiten und Kontrolle durch den Führer.",
        ["Regelmäßige freie Wahlen.",
         "Mangel an politischen Freiheiten und Kontrolle durch den Führer.",
         "Starke Bürgerbeteiligung.",
         "Unabhängige Medien und Pressefreiheit."],
        "In einem autoritären Regime sind politische Freiheiten stark eingeschränkt, und die Kontrolle liegt häufig bei einem Führer oder einer kleinen Gruppe, die die Bevölkerung ohne wesentliche Opposition regiert."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Wie wird in einem Konsenssystem politische Entscheidungsfindung getroffen?",
        "Durch breite Einigung und Zusammenarbeit verschiedener Interessengruppen.",
        ["Durch eine dominante Einzelperson.",
         "Durch breite Einigung und Zusammenarbeit verschiedener Interessengruppen.",
         "Durch eine militärische Junta.",
         "Durch alleinige Entscheidungen des Parlaments."],
        "In einem Konsenssystem werden politische Entscheidungen durch die breite Einigung und Zusammenarbeit unterschiedlicher Interessengruppen getroffen, um möglichst viele Perspektiven zu berücksichtigen und Konflikte zu minimieren."
    ),
    (
        "Was zeichnet ein Mehrheitswahlrecht aus?",
        "Der Kandidat mit den meisten Stimmen gewinnt.",
        ["Jede Stimme hat gleiches Gewicht.",
         "Der Kandidat mit den meisten Stimmen gewinnt.",
         "Alle Stimmen werden gleichmäßig aufgeteilt.",
         "Wahlen erfolgen durch Losverfahren."],
        "Bei einem Mehrheitswahlrecht gewinnt der Kandidat oder die Partei, die die meisten Stimmen erhält, die Wahl. Dieses System wird oft bei Wahlen zum Parlament oder Präsidenten verwendet."
    ),
    (
        "Was ist typisch für ein Koalitionssystem?",
        "Mehrere Parteien arbeiten zusammen, um eine Regierung zu bilden.",
        ["Eine Partei hat die absolute Mehrheit.",
         "Mehrere Parteien arbeiten zusammen, um eine Regierung zu bilden.",
         "Es gibt nur eine politische Partei.",
         "Die Regierung wird durch das Militär gebildet."],
        "In einem Koalitionssystem arbeiten mehrere Parteien zusammen, um eine Regierung zu bilden. Dies ist oft der Fall, wenn keine einzelne Partei eine absolute Mehrheit im Parlament hat."
    ),
    (
        "Wie wird in einer Totalitarismus-Politik Macht ausgeübt?",
        "Durch eine zentrale, oft autoritäre Führung, die alle Aspekte des Lebens kontrolliert.",
        ["Durch eine demokratisch gewählte Regierung.",
         "Durch eine zentrale, oft autoritäre Führung, die alle Aspekte des Lebens kontrolliert.",
         "Durch mehrere konkurrierende Parteien.",
         "Durch regionale Führer mit Autonomie."],
        "In einem totalitären System wird die Macht durch eine zentrale, oft autoritäre Führung ausgeübt, die alle Aspekte des Lebens der Bürger streng kontrolliert und jede Form von Opposition unterdrückt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was unterscheidet eine parlamentarische Demokratie von einer präsidentiellen Demokratie?",
        "In der parlamentarischen Demokratie ist der Premierminister abhängig vom Parlament.",
        ["In der parlamentarischen Demokratie ist der Premierminister abhängig vom Parlament.",
         "Der Präsident hat uneingeschränkte Macht.",
         "Das Parlament hat keine Macht.",
         "Der Präsident ist nur ein Repräsentant."],
        "In einer parlamentarischen Demokratie ist der Premierminister abhängig vom Vertrauen des Parlaments. In einer präsidentiellen Demokratie hat der Präsident umfassende Exekutivbefugnisse und ist unabhängig vom Parlament."
    ),
    (
        "Wie wird in einer Wahlmonarchie die Macht übertragen?",
        "Durch Erbfolge oder Wahl innerhalb einer Monarchenfamilie.",
        ["Durch Wahl des Parlaments.",
         "Durch Erbfolge oder Wahl innerhalb einer Monarchenfamilie.",
         "Durch Volksabstimmung.",
         "Durch Ernennung durch das Militär."],
        "In einer Wahlmonarchie wird die Macht in der Regel durch Erbfolge oder Wahl innerhalb einer Monarchenfamilie übertragen. Es gibt oft bestimmte Regeln oder Traditionen, die die Nachfolge regeln."
    ),
    (
        "Was beschreibt der Begriff 'Repräsentative Demokratie'?",
        "Bürger wählen Vertreter, die Entscheidungen für sie treffen.",
        ["Bürger treffen alle Entscheidungen direkt.",
         "Die Macht liegt bei einer einzelnen Person.",
         "Bürger wählen Vertreter, die Entscheidungen für sie treffen.",
         "Es gibt keine Wahlen."],
        "In einer repräsentativen Demokratie wählen die Bürger Vertreter, die dann Entscheidungen und Gesetze im Namen der Bevölkerung treffen. Dieses System ermöglicht es, dass Entscheidungen durch gewählte Repräsentanten getroffen werden, anstatt direkt durch das Volk."),
    
   (
        "Was ist ein Kennzeichen einer Illiberalen Demokratie?",
        "Wahlen finden statt, aber es gibt Einschränkungen der politischen Freiheiten.",
        ["Wahlen finden statt, aber es gibt Einschränkungen der politischen Freiheiten.",
         "Es gibt vollständige politische Freiheiten und Pressefreiheit.",
         "Das Land wird durch eine einzige Partei regiert.",
         "Alle politischen Entscheidungen werden durch das Militär getroffen."],
        "In einer illiberalen Demokratie finden zwar Wahlen statt, jedoch gibt es Einschränkungen der politischen Freiheiten, wie eingeschränkte Pressefreiheit oder begrenzte Bürgerrechte."
    ),
   ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt ein 'Regierungsmonopol'?",
        "Eine Regierung, die keine politische Opposition zulässt.",
        ["Eine Regierung, die alle wirtschaftlichen Ressourcen kontrolliert.",
         "Eine Regierung, die keine politische Opposition zulässt.",
         "Eine Regierung, die durch direkte Demokratie geleitet wird.",
         "Eine Regierung, die von mehreren Parteien geführt wird."],
        "Ein Regierungsmonopol beschreibt eine Situation, in der eine Regierung keine politische Opposition zulässt und somit die einzige politische Kraft im Land ist."
    ),
    (
        "Wie funktioniert ein Präsidialsystem?",
        "Der Präsident ist sowohl Staatsoberhaupt als auch Regierungschef.",
        ["Der Präsident wird vom Parlament gewählt.",
         "Der Präsident ist sowohl Staatsoberhaupt als auch Regierungschef.",
         "Die Exekutive ist vom Parlament abhängig.",
         "Die Regierung wird von mehreren Parteien gebildet."],
        "In einem Präsidialsystem hat der Präsident sowohl die Rolle des Staatsoberhauptes als auch des Regierungschefs, und die Exekutive ist von der Legislative unabhängig."
    ),
    (
        "Was ist ein Merkmal einer Demarchie?",
        "Politische Macht wird durch Zufall oder Losentscheid vergeben.",
        ["Politische Macht wird durch Erbfolge vergeben.",
         "Politische Macht wird durch Zufall oder Losentscheid vergeben.",
         "Politische Macht wird durch Wahl des Volkes vergeben.",
         "Politische Macht wird von einer einzigen Partei kontrolliert."],
        "In einer Demarchie werden politische Ämter durch Zufall oder Losentscheid vergeben, anstatt durch Wahl oder Ernennung."
    ),
    (
        "Was zeichnet ein Föderalistisches System aus?",
        "Macht wird zwischen nationalen und regionalen Regierungen aufgeteilt.",
        ["Macht wird von einer zentralen Regierung ausgeübt.",
         "Macht wird zwischen nationalen und regionalen Regierungen aufgeteilt.",
         "Es gibt keine regionalen Regierungen.",
         "Alle Entscheidungen werden auf nationaler Ebene getroffen."],
        "Ein föderalistisches System teilt die Macht zwischen einer zentralen Regierung und regionalen Regierungen auf, um eine Balance zwischen nationaler Einheit und regionaler Autonomie zu schaffen."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist ein Kennzeichen eines Einheitsstaates?",
        "Die zentrale Regierung hat die höchste Autorität über das gesamte Territorium.",
        ["Es gibt mehrere unabhängige Staaten.",
         "Die zentrale Regierung hat die höchste Autorität über das gesamte Territorium.",
         "Die Macht ist zwischen regionalen und nationalen Behörden aufgeteilt.",
         "Politische Entscheidungen werden direkt durch Volksabstimmung getroffen."],
        "In einem Einheitsstaat hat die zentrale Regierung die höchste Autorität und kann Entscheidungen für das gesamte Territorium treffen, ohne die Notwendigkeit einer regionalen Autonomie."
    ),
    (
        "Was beschreibt den Begriff 'Demokratiedefizit'?",
        "Unzureichende demokratische Beteiligung oder Kontrolle.",
        ["Hohe Bürgerbeteiligung und Transparenz.",
         "Unzureichende demokratische Beteiligung oder Kontrolle.",
         "Volle Umsetzung der Bürgerrechte.",
         "Direkte Volksvertretung durch regelmäßige Wahlen."],
        "Ein Demokratiedefizit beschreibt eine Situation, in der es an ausreichender demokratischer Beteiligung oder Kontrolle fehlt, was zu einer Verringerung der politischen Legitimität und Transparenz führen kann."
    ),
    (
        "Wie wird in einer Republik die Macht des Staatsoberhauptes bestimmt?",
        "Durch Wahlen oder andere Auswahlverfahren, nicht durch Erbfolge.",
        ["Durch Erbfolge.",
         "Durch Wahlen oder andere Auswahlverfahren, nicht durch Erbfolge.",
         "Durch militärische Macht.",
         "Durch Ernennung durch das Parlament."],
        "In einer Republik wird das Staatsoberhaupt durch Wahlen oder andere Auswahlverfahren bestimmt und nicht durch Erbfolge, wie in Monarchien."
    ),
    (
        "Was beschreibt den Begriff 'Sowjetismus'?",
        "Ein System, in dem die Macht durch Räte oder Sowjets ausgeübt wird.",
        ["Ein System, das von einer Einzelperson kontrolliert wird.",
         "Ein System, in dem die Macht durch Räte oder Sowjets ausgeübt wird.",
         "Ein System, das auf freien Marktwirtschaft basiert.",
         "Ein System, in dem Macht durch das Militär ausgeübt wird."],
        "Sowjetismus beschreibt ein System, in dem die Macht durch Räte oder Sowjets ausgeübt wird, wie es in der früheren Sowjetunion der Fall war."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist ein Merkmal eines Erbschaftssystems?",
        "Politische Macht wird durch Familienangehörigkeit weitergegeben.",
        ["Politische Macht wird durch Wahlen bestimmt.",
         "Politische Macht wird durch Familienangehörigkeit weitergegeben.",
         "Politische Macht wird durch Volksabstimmungen erlangt.",
         "Politische Macht wird durch militärische Kontrolle erlangt."],
        "In einem Erbschaftssystem wird die politische Macht innerhalb einer Familie weitergegeben, oft durch Erbfolge oder Dynastie."
    ),
    (
        "Was kennzeichnet ein Anti-Demokratiesystem?",
        "Das Fehlen grundlegender demokratischer Prinzipien wie Wahlen oder Bürgerrechte.",
        ["Regelmäßige freie Wahlen und Bürgerbeteiligung.",
         "Das Fehlen grundlegender demokratischer Prinzipien wie Wahlen oder Bürgerrechte.",
         "Vollständige Pressefreiheit.",
         "Breite politische Partizipation und Transparenz."],
        "In einem Anti-Demokratiesystem fehlen grundlegende demokratische Prinzipien wie regelmäßige Wahlen, Bürgerrechte und Pressefreiheit, wodurch die politische Freiheit stark eingeschränkt ist."
    ),
    (
        "Wie wird in einer Monarchie die politische Macht traditionell übertragen?",
        "Durch Erbfolge.",
        ["Durch Wahl.",
         "Durch Erbfolge.",
         "Durch Losentscheid.",
         "Durch Ernennung durch das Parlament."],
        "In einer Monarchie wird die politische Macht traditionell durch Erbfolge innerhalb einer königlichen Familie übertragen."
    ),
    (
        "Was ist ein Merkmal eines bürokratischen Systems?",
        "Die Verwaltung wird durch eine hierarchische Struktur von Beamten geleitet.",
        ["Die Macht liegt in den Händen der Bürger.",
         "Die Verwaltung wird durch eine hierarchische Struktur von Beamten geleitet.",
         "Die Macht wird durch das Militär kontrolliert.",
         "Es gibt keine klare Verwaltungsstruktur."],
        "In einem bürokratischen System wird die Verwaltung durch eine hierarchische Struktur von Beamten geleitet, die spezialisierte Aufgaben und Zuständigkeiten haben."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was unterscheidet ein national-sozialistisches System von anderen politischen Systemen?",
        "Es basiert auf einer Ideologie, die extreme Nationalismus und Rassismus umfasst.",
        ["Es basiert auf sozialistischen Prinzipien.",
         "Es basiert auf einer Ideologie, die extreme Nationalismus und Rassismus umfasst.",
         "Es ist eine Form der direkten Demokratie.",
         "Es basiert auf demokratischen Prinzipien und Rechten."],
        "Ein national-sozialistisches System zeichnet sich durch extreme Nationalismus und Rassismus aus und wird oft mit autoritären und totalitären Merkmalen verbunden."
    ),
    (
        "Was ist eine typische Eigenschaft einer Technokratie?",
        "Die Verwaltung wird von Experten auf spezifischen Gebieten übernommen.",
        ["Die Macht liegt bei einer einzigen Partei.",
         "Die Verwaltung wird von Experten auf spezifischen Gebieten übernommen.",
         "Die Macht wird durch Erbfolge übertragen.",
         "Die Bürger wählen direkt ihre politischen Führer."],
        "In einer Technokratie wird die Verwaltung und politische Macht von Experten auf spezifischen technischen oder wissenschaftlichen Gebieten übernommen, basierend auf ihrem Fachwissen."
    ),
    (
        "Wie unterscheidet sich ein Präsidialsystem von einem parlamentarischen System?",
        "Im Präsidialsystem ist der Präsident sowohl Staatsoberhaupt als auch Regierungschef.",
        ["Im Präsidialsystem ist der Präsident nur ein Repräsentant.",
         "Im Präsidialsystem ist der Präsident sowohl Staatsoberhaupt als auch Regierungschef.",
         "Im Präsidialsystem wird die Regierung vom Parlament gewählt.",
         "Im Präsidialsystem gibt es mehrere Regierungschefs."],
        "In einem Präsidialsystem hat der Präsident sowohl die Rolle des Staatsoberhauptes als auch des Regierungschefs, während in einem parlamentarischen System der Regierungschef vom Parlament gewählt wird."
    ),
    (
        "Was ist typisch für ein Überwachungsstaat?",
        "Die Regierung kontrolliert und überwacht alle Aspekte des Lebens der Bürger.",
        ["Die Bürger haben umfassende Privatsphäre und Schutz.",
         "Die Regierung kontrolliert und überwacht alle Aspekte des Lebens der Bürger.",
         "Es gibt vollständige Pressefreiheit.",
         "Politische Entscheidungen werden durch Volksabstimmungen getroffen."],
        "In einem Überwachungsstaat kontrolliert und überwacht die Regierung umfassend alle Aspekte des Lebens der Bürger, einschließlich Kommunikation und Aktivitäten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist ein Kennzeichen einer kollektiven Führung?",
        "Die Macht wird von einer Gruppe von Personen geteilt.",
        ["Die Macht liegt bei einer Einzelperson.",
         "Die Macht wird von einer Gruppe von Personen geteilt.",
         "Die Macht wird durch Erbfolge übertragen.",
         "Die Macht liegt bei einer einzigen politischen Partei."],
        "In einer kollektiven Führung wird die Macht von einer Gruppe von Personen geteilt, anstatt von einer einzelnen Person oder Institution."
    ),
    (
        "Wie funktioniert ein Konsenswahlrecht?",
        "Wahlentscheidungen werden durch breite Einigung und Zustimmung getroffen.",
        ["Wahlentscheidungen werden durch Mehrheitsentscheidungen getroffen.",
         "Wahlentscheidungen werden durch breite Einigung und Zustimmung getroffen.",
         "Wahlentscheidungen werden durch Losentscheid getroffen.",
         "Wahlentscheidungen werden durch die Entscheidung einer einzigen Partei getroffen."],
        "In einem Konsenswahlrecht werden Entscheidungen durch breite Einigung und Zustimmung aller Beteiligten getroffen, um ein breites Maß an Unterstützung und Konsens zu gewährleisten."
    ),
    (
        "Was ist ein typisches Merkmal einer Pluralistischen Gesellschaft?",
        "Es gibt eine Vielzahl von Interessen und Gruppen, die um Einfluss kämpfen.",
        ["Es gibt nur eine politische Gruppe.",
         "Es gibt eine Vielzahl von Interessen und Gruppen, die um Einfluss kämpfen.",
         "Politische Macht wird durch eine einzige Partei ausgeübt.",
         "Alle Bürger haben die gleiche Meinung."],
        "In einer pluralistischen Gesellschaft gibt es viele verschiedene Interessen und Gruppen, die um Einfluss kämpfen und in der politischen Entscheidungsfindung eine Rolle spielen."
    ),
    (
        "Was ist eine typische Eigenschaft eines parlamentarischen Systems?",
        "Der Regierungschef ist vom Vertrauen des Parlaments abhängig.",
        ["Der Regierungschef wird direkt vom Volk gewählt.",
         "Der Regierungschef ist vom Vertrauen des Parlaments abhängig.",
         "Der Regierungschef hat uneingeschränkte Macht.",
         "Der Regierungschef wird durch Erbfolge bestimmt."],
        "In einem parlamentarischen System ist der Regierungschef vom Vertrauen des Parlaments abhängig, und kann durch ein Misstrauensvotum abgesetzt werden."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was unterscheidet eine theokratische Regierung von anderen Systemen?",
        "Die Macht wird durch religiöse Autorität ausgeübt.",
        ["Die Macht wird durch politische Parteien ausgeübt.",
         "Die Macht wird durch religiöse Autorität ausgeübt.",
         "Die Macht wird durch militärische Führung ausgeübt.",
         "Die Macht wird durch Erbfolge bestimmt."],
        "In einer theokratischen Regierung wird die Macht von religiösen Führern oder Institutionen ausgeübt, die auf göttlicher Autorität oder religiösen Doktrinen basieren."
    ),
    (
        "Wie funktioniert ein parlamentarisches System der Konsensbildung?",
        "Die Regierungsbildung erfolgt durch die Zusammenarbeit mehrerer Parteien.",
        ["Die Regierungsbildung erfolgt durch die Entscheidung einer einzigen Partei.",
         "Die Regierungsbildung erfolgt durch die Zusammenarbeit mehrerer Parteien.",
         "Die Regierung wird durch das Militär gebildet.",
         "Die Regierung wird durch Volksabstimmung gewählt."],
        "In einem parlamentarischen System der Konsensbildung erfolgt die Regierungsbildung oft durch die Zusammenarbeit mehrerer Parteien, die Koalitionen bilden, um eine stabile Regierung zu gewährleisten."
    )
    
]




class PolSystem(Screen):
    def __init__(self, frage, antwort, antwortmöglichkeiten, info_text, **kwargs):
        super(PolSystem, self).__init__(**kwargs)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Systeme und Regierungsformen"
        self.fragen = fragenpol

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75})
        
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                
                # Log the question as correct in the new table
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))

            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))

            conn.commit()
            conn.close()

            # Save progress after answering
            self.switch_question()
            self.new_progress()
        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()
    
    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"

    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn
    

class PopupView(ModalView):
    def __init__(self, title, content, **kwargs):
        super(PopupView, self).__init__(**kwargs)
        self.size_hint = (0.5, 0.5)
        self.pos_hint = {'center_x': 0.5, 'center_y': 0.5}
        
        layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        layout.add_widget(Label(text=title, halign="center"))
        layout.add_widget(content)
        
        self.add_widget(layout)
        
frageninter = [
    
    ("Welches Konzept beschreibt, dass Staaten in einer anarchischen internationalen Ordnung agieren",
     "Realismus",
     {"Konstruktivismus",
      "Liberalismus",
      "Realismus",
      "Marxismus"},
     "Staaten streben nach Macht und Sicherheit, da es keine zentrale Autorität über ihnen gibt. In dieser Theorie wird betont, dass militärische Stärke und Selbsthilfe entscheidend sind. Der Realismus sieht die Welt als einen ständigen Machtkampf."),
    
    ("Welcher internationalen Organisation gehört das Prinzip der kollektiven Sicherheit an?",
     "UNO",
     {"ASEAN",
      "UNO",
      "EU",
      "NATO"},
     "Bedrohungen gegen ein Mitglied werden als Bedrohungen gegen alle gesehen. Die Vereinten Nationen (UNO) fördern kollektive Sicherheit durch ihren Sicherheitsrat, der internationale Friedensmissionen und Sanktionen durchsetzt."),
    
    ("Welche Theorie betont die Rolle von internationalen Institutionen und Normen?",
     "Liberalismus",
     ["Neorealismus",
      "Realismus",
      "Liberalismus",
      "Konstruktivismus"],
     "Institutionen und Normen fördern die Zusammenarbeit zwischen Staaten. Der Liberalismus argumentiert, dass wirtschaftliche Verflechtungen und gemeinsame Werte Frieden und Kooperation begünstigen. Verträge und internationale Organisationen sind hierbei wichtig."),
    
    ("Welches Land ist ständiges Mitglied des UN-Sicherheitsrats?",
     "China",
     ["China",
      "Indien",
      "Deutschland",
      " Japan"],
     "Der Sicherheitsrat hat fünf ständige Mitglieder mit Vetorecht. China ist eines dieser ständigen Mitglieder, das aufgrund seiner politischen und historischen Bedeutung dauerhaft im Rat vertreten ist."),
    
    ("Welche Theorie argumentiert, dass internationale Beziehungen durch soziale Konstruktionen geprägt sind?",
     "Konstruktivismus",
     ["Liberalismus",
      "Neoliberalismus",
      "Realismus",
      "Konstruktivismus"],
     "Ideen, Normen und Überzeugungen formen die internationale Realität und leiten das Verhalten der Staaten. Der Konstruktivismus betont, dass soziale Konstruktionen und Identitäten das Handeln auf der internationalen Bühne beeinflussen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Region war während des Kalten Krieges ein zentrales Konfliktfeld zwischen den USA und der Sowjetunion?",
     "Globalisierung",
     [" Souveränität",
      "Globalisierung",
      "Isolationismus",
      "Imperialismus"],
     "Weltweite Vernetzung führt zu gegenseitiger Abhängigkeit der Staaten. Die Globalisierung stärkt durch Handelsbeziehungen, Investitionen und Technologieaustausch die wirtschaftlichen und politischen Bindungen zwischen Ländern."),
    
    ("Welches Konzept beschreibt die gegenseitige Abhängigkeit der Staaten in der globalen Wirtschaft",
     "Globalisierung",
     ["Imperialismus",
      "Isolationismus",
      "Souveränität",
      "Globalisierung"],
     "Weltweite Vernetzung führt zu gegenseitiger Abhängigkeit der Staaten. Die Globalisierung stärkt durch Handelsbeziehungen, Investitionen und Technologieaustausch die wirtschaftlichen und politischen Bindungen zwischen Ländern."),
    
    ("Welcher Begriff beschreibt die Bemühungen von Staaten, ihre militärische Macht zu balancieren, um Hegemonie zu verhindern?",
     "Balance of Power",
     ["Bandwagoning",
      "Balance of Power",
      "Hegemonie",
      "Unilateralismus"],
     "Strategische Allianzen und Aufrüstung sollen Machtverhältnisse ausgleichen. Die Balance of Power zielt darauf ab, zu verhindern, dass ein einzelner Staat dominierend wird, und trägt zur Stabilität im internationalen System bei."),
    
    ("Welche Organisation wurde nach dem Zweiten Weltkrieg gegründet, um den Weltfrieden zu fördern und Konflikte zu lösen?",
     "NATO",
     ["Vereinte Nationen (UNO)",
      "Europäische Union",
      "NATO",
      "Warschauer Pakt"],
     "Eine internationale Organisation, die nach dem Zweiten Weltkrieg gegründet wurde, setzt sich für Frieden und Konfliktlösung ein. Die Vereinten Nationen (UNO) spielen eine zentrale Rolle bei der Friedenssicherung und humanitären Hilfe weltweit."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Theorie sieht Kooperation als Ergebnis von wirtschaftlichem Gewinn für alle Beteiligten",
     "Liberalismus",
     ["Liberalismus",
      "Konstruktivismus",
      "Neomarxismus",
      "Realismus"],
     "Kooperation wird durch gemeinsame wirtschaftliche und politische Vorteile gefördert. Der Liberalismus betont, dass Zusammenarbeit stabile Partnerschaften schafft und durch gegenseitigen Nutzen den globalen Frieden fördert."),
    
    ("Welches Prinzip bezeichnet das Recht eines Staates, Angelegenheiten ohne äußere Einmischung zu regeln?",
     "Souveränität",
     ["Hegemonie",
      "Protektorat",
      "Souveränität",
      "Föderation"],
     "Ein zentrales Konzept des Völkerrechts besagt, dass Staaten die Freiheit haben, ihre eigenen politischen, wirtschaftlichen und sozialen Systeme zu wählen und zu entwickeln. Dieses Prinzip betont die Unabhängigkeit und Gleichberechtigung aller Staaten. Es wird als Schutzschild gegen äußere Interventionen angesehen und ist unter dem Begriff Souveränität bekannt."),    
    
    ("Welche Theorie der internationalen Beziehungen betont die Bedeutung von Staaten und ihre Machtkämpfe?",
     "Realismus",
     ["Konstruktivismus",
      "Realismus",
      "Marxismus",
      "Liberalismus"],
     "Diese Theorie betrachtet die internationalen Beziehungen als anarchisch und sieht Staaten als die wichtigsten Akteure. Sie argumentiert, dass das Hauptziel der Staaten das Überleben ist und dass Machtkämpfe und Sicherheitsbedenken dominierende Themen sind. Der Realismus hebt die Bedeutung militärischer Stärke und strategischer Interessen hervor."),
    
    ("Welches Abkommen wurde 1992 unterzeichnet und schuf die Europäische Union ?",
     "Vertrag von Maastricht",
     ["Vertrag von Nizza",
      "Vertrag von Amsterdam",
      "Vertrag von Lissabon",
      "Vertrag von Maastricht"],
     "Das Abkommen, das 1992 unterzeichnet wurde, legte den Grundstein für die Schaffung der EU und führte den Euro ein. Der Vertrag von Maastricht festigte die politische und wirtschaftliche Integration Europas und führte zu neuen Formen der Zusammenarbeit in Bereichen wie Außenpolitik und Sicherheit. Dieses historische Dokument markierte einen bedeutenden Schritt in der europäischen Integration."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Doktrin besagt, dass die USA das Recht haben, in die Angelegenheiten von Staaten der westlichen Hemisphäre einzugreifen?",
     "Monroe-Doktrin",
     ["Nixon-Doktrin",
      "Bush-Doktrin",
      "Truman-Doktrin",
      "Monroe-Doktrin"],
     "Diese Doktrin warnte europäische Mächte davor, in die Angelegenheiten der westlichen Hemisphäre einzugreifen. Sie begründete das amerikanische Vorrecht, in den politischen Entwicklungen der Amerikas eine dominierende Rolle zu spielen und Interventionen durch externe Mächte abzuwehren. Diese Politik, bekannt als Monroe-Doktrin, hatte weitreichende Auswirkungen auf die amerikanische Außenpolitik."),
    
    ("Welcher Konflikt wird oft als „Kaltes“ Beispiel für einen Stellvertreterkrieg während des Kalten Krieges genannt?",
    "Vietnamkrieg",
    ["Sechstagekrieg",
     "Falklandkrieg",
     "Korea-Krieg",
     "Vietnamkrieg"],
    "Ein langjähriger Konflikt in Südostasien, der in den 1950er Jahren begann und bis 1975 andauerte, wird oft als typischer Stellvertreterkrieg des Kalten Krieges betrachtet. Dieser Krieg sah die USA und ihre Verbündeten auf der einen Seite und die Sowjetunion und China auf der anderen Seite. Dieser Konflikt ist bekannt als Vietnamkrieg."),
    
    ("Welcher Begriff bezeichnet die Aufteilung eines Landes in mehrere autonome Regionen oder Staaten?",
     "Balkanisierung",
     ["Föderalismus",
      "Globalisierung",
      "Kolonialisierung",
      "Balkanisierung"],
    "Der Begriff stammt ursprünglich von der Auflösung des Osmanischen Reiches in Südosteuropa. Er beschreibt den Prozess, bei dem ein Land in kleinere, oft feindliche Einheiten zerfällt. Diese Fragmentierung kann durch ethnische, religiöse oder sprachliche Unterschiede verursacht werden und führt häufig zu politischen Instabilitäten und Konflikten. Dies wird als Balkanisierung bezeichnet."),
    
    ("Welche Stadt ist der Hauptsitz der Vereinten Nationen?",
     "New York",
     ["Wien",
      "New York",
      "Brüssel",
      "Genf"],
     "Diese Metropole in den Vereinigten Staaten beherbergt das Hauptquartier der Vereinten Nationen. Seit 1952 sind hier die wichtigsten Organe der UNO untergebracht, einschließlich des Sicherheitsrates und der Generalversammlung. New York ist ein zentraler Ort für internationale Diplomatie und globale Entscheidungsfindung."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Region wurde nach dem Zweiten Weltkrieg in eine östliche und eine westliche Zone aufgeteilt?",
     "Deutschland",
     ["Vietnam",
      "Zypern",
      "Korea",
      "Deutschland"],
     "Nach dem Zweiten Weltkrieg wurde dieses Land in zwei separate Staaten geteilt: eine westliche, kapitalistische und eine östliche, kommunistische Zone. Diese Teilung spiegelte die ideologischen Spannungen des Kalten Krieges wider und führte zu jahrzehntelanger politischer und wirtschaftlicher Trennung, bis es schließlich wiedervereint wurde. Diese Region ist Deutschland."),
    
    ("Welcher Vertrag beendete den Ersten Weltkrieg und legte die Grundlage für den Völkerbund?",
     "Vertrag von Versailles",
     ["Vertrag von Trianon",
      "Vertrag von Saint-Germain",
      "Vertrag von Versailles",
      "Vertrag von Sevres"],
     "Dieses Abkommen, das 1919 unterzeichnet wurde, beendete offiziell den Ersten Weltkrieg und stellte umfangreiche Bestimmungen für die Niederlage und Reparationszahlungen des besiegten Landes auf. Es etablierte auch den Völkerbund, eine internationale Organisation, die gegründet wurde, um den Frieden und die Zusammenarbeit zwischen den Nationen zu fördern. Dieses Abkommen ist der Vertrag von Versailles."),
    
    ("Welche internationale Organisation wurde 1949 gegründet, um die kollektive Verteidigung ihrer Mitglieder zu gewährleisten?",
     "NATO",
     ["NATO",
      "OSZE",
      "SEATO",
      "ANZUS"],
     "Diese Organisation wurde nach dem Zweiten Weltkrieg gegründet, um die Sicherheit und Verteidigung der Mitgliedsstaaten zu gewährleisten. Sie basiert auf dem Prinzip der kollektiven Verteidigung, wonach ein Angriff auf ein Mitglied als Angriff auf alle betrachtet wird. Diese Organisation, bekannt als NATO, spielt eine wichtige Rolle in der internationalen Sicherheitspolitik."),
    
    ("Welche Wirtschaftstheorie betont die Vorteile des Freihandels und der offenen Märkte?",
     "Neoliberalismus",
     ["Merkantilismus",
      "Protektionismus",
      "Neoliberalismus",
      "Isolationismus"],
     "Diese Theorie argumentiert, dass der Abbau von Handelsbarrieren und die Förderung offener Märkte zu mehr Wohlstand und Wachstum führen. Sie betont die Bedeutung des freien Wettbewerbs und die Vorteile der Globalisierung für die Effizienz und Innovation in der Wirtschaft. Diese Theorie wird als Neoliberalismus bezeichnet."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Konflikt im Nahen Osten begann 1967 und dauerte nur sechs Tage?",
     "Sechstagekrieg",
     ["Jom-Kippur-Krieg",
      "Golfkrieg",
      "Sechstagekrieg",
      "Libanonkrieg"],
     "Dieser kurze, aber intensive Krieg im Nahen Osten führte zu erheblichen Gebietsveränderungen und politischen Spannungen in der Region. Er begann mit einem Präventivschlag und endete mit der Kontrolle über strategisch wichtige Gebiete. Dieser Konflikt ist bekannt als Sechstagekrieg."),
    
    ("Welcher Vertrag von 1987 reduzierte die nuklearen Arsenale der USA und der Sowjetunion?",
     "INF-Vertrag",
     ["INF-Vertrag",
      "ABM-Vertrag",
      "START-Vertrag",
      "SALT-Vertrag"],
     "Dieses Abkommen zwischen den USA und der Sowjetunion zielte darauf ab, die Anzahl nuklearer Mittelstreckenraketen zu verringern und somit das Wettrüsten zu bremsen. Es war ein bedeutender Schritt zur Deeskalation der Spannungen während des Kalten Krieges und trug zur Förderung des globalen Friedens und der Stabilität bei. Dieses Abkommen ist der INF-Vertrag."),
    
    ("Welche Theorie der internationalen Beziehungen betont die Bedeutung internationaler Institutionen und Normen?",
     "Liberalismus",
     ["Konstruktivismus",
      "Marxismus",
      "Realismus",
      "Liberalismus"],
     "Diese Theorie argumentiert, dass internationale Institutionen und Normen eine wichtige Rolle bei der Förderung von Frieden und Zusammenarbeit zwischen Staaten spielen. Sie betont die Vorteile von Kooperation und kollektiven Sicherheitsmechanismen, um Konflikte zu verhindern und stabile Beziehungen aufzubauen. Diese Theorie wird als Liberalismus bezeichnet."),
    
    ("Welche Doktrin war ein Eckpfeiler der US-Politik zur Eindämmung des Kommunismus nach dem Zweiten Weltkrieg?",
     "Truman-Doktrin",
     ["Eisenhower-Doktrin",
      "Nixon-Doktrin",
      "Monroe-Doktrin",
      "Truman-Doktrin"],
     "Diese Doktrin zielte darauf ab, die Ausbreitung des Kommunismus durch Unterstützung von Ländern zu verhindern, die sich gegen kommunistische Bewegungen wehren wollten. Sie prägte die US-Außenpolitik im Kalten Krieg und führte zu zahlreichen Interventionen und Hilfsprogrammen zur Eindämmung kommunistischer Einflüsse weltweit. Diese Doktrin ist bekannt als Truman-Doktrin."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
        (
        "Welche internationale Organisation ist für die Regulierung des internationalen Handels zuständig?",
        "WTO",
        ["IMF",
         "WTO",
         "UNESCO",
         "Weltbank"],
        "Die Welthandelsorganisation (WTO) ist verantwortlich für die Regelung und Überwachung des internationalen Handels und die Förderung eines freien und fairen Handelsystems."
    ),
    (
        "Welches Konzept beschreibt die Idee, dass internationale Beziehungen durch Machtverhältnisse und Machtpolitik geprägt sind?",
        "Machtpolitik",
        ["Globalisierung",
         "Machtpolitik",
         "Multilateralismus",
         "Humanitäre Intervention"],
        "Machtpolitik beschreibt die internationale Beziehungen als durch Machtverhältnisse und strategische Interessen geprägt, wobei Staaten ihre Macht durch politische, wirtschaftliche und militärische Mittel durchsetzen."
    ),
    (
        "Welche Theorie betont, dass internationale Konflikte durch wirtschaftliche Interessen und Klassenkämpfe erklärt werden?",
        "Marxismus",
        ["Liberalismus",
         "Realismus",
         "Konstruktivismus",
         "Marxismus"],
        "Der Marxismus erklärt internationale Konflikte durch wirtschaftliche Interessen und Klassenkämpfe, und sieht den internationalen Kapitalismus als Hauptursache für Konflikte und Ungerechtigkeiten."
    ),
    (
        "Welches Prinzip betont das Recht der Selbstbestimmung für Völker und Nationen?",
        "Selbstbestimmungsrecht",
        ["Völkerrecht",
         "Selbstbestimmungsrecht",
         "Neutralität",
         "Global Governance"],
        "Das Selbstbestimmungsrecht besagt, dass Völker und Nationen das Recht haben, ihre politischen, wirtschaftlichen und sozialen Systeme selbst zu bestimmen, ohne äußere Einmischung."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Theorie argumentiert, dass internationale Beziehungen durch historische und kulturelle Kontexte geprägt sind?",
        "Konstruktivismus",
        ["Liberalismus",
         "Realismus",
         "Konstruktivismus",
         "Marxismus"],
        "Der Konstruktivismus argumentiert, dass internationale Beziehungen durch historische und kulturelle Kontexte sowie soziale Konstruktionen geprägt sind, und dass Identitäten und Normen das Verhalten der Staaten beeinflussen."
    ),
    (
        "Welches Abkommen regelt die nukleare Abrüstung und das Verbot von Atomwaffenversuchen?",
        "Atomwaffensperrvertrag",
        ["CWC",
         "ABM-Vertrag",
         "Atomwaffensperrvertrag",
         "NPT"],
        "Der Atomwaffensperrvertrag (NPT) zielt darauf ab, die Verbreitung von Kernwaffen zu verhindern, Abrüstung zu fördern und die friedliche Nutzung der Kernenergie zu unterstützen."
    ),
    (
        "Welche internationale Organisation wurde gegründet, um humanitäre Hilfe und Entwicklung zu fördern?",
        "UNICEF",
        ["WHO",
         "UNESCO",
         "UNICEF",
         "Weltbank"],
        "Das UNICEF (United Nations International Children's Emergency Fund) wurde gegründet, um humanitäre Hilfe und Entwicklungsprojekte für Kinder und Familien in Not zu unterstützen."
    ),
    (
        "Welches Konzept beschreibt die Strategie, bei internationalen Konflikten auf diplomatische Verhandlungen und Vermeidung von Krieg zu setzen?",
        "Diplomatie",
        ["Isolationismus",
         "Diplomatie",
         "Militärische Intervention",
         "Kollaboration"],
        "Diplomatie bezieht sich auf die Strategie, bei internationalen Konflikten Verhandlungen und Gespräche zu nutzen, um Frieden und Lösungen zu fördern und Krieg zu vermeiden."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Theorie sieht internationale Organisationen als wesentliche Akteure für globale Governance?",
        "Institutionalismus",
        ["Liberalismus",
         "Konstruktivismus",
         "Neorealismus",
         "Institutionalismus"],
        "Der Institutionalismus betont, dass internationale Organisationen wichtige Akteure in der globalen Governance sind, da sie Kooperation und Regelungen zwischen Staaten fördern."
    ),
    (
        "Welcher Begriff bezeichnet die Beziehung und Zusammenarbeit zwischen verschiedenen Staaten zur Lösung globaler Probleme?",
        "Multilateralismus",
        ["Bilaterale Diplomatie",
         "Isolationismus",
         "Multilateralismus",
         "Hegemonie"],
        "Multilateralismus bezeichnet die Zusammenarbeit und Koordination zwischen mehreren Staaten, um globale Probleme durch gemeinsame Anstrengungen und Institutionen zu lösen."
    ),
    (
        "Welcher Vertrag ermöglichte die politische und wirtschaftliche Integration Europas und legte die Grundlage für den Euro?",
        "Vertrag von Maastricht",
        ["Vertrag von Amsterdam",
         "Vertrag von Nizza",
         "Vertrag von Lissabon",
         "Vertrag von Maastricht"],
        "Der Vertrag von Maastricht von 1992 führte zur Schaffung der Europäischen Union und legte die Grundlage für die Einführung des Euro als gemeinsame Währung."
    ),
    (
        "Welche internationale Organisation ist bekannt für ihre Rolle bei der Förderung der Menschenrechte?",
        "Amnesty International",
        ["Human Rights Watch",
         "Amnesty International",
         "Weltgesundheitsorganisation",
         "Internationale Rotkreuz- und Rothalbmond-Bewegung"],
        "Amnesty International setzt sich weltweit für die Menschenrechte ein und arbeitet an der Bekämpfung von Menschenrechtsverletzungen durch öffentliche Kampagnen und Lobbyarbeit."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Begriff beschreibt den Versuch von Staaten, ihre militärischen und wirtschaftlichen Kräfte zu bündeln, um einen gemeinsamen Gegner abzuschrecken oder zu bekämpfen?",
        "Allianz",
        ["Koalition",
         "Bündnis",
         "Allianz",
         "Sicherheitspakt"],
        "Eine Allianz ist eine strategische Partnerschaft zwischen Staaten, die ihre Kräfte bündeln, um gemeinsame Ziele zu verfolgen oder einen gemeinsamen Gegner abzuschrecken."
    ),
    (
        "Welche Theorie besagt, dass internationale Beziehungen durch das Streben nach absolutem Gewinn für alle Akteure bestimmt sind?",
        "Konstruktivismus",
        ["Liberalismus",
         "Realismus",
         "Konstruktivismus",
         "Neorealismus"],
        "Der Konstruktivismus betont, dass internationale Beziehungen durch soziale Konstruktionen, Identitäten und Normen bestimmt sind und dass Akteure nicht nur nach relativem Gewinn streben, sondern auch soziale und ideologische Ziele verfolgen."
    ),
    (
        "Welches Abkommen von 1991 reduzierte die Anzahl der strategischen Nuklearwaffen zwischen den USA und der Sowjetunion?",
        "START-I",
        ["INF-Vertrag",
         "START-I",
         "ABM-Vertrag",
         "SALT-II"],
        "Der START-I-Vertrag von 1991 war ein Abrüstungsvertrag zwischen den USA und der Sowjetunion, der die Anzahl strategischer Nuklearwaffen reduzierte und zur weiteren Rüstungskontrolle beitrug."
    ),
    (
        "Welcher Begriff beschreibt die systematische Zurückweisung oder die Absicht, sich von einer bestimmten Region oder einem bestimmten Land abzuschotten?",
        "Isolationismus",
        ["Interventionismus",
         "Globalisierung",
         "Isolationismus",
         "Multilateralismus"],
        "Isolationismus bezeichnet die Politik oder Strategie, sich von den internationalen Angelegenheiten abzuschotten und keine oder nur begrenzte Beziehungen zu anderen Ländern aufrechtzuerhalten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Konflikt im Nahen Osten begann 1948 und führte zur Gründung des Staates Israel?",
        "Erster Arabisch-Israelischer Krieg",
        ["Sechstagekrieg",
         "Jom-Kippur-Krieg",
         "Erster Arabisch-Israelischer Krieg",
         "Golfkrieg"],
        "Der Erste Arabisch-Israelische Krieg begann 1948 nach der Gründung des Staates Israel und führte zu einem bewaffneten Konflikt zwischen Israel und seinen arabischen Nachbarn."
    ),
    (
        "Welcher Vertrag regelt die Abrüstung von chemischen Waffen weltweit?",
        "CWC",
        ["NPT",
         "CWC",
         "ABM-Vertrag",
         "INF-Vertrag"],
        "Der Chemiewaffenübereinkommen (CWC) regelt die Abrüstung und das Verbot von chemischen Waffen weltweit und zielt darauf ab, deren Herstellung, Einsatz und Verbreitung zu verhindern."
    ),
    (
        "Welcher internationale Konflikt führte zur Gründung des Internationalen Strafgerichtshofs (ICC) zur Verfolgung von Kriegsverbrechen?",
        "Jugoslawien-Konflikt",
        ["Rwanda-Konflikt",
         "Jugoslawien-Konflikt",
         "Golfkrieg",
         "Vietnamkrieg"],
        "Der Jugoslawien-Konflikt der 1990er Jahre führte zur Gründung des Internationalen Strafgerichtshofs (ICC), um schwere Verbrechen wie Kriegsverbrechen und Verbrechen gegen die Menschlichkeit zu verfolgen."
    ),
    (
        "Welches Prinzip besagt, dass alle Staaten gleich sind und keine von ihnen eine übergeordnete Autorität über andere ausüben darf?",
        "Souveränität",
        ["Neutralität",
         "Souveränität",
         "Interventionismus",
         "Global Governance"],
        "Das Prinzip der Souveränität besagt, dass alle Staaten gleich sind und keiner von ihnen eine übergeordnete Autorität über andere Staaten ausüben darf, was die Grundlage für das Völkerrecht bildet."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Vertrag wurde 1991 unterzeichnet und endete offiziell den Kalten Krieg zwischen den USA und der Sowjetunion?",
        "START-II",
        ["INF-Vertrag",
         "START-I",
         "START-II",
         "ABM-Vertrag"],
        "Der START-II-Vertrag von 1991 war ein Abrüstungsvertrag, der die strategischen Nuklearwaffen beider Supermächte weiter reduzierte und symbolisch das Ende des Kalten Krieges markierte."
    ),
    (
        "Welcher Begriff beschreibt die langfristige Strategie eines Landes zur Beeinflussung der internationalen Politik und Sicherheit?",
        "Außenpolitik",
        ["Innenpolitik",
         "Wirtschaftspolitik",
         "Sicherheitspolitik",
         "Außenpolitik"],
        "Außenpolitik bezeichnet die langfristige Strategie eines Landes, um seine Interessen und Ziele in der internationalen Politik und Sicherheit zu verfolgen und Einfluss auf andere Länder zu nehmen."
    ),
    
        (
        "Welches Prinzip besagt, dass Staaten ihre außenpolitischen Interessen durch Machtprojektion und Militärstrategien verfolgen?",
        "Realismus",
        ["Liberalismus",
         "Konstruktivismus",
         "Marxismus",
         "Realismus"],
        "Der Realismus betont, dass Staaten ihre außenpolitischen Interessen durch Machtprojektion und militärische Mittel verfolgen, um ihre Sicherheit und ihren Einfluss zu sichern."
    ),
    (
        "Welcher internationale Vertrag von 1972 beschränkte die Zahl der Interkontinentalraketen und der strategischen Offensivwaffen?",
        "SALT I",
        ["SALT II",
         "START I",
         "INF-Vertrag",
         "SALT I"],
        "Der SALT I-Vertrag (Strategic Arms Limitation Talks) von 1972 war ein Abkommen zwischen den USA und der Sowjetunion, das die Anzahl der Interkontinentalraketen und strategischen Offensivwaffen begrenzte."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Konzept bezeichnet die Zusammenarbeit zwischen Staaten, um gemeinsame Herausforderungen durch internationale Abkommen und Institutionen zu bewältigen?",
        "Multilateralismus",
        ["Unilateralismus",
         "Bilaterale Kooperation",
         "Multilateralismus",
         "Isolationismus"],
        "Multilateralismus beschreibt die Zusammenarbeit zwischen mehreren Staaten durch internationale Abkommen und Institutionen, um gemeinsame Herausforderungen und globale Probleme zu bewältigen."
    ),
    (
        "Welches Abkommen von 1997 zielte darauf ab, die Treibhausgasemissionen weltweit zu reduzieren?",
        "Kyoto-Protokoll",
        ["Pariser Abkommen",
         "Kyoto-Protokoll",
         "Wiener Übereinkommen",
         "Montreal-Protokoll"],
        "Das Kyoto-Protokoll von 1997 war ein internationaler Vertrag, der von vielen Ländern unterzeichnet wurde, um die Treibhausgasemissionen zu reduzieren und den Klimawandel zu bekämpfen."
    ),
    (
        "Welche internationale Organisation ist verantwortlich für die Schlichtung von Handelsstreitigkeiten und die Überwachung der Handelsregeln?",
        "WTO",
        ["IMF",
         "Weltbank",
         "UNCTAD",
         "WTO"],
        "Die Welthandelsorganisation (WTO) ist zuständig für die Schlichtung von Handelsstreitigkeiten zwischen Mitgliedsstaaten und die Überwachung der Handelsregeln und -abkommen."
    ),
    (
        "Welches Prinzip beschreibt die rechtliche Grundlage für die militärische Intervention, um Menschenrechtsverletzungen zu verhindern?",
        "Responsibility to Protect (R2P)",
        ["Kollektive Sicherheit",
         "Selbstverteidigung",
         "Responsibility to Protect (R2P)",
         "Humanitäre Intervention"],
        "Das Prinzip der Responsibility to Protect (R2P) besagt, dass die internationale Gemeinschaft das Recht und die Pflicht hat, bei schweren Menschenrechtsverletzungen durch militärische Interventionen zu schützen."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Konzept beschreibt die Weigerung eines Staates, militärische Macht einzusetzen und stattdessen auf wirtschaftliche oder diplomatische Mittel zu setzen?",
        "Weichmacht",
        ["Harte Macht",
         "Strategische Zurückhaltung",
         "Weichmacht",
         "Isolationismus"],
        "Weichmacht bezieht sich auf die Fähigkeit eines Staates, seine Interessen durch kulturellen, diplomatischen oder wirtschaftlichen Einfluss zu fördern, anstatt durch militärische Macht."
    ),
    (
        "Welcher Vertrag von 1968 zielt darauf ab, die Verbreitung von Kernwaffen zu verhindern und die Zusammenarbeit bei der friedlichen Nutzung von Kernenergie zu fördern?",
        "Atomwaffensperrvertrag (NPT)",
        ["INF-Vertrag",
         "START-I",
         "Atomwaffensperrvertrag (NPT)",
         "ABM-Vertrag"],
        "Der Atomwaffensperrvertrag (NPT) von 1968 hat das Ziel, die Verbreitung von Kernwaffen zu verhindern, die Abrüstung voranzutreiben und die friedliche Nutzung von Kernenergie zu fördern."
    ),
    (
        "Welches Konzept bezeichnet die Art und Weise, wie Staaten ihre Macht durch Allianzen und diplomatische Beziehungen ausbalancieren, um Konflikte zu vermeiden?",
        "Balance of Power",
        ["Koalition",
         "Sicherheitsdilemma",
         "Balance of Power",
         "Hegemonie"],
        "Das Konzept der Balance of Power beschreibt die Strategie, durch Allianzen und diplomatische Beziehungen eine Machtbalance zu schaffen, um die Hegemonie eines einzelnen Staates zu verhindern und Konflikte zu vermeiden."
    ),
    (
        "Welcher internationale Gerichtshof wurde 2002 gegründet, um Völkermord, Kriegsverbrechen und Verbrechen gegen die Menschlichkeit zu verfolgen?",
        "Internationaler Strafgerichtshof (ICC)",
        ["Internationaler Gerichtshof",
         "Europäischer Gerichtshof für Menschenrechte",
         "Internationaler Strafgerichtshof (ICC)",
         "Internationaler Strafgerichtshof für das ehemalige Jugoslawien"],
        "Der Internationale Strafgerichtshof (ICC), gegründet 2002, verfolgt Völkermord, Kriegsverbrechen und Verbrechen gegen die Menschlichkeit und ist ein wichtiger Mechanismus für internationale Strafverfolgung."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Prinzip betont das Recht eines Staates, seine eigenen Angelegenheiten ohne Einmischung von außen zu regeln?",
        "Souveränität",
        ["Interventionismus",
         "Global Governance",
         "Souveränität",
         "Kosmopolitismus"],
        "Das Prinzip der Souveränität besagt, dass ein Staat das Recht hat, seine internen Angelegenheiten unabhängig zu regeln, ohne dass externe Akteure eingreifen dürfen."
    ),
    (
        "Welche Theorie der internationalen Beziehungen betont, dass internationale Zusammenarbeit durch gegenseitige Interessen und wirtschaftliche Vorteile gefördert wird?",
        "Liberalismus",
        ["Konstruktivismus",
         "Realismus",
         "Liberalismus",
         "Marxismus"],
        "Der Liberalismus betont, dass internationale Zusammenarbeit und Frieden durch gegenseitige Interessen, wirtschaftliche Vorteile und Institutionen gefördert werden können."
    ),
    (
        "Welcher Vertrag von 1987 beendete die Produktion und den Einsatz von Mittelstreckenraketen in Europa?",
        "INF-Vertrag",
        ["SALT I",
         "START I",
         "ABM-Vertrag",
         "INF-Vertrag"],
        "Der INF-Vertrag (Intermediate-Range Nuclear Forces Treaty) von 1987 führte zur Abrüstung und zum Verbot von Mittelstreckenraketen in Europa und trug zur Entspannung des Kalten Krieges bei."
    ),
    (
        "Welches Konzept beschreibt die Bemühungen von Staaten, durch internationale Abkommen und Kooperation globale Probleme zu lösen?",
        "Globale Governance",
        ["Multilateralismus",
         "Globale Governance",
         "Unilateralismus",
         "Kollektive Sicherheit"],
        "Globale Governance bezieht sich auf die Art und Weise, wie internationale Organisationen, Staaten und Institutionen zusammenarbeiten, um globale Probleme durch gemeinsame Abkommen und Kooperation zu lösen."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Begriff bezeichnet die geopolitische Strategie, durch Einflussnahme und Kontrolle über wichtige strategische Regionen Macht zu sichern?",
        "Geopolitik",
        ["Strategische Interessen",
         "Hegemonie",
         "Geopolitik",
         "Imperialismus"],
        "Geopolitik bezeichnet die Strategie, durch Einflussnahme und Kontrolle über strategisch wichtige Regionen oder Ressourcen Macht und Einfluss zu sichern."
    ),
    (
        "Welches Prinzip besagt, dass internationale Beziehungen durch Machtverhältnisse und Machtpolitik bestimmt werden?",
        "Realismus",
        ["Liberalismus",
         "Neorealismus",
         "Realismus",
         "Konstruktivismus"],
        "Der Realismus in den internationalen Beziehungen besagt, dass Machtverhältnisse und Machtpolitik die Haupttreiber internationaler Interaktionen und Konflikte sind."
    ),
    (
        "Welche internationale Organisation ist für die Förderung von Bildung, Wissenschaft und Kultur zuständig?",
        "UNESCO",
        ["WHO",
         "UNICEF",
         "UNESCO",
         "UNHCR"],
        "Die UNESCO (United Nations Educational, Scientific and Cultural Organization) fördert Bildung, Wissenschaft und Kultur auf internationaler Ebene, um den Frieden und die Zusammenarbeit zwischen Nationen zu stärken."
    ),
    (
        "Welches Abkommen von 1992 legte den Grundstein für den freien Handel innerhalb der NAFTA-Zone?",
        "NAFTA",
        ["CAFTA",
         "NAFTA",
         "EU-Vertrag",
         "Mercosur"],
        "Das Nordamerikanische Freihandelsabkommen (NAFTA) von 1992 schuf eine Freihandelszone zwischen den USA, Kanada und Mexiko, um Handelshemmnisse zu reduzieren und den wirtschaftlichen Austausch zu fördern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Prinzip beschreibt die Verantwortung der internationalen Gemeinschaft, bei Verstößen gegen internationale Normen zu intervenieren?",
        "Humanitäre Intervention",
        ["Souveränität",
         "Neutralität",
         "Humanitäre Intervention",
         "Kollektive Sicherheit"],
        "Humanitäre Intervention beschreibt die Verantwortung der internationalen Gemeinschaft, in Situationen schwerer Menschenrechtsverletzungen oder humanitärer Krisen durch militärische oder diplomatische Mittel einzugreifen."
    ),
    (
        "Welches Konzept beschreibt die Stabilität eines internationalen Systems durch das Gleichgewicht der Macht zwischen großen Staaten?",
        "Balance of Power",
        ["Hegemonie",
         "Kollektive Sicherheit",
         "Balance of Power",
         "Imperialismus"],
        "Das Konzept der Balance of Power beschreibt die Stabilität eines internationalen Systems, die durch ein Gleichgewicht der Macht zwischen großen Staaten und Allianzen erreicht wird."
    ),
    (
        "Welches internationale Abkommen von 1944 regelt die Vorschriften für den internationalen Handel mit Waren und Dienstleistungen?",
        "GATT",
        ["WTO",
         "IMF",
         "Weltbank",
         "GATT"],
        "Das Allgemeine Zoll- und Handelsabkommen (GATT) von 1944 regelte die Vorschriften für internationalen Handel und wurde später durch die WTO ersetzt, die das Handelssystem weiter reguliert."
    ),
    (
        "Welcher Begriff bezeichnet die Theorie, dass wirtschaftliche Faktoren und Klassenkämpfe die Haupttriebkräfte in internationalen Beziehungen sind?",
        "Marxismus",
        ["Realismus",
         "Liberalismus",
         "Konstruktivismus",
         "Marxismus"],
        "Der Marxismus betont, dass wirtschaftliche Faktoren, Klassenkämpfe und die Kontrolle über Produktionsmittel die Haupttriebkräfte in internationalen Beziehungen sind."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Konzept beschreibt die Strategie eines Landes, sich durch wirtschaftliche Zusammenarbeit und Integration mit anderen Ländern zu stärken?",
        "Regionalismus",
        ["Isolationismus",
         "Globalismus",
         "Regionalismus",
         "Unilateralismus"],
        "Regionalismus bezeichnet die Strategie eines Landes, durch wirtschaftliche und politische Zusammenarbeit innerhalb einer Region seine Position zu stärken und regionale Integration zu fördern."
    ),
    (
        "Welcher Konflikt wird als der erste militärische Einsatz der NATO nach dem Kalten Krieg angesehen?",
        "Kosovo-Krieg",
        ["Golfkrieg",
         "Bosnienkrieg",
         "Kosovo-Krieg",
         "Afghanistan-Krieg"],
        "Der Kosovo-Krieg von 1999 war der erste militärische Einsatz der NATO nach dem Kalten Krieg und diente dem Schutz der Zivilbevölkerung und der Stabilisierung der Region."
    ),
    (
        "Welches Prinzip beschreibt die Notwendigkeit von Staaten, ihre Verteidigungspolitik auf der Grundlage gegenseitiger Sicherheiten zu gestalten?",
        "Sicherheitsdilemma",
        ["Kollektive Sicherheit",
         "Sicherheitsdilemma",
         "Allianzpolitik",
         "Neutralität"],
        "Das Sicherheitsdilemma beschreibt die Situation, in der Staaten ihre Verteidigungspolitik anpassen, um ihre eigene Sicherheit zu gewährleisten, was jedoch von anderen Staaten als Bedrohung angesehen werden kann, was wiederum zu einer Eskalation führen kann."
    ),
        (
        "Welches Abkommen von 2002 ermöglichte es der EU, eine gemeinsame Außen- und Sicherheitspolitik zu entwickeln?",
        "Vertrag von Nizza",
        ["Vertrag von Amsterdam",
         "Vertrag von Lissabon",
         "Vertrag von Nizza",
         "Vertrag von Maastricht"],
        "Der Vertrag von Nizza von 2002 ermöglichte der EU, ihre gemeinsame Außen- und Sicherheitspolitik zu stärken und die Entscheidungsfindung innerhalb der Union zu reformieren."
    ),
        ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Begriff beschreibt das Prinzip, dass ein einzelner Staat seine Interessen durch multilaterale Vereinbarungen und Zusammenarbeit verfolgt, um globale Probleme zu lösen?",
        "Multilateralismus",
        ["Unilateralismus",
         "Multilateralismus",
         "Isolationismus",
         "Bilaterale Diplomatie"],
        "Multilateralismus bezeichnet die Praxis, internationale Probleme durch Zusammenarbeit und Vereinbarungen zwischen mehreren Staaten zu lösen, um gemeinsame Ziele zu erreichen."
    ),
    (
        "Welches Konzept bezieht sich auf den Einfluss eines Staates auf die globale Politik durch wirtschaftliche Macht und Marktgröße?",
        "Wirtschaftliche Macht",
        ["Kulturelle Macht",
         "Militärische Macht",
         "Wirtschaftliche Macht",
         "Politische Macht"],
        "Wirtschaftliche Macht bezieht sich auf die Fähigkeit eines Staates, globalen Einfluss durch seine wirtschaftliche Stärke, Marktgröße und Handelsbeziehungen auszuüben."
    ),
    (
        "Welcher Konflikt zwischen den USA und der Sowjetunion wird als ein klassisches Beispiel für einen geopolitischen Machtkampf angesehen?",
        "Kalter Krieg",
        ["Koreakrieg",
         "Vietnamkrieg",
         "Kalter Krieg",
         "Golfkrieg"],
        "Der Kalte Krieg war ein geopolitischer Machtkampf zwischen den USA und der Sowjetunion, der nach dem Zweiten Weltkrieg begann und bis zum Zusammenbruch der Sowjetunion andauerte."
    ),
    (
        "Welcher Begriff beschreibt das Streben eines Staates, durch den Aufbau von Bündnissen und Kooperationen seine Sicherheit und seinen Einfluss zu maximieren?",
        "Allianzenbildung",
        ["Neutralität",
         "Balkanisierung",
         "Allianzenbildung",
         "Isolationismus"],
        "Allianzenbildung bezieht sich auf die Strategie eines Staates, durch die Bildung von Bündnissen und internationalen Kooperationen seine Sicherheit und seinen geopolitischen Einfluss zu erweitern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Prinzip beschreibt die politische Strategie, durch wirtschaftliche Zusammenarbeit und Handelspakte die politische Stabilität zu fördern?",
        "Wirtschaftliche Diplomatie",
        ["Sicherheitsdilemma",
         "Wirtschaftliche Diplomatie",
         "Realismus",
         "Isolationismus"],
        "Wirtschaftliche Diplomatie beschreibt die Strategie, durch Handelsbeziehungen und wirtschaftliche Zusammenarbeit die politische Stabilität zu fördern und internationale Konflikte zu reduzieren."
    ),
    (
        "Welche Theorie der internationalen Beziehungen betont die Bedeutung von Normen und Ideen in der Gestaltung internationaler Politik?",
        "Konstruktivismus",
        ["Liberalismus",
         "Konstruktivismus",
         "Realismus",
         "Marxismus"],
        "Der Konstruktivismus betont die Rolle von Normen, Ideen und sozialen Konstruktionen in der Gestaltung der internationalen Politik und erklärt, wie diese Faktoren das Verhalten von Staaten beeinflussen."
    ),
    (
        "Welches Konzept beschreibt die Bemühungen von Staaten, durch Diplomatie und Verhandlungen internationale Konflikte zu lösen, anstatt durch militärische Mittel?",
        "Diplomatie",
        ["Konfrontation",
         "Diplomatie",
         "Militärische Intervention",
         "Isolationismus"],
        "Diplomatie bezeichnet die Praxis, internationale Konflikte und Differenzen durch Verhandlungen und diplomatische Mittel zu lösen, um friedliche und nachhaltige Lösungen zu finden."
    ),
    (
        "Welcher Vertrag von 1944 legte die Grundlage für die Schaffung des Internationalen Währungsfonds (IWF) und der Weltbank?",
        "Bretton-Woods-Abkommen",
        ["Vertrag von Versailles",
         "Bretton-Woods-Abkommen",
         "GATT",
         "Washingtoner Vertrag"],
        "Das Bretton-Woods-Abkommen von 1944 legte die Grundlagen für die Schaffung des Internationalen Währungsfonds (IWF) und der Weltbank zur Förderung der internationalen wirtschaftlichen Zusammenarbeit und Stabilität."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Begriff bezeichnet die Strategie eines Staates, seine außenpolitischen Ziele durch direkte oder indirekte militärische Macht zu erreichen?",
        "Harte Macht",
        ["Weiche Macht",
         "Harte Macht",
         "Kulturelle Macht",
         "Wirtschaftliche Macht"],
        "Harte Macht bezeichnet die Strategie, durch militärische oder wirtschaftliche Mittel direkt Einfluss zu nehmen und außenpolitische Ziele zu verfolgen."
    ),
    (
        "Welches Konzept beschreibt die internationale Zusammenarbeit zur Förderung von Menschenrechten und demokratischen Prinzipien?",
        "Normative Macht",
        ["Kulturelle Macht",
         "Normative Macht",
         "Wirtschaftliche Macht",
         "Harte Macht"],
        "Normative Macht bezieht sich auf die Fähigkeit eines Staates oder einer internationalen Organisation, internationale Standards für Menschenrechte und demokratische Prinzipien zu fördern und durchzusetzen."
    ),
    (
        "Welche internationale Organisation koordiniert humanitäre Hilfe und Entwicklungszusammenarbeit auf globaler Ebene?",
        "UNDP",
        ["UNICEF",
         "UNHCR",
         "UNDP",
         "WHO"],
        "Das Entwicklungsprogramm der Vereinten Nationen (UNDP) koordiniert humanitäre Hilfe, Entwicklungszusammenarbeit und fördert die globale Entwicklungsagenda."
    ),
    (
        "Welcher Konflikt führte zur Gründung des Staates Israel im Jahr 1948?",
        "Arabisch-Israelischer Krieg",
        ["Suez-Krise",
         "Sechstagekrieg",
         "Golfkrieg",
         "Arabisch-Israelischer Krieg"],
        "Der Arabisch-Israelische Krieg von 1948 führte zur Gründung des Staates Israel und war der erste in einer Reihe von Konflikten zwischen Israel und seinen arabischen Nachbarn."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Prinzip beschreibt die Idee, dass Staaten internationale Vereinbarungen und Normen einhalten, um Vertrauen und Stabilität zu fördern?",
        "Regelbasierte Ordnung",
        ["Realismus",
         "Regelbasierte Ordnung",
         "Unilateralismus",
         "Bilateralismus"],
        "Die regelbasierte Ordnung beschreibt die Idee, dass Staaten internationale Vereinbarungen und Normen respektieren, um Vertrauen und Stabilität in den internationalen Beziehungen zu fördern."
    ),
    (
        "Welche Theorie sieht die internationale Politik als Ergebnis von wirtschaftlichen Interessen und Klassenkonflikten?",
        "Marxismus",
        ["Liberalismus",
         "Konstruktivismus",
         "Marxismus",
         "Realismus"],
        "Der Marxismus sieht die internationale Politik als Ergebnis von wirtschaftlichen Interessen, Klassenkonflikten und dem Streben nach ökonomischer Macht und Einfluss."
    ),
    (
        "Welches internationale Dokument von 1948 legt die grundlegenden Menschenrechte fest, die von allen Nationen respektiert werden sollten?",
        "Allgemeine Erklärung der Menschenrechte",
        ["Völkerbund-Charta",
         "Allgemeine Erklärung der Menschenrechte",
         "UN-Charta",
         "Europäische Menschenrechtskonvention"],
        "Die Allgemeine Erklärung der Menschenrechte von 1948 legt die universellen Menschenrechte fest, die von allen Nationen respektiert werden sollen und bildet die Grundlage für viele internationale Menschenrechtsabkommen."
    ),
    (
        "Welcher Begriff beschreibt das internationale Bestreben, durch Abrüstung und Rüstungskontrolle den Frieden zu sichern und das Risiko von Konflikten zu reduzieren?",
        "Rüstungskontrolle",
        ["Waffenrassismus",
         "Rüstungskontrolle",
         "Militärische Überlegenheit",
         "Abrüstung"],
        "Rüstungskontrolle bezeichnet internationale Bemühungen, durch Vereinbarungen und Verträge die Rüstungen der Staaten zu überwachen und zu reduzieren, um den Frieden zu sichern und das Risiko von Konflikten zu minimieren."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Prinzip beschreibt die Strategie eines Staates, seine Außenpolitik durch wirtschaftliche Anreize und Unterstützung zu gestalten?",
        "Wirtschaftliche Diplomatie",
        ["Kulturelle Diplomatie",
         "Wirtschaftliche Diplomatie",
         "Harte Macht",
         "Militärische Macht"],
        "Wirtschaftliche Diplomatie beschreibt die Praxis, internationale Beziehungen durch wirtschaftliche Anreize, Unterstützung und Handelsabkommen zu gestalten, um außenpolitische Ziele zu erreichen."
    ),
    (
        "Welches Konzept beschreibt die Art und Weise, wie Staaten ihre Außenpolitik auf der Grundlage ihrer eigenen nationalen Interessen und Werte gestalten?",
        "Nationale Interessen",
        ["Globale Governance",
         "Nationale Interessen",
         "Internationale Normen",
         "Multilateralismus"],
        "Nationale Interessen beziehen sich auf die spezifischen Ziele und Werte eines Staates, die seine Außenpolitik bestimmen und seine strategischen Entscheidungen beeinflussen."
    ),
    (
        "Welcher internationale Konflikt führte zur Schaffung der Europäischen Union als wirtschaftliche und politische Union?",
        "Zweiter Weltkrieg",
        ["Erster Weltkrieg",
         "Zweiter Weltkrieg",
         "Kalter Krieg",
         "Koreakrieg"],
        "Der Zweite Weltkrieg führte zur Schaffung der Europäischen Union, da die europäischen Nationen eine wirtschaftliche und politische Union bildeten, um zukünftige Konflikte zu verhindern und den Frieden zu sichern."
    ),
    (
        "Welches Abkommen von 2015 zielt darauf ab, den globalen Klimawandel zu bekämpfen und die Erderwärmung zu begrenzen?",
        "Pariser Abkommen",
        ["Kyoto-Protokoll",
         "Montreal-Protokoll",
         "Pariser Abkommen",
         "Rio-Erklärung"],
        "Das Pariser Abkommen von 2015 zielt darauf ab, den globalen Klimawandel zu bekämpfen, die Erderwärmung zu begrenzen und die internationalen Anstrengungen zur Reduktion der Treibhausgasemissionen zu fördern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Begriff beschreibt die Unterstützung eines Staates für den Widerstand oder die Unabhängigkeit eines anderen Staates, oft als Teil einer größeren geopolitischen Strategie?",
        "Stellvertreterkrieg",
        ["Intervention",
         "Stellvertreterkrieg",
         "Neutralität",
         "Diplomatie"],
        "Ein Stellvertreterkrieg bezeichnet den indirekten militärischen oder politischen Konflikt, bei dem ein Staat einen anderen Staat oder eine Gruppe unterstützt, um seine eigenen geopolitischen Ziele zu verfolgen, ohne direkt einzugreifen."
    )

]   

     
class PopupView(ModalView):
    def __init__(self, title, content, **kw):
        super(PopupView, self).__init__(**kw)
        self.size_hint = (0.8, 0.3)
        self.pos_hint = {"center_x": 0.5, "center_y": 0.5}

        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)
        layout.add_widget(Label(text=title, halign="center"))
        layout.add_widget(content)

        self.add_widget(layout)
        
class PolBeziehungen(Screen):
    def __init__(self, frage, antwort, antwortmöglichkeiten, info_text, **kw):
        super(PolBeziehungen, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Internationale Beziehungen"
        self.fragen = frageninter
        
        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
                
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))


            conn.commit()
            conn.close()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()
        
    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()


                
                
    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

        
fragenideo = [
    
    ("Welche politische Ideologie betont die Bedeutung individueller Freiheit und begrenzter staatlicher Macht?",
     "Liberalismus",
     ["Konservatismus",
      "Liberalismus",
      "Anarchismus",
      "Sozialismus"],
     "Diese Ideologie legt großen Wert auf individuelle Rechte und Freiheiten sowie auf die Begrenzung der Macht des Staates, um persönliche Autonomie und wirtschaftliche Freiheit zu gewährleisten. Sie strebt nach einem freien Markt und minimaler staatlicher Intervention in die Wirtschaft. Diese Ideologie wird als Liberalismus bezeichnet."),
    
    ("Welche Ideologie setzt sich für die kollektive Eigentümerschaft und die Abschaffung von Klassenunterschieden ein?",
     "Sozialismus",
     ["Nationalismus",
      "Sozialismus",
      "Kapitalismus",
      "Liberalismus"],
     "Diese Ideologie zielt darauf ab, wirtschaftliche Gleichheit zu erreichen, indem Produktionsmittel kollektiv oder staatlich kontrolliert werden. Sie strebt nach einer Gesellschaft ohne Klassenunterschiede und privatem Eigentum an den Produktionsmitteln. Diese Ideologie wird als Sozialismus bezeichnet."),
    
    ("Welche politische Bewegung betont die Bewahrung traditioneller Werte und Institutionen?",
     "Konservatismus",
     ["Konservatismus",
      "Liberalismus",
      "Anarchismus",
      "Anarchismus"],
     "Diese Bewegung setzt sich für die Erhaltung traditioneller Werte, sozialer Ordnung und stabiler Institutionen ein. Sie ist skeptisch gegenüber schnellen sozialen Veränderungen und betont die Bedeutung von kulturellem und historischem Erbe. Diese Bewegung wird als Konservatismus bezeichnet."),    
    
    ("Welche Ideologie strebt eine klassenlose, stateless Gesellschaft an?",
     "Anarchismus",
     ["Konservatismus",
      "Sozialismus",
      "Liberalismus",
      "Anarchismus"],
     "Diese Ideologie zielt auf die Errichtung einer Gesellschaft ab, in der es keine Klassen oder staatlichen Strukturen gibt. Die Produktionsmittel sollen gemeinschaftlich kontrolliert und Ressourcen gleichmäßig verteilt werden. Diese Ideologie wird als Anarchismus bezeichnet."),
    
    ("Welche politische Theorie betont die Notwendigkeit eines starken, zentralisierten Staates?",
     "Autoritarismus",
     ["Sozialismus",
      "Liberalismus",
      "Anarchismus",
      "Autoritarismus"],
     "Diese Theorie glaubt, dass eine starke zentrale Regierung notwendig ist, um die soziale Ordnung und Stabilität zu wahren. Sie betont die Bedeutung der Machtkonzentration und der Kontrolle durch den Staat, oft auf Kosten individueller Freiheiten. Diese Theorie wird als Autoritarismus bezeichnet."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Ideologie betont die nationale Einheit und Interessen über die von Individuen oder anderen Gruppen?",
     "Nationalismus",
     ["Sozialismus",
      "Nationalismus",
      "Anarchismus",
      "Liberalismus"],
     "Diese Ideologie setzt den Fokus auf die Förderung der nationalen Identität und die Interessen der Nation als Ganzes. Sie betont die Bedeutung von Patriotismus und nationaler Souveränität und strebt danach, die Interessen des Landes über die von Einzelpersonen oder anderen Gruppen zu stellen. Diese Ideologie wird als Nationalismus bezeichnet."),
    
    ("Welche politische Ideologie fördert eine Wirtschaftsordnung, in der Privatbesitz und freie Märkte dominieren?",
     "Kapitalismus",
     ["Anarchismus",
      "Kommunismus",
      "Kapitalismus",
      "Sozialismus"],
     "Diese Ideologie setzt auf ein Wirtschaftssystem, in dem die Produktion und der Handel in privatem Besitz sind und durch freie Märkte geregelt werden. Der Staat greift nur minimal ein, und der Wettbewerb ist ein zentrales Element. Diese Ideologie wird als Kapitalismus bezeichnet."),
    
    ("Welche Ideologie sieht die Abschaffung von Hierarchien und die Förderung von Selbstverwaltung vor?",
     "Anarchismus",
     ["Anarchismus",
      "Konservatismus",
      "Liberalismus",
      "Sozialismus"],
     "Diese Ideologie strebt danach, alle Formen von Zwang und Herrschaft abzuschaffen und eine Gesellschaft zu schaffen, in der Menschen sich freiwillig und gleichberechtigt zusammenschließen. Sie betont die Bedeutung der direkten Demokratie und der Selbstverwaltung. Diese Ideologie wird als Anarchismus bezeichnet."),
    
    ("Welche politische Philosophie unterstützt die schrittweise Veränderung bestehender Institutionen?",
     "Konservatismus",
     ["Liberalismus",
      "Konservatismus",
      "Anarchismus",
      "Radikalismus"],
     "Diese Philosophie zielt darauf ab, bestehende gesellschaftliche Strukturen und Institutionen zu bewahren und Veränderungen nur schrittweise und innerhalb dieser Rahmenwerke vorzunehmen. Sie ist gegen radikale Umwälzungen und betont Stabilität und Kontinuität. Diese Philosophie wird als Konservatismus bezeichnet."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Ideologie befürwortet die totale staatliche Kontrolle über alle Aspekte des wirtschaftlichen und sozialen Lebens?",
     "Totalitarismus",
     ["Konservatismus",
      "Sozialismus",
      "Liberalismus",
      "Totalitarismus"],
     "Diese Ideologie strebt eine Gesellschaft an, in der der Staat vollständige Kontrolle über alle Bereiche des Lebens hat, einschließlich Wirtschaft, Kultur und individuelle Rechte. Sie zielt darauf ab, durch umfassende Überwachung und Regulierung eine einheitliche und kontrollierte Gesellschaft zu schaffen. Diese Ideologie wird als Totalitarismus bezeichnet."),
    
    ("Welche politische Theorie unterstützt die Idee, dass die Regierung die Verantwortung hat, soziale Ungerechtigkeiten zu korrigieren?",
     "Sozialismus",
     ["Anarchismus",
      "Sozialismus",
      "Liberalismus",
      "Konservatismus"],
     "Diese Theorie argumentiert, dass es die Aufgabe der Regierung ist, soziale Ungleichheiten zu mindern und die Wohlfahrt der Bürger durch Umverteilung von Ressourcen und soziale Programme zu fördern. Sie setzt sich für eine aktive Rolle des Staates im Kampf gegen Armut und Diskriminierung ein. Diese Theorie wird als Sozialismus bezeichnet."),
    
    ("Welche Ideologie betont die Bedeutung individueller Freiheiten und minimaler staatlicher Eingriffe in das Privatleben?",#
     "Liberalismus",
     ["Liberalismus",
      "Nationalismus",
      "Totalitarismus",
      "Sozialismus"],
     "Diese Ideologie legt großen Wert auf die individuellen Freiheiten und betont die Notwendigkeit, staatliche Eingriffe in das Privatleben der Bürger zu minimieren. Sie unterstützt den Schutz persönlicher Rechte und Freiheiten vor staatlicher Übermacht. Diese Ideologie wird als Liberalismus bezeichnet."),
    
    ("Welche politische Bewegung setzt sich für die Stärkung der nationalen Identität und Souveränität ein?",
     "Nationalismus",
     ["Sozialismus",
      "Internationalismus",
      "Liberalismus",
      "Nationalismus"],
     "Diese Bewegung betont die Bedeutung der nationalen Identität und Souveränität und setzt sich oft kritisch mit internationaler Zusammenarbeit und supranationalen Institutionen auseinander. Sie fördert eine Politik, die nationale Interessen über internationale Verpflichtungen stellt. Diese Bewegung wird als Nationalismus bezeichnet."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Ideologie fordert die Abschaffung des Privateigentums an Produktionsmitteln zugunsten einer klassenlosen Gesellschaft?",
     "Kommunismus",
     ["Liberalismus",
      "Sozialismus",
      "Kommunismus",
      "Kapitalismus"],
     "Diese Ideologie strebt danach, das Privateigentum an Produktionsmitteln abzuschaffen, um eine klassenlose Gesellschaft zu schaffen, in der alle Produktionsmittel gemeinschaftlich kontrolliert werden. Sie zielt auf die vollständige Gleichheit und die Beseitigung aller Klassenunterschiede. Diese Ideologie wird als Kommunismus bezeichnet."),
    
    ("Welche politische Theorie sieht die Machtkonzentration in einer starken Führungspersönlichkeit als notwendig zur Erreichung nationaler Ziele?",
     "Faschismus",
     ["Faschismus",
      "Sozialismus",
      "Konservatismus",
      "Anarchismus"],
     "Diese Theorie argumentiert, dass eine starke, zentrale Führung notwendig ist, um nationale Ziele zu erreichen und die Einheit und Stärke des Staates zu gewährleisten. Sie betont die Rolle eines charismatischen Führers und die Notwendigkeit der Machtkonzentration. Diese Theorie wird als Faschismus bezeichnet."),
    
    ("Welche Ideologie setzt auf die Gleichberechtigung aller Menschen und die Beseitigung sozialer Klassen?",
     "Sozialismus",
     ["Kapitalismus",
      "Konservatismus",
      "Liberalismus",
      "Sozialismus"],
     "Diese Ideologie strebt danach, soziale Klassenunterschiede zu beseitigen und Gleichberechtigung für alle Menschen zu erreichen, indem die Produktionsmittel gemeinschaftlich kontrolliert werden. Sie betont die Bedeutung der kollektiven Verantwortung und der sozialen Gerechtigkeit. Diese Ideologie wird als Sozialismus bezeichnet."),
    
    ("Welche politische Bewegung lehnt zentrale staatliche Autorität ab und setzt auf direkte Demokratie und Selbstverwaltung?",
     "Anarchismus",
     ["Anarchismus",
      "Konservatismus",
      "Liberalismus",
      "Sozialismus"],
     "Diese Bewegung setzt sich für die Abschaffung zentraler staatlicher Autorität ein und betont die Bedeutung direkter Demokratie und Selbstverwaltung. Sie strebt danach, eine Gesellschaft ohne Hierarchien und Zwang zu schaffen, in der Menschen sich freiwillig zusammenschließen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
        (
        "Welche politische Ideologie betont die individuelle Freiheit und eine minimale staatliche Intervention?",
        "Liberalismus",
        ["Liberalismus",
         "Konservatismus",
         "Sozialismus",
         "Faschismus"],
        "Der Liberalismus betont die individuelle Freiheit und eine minimale staatliche Intervention, um persönliche Autonomie und wirtschaftliche Freiheit zu gewährleisten."
    ),
    (
        "Welche politische Theorie strebt eine klassenlose Gesellschaft ohne privateigentum an Produktionsmitteln an?",
        "Kommunismus",
        ["Sozialismus",
         "Kapitalismus",
         "Kommunismus",
         "Anarchismus"],
        "Der Kommunismus strebt eine klassenlose Gesellschaft an, in der alle Produktionsmittel gemeinschaftlich kontrolliert werden und Privateigentum abgeschafft ist."
    ),
    (
        "Welche Ideologie betont die Bedeutung der Erhaltung traditioneller Werte und Institutionen?",
        "Konservatismus",
        ["Liberalismus",
         "Konservatismus",
         "Anarchismus",
         "Sozialismus"],
        "Der Konservatismus betont die Bedeutung der Erhaltung traditioneller Werte und Institutionen und ist skeptisch gegenüber schnellen sozialen Veränderungen."
    ),
    (
        "Welche politische Bewegung setzt sich für eine minimalistische Rolle des Staates und maximale individuelle Freiheiten ein?",
        "Libertarismus",
        ["Anarchismus",
         "Kapitalismus",
         "Libertarismus",
         "Sozialismus"],
        "Der Libertarismus setzt sich für eine minimalistische Rolle des Staates und maximale individuelle Freiheiten ein, besonders im wirtschaftlichen Bereich."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie strebt eine starke zentrale Kontrolle durch den Staat an, um Ordnung und Stabilität zu gewährleisten?",
        "Autoritarismus",
        ["Konservatismus",
         "Liberalismus",
         "Anarchismus",
         "Autoritarismus"],
        "Der Autoritarismus strebt eine starke zentrale Kontrolle durch den Staat an, um Ordnung und Stabilität zu gewährleisten, oft auf Kosten individueller Freiheiten."
    ),
    (
        "Welche politische Theorie setzt sich für die Förderung der nationalen Einheit und Souveränität über internationale Verpflichtungen hinweg ein?",
        "Nationalismus",
        ["Sozialismus",
         "Nationalismus",
         "Kapitalismus",
         "Liberalismus"],
        "Der Nationalismus setzt sich für die Förderung der nationalen Einheit und Souveränität ein und stellt die Interessen des Staates über internationale Verpflichtungen."
    ),
    (
        "Welche Ideologie befürwortet die vollständige Kontrolle der Produktionsmittel durch den Staat oder die Gemeinschaft?",
        "Sozialismus",
        ["Kapitalismus",
         "Faschismus",
         "Sozialismus",
         "Libertarismus"],
        "Der Sozialismus befürwortet die vollständige Kontrolle der Produktionsmittel durch den Staat oder die Gemeinschaft, um wirtschaftliche Ungleichheit zu reduzieren."
    ),
    (
        "Welche politische Theorie argumentiert, dass eine starke Führung erforderlich ist, um nationale Ziele zu erreichen?",
        "Faschismus",
        ["Sozialismus",
         "Faschismus",
         "Konservatismus",
         "Anarchismus"],
        "Der Faschismus argumentiert, dass eine starke Führung erforderlich ist, um nationale Ziele zu erreichen und die Einheit des Staates zu gewährleisten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie betont die Notwendigkeit einer zentralen Planung und Kontrolle zur Förderung sozialer Gerechtigkeit?",
        "Sozialismus",
        ["Kapitalismus",
         "Faschismus",
         "Liberalismus",
         "Sozialismus"],
        "Der Sozialismus betont die Notwendigkeit einer zentralen Planung und Kontrolle zur Förderung sozialer Gerechtigkeit und zur Verringerung von Ungleichheiten."
    ),
    (
        "Welche politische Theorie strebt nach einer dezentralisierten Gesellschaft ohne zentrale staatliche Autorität?",
        "Anarchismus",
        ["Konservatismus",
         "Sozialismus",
         "Anarchismus",
         "Kapitalismus"],
        "Der Anarchismus strebt nach einer dezentralisierten Gesellschaft ohne zentrale staatliche Autorität und betont direkte Demokratie und Selbstverwaltung."
    ),
    (
        "Welche politische Bewegung fordert die Erhaltung traditioneller Werte und Institutionen als Basis für soziale Ordnung?",
        "Konservatismus",
        ["Sozialismus",
         "Konservatismus",
         "Liberalismus",
         "Faschismus"],
        "Der Konservatismus fordert die Erhaltung traditioneller Werte und Institutionen als Basis für soziale Ordnung und ist gegen schnelle Veränderungen."
    ),
    (
        "Welche Ideologie befürwortet eine Gesellschaft, in der private Eigentumsrechte und freier Wettbewerb im Mittelpunkt stehen?",
        "Kapitalismus",
        ["Sozialismus",
         "Kapitalismus",
         "Liberalismus",
         "Nationalismus"],
        "Der Kapitalismus befürwortet eine Gesellschaft, in der private Eigentumsrechte und freier Wettbewerb im Mittelpunkt stehen und der Staat minimal eingreift."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche politische Theorie sieht die Bedeutung einer starken Führung zur Wahrung nationaler Interessen und Stabilität?",
        "Autoritarismus",
        ["Liberalismus",
         "Faschismus",
         "Kapitalismus",
         "Autoritarismus"],
        "Der Autoritarismus sieht die Bedeutung einer starken Führung zur Wahrung nationaler Interessen und Stabilität, oft unter Einschränkung individueller Freiheiten."
    ),
    (
        "Welche Ideologie strebt die Förderung individueller Rechte und Freiheiten mit minimalem staatlichen Eingriff an?",
        "Liberalismus",
        ["Faschismus",
         "Liberalismus",
         "Kapitalismus",
         "Nationalismus"],
        "Der Liberalismus strebt die Förderung individueller Rechte und Freiheiten mit minimalem staatlichen Eingriff an, um persönliche Autonomie zu gewährleisten."
    ),
    (
        "Welche politische Theorie argumentiert für die Notwendigkeit eines starken Staates, um Ordnung und Kontrolle zu gewährleisten?",
        "Autoritarismus",
        ["Liberalismus",
         "Sozialismus",
         "Faschismus",
         "Autoritarismus"],
        "Der Autoritarismus argumentiert für die Notwendigkeit eines starken Staates, um Ordnung und Kontrolle zu gewährleisten und die soziale Stabilität zu sichern."
    ),
    (
        "Welche Ideologie setzt sich für die vollständige Beseitigung sozialer Klassen und die Schaffung einer gleichberechtigten Gesellschaft ein?",
        "Kommunismus",
        ["Kommunismus",
         "Sozialismus",
         "Kapitalismus",
         "Faschismus"],
        "Der Kommunismus setzt sich für die vollständige Beseitigung sozialer Klassen und die Schaffung einer gleichberechtigten Gesellschaft ein, indem alle Produktionsmittel gemeinschaftlich kontrolliert werden."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche politische Bewegung betont die Bedeutung einer starken nationalen Identität und die Förderung internationale Verpflichtungen?",
        "Nationalismus",
        ["Faschismus",
         "Kapitalismus",
         "Sozialismus",
         "Nationalismus"],
        "Der Nationalismus betont die Bedeutung einer starken nationalen Identität und die Förderung nationaler Interessen über internationale Verpflichtungen."
    ),
    (
        "Welche Ideologie argumentiert für eine marktwirtschaftliche Ordnung ohne staatliche Eingriffe zur Förderung des Wohlstands?",
        "Kapitalismus",
        ["Anarchismus",
         "Kapitalismus",
         "Sozialismus",
         "Konservatismus"],
        "Der Kapitalismus argumentiert für eine marktwirtschaftliche Ordnung ohne staatliche Eingriffe zur Förderung des Wohlstands und der wirtschaftlichen Effizienz."
    ),
    (
        "Welche politische Theorie setzt sich für eine Gesellschaft ein, in der alle Menschen gleichberechtigt sind und alle Formen von Herrschaft abgebaut werden?",
        "Anarchismus",
        ["Anarchismus",
         "Sozialismus",
         "Faschismus",
         "Kapitalismus"],
        "Der Anarchismus setzt sich für eine Gesellschaft ein, in der alle Menschen gleichberechtigt sind und alle Formen von Herrschaft abgebaut werden, um Freiheit und Gleichheit zu fördern."
    ),
    (
        "Welche politische Ideologie strebt nach der vollständigen Kontrolle der Wirtschaft durch den Staat zur Förderung sozialer Gerechtigkeit?",
        "Sozialismus",
        ["Liberalismus",
         "Kapitalismus",
         "Sozialismus",
         "Faschismus"],
        "Der Sozialismus strebt nach der vollständigen Kontrolle der Wirtschaft durch den Staat zur Förderung sozialer Gerechtigkeit und Verringerung von Ungleichheiten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche politische Bewegung setzt sich für eine minimale staatliche Rolle und maximale individuelle Freiheiten in der Gesellschaft ein?",
        "Libertarismus",
        ["Libertarismus",
         "Sozialismus",
         "Faschismus",
         "Kapitalismus"],
        "Der Libertarismus setzt sich für eine minimale staatliche Rolle und maximale individuelle Freiheiten in der Gesellschaft ein, um die persönliche Autonomie zu fördern."
    ),
    (
        "Welche Ideologie argumentiert für eine starke, zentralisierte Kontrolle, um nationale Ziele zu erreichen und die gesellschaftliche Ordnung zu bewahren?",
        "Faschismus",
        ["Sozialismus",
         "Faschismus",
         "Konservatismus",
         "Liberalismus"],
        "Der Faschismus argumentiert für eine starke, zentralisierte Kontrolle, um nationale Ziele zu erreichen und die gesellschaftliche Ordnung zu bewahren, oft durch autoritäre Mittel."
    ),
        (
        "Welche Ideologie strebt nach einer Gesellschaft, in der wirtschaftliche und soziale Ungleichheiten durch staatliche Maßnahmen ausgeglichen werden?",
        "Sozialismus",
        ["Sozialismus",
         "Kapitalismus",
         "Liberalismus",
         "Faschismus"],
        "Der Sozialismus strebt nach einer Gesellschaft, in der wirtschaftliche und soziale Ungleichheiten durch staatliche Maßnahmen ausgeglichen werden, um soziale Gerechtigkeit zu fördern."
    ),
    (
        "Welche politische Theorie betont die Notwendigkeit eines minimalen Staates zur Förderung individueller Freiheit und Marktwirtschaft?",
        "Libertarismus",
        ["Konservatismus",
         "Libertarismus",
         "Faschismus",
         "Anarchismus"],
        "Der Libertarismus betont die Notwendigkeit eines minimalen Staates zur Förderung individueller Freiheit und Marktwirtschaft, wobei staatliche Eingriffe minimiert werden."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie argumentiert für eine starke staatliche Kontrolle, um gesellschaftliche Ordnung und nationale Sicherheit zu gewährleisten?",
        "Autoritarismus",
        ["Liberalismus",
         "Kapitalismus",
         "Autoritarismus",
         "Sozialismus"],
        "Der Autoritarismus argumentiert für eine starke staatliche Kontrolle, um gesellschaftliche Ordnung und nationale Sicherheit zu gewährleisten, oft auf Kosten individueller Freiheiten."
    ),
    (
        "Welche politische Bewegung setzt sich für eine völlige Abschaffung des Staates zugunsten freiwilliger sozialer Kooperation ein?",
        "Anarchismus",
        ["Faschismus",
         "Sozialismus",
         "Kapitalismus",
         "Anarchismus"],
        "Der Anarchismus setzt sich für eine völlige Abschaffung des Staates zugunsten freiwilliger sozialer Kooperation und Selbstverwaltung ein."
    ),
    (
        "Welche Ideologie setzt sich für eine zentrale Planung der Wirtschaft zur Sicherstellung von sozialer Gerechtigkeit und Gleichheit ein?",
        "Sozialismus",
        ["Sozialismus",
         "Kapitalismus",
         "Libertarismus",
         "Faschismus"],
        "Der Sozialismus setzt sich für eine zentrale Planung der Wirtschaft ein, um soziale Gerechtigkeit und Gleichheit zu fördern und wirtschaftliche Ungleichheiten zu reduzieren."
    ),
    (
        "Welche politische Theorie betont die Bedeutung von nationaler Einheit und kultureller Identität über internationale Zusammenarbeit?",
        "Nationalismus",
        ["Kapitalismus",
         "Nationalismus",
         "Liberalismus",
         "Anarchismus"],
        "Der Nationalismus betont die Bedeutung von nationaler Einheit und kultureller Identität und stellt diese über internationale Zusammenarbeit und Verpflichtungen."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie strebt nach der vollständigen Kontrolle der Wirtschaft durch den Staat und die Beseitigung von Privateigentum?",
        "Kommunismus",
        ["Liberalismus",
         "Kommunismus",
         "Faschismus",
         "Kapitalismus"],
        "Der Kommunismus strebt nach der vollständigen Kontrolle der Wirtschaft durch den Staat und die Beseitigung von Privateigentum an Produktionsmitteln."
    ),
    (
        "Welche politische Bewegung fordert eine starke, zentrale Führung zur Erreichung nationaler Ziele und zur Stabilisierung der Gesellschaft?",
        "Faschismus",
        ["Liberalismus",
         "Kapitalismus",
         "Sozialismus",
         "Faschismus"],
        "Der Faschismus fordert eine starke, zentrale Führung zur Erreichung nationaler Ziele und zur Stabilisierung der Gesellschaft, oft durch autoritäre Maßnahmen."
    ),
    (
        "Welche Ideologie fordert eine Gesellschaft, in der soziale und wirtschaftliche Ungleichheiten durch private Initiativen und Wettbewerb reguliert werden?",
        "Kapitalismus",
        ["Kapitalismus",
         "Sozialismus",
         "Libertarismus",
         "Anarchismus"],
        "Der Kapitalismus fordert eine Gesellschaft, in der soziale und wirtschaftliche Ungleichheiten durch private Initiativen und Wettbewerb reguliert werden, ohne umfangreiche staatliche Eingriffe."
    ),
    (
        "Welche politische Theorie setzt sich für eine minimale staatliche Rolle ein und glaubt an die Selbstregulierung des Marktes?",
        "Liberalismus",
        ["Sozialismus",
         "Faschismus",
         "Liberalismus",
         "Nationalismus"],
        "Der Liberalismus setzt sich für eine minimale staatliche Rolle ein und glaubt an die Selbstregulierung des Marktes, um persönliche Freiheiten und wirtschaftliche Effizienz zu fördern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie fordert die Beseitigung von Hierarchien und die Förderung einer egalitären Gesellschaft durch direkte Demokratie?",
        "Anarchismus",
        ["Kapitalismus",
         "Faschismus",
         "Anarchismus",
         "Sozialismus"],
        "Der Anarchismus fordert die Beseitigung von Hierarchien und die Förderung einer egalitären Gesellschaft durch direkte Demokratie und Selbstverwaltung."
    ),
    (
        "Welche politische Bewegung setzt sich für die Bewahrung und Stärkung traditioneller Werte und Institutionen ein?",
        "Konservatismus",
        ["Sozialismus",
         "Kapitalismus",
         "Anarchismus",
         "Konservatismus"],
        "Der Konservatismus setzt sich für die Bewahrung und Stärkung traditioneller Werte und Institutionen ein und ist gegen schnelle gesellschaftliche Veränderungen."
    ),
    (
        "Welche Ideologie setzt sich für die Förderung von individuellen Rechten und eine reduzierte Rolle des Staates in der Gesellschaft ein?",
        "Libertarismus",
        ["Kapitalismus",
         "Sozialismus",
         "Libertarismus",
         "Faschismus"],
        "Der Libertarismus setzt sich für die Förderung von individuellen Rechten und eine reduzierte Rolle des Staates in der Gesellschaft ein, um persönliche Freiheit zu maximieren."
    ),
    (
        "Welche politische Theorie strebt danach, wirtschaftliche und soziale Ungleichheiten durch staatliche Kontrolle der Produktionsmittel zu beseitigen?",
        "Sozialismus",
        ["Anarchismus",
         "Faschismus",
         "Liberalismus",
         "Sozialismus"],
        "Der Sozialismus strebt danach, wirtschaftliche und soziale Ungleichheiten durch staatliche Kontrolle der Produktionsmittel zu beseitigen und soziale Gerechtigkeit zu fördern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie strebt nach einem starken, zentralisierten Staat zur Sicherstellung der nationalen Einheit und Sicherheit?",
        "Autoritarismus",
        ["Liberalismus",
         "Kapitalismus",
         "Autoritarismus",
         "Nationalismus"],
        "Der Autoritarismus strebt nach einem starken, zentralisierten Staat zur Sicherstellung der nationalen Einheit und Sicherheit, oft auf Kosten individueller Freiheiten."
    ),
    (
        "Welche politische Bewegung setzt sich für die Schaffung einer gleichberechtigten Gesellschaft durch die Beseitigung von Klassenunterschieden ein?",
        "Sozialismus",
        ["Kapitalismus",
         "Anarchismus",
         "Faschismus",
         "Sozialismus"],
        "Der Sozialismus setzt sich für die Schaffung einer gleichberechtigten Gesellschaft durch die Beseitigung von Klassenunterschieden und die kollektive Kontrolle der Produktionsmittel ein."
    ),
    (
        "Welche Ideologie betont die Bedeutung der individuellen Freiheit und eines freien Marktes ohne staatliche Eingriffe?",
        "Liberalismus",
        ["Liberalismus",
         "Nationalismus",
         "Sozialismus",
         "Autoritarismus"],
        "Der Liberalismus betont die Bedeutung der individuellen Freiheit und eines freien Marktes ohne staatliche Eingriffe zur Förderung persönlicher Autonomie und wirtschaftlicher Effizienz."
    ),
    (
        "Welche politische Theorie setzt sich für die Schaffung einer klassenlosen Gesellschaft ohne staatliche Herrschaft ein?",
        "Anarchismus",
        ["Kapitalismus",
         "Faschismus",
         "Anarchismus",
         "Sozialismus"],
        "Der Anarchismus setzt sich für die Schaffung einer klassenlosen Gesellschaft ohne staatliche Herrschaft ein, in der die Menschen gleichberechtigt und ohne Zwang zusammenarbeiten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie setzt sich für die umfassende Kontrolle der Wirtschaft durch den Staat und die Abschaffung von Privateigentum ein?",
        "Kommunismus",
        ["Sozialismus",
         "Faschismus",
         "Kapitalismus",
         "Kommunismus"],
        "Der Kommunismus setzt sich für die umfassende Kontrolle der Wirtschaft durch den Staat und die Abschaffung von Privateigentum ein, um eine klassenlose Gesellschaft zu schaffen."
    ),
    (
        "Welche politische Bewegung fördert die nationale Identität und stellt nationale Interessen über internationale Verpflichtungen?",
        "Nationalismus",
        ["Liberalismus",
         "Faschismus",
         "Sozialismus",
         "Nationalismus"],
        "Der Nationalismus fördert die nationale Identität und stellt nationale Interessen über internationale Verpflichtungen, um die nationale Einheit zu stärken."
    ),
    (
        "Welche Ideologie befürwortet eine minimale Rolle des Staates und maximalen freien Wettbewerb zur Förderung von Wohlstand?",
        "Kapitalismus",
        ["Faschismus",
         "Sozialismus",
         "Kapitalismus",
         "Anarchismus"],
        "Der Kapitalismus befürwortet eine minimale Rolle des Staates und maximalen freien Wettbewerb zur Förderung von Wohlstand und wirtschaftlicher Effizienz."
    ),
    (
        "Welche politische Theorie setzt sich für eine starke Führung zur Sicherstellung der nationalen Sicherheit und Ordnung ein?",
        "Autoritarismus",
        ["Sozialismus",
         "Faschismus",
         "Liberalismus",
         "Autoritarismus"],
        "Der Autoritarismus setzt sich für eine starke Führung zur Sicherstellung der nationalen Sicherheit und Ordnung ein und neigt dazu, individuelle Freiheiten einzuschränken."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
        (
        "Welche Ideologie strebt nach einer Gesellschaft, in der der Staat eine zentrale Rolle in der Wirtschaft spielt und soziale Wohlfahrt gewährleistet?",
        "Sozialismus",
        ["Sozialismus",
         "Kapitalismus",
         "Libertarismus",
         "Nationalismus"],
        "Der Sozialismus strebt eine Gesellschaft an, in der der Staat eine zentrale Rolle in der Wirtschaft spielt und soziale Wohlfahrt gewährleistet, um soziale Gerechtigkeit zu fördern."
    ),
    (
        "Welche politische Theorie betont die Notwendigkeit, alle sozialen und wirtschaftlichen Strukturen grundlegend zu verändern, um Gleichheit zu erreichen?",
        "Kommunismus",
        ["Faschismus",
         "Kommunismus",
         "Liberalismus",
         "Kapitalismus"],
        "Der Kommunismus betont die Notwendigkeit, alle sozialen und wirtschaftlichen Strukturen grundlegend zu verändern, um eine klassenlose Gesellschaft und Gleichheit zu erreichen."
    ),
    (
        "Welche Ideologie befürwortet eine reduzierte staatliche Rolle, wobei der freie Markt als Hauptmechanismus zur Ressourcenverteilung dient?",
        "Liberalismus",
        ["Faschismus",
         "Kapitalismus",
         "Anarchismus",
         "Liberalismus"],
        "Der Liberalismus befürwortet eine reduzierte staatliche Rolle, wobei der freie Markt als Hauptmechanismus zur Ressourcenverteilung dient, um individuelle Freiheiten und wirtschaftliche Effizienz zu fördern."
    ),
    (
        "Welche politische Bewegung setzt sich für eine Gesellschaft ohne jegliche Form von Hierarchien oder Autorität ein?",
        "Anarchismus",
        ["Sozialismus",
         "Kapitalismus",
         "Nationalismus",
         "Anarchismus"],
        "Der Anarchismus setzt sich für eine Gesellschaft ohne jegliche Form von Hierarchien oder Autorität ein, in der Menschen gleichberechtigt zusammenarbeiten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie zielt darauf ab, die individuelle Freiheit durch die Begrenzung der staatlichen Macht zu maximieren?",
        "Libertarismus",
        ["Kapitalismus",
         "Libertarismus",
         "Faschismus",
         "Sozialismus"],
        "Der Libertarismus zielt darauf ab, die individuelle Freiheit durch die Begrenzung der staatlichen Macht zu maximieren und einen minimalen Staat zu fördern."
    ),
    (
        "Welche politische Theorie strebt danach, durch staatliche Maßnahmen eine gerechte Verteilung von Ressourcen und Chancen sicherzustellen?",
        "Sozialismus",
        ["Sozialismus",
         "Liberalismus",
         "Kapitalismus",
         "Faschismus"],
        "Der Sozialismus strebt danach, durch staatliche Maßnahmen eine gerechte Verteilung von Ressourcen und Chancen sicherzustellen, um soziale Gerechtigkeit zu fördern."
    ),
    (
        "Welche Ideologie betont die Notwendigkeit eines starken Staates zur Aufrechterhaltung von Ordnung und Stabilität, oft durch autoritäre Mittel?",
        "Autoritarismus",
        ["Sozialismus",
         "Kapitalismus",
         "Nationalismus",
         "Autoritarismus"],
        "Der Autoritarismus betont die Notwendigkeit eines starken Staates zur Aufrechterhaltung von Ordnung und Stabilität, oft durch autoritäre Mittel, die individuelle Freiheiten einschränken können."
    ),
    (
        "Welche politische Theorie befürwortet die Stärkung der nationalen Identität und legt großen Wert auf nationale Selbstbestimmung?",
        "Nationalismus",
        ["Faschismus",
         "Sozialismus",
         "Kapitalismus",
         "Nationalismus"],
        "Der Nationalismus befürwortet die Stärkung der nationalen Identität und legt großen Wert auf nationale Selbstbestimmung, oft zu Lasten internationaler Zusammenarbeit."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie sieht die soziale und wirtschaftliche Gleichheit als Hauptziel und strebt eine Gesellschaft ohne Klassenunterschiede an?",
        "Sozialismus",
        ["Kapitalismus",
         "Anarchismus",
         "Liberalismus",
         "Sozialismus"],
        "Der Sozialismus sieht die soziale und wirtschaftliche Gleichheit als Hauptziel und strebt eine Gesellschaft ohne Klassenunterschiede an, oft durch staatliche Interventionen und Kontrolle."
    ),
    (
        "Welche politische Theorie setzt sich für eine freie Marktwirtschaft ein, bei der der Staat möglichst wenig in wirtschaftliche Angelegenheiten eingreift?",
        "Kapitalismus",
        ["Sozialismus",
         "Faschismus",
         "Kapitalismus",
         "Anarchismus"],
        "Der Kapitalismus setzt sich für eine freie Marktwirtschaft ein, bei der der Staat möglichst wenig in wirtschaftliche Angelegenheiten eingreift, um den freien Wettbewerb zu fördern."
    ),
    (
        "Welche Ideologie betont die Wichtigkeit traditioneller Werte und Institutionen und ist gegen schnelle gesellschaftliche Veränderungen?",
        "Konservatismus",
        ["Libertarismus",
         "Faschismus",
         "Kapitalismus",
         "Konservatismus"],
        "Der Konservatismus betont die Wichtigkeit traditioneller Werte und Institutionen und ist gegen schnelle gesellschaftliche Veränderungen, um soziale Stabilität zu gewährleisten."
    ),
    (
        "Welche politische Bewegung setzt sich für die Beseitigung aller sozialen Hierarchien und die Einführung einer egalitären Gesellschaft ein?",
        "Anarchismus",
        ["Kapitalismus",
         "Faschismus",
         "Sozialismus",
         "Anarchismus"],
        "Der Anarchismus setzt sich für die Beseitigung aller sozialen Hierarchien und die Einführung einer egalitären Gesellschaft ein, in der Menschen gleichberechtigt zusammenarbeiten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie befürwortet eine minimale staatliche Intervention in die Wirtschaft und setzt auf individuelle Selbstverantwortung?",
        "Libertarismus",
        ["Kapitalismus",
         "Sozialismus",
         "Faschismus",
         "Libertarismus"],
        "Der Libertarismus befürwortet eine minimale staatliche Intervention in die Wirtschaft und setzt auf individuelle Selbstverantwortung, um persönliche Freiheit zu maximieren."
    ),
    (
        "Welche politische Theorie strebt danach, die Macht in den Händen einer autoritären Führungsperson zu konzentrieren, um nationale Ziele zu erreichen?",
        "Faschismus",
        ["Liberalismus",
         "Faschismus",
         "Sozialismus",
         "Anarchismus"],
        "Der Faschismus strebt danach, die Macht in den Händen einer autoritären Führungsperson zu konzentrieren, um nationale Ziele zu erreichen und die Einheit des Staates zu gewährleisten."
    ),
    (
        "Welche Ideologie sieht den freien Markt als Weg zur Maximierung von Wohlstand und Innovation, während staatliche Eingriffe minimiert werden?",
        "Kapitalismus",
        ["Liberalismus",
         "Sozialismus",
         "Faschismus",
         "Kapitalismus"],
        "Der Kapitalismus sieht den freien Markt als Weg zur Maximierung von Wohlstand und Innovation, während staatliche Eingriffe minimiert werden, um wirtschaftliche Effizienz zu fördern."
    ),
    (
        "Welche politische Theorie setzt sich für die Errichtung eines minimalen Staates ein, der nur grundlegende Aufgaben wie die Aufrechterhaltung der Ordnung übernimmt?",
        "Libertarismus",
        ["Sozialismus",
         "Anarchismus",
         "Kapitalismus",
         "Libertarismus"],
        "Der Libertarismus setzt sich für die Errichtung eines minimalen Staates ein, der nur grundlegende Aufgaben wie die Aufrechterhaltung der Ordnung übernimmt, um maximale persönliche Freiheit zu gewährleisten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie strebt eine Gesellschaft an, in der alle wirtschaftlichen Ressourcen gemeinschaftlich verwaltet und verteilt werden?",
        "Sozialismus",
        ["Anarchismus",
         "Kapitalismus",
         "Faschismus",
         "Sozialismus"],
        "Der Sozialismus strebt eine Gesellschaft an, in der alle wirtschaftlichen Ressourcen gemeinschaftlich verwaltet und verteilt werden, um soziale Gleichheit und Gerechtigkeit zu fördern."
    ),
    (
        "Welche politische Bewegung stellt nationale Identität und kulturelle Traditionen über internationale Verpflichtungen und Integration?",
        "Nationalismus",
        ["Faschismus",
         "Liberalismus",
         "Sozialismus",
         "Nationalismus"],
        "Der Nationalismus stellt nationale Identität und kulturelle Traditionen über internationale Verpflichtungen und Integration, um die nationale Souveränität zu wahren."
    ),
    (
        "Welche Ideologie setzt auf die Förderung individueller Freiheiten und einen minimalen Einfluss des Staates auf persönliche Entscheidungen?",
        "Liberalismus",
        ["Kapitalismus",
         "Faschismus",
         "Sozialismus",
         "Liberalismus"],
        "Der Liberalismus setzt auf die Förderung individueller Freiheiten und einen minimalen Einfluss des Staates auf persönliche Entscheidungen, um persönliche Autonomie zu maximieren."
    ),
    (
        "Welche politische Theorie sieht die Notwendigkeit, durch staatliche Kontrolle und Planung eine gleichmäßige Verteilung von Ressourcen zu erreichen?",
        "Sozialismus",
        ["Kapitalismus",
         "Anarchismus",
         "Faschismus",
         "Sozialismus"],
        "Der Sozialismus sieht die Notwendigkeit, durch staatliche Kontrolle und Planung eine gleichmäßige Verteilung von Ressourcen zu erreichen, um soziale Gerechtigkeit zu fördern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Ideologie befürwortet eine zentrale Planung der Wirtschaft durch den Staat und die Abschaffung des Privateigentums?",
        "Kommunismus",
        ["Sozialismus",
         "Kapitalismus",
         "Anarchismus",
         "Kommunismus"],
        "Der Kommunismus befürwortet eine zentrale Planung der Wirtschaft durch den Staat und die Abschaffung des Privateigentums, um eine klassenlose Gesellschaft zu schaffen."
    ),
    (
        "Welche politische Bewegung legt großen Wert auf individuelle Rechte und Freiheiten, während sie eine starke zentrale Regierung ablehnt?",
        "Libertarismus",
        ["Kapitalismus",
         "Faschismus",
         "Sozialismus",
         "Libertarismus"],
        "Der Libertarismus legt großen Wert auf individuelle Rechte und Freiheiten, während er eine starke zentrale Regierung ablehnt und auf minimale staatliche Eingriffe setzt."
    ),
    (
        "Welche Ideologie unterstützt die Vorstellung, dass ein stark zentralisierter Staat notwendig ist, um gesellschaftliche Ordnung und Sicherheit zu gewährleisten?",
        "Autoritarismus",
        ["Liberalismus",
         "Sozialismus",
         "Kapitalismus",
         "Autoritarismus"],
        "Der Autoritarismus unterstützt die Vorstellung, dass ein stark zentralisierter Staat notwendig ist, um gesellschaftliche Ordnung und Sicherheit zu gewährleisten, oft auf Kosten individueller Freiheiten."
    )
    
]
          
class PolIdeol(Screen):
    def __init__(self,  frage, antwort, antwortmöglichkeiten, info_text, **kw):
        super(PolIdeol, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Ideologien und Werte"
        self.fragen = fragenideo

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))

                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()


fragenwirt = [
    
    ("Welche politische Ideologie betont die Bedeutung individueller Freiheit und begrenzter staatlicher Macht?",
     "Liberalismus",
     ["Konservatismus",
      "Anarchismus",
      "Liberalismus",
      "Sozialismus"],
     "Diese Ideologie legt großen Wert auf individuelle Rechte und Freiheiten sowie auf die Begrenzung der Macht des Staates, um persönliche Autonomie und wirtschaftliche Freiheit zu gewährleisten. Sie strebt nach einem freien Markt und minimaler staatlicher Intervention in die Wirtschaft. Diese Ideologie wird als Liberalismus bezeichnet."),
    
    ("Welche Ideologie setzt sich für die kollektive Eigentümerschaft und die Abschaffung von Klassenunterschieden ein?",
     "Sozialismus",
     ["Sozialismus",
      "Nationalismus",
      "Liberalismus",
      "Kapitalismus"],
     "Diese Ideologie zielt darauf ab, wirtschaftliche Gleichheit zu erreichen, indem Produktionsmittel kollektiv oder staatlich kontrolliert werden. Sie strebt nach einer Gesellschaft ohne Klassenunterschiede und privatem Eigentum an den Produktionsmitteln. Diese Ideologie wird als Sozialismus bezeichnet."),
    
    ("Welche politische Bewegung betont die Bewahrung traditioneller Werte und Institutionen?",
     "Konservatismus",
     ["Sozialismus",
      "Konservatismus",
      "Liberalismus",
      "Anarchismus"],
     "Diese Bewegung setzt sich für die Erhaltung traditioneller Werte, sozialer Ordnung und stabiler Institutionen ein. Sie ist skeptisch gegenüber schnellen sozialen Veränderungen und betont die Bedeutung von kulturellem und historischem Erbe. Diese Bewegung wird als Konservatismus bezeichnet."),
    
    ("Welche Ideologie strebt eine klassenlose, stateless Gesellschaft an, in der die Produktionsmittel gemeinschaftlich kontrolliert werden?",
     "Anarchismus",
     ["Anarchismus",
      "Sozialismus",
      "Liberalismus",
      "Konservatismus"],
     "Diese Ideologie zielt auf die Errichtung einer Gesellschaft ab, in der es keine Klassen oder staatlichen Strukturen gibt. Die Produktionsmittel sollen gemeinschaftlich kontrolliert und Ressourcen gleichmäßig verteilt werden. Diese Ideologie wird als Anarchismus bezeichnet."),
    
    ("Welche politische Theorie betont die Notwendigkeit eines starken, zentralisierten Staates zur Aufrechterhaltung der sozialen Ordnung?",
     "Autoritarismus",
     ["Liberalismus",
      "Anarchismus",
      "Sozialismus",
      "Autoritarismus"],
     "Diese Theorie glaubt, dass eine starke zentrale Regierung notwendig ist, um die soziale Ordnung und Stabilität zu wahren. Sie betont die Bedeutung der Machtkonzentration und der Kontrolle durch den Staat, oft auf Kosten individueller Freiheiten. Diese Theorie wird als Autoritarismus bezeichnet."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche wirtschaftliche Kennzahl misst den Gesamtwert aller im Inland hergestellten Güter und Dienstleistungen innerhalb eines Jahres?",
     "Bruttoinlandsprodukt (BIP)",
     ["Bruttoinlandsprodukt (BIP)",
      "Verbraucherpreisindex (VPI)",
      "Produzentenpreisindex (PPI)",
      "Bruttonationaleinkommen (BNE)"],
     "Diese Kennzahl wird häufig verwendet, um die wirtschaftliche Leistungsfähigkeit eines Landes zu bewerten. Sie umfasst den Gesamtwert aller innerhalb der Landesgrenzen in einem Jahr produzierten Güter und Dienstleistungen. Diese Kennzahl wird als Bruttoinlandsprodukt (BIP) bezeichnet."),
    
    ("Welche Marktstruktur beschreibt einen Markt mit vielen Anbietern, bei dem keiner den Preis beeinflussen kann?",
     "Polypol",
     ["Duopol",
      "Monopol",
      "Polypol",
      "Oligopol"],
     "Keiner der Marktteilnehmer hat die Macht, den Preis zu beeinflussen, und die Preise werden durch das Zusammenspiel von Angebot und Nachfrage bestimmt. Diese Marktstruktur wird als Polypol bezeichnet."),
    
    ("Welche Theorie besagt, dass Handelsbarrieren wie Zölle und Quoten den internationalen Handel behindern und die Effizienz verringern?",
     "Freihandel",
     ["Autarkie",
     "Protektionismus",
     "Merkantilismus",
     "Freihandel"],
     "Diese Theorie argumentiert, dass Handelsbarrieren den freien Fluss von Waren und Dienstleistungen zwischen Ländern behindern und dadurch die wirtschaftliche Effizienz und den Wohlstand mindern. Sie setzt sich für den Abbau solcher Barrieren ein, um den globalen Handel zu fördern. Diese Theorie wird als Freihandel bezeichnet."),
    
    ("Welche Art von Arbeitslosigkeit entsteht durch technologische Fortschritte und Veränderungen in der Nachfrage nach Arbeitskräften?",
     "Strukturelle Arbeitslosigkeit",
     ["Zyklische Arbeitslosigkeit",
      "Saisonale Arbeitslosigkeit",
      "Strukturelle Arbeitslosigkeit",
      "Friktionelle Arbeitslosigkeit"],
     "Diese Arbeitslosigkeit resultiert aus Veränderungen in der Wirtschaft, wie technologische Fortschritte oder Verschiebungen in der Nachfrage nach bestimmten Berufen. Diese Art von Arbeitslosigkeit wird als strukturelle Arbeitslosigkeit bezeichnet."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Maßnahme wird verwendet, um die Geldmenge in einer Volkswirtschaft zu kontrollieren und die Inflation zu steuern?",
     "Geldpolitik",
     ["Handelspolitik",
      "Geldpolitik",
      "Steuerpolitik",
      "Fiskalpolitik"],
     "Diese Maßnahme wird von Zentralbanken eingesetzt, um die Geldmenge und Zinssätze zu steuern, mit dem Ziel, Preisstabilität zu gewährleisten und die Inflation zu kontrollieren. Diese Maßnahme wird als Geldpolitik bezeichnet."),
    
    ("Welche Wirtschaftsform basiert auf gemeinschaftlichem oder staatlichem Eigentum an den Produktionsmitteln?",
     "Sozialismus",
     ["Merkantilismus",
      "Sozialismus",
      "Feudalismus",
      "Kapitalismus"],
     "Diese Wirtschaftsform betont die gemeinschaftliche oder staatliche Kontrolle über die Produktionsmittel, um soziale Gleichheit und eine gerechte Verteilung der Ressourcen zu erreichen. Diese Wirtschaftsform wird als Sozialismus bezeichnet."),
    
    ("Welche Theorie besagt, dass Staaten durch den internationalen Handel Wohlstand maximieren können, wenn sie sich auf die Produktion jener Güter spezialisieren, die sie am effizientesten herstellen können?",
     "Komparativer Vorteil",
     ["Opportunitätskosten",
      "Absoluter Vorteil",
      "Autarkie",
      "Komparativer Vorteil"],
     "Diese Theorie argumentiert, dass Länder ihren Wohlstand maximieren können, wenn sie sich auf die Produktion von Gütern spezialisieren, die sie relativ effizienter herstellen können als andere Länder. Diese Theorie wird als komparativer Vorteil bezeichnet."),
    
    ("Welche Art von Marktwirtschaft basiert auf einem hohen Maß an staatlicher Kontrolle und Planung, insbesondere in Schlüsselindustrien?",
     "Planwirtschaft",
     ["Mischwirtschaft",
      "Planwirtschaft",
      "Soziale Marktwirtschaft",
      "Mischwirtschaft"],
     "In dieser Wirtschaftsform übernimmt der Staat die zentrale Rolle bei der Planung und Steuerung der wirtschaftlichen Aktivitäten, insbesondere in Schlüsselindustrien wie Energie und Verkehr. Diese Wirtschaftsform wird als Planwirtschaft bezeichnet."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche ökonomische Theorie besagt, dass die Gesamtnachfrage in einer Wirtschaft das primäre Mittel zur Steuerung der Produktion und des Beschäftigungsniveaus ist?",
     "Keynesianische Wirtschaftstheorie",
     ["Keynesianische Wirtschaftstheorie",
      "Monetarismus",
      "Angebotstheorie",
      "Klassische Wirtschaftstheorie"],
     "Diese Theorie betont, dass die Gesamtnachfrage nach Gütern und Dienstleistungen das entscheidende Element für die Bestimmung des Produktionsniveaus und der Beschäftigung ist. Diese Theorie wird als Keynesianische Wirtschaftstheorie bezeichnet."),
    
    ("Welche Form der Unternehmensstruktur ermöglicht es, dass das Unternehmen als eigenständige juristische Person agiert, unabhängig von seinen Eigentümern?",
     "Gesellschaft mit beschränkter Haftung (GmbH)",
     ["Genossenschaft",
      "Partnerschaft",
      "Gesellschaft mit beschränkter Haftung (GmbH)",
      "Einzelunternehmen"],
     "Diese Unternehmensform ermöglicht es dem Unternehmen, als eigenständige juristische Person zu agieren, was bedeutet, dass es Rechte und Pflichten unabhängig von den Eigentümern hat. Diese Unternehmensform wird als Gesellschaft mit beschränkter Haftung (GmbH) bezeichnet."),
    
    ("Welche wirtschaftliche Kennzahl gibt die Preisentwicklung eines repräsentativen Warenkorbs an Konsumgütern an?",
     "Verbraucherpreisindex (VPI)",
     ["Produzentenpreisindex (PPI)",
      "Handelsbilanz",
      "Bruttoinlandsprodukt (BIP)",
      "Verbraucherpreisindex (VPI)"],
     "Diese Kennzahl misst die durchschnittliche Preisänderung eines repräsentativen Warenkorbs von Konsumgütern und Dienstleistungen, die von Haushalten gekauft werden. Diese Kennzahl wird als Verbraucherpreisindex (VPI) bezeichnet."),
    
    ("Welche Art von Marktmacht besitzt ein Unternehmen, das der einzige Anbieter eines bestimmten Produkts oder einer Dienstleistung ist?",
     "Monopol",
     ["Duopol",
      "Polypol",
      "Monopol",
      "Oligopol"],
     "Ein Unternehmen hat diese Art von Marktmacht, wenn es der einzige Anbieter eines bestimmten Produkts oder einer Dienstleistung auf dem Markt ist. Diese Art von Marktmacht wird als Monopol bezeichnet."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche wirtschaftliche Theorie besagt, dass das Angebot die Nachfrage schafft, indem es neue Produkte und Dienstleistungen auf den Markt bringt?",
     "Angebotsorientierte Wirtschaftstheorie",
     ["Monetarismus",
      "Angebotsorientierte Wirtschaftstheorie",
      "Klassische Wirtschaftstheorie",
      "Nachfrageorientierte Wirtschaftstheorie"],
     "Diese Theorie argumentiert, dass die Schaffung von Angebot, also die Produktion neuer Güter und Dienstleistungen, selbst Nachfrage generiert. Diese Theorie wird als angebotsorientierte Wirtschaftstheorie bezeichnet."),
    
    ("Welche Art von Steuer wird direkt auf das Einkommen von Individuen und Unternehmen erhoben?",
     "Einkommensteuer",
     ["Verbrauchsteuer",
      "Kapitalertragsteuer",
      "Einkommensteuer",
      "Mehrwertsteuer (MwSt)"],
     "Diese Steuer wird direkt auf das Einkommen von Einzelpersonen und Unternehmen erhoben und ist eine der wichtigsten Einnahmequellen für den Staat. Diese Steuer wird als Einkommensteuer bezeichnet."),
    
    ("Welche Art von Inflation wird durch einen plötzlichen und erheblichen Anstieg der Kosten für Produktionsfaktoren verursacht?",
     "Kostendruckinflation",
     ["Hyperinflation",
      "Kostendruckinflation",
      "Deflation",
      "Nachfrageinflation"],
     "Diese Art von Inflation tritt auf, wenn die Kosten für Produktionsfaktoren wie Rohstoffe oder Löhne plötzlich und erheblich steigen, was zu höheren Preisen für Endprodukte führt. Diese Art von Inflation wird als Kostendruckinflation bezeichnet."),
    
        (
        "Welche wirtschaftliche Theorie besagt, dass die Verfügbarkeit von Kapital und Technologie die Hauptfaktoren für das Wirtschaftswachstum sind?",
        "Neoklassische Wachstumstheorie",
        ["Neoklassische Wachstumstheorie",
         "Keynesianische Wachstumstheorie",
         "Marxistische Wachstumstheorie",
         "Strukturelle Wachstumstheorie"],
        "Die neoklassische Wachstumstheorie besagt, dass die Verfügbarkeit von Kapital und Technologie die Hauptfaktoren für das Wirtschaftswachstum sind und dass das Wachstum durch Investitionen in diese Bereiche gefördert wird."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Marktstruktur ist durch eine geringe Anzahl von Anbietern gekennzeichnet, die einen wesentlichen Einfluss auf den Preis ausüben können?",
        "Oligopol",
        ["Monopol",
         "Duopol",
         "Oligopol",
         "Polypol"],
        "Ein Oligopol ist eine Marktstruktur, die durch eine geringe Anzahl von Anbietern gekennzeichnet ist, die in der Lage sind, den Preis durch ihre Marktstrategien erheblich zu beeinflussen."
    ),
    (
        "Welche wirtschaftliche Kennzahl gibt die Gesamtmenge der in einer Volkswirtschaft produzierten Güter und Dienstleistungen an?",
        "Bruttoinlandsprodukt (BIP)",
        ["Bruttoinlandsprodukt (BIP)",
         "Bruttonationaleinkommen (BNE)",
         "Verbraucherpreisindex (VPI)",
         "Produzentenpreisindex (PPI)"],
        "Das Bruttoinlandsprodukt (BIP) gibt die Gesamtmenge aller in einem Land innerhalb eines Jahres produzierten Güter und Dienstleistungen an und ist ein Maß für die wirtschaftliche Leistung eines Landes."
    ),
    (
        "Welche Art von Arbeitslosigkeit resultiert aus saisonalen Schwankungen, wie sie beispielsweise in der Landwirtschaft oder im Tourismus vorkommen?",
        "Saisonale Arbeitslosigkeit",
        ["Saisonale Arbeitslosigkeit",
         "Zyklische Arbeitslosigkeit",
         "Strukturelle Arbeitslosigkeit",
         "Friktionelle Arbeitslosigkeit"],
        "Saisonale Arbeitslosigkeit tritt auf, wenn bestimmte Branchen saisonalen Schwankungen unterliegen und Arbeitskräfte nur während bestimmter Jahreszeiten benötigt werden."
    ),
    (
        "Welche Maßnahme wird von Regierungen ergriffen, um die Wirtschaft zu stabilisieren und Wachstum zu fördern, indem sie ihre Ausgaben erhöhen oder die Steuern senken?",
        "Fiskalpolitik",
        ["Geldpolitik",
         "Fiskalpolitik",
         "Handelspolitik",
         "Steuerpolitik"],
        "Fiskalpolitik umfasst Maßnahmen, bei denen Regierungen ihre Ausgaben erhöhen oder die Steuern senken, um die Wirtschaft zu stabilisieren und Wachstum zu fördern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Theorie beschreibt die Tatsache, dass der Gesamtwert aller Ausgaben in einer Volkswirtschaft den Gesamtwert aller Einkommen widerspiegelt?",
        "Kreisprozess der Volkswirtschaft",
        ["Keynesianische Theorie",
         "Kreisprozess der Volkswirtschaft",
         "Angebotsorientierte Theorie",
         "Monetaristische Theorie"],
        "Der Kreisprozess der Volkswirtschaft beschreibt, wie der Gesamtwert aller Ausgaben in einer Volkswirtschaft den Gesamtwert aller Einkommen widerspiegelt, was den Fluss von Geld und Gütern innerhalb der Wirtschaft veranschaulicht."
    ),
    (
        "Welche Form der Unternehmensstruktur schützt die Eigentümer durch eine Haftungsbeschränkung auf ihre Einlagen?",
        "Aktiengesellschaft (AG)",
        ["Einzelunternehmen",
         "Partnerschaft",
         "Aktiengesellschaft (AG)",
         "Gesellschaft mit beschränkter Haftung (GmbH)"],
        "Eine Aktiengesellschaft (AG) schützt die Eigentümer durch eine Haftungsbeschränkung auf ihre Einlagen, was bedeutet, dass sie nur mit dem in die Aktiengesellschaft investierten Kapital haften."
    ),
    (
        "Welche Art von Inflation tritt auf, wenn die Nachfrage nach Gütern und Dienstleistungen das Angebot übersteigt und die Preise steigen?",
        "Nachfrageinflation",
        ["Kostendruckinflation",
         "Hyperinflation",
         "Deflation",
         "Nachfrageinflation"],
        "Nachfrageinflation tritt auf, wenn die Nachfrage nach Gütern und Dienstleistungen das Angebot übersteigt, was zu einem Anstieg der Preise führt."
    ),
    (
        "Welche Wirtschaftsform ist durch die freie Entfaltung des Marktes und minimalen staatlichen Eingriff gekennzeichnet?",
        "Kapitalismus",
        ["Sozialismus",
         "Kapitalismus",
         "Planwirtschaft",
         "Mischwirtschaft"],
        "Der Kapitalismus ist durch die freie Entfaltung des Marktes und minimalen staatlichen Eingriff gekennzeichnet, wobei der Marktmechanismus die Ressourcenverteilung steuert."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Marktstruktur beschreibt einen Markt, in dem es nur zwei Anbieter gibt, die die Preise beeinflussen können?",
        "Duopol",
        ["Oligopol",
         "Monopol",
         "Duopol",
         "Polypol"],
        "Ein Duopol ist eine Marktstruktur, bei der nur zwei Anbieter existieren, die die Preise und Marktbedingungen maßgeblich beeinflussen können."
    ),
    (
        "Welche ökonomische Theorie besagt, dass der Staat durch Ausgaben und Steuersenkungen die Wirtschaft ankurbeln kann?",
        "Keynesianische Wirtschaftstheorie",
        ["Monetaristische Theorie",
         "Keynesianische Wirtschaftstheorie",
         "Angebotsorientierte Theorie",
         "Klassische Wirtschaftstheorie"],
        "Die Keynesianische Wirtschaftstheorie besagt, dass der Staat durch erhöhte Ausgaben und Steuersenkungen die Wirtschaft ankurbeln kann, um Rezessionen zu bekämpfen."
    ),
    (
        "Welche Maßnahme kann von Zentralbanken ergriffen werden, um die Wirtschaft zu stimulieren, indem sie die Zinssätze senken?",
        "Geldpolitik",
        ["Fiskalpolitik",
         "Geldpolitik",
         "Handelspolitik",
         "Steuerpolitik"],
        "Die Geldpolitik umfasst Maßnahmen wie die Senkung der Zinssätze durch Zentralbanken, um die Wirtschaft zu stimulieren und die Geldmenge zu steuern."
    ),
    (
        "Welche wirtschaftliche Kennzahl misst die Veränderung der Preise für Rohstoffe und Produktionsgüter?",
        "Produzentenpreisindex (PPI)",
        ["Verbraucherpreisindex (VPI)",
         "Handelsbilanz",
         "Produzentenpreisindex (PPI)",
         "Bruttoinlandsprodukt (BIP)"],
        "Der Produzentenpreisindex (PPI) misst die Veränderung der Preise für Rohstoffe und Produktionsgüter, die von Unternehmen gekauft werden, bevor sie an die Verbraucher weitergegeben werden."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Arbeitslosigkeit entsteht durch natürliche Fluktuationen im Arbeitsmarkt, wie den Wechsel von einem Job zum anderen?",
        "Friktionelle Arbeitslosigkeit",
        ["Saisonale Arbeitslosigkeit",
         "Strukturelle Arbeitslosigkeit",
         "Friktionelle Arbeitslosigkeit",
         "Zyklische Arbeitslosigkeit"],
        "Friktionelle Arbeitslosigkeit entsteht durch natürliche Fluktuationen im Arbeitsmarkt, wie den Wechsel von einem Job zum anderen oder den Eintritt neuer Arbeitskräfte in den Arbeitsmarkt."
    ),
    (
        "Welche Theorie besagt, dass hohe Inflation durch eine übermäßige Geldmenge in der Wirtschaft verursacht wird?",
        "Monetarismus",
        ["Angebotsorientierte Theorie",
         "Monetarismus",
         "Keynesianische Theorie",
         "Klassische Theorie"],
        "Der Monetarismus besagt, dass hohe Inflation durch eine übermäßige Geldmenge in der Wirtschaft verursacht wird, und betont die Kontrolle der Geldmenge zur Inflationsbekämpfung."
    ),
    (
        "Welche Art von Steuer wird auf den Konsum von Waren und Dienstleistungen erhoben?",
        "Mehrwertsteuer (MwSt)",
        ["Kapitalertragsteuer",
         "Mehrwertsteuer (MwSt)",
         "Einkommensteuer",
         "Verbrauchsteuer"],
        "Die Mehrwertsteuer (MwSt) wird auf den Konsum von Waren und Dienstleistungen erhoben und ist eine wichtige Einnahmequelle für Staaten."
    ),
    (
        "Welche Art von Wirtschaftspolitik zielt darauf ab, durch direkte Eingriffe in den Markt oder durch Regulierung das wirtschaftliche Verhalten zu beeinflussen?",
        "Regulierungspolitik",
        ["Fiskalpolitik",
         "Geldpolitik",
         "Regulierungspolitik",
         "Handelspolitik"],
        "Regulierungspolitik zielt darauf ab, durch direkte Eingriffe in den Markt oder durch Regulierung das wirtschaftliche Verhalten von Unternehmen und Verbrauchern zu beeinflussen."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Form der Unternehmensstruktur bietet den Eigentümern den Vorteil der Haftungsbeschränkung auf ihre Einlagen, während sie gleichzeitig eine flexible Unternehmensführung ermöglicht?",
        "Gesellschaft mit beschränkter Haftung (GmbH)",
        ["Einzelunternehmen",
         "Gesellschaft mit beschränkter Haftung (GmbH)",
         "Aktiengesellschaft (AG)",
         "Genossenschaft"],
        "Die Gesellschaft mit beschränkter Haftung (GmbH) bietet den Vorteil der Haftungsbeschränkung auf die Einlagen der Gesellschafter und ermöglicht gleichzeitig eine flexible Unternehmensführung."
    ),
    (
        "Welche Art von Inflation tritt auf, wenn die Produktionskosten steigen und Unternehmen die höheren Kosten an die Verbraucher weitergeben?",
        "Kostendruckinflation",
        ["Nachfrageinflation",
         "Kostendruckinflation",
         "Deflation",
         "Hyperinflation"],
        "Kostendruckinflation tritt auf, wenn steigende Produktionskosten dazu führen, dass Unternehmen die höheren Kosten an die Verbraucher weitergeben, was zu einem Anstieg der Preise führt."
    ),
    (
        "Welche Wirtschaftsform kombiniert staatliche Planung mit Marktelementen und versucht, die Vorteile beider Systeme zu nutzen?",
        "Mischwirtschaft",
        ["Kapitalismus",
         "Planwirtschaft",
         "Sozialismus",
         "Mischwirtschaft"],
        "Eine Mischwirtschaft kombiniert staatliche Planung mit Marktelementen und versucht, die Vorteile beider Systeme zu nutzen, indem sie den Marktmechanismus mit staatlicher Steuerung vereint."
    ),
    (
        "Welche Theorie geht davon aus, dass der Staat durch eine aktive Rolle in der Wirtschaft die Vollbeschäftigung und wirtschaftliche Stabilität erreichen kann?",
        "Keynesianische Theorie",
        ["Keynesianische Theorie",
         "Monetaristische Theorie",
         "Angebotsorientierte Theorie",
         "Klassische Theorie"],
        "Die Keynesianische Theorie geht davon aus, dass der Staat durch eine aktive Rolle in der Wirtschaft, wie zum Beispiel durch staatliche Ausgaben und Steuerpolitik, Vollbeschäftigung und wirtschaftliche Stabilität erreichen kann."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Kennzahl misst den Gesamtwert der Exporte eines Landes abzüglich der Importe?",
        "Handelsbilanz",
        ["Bruttoinlandsprodukt (BIP)",
         "Verbraucherpreisindex (VPI)",
         "Handelsbilanz",
         "Bruttonationaleinkommen (BNE)"],
        "Die Handelsbilanz misst den Gesamtwert der Exporte eines Landes abzüglich der Importe und gibt Aufschluss über die Handelsbeziehungen eines Landes zu anderen Nationen."
    ),
    (
        "Welche Art von Marktstruktur beschreibt einen Markt, auf dem ein Unternehmen die gesamte Produktion und den gesamten Verkauf eines Produkts kontrolliert?",
        "Monopol",
        ["Duopol",
         "Monopol",
         "Oligopol",
         "Polypol"],
        "In einem Monopol kontrolliert ein einziges Unternehmen die gesamte Produktion und den gesamten Verkauf eines Produkts auf dem Markt, was ihm große Marktmacht verleiht."
    ),
        (
        "Welche Art von Marktstruktur ist durch einen einzigen Anbieter eines bestimmten Produkts oder einer Dienstleistung gekennzeichnet?",
        "Monopol",
        ["Monopol",
         "Polypol",
         "Oligopol",
         "Duopol"],
        "Ein Monopol liegt vor, wenn nur ein einzelner Anbieter ein bestimmtes Produkt oder eine Dienstleistung auf dem Markt anbietet, wodurch der Anbieter die Preise und das Angebot kontrollieren kann."
    ),
    (
        "Welche Art von Wirtschaftspolitik wird verwendet, um die Geldmenge und Zinssätze zu beeinflussen und somit die wirtschaftliche Stabilität zu gewährleisten?",
        "Geldpolitik",
        ["Fiskalpolitik",
         "Geldpolitik",
         "Handelspolitik",
         "Regulierungspolitik"],
        "Geldpolitik wird von Zentralbanken eingesetzt, um die Geldmenge und Zinssätze zu beeinflussen, um wirtschaftliche Stabilität und Preisstabilität zu gewährleisten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Theorie besagt, dass der Staat durch Steuererhöhungen und Staatsausgaben die Gesamtnachfrage ankurbeln kann?",
        "Keynesianische Wirtschaftstheorie",
        ["Monetaristische Theorie",
         "Angebotsorientierte Theorie",
         "Klassische Theorie",
         "Keynesianische Wirtschaftstheorie"],
        "Die Keynesianische Wirtschaftstheorie besagt, dass der Staat durch Steuererhöhungen und erhöhte Staatsausgaben die Gesamtnachfrage ankurbeln und so wirtschaftliche Aktivitäten fördern kann."
    ),
    (
        "Welche Art von Arbeitslosigkeit tritt auf, wenn Menschen zwischen verschiedenen Arbeitsplätzen oder Berufen wechseln?",
        "Friktionelle Arbeitslosigkeit",
        ["Strukturelle Arbeitslosigkeit",
         "Zyklische Arbeitslosigkeit",
         "Friktionelle Arbeitslosigkeit",
         "Saisonale Arbeitslosigkeit"],
        "Friktionelle Arbeitslosigkeit entsteht, wenn Menschen vorübergehend ohne Arbeit sind, während sie nach einem neuen Arbeitsplatz suchen oder zwischen verschiedenen Berufen wechseln."
    ),
    (
        "Welche Art von Unternehmensstruktur kombiniert Elemente von Kapitalgesellschaften und Personengesellschaften?",
        "Mischgesellschaft",
        ["Einzelunternehmen",
         "Mischgesellschaft",
         "Aktiengesellschaft (AG)",
         "Gesellschaft mit beschränkter Haftung (GmbH)"],
        "Eine Mischgesellschaft kombiniert Merkmale von Kapitalgesellschaften und Personengesellschaften, was eine flexible Struktur für die Unternehmensführung ermöglicht."
    ),
    (
        "Welche wirtschaftliche Kennzahl beschreibt den Gesamtwert aller im Inland produzierten Waren und Dienstleistungen innerhalb eines Jahres?",
        "Bruttoinlandsprodukt (BIP)",
        ["Verbraucherpreisindex (VPI)",
         "Bruttonationaleinkommen (BNE)",
         "Bruttoinlandsprodukt (BIP)",
         "Produzentenpreisindex (PPI)"],
        "Das Bruttoinlandsprodukt (BIP) gibt den Gesamtwert aller im Inland produzierten Waren und Dienstleistungen innerhalb eines Jahres an und dient als Maß für die wirtschaftliche Leistung eines Landes."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Form der Inflation tritt auf, wenn eine Erhöhung der Produktionskosten zu einem Anstieg der Preise führt?",
        "Kostendruckinflation",
        ["Deflation",
         "Nachfrageinflation",
         "Kostendruckinflation",
         "Hyperinflation"],
        "Kostendruckinflation entsteht, wenn steigende Produktionskosten, wie zum Beispiel für Rohstoffe oder Arbeitskräfte, zu einem Anstieg der Preise für Endprodukte führen."
    ),
    (
        "Welche Form der Unternehmensstruktur bietet den Vorteil einer Haftungsbeschränkung bei gleichzeitigem Zugang zu Kapital durch die Ausgabe von Aktien?",
        "Aktiengesellschaft (AG)",
        ["Gesellschaft mit beschränkter Haftung (GmbH)",
         "Genossenschaft",
         "Einzelunternehmen",
         "Aktiengesellschaft (AG)"],
        "Die Aktiengesellschaft (AG) bietet den Vorteil der Haftungsbeschränkung und ermöglicht es, Kapital durch die Ausgabe von Aktien zu beschaffen, was die Finanzierungsmöglichkeiten erweitert."
    ),
    (
        "Welche wirtschaftliche Kennzahl zeigt die Veränderung der Preise von Waren und Dienstleistungen auf der Ebene der Produzenten?",
        "Produzentenpreisindex (PPI)",
        ["Handelsbilanz",
         "Bruttoinlandsprodukt (BIP)",
         "Verbraucherpreisindex (VPI)",
         "Produzentenpreisindex (PPI)"],
        "Der Produzentenpreisindex (PPI) zeigt die Veränderung der Preise von Waren und Dienstleistungen auf der Ebene der Produzenten und ist ein Indikator für zukünftige Verbraucherpreisentwicklungen."
    ),
    (
        "Welche Theorie besagt, dass der internationale Handel zwischen Ländern den Wohlstand erhöht, wenn sich Länder auf ihre komparativen Vorteile spezialisieren?",
        "Komparativer Vorteil",
        ["Absoluter Vorteil",
         "Autarkie",
         "Komparativer Vorteil",
         "Klassische Theorie"],
        "Die Theorie des komparativen Vorteils besagt, dass Länder ihren Wohlstand maximieren können, indem sie sich auf die Produktion jener Güter spezialisieren, bei denen sie den geringsten Opportunitätskosten produzieren."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Arbeitslosigkeit tritt auf, wenn Arbeitnehmer aufgrund von saisonalen Schwankungen in der Nachfrage nach Arbeitskräften zeitweise arbeitslos sind?",
        "Saisonale Arbeitslosigkeit",
        ["Zyklische Arbeitslosigkeit",
         "Friktionelle Arbeitslosigkeit",
         "Strukturelle Arbeitslosigkeit",
         "Saisonale Arbeitslosigkeit"],
        "Saisonale Arbeitslosigkeit entsteht durch regelmäßige und vorhersehbare Schwankungen in der Nachfrage nach Arbeitskräften, die von saisonalen Faktoren beeinflusst werden."
    ),
    (
        "Welche Art von Marktmacht besitzt ein Unternehmen, wenn es nur mit wenigen anderen Unternehmen im Markt konkurriert?",
        "Oligopol",
        ["Monopol",
         "Polypol",
         "Duopol",
         "Oligopol"],
        "Ein Oligopol ist gekennzeichnet durch wenige Anbieter auf dem Markt, die einen großen Teil des Angebots kontrollieren und daher eine erhebliche Marktmacht besitzen."
    ),
    (
        "Welche Art von Inflation tritt auf, wenn die Nachfrage nach Gütern und Dienstleistungen das Angebot übersteigt?",
        "Nachfrageinflation",
        ["Kostendruckinflation",
         "Hyperinflation",
         "Deflation",
         "Nachfrageinflation"],
        "Nachfrageinflation tritt auf, wenn die Nachfrage nach Gütern und Dienstleistungen das Angebot übersteigt, was zu einem Anstieg der Preise führt."
    ),
    (
        "Welche Art von Wirtschaftsstruktur wird durch eine zentrale Planung und Kontrolle aller wirtschaftlichen Aktivitäten durch den Staat charakterisiert?",
        "Planwirtschaft",
        ["Mischwirtschaft",
         "Soziale Marktwirtschaft",
         "Kapitalismus",
         "Planwirtschaft"],
        "In einer Planwirtschaft übernimmt der Staat die zentrale Rolle bei der Planung und Kontrolle aller wirtschaftlichen Aktivitäten, was zu einer umfassenden Regulierung der Wirtschaft führt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Steuer wird auf den Verbrauch von Gütern und Dienstleistungen erhoben?",
        "Mehrwertsteuer (MwSt)",
        ["Kapitalertragsteuer",
         "Einkommensteuer",
         "Mehrwertsteuer (MwSt)",
         "Körperschaftsteuer"],
        "Die Mehrwertsteuer (MwSt) wird auf den Verbrauch von Gütern und Dienstleistungen erhoben und stellt eine wichtige Einnahmequelle für den Staat dar."
    ),
    (
        "Welche Form von Arbeitslosigkeit entsteht durch Missverhältnisse zwischen den Qualifikationen der Arbeitnehmer und den Anforderungen der offenen Stellen?",
        "Strukturelle Arbeitslosigkeit",
        ["Friktionelle Arbeitslosigkeit",
         "Saisonale Arbeitslosigkeit",
         "Zyklische Arbeitslosigkeit",
         "Strukturelle Arbeitslosigkeit"],
        "Strukturelle Arbeitslosigkeit tritt auf, wenn es Missverhältnisse zwischen den Qualifikationen der Arbeitnehmer und den Anforderungen der offenen Stellen gibt, oft bedingt durch technologische Veränderungen oder wirtschaftliche Umstrukturierungen."
    ),
    (
        "Welche Theorie besagt, dass das Angebot von Gütern und Dienstleistungen die Nachfrage schafft?",
        "Angebotsorientierte Wirtschaftstheorie",
        ["Nachfrageorientierte Wirtschaftstheorie",
         "Angebotsorientierte Wirtschaftstheorie",
         "Klassische Wirtschaftstheorie",
         "Keynesianische Theorie"],
        "Die angebotsorientierte Wirtschaftstheorie besagt, dass das Angebot von Gütern und Dienstleistungen selbst Nachfrage erzeugt, indem neue Produkte und Innovationen den Markt ankurbeln."
    ),
    (
        "Welche Art von Inflation wird durch einen plötzlichen Anstieg der Rohstoffpreise verursacht?",
        "Kostendruckinflation",
        ["Nachfrageinflation",
         "Kostendruckinflation",
         "Deflation",
         "Hyperinflation"],
        "Kostendruckinflation tritt auf, wenn plötzliche Anstiege bei den Rohstoffpreisen die Produktionskosten erhöhen, was zu höheren Preisen für Endprodukte führt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Unternehmensstruktur ermöglicht es den Gesellschaftern, ihre Haftung auf ihre Einlagen zu beschränken und gleichzeitig an den Unternehmensgewinnen teilzuhaben?",
        "Gesellschaft mit beschränkter Haftung (GmbH)",
        ["Einzelunternehmen",
         "Genossenschaft",
         "Gesellschaft mit beschränkter Haftung (GmbH)",
         "Aktiengesellschaft (AG)"],
        "Die Gesellschaft mit beschränkter Haftung (GmbH) ermöglicht den Gesellschaftern, ihre Haftung auf ihre Einlagen zu beschränken und gleichzeitig von den Unternehmensgewinnen zu profitieren."
    ),
    (
        "Welche wirtschaftliche Kennzahl misst den Anteil der Erwerbstätigen an der Bevölkerung in einem bestimmten Alter?",
        "Erwerbsquote",
        ["Arbeitslosenquote",
         "Beschäftigungsquote",
         "Erwerbsquote",
         "Inflationsrate"],
        "Die Erwerbsquote misst den Anteil der Erwerbstätigen an der Bevölkerung in einem bestimmten Alter und gibt Aufschluss über die Teilhabe am Arbeitsmarkt."
    ),
    (
        "Welche Art von Wirtschaftsordnung zeichnet sich durch einen hohen Grad an Marktfreiheit bei gleichzeitigem sozialen Schutz durch den Staat aus?",
        "Soziale Marktwirtschaft",
        ["Kapitalismus",
         "Soziale Marktwirtschaft",
         "Planwirtschaft",
         "Mischwirtschaft"],
        "Die soziale Marktwirtschaft kombiniert Marktfreiheit mit einem starken sozialen Schutz durch den Staat, um wirtschaftliche Effizienz mit sozialer Gerechtigkeit zu verbinden."
    ),
    (
        "Welche Art von Steuer ist direkt auf den Einkommenserwerb von Einzelpersonen und Unternehmen anwendbar?",
        "Einkommensteuer",
        ["Körperschaftsteuer",
         "Mehrwertsteuer (MwSt)",
         "Kapitalertragsteuer",
         "Einkommensteuer"],
        "Die Einkommensteuer wird direkt auf den Einkommenserwerb von Einzelpersonen und Unternehmen angewendet und ist eine zentrale Einnahmequelle für den Staat."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche wirtschaftliche Kennzahl zeigt die Differenz zwischen den Exporten und Importen eines Landes?",
        "Handelsbilanz",
        ["Bruttoinlandsprodukt (BIP)",
         "Bruttonationaleinkommen (BNE)",
         "Verbraucherpreisindex (VPI)",
         "Handelsbilanz"],
        "Die Handelsbilanz zeigt die Differenz zwischen den Exporten und Importen eines Landes und gibt Auskunft über die internationale Handelsbilanz des Landes."
    ),
    (
        "Welche Art von Unternehmensstruktur wird durch die Partnerschaft von zwei oder mehr Personen charakterisiert, die gemeinsam für Verbindlichkeiten haften?",
        "Personengesellschaft",
        ["Gesellschaft mit beschränkter Haftung (GmbH)",
         "Aktiengesellschaft (AG)",
         "Genossenschaft",
         "Personengesellschaft"],
        "Die Personengesellschaft ist durch die Partnerschaft von zwei oder mehr Personen gekennzeichnet, die gemeinsam für Verbindlichkeiten haften und gemeinsam an den Gewinnen teilnehmen."
    ),
        (
        "Welche Wirtschaftstheorie betont, dass langfristiges Wirtschaftswachstum durch Innovationsförderung und Angebotssteigerung erreicht werden kann?",
        "Angebotsorientierte Wirtschaftstheorie",
        ["Angebotsorientierte Wirtschaftstheorie",
         "Nachfrageorientierte Wirtschaftstheorie",
         "Keynesianische Wirtschaftstheorie",
         "Monetarismus"],
        "Die angebotsorientierte Wirtschaftstheorie besagt, dass langfristiges Wachstum durch Innovationsförderung, Steuererleichterungen und Angebotssteigerungen erzielt werden kann."
    ),
    (
        "Welche Art von Unternehmensstruktur ermöglicht es mehreren Personen, sich zusammenzuschließen und gemeinsam das Risiko und die Gewinne zu teilen?",
        "Personengesellschaft",
        ["Kapitalgesellschaft",
         "Genossenschaft",
         "Einzelunternehmen",
         "Personengesellschaft"],
        "In einer Personengesellschaft schließen sich mehrere Personen zusammen, um gemeinsam Risiken und Gewinne zu teilen, und haften persönlich für die Verbindlichkeiten des Unternehmens."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche wirtschaftliche Kennzahl gibt den durchschnittlichen Preis eines Warenkorbs von Konsumgütern und Dienstleistungen an, den Haushalte kaufen?",
        "Verbraucherpreisindex (VPI)",
        ["Handelsbilanz",
         "Verbraucherpreisindex (VPI)",
         "Produzentenpreisindex (PPI)",
         "Bruttoinlandsprodukt (BIP)"],
        "Der Verbraucherpreisindex (VPI) misst den durchschnittlichen Preis eines Warenkorbs von Konsumgütern und Dienstleistungen, den Haushalte kaufen, und ist ein wichtiger Indikator für die Inflation."
    ),
    (
        "Welche Art von Arbeitslosigkeit entsteht durch konjunkturelle Schwankungen in der Wirtschaft?",
        "Zyklische Arbeitslosigkeit",
        ["Saisonale Arbeitslosigkeit",
         "Friktionelle Arbeitslosigkeit",
         "Strukturelle Arbeitslosigkeit",
         "Zyklische Arbeitslosigkeit"],
        "Zyklische Arbeitslosigkeit tritt aufgrund von konjunkturellen Schwankungen auf, wenn wirtschaftliche Abschwünge zu einem Rückgang der Nachfrage nach Arbeitskräften führen."
    ),
    (
        "Welche Art von Marktstruktur beschreibt eine Situation, in der es viele Anbieter gibt, aber jeder Anbieter einen differenzierten Produkttyp anbietet?",
        "Monopolistische Konkurrenz",
        ["Polypol",
         "Oligopol",
         "Monopolistische Konkurrenz",
         "Duopol"],
        "Monopolistische Konkurrenz beschreibt eine Marktstruktur, in der viele Anbieter ähnliche, aber differenzierte Produkte anbieten, wodurch jeder Anbieter einen gewissen Einfluss auf den Preis hat."
    ),
    (
        "Welche Wirtschaftspolitik wird verwendet, um die Gesamtnachfrage durch Anpassungen der Staatsausgaben und der Steuern zu beeinflussen?",
        "Fiskalpolitik",
        ["Fiskalpolitik",
         "Geldpolitik",
         "Handelspolitik",
         "Wirtschaftspolitik"],
        "Fiskalpolitik umfasst die Anpassung der Staatsausgaben und Steuern, um die Gesamtnachfrage zu beeinflussen und wirtschaftliche Ziele wie Wachstum und Stabilität zu erreichen."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Unternehmensstruktur ermöglicht es dem Unternehmen, als eigene juristische Person zu agieren, die von den Gesellschaftern getrennt ist?",
        "Gesellschaft mit beschränkter Haftung (GmbH)",
        ["Gesellschaft mit beschränkter Haftung (GmbH)",
         "Einzelunternehmen",
         "Genossenschaft",
         "Personengesellschaft"],
        "Die Gesellschaft mit beschränkter Haftung (GmbH) ermöglicht es dem Unternehmen, als eigene juristische Person zu agieren, die von den Gesellschaftern getrennt ist und deren Haftung auf die Einlagen beschränkt ist."
    ),
    (
        "Welche Art von Inflation tritt auf, wenn die Inflation so stark ansteigt, dass sie zu erheblichen wirtschaftlichen Problemen führt?",
        "Hyperinflation",
        ["Kostendruckinflation",
         "Nachfrageinflation",
         "Deflation",
         "Hyperinflation"],
        "Hyperinflation ist eine extreme Form der Inflation, bei der die Preise für Waren und Dienstleistungen so schnell und stark steigen, dass sie erhebliche wirtschaftliche Probleme verursachen."
    ),
    (
        "Welche wirtschaftliche Theorie legt den Schwerpunkt auf die Bedeutung von Angebot und Produktionskapazität für das Wirtschaftswachstum?",
        "Angebotsorientierte Wirtschaftstheorie",
        ["Keynesianische Wirtschaftstheorie",
         "Angebotsorientierte Wirtschaftstheorie",
         "Monetaristische Theorie",
         "Nachfrageorientierte Theorie"],
        "Die angebotsorientierte Wirtschaftstheorie betont, dass das Wirtschaftswachstum durch Maßnahmen zur Erhöhung des Angebots und der Produktionskapazität gefördert werden kann."
    ),
    (
        "Welche Art von Wirtschaftspolitik fokussiert sich auf die Regulierung von Zinsen und Geldmenge, um wirtschaftliche Stabilität zu gewährleisten?",
        "Geldpolitik",
        ["Handelspolitik",
         "Geldpolitik",
         "Fiskalpolitik",
         "Wirtschaftspolitik"],
        "Die Geldpolitik befasst sich mit der Regulierung von Zinsen und Geldmenge durch Zentralbanken, um wirtschaftliche Stabilität und Preisstabilität zu fördern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche wirtschaftliche Kennzahl zeigt die Differenz zwischen den Exporten und Importen eines Landes?",
        "Handelsbilanz",
        ["Bruttoinlandsprodukt (BIP)",
         "Verbraucherpreisindex (VPI)",
         "Handelsbilanz",
         "Bruttonationaleinkommen (BNE)"],
        "Die Handelsbilanz zeigt die Differenz zwischen den Exporten und Importen eines Landes und gibt Auskunft über die internationale Handelsbilanz des Landes."
    ),
    (
        "Welche Art von Steuer wird auf den Gewinn von Unternehmen erhoben?",
        "Körperschaftsteuer",
        ["Einkommensteuer",
         "Kapitalertragsteuer",
         "Mehrwertsteuer (MwSt)",
         "Körperschaftsteuer"],
        "Die Körperschaftsteuer wird auf den Gewinn von Unternehmen erhoben und ist eine wesentliche Einnahmequelle für den Staat."
    ),
    (
        "Welche Art von Arbeitslosigkeit tritt aufgrund des kontinuierlichen Wandels in der Struktur der Wirtschaft auf?",
        "Strukturelle Arbeitslosigkeit",
        ["Saisonale Arbeitslosigkeit",
         "Friktionelle Arbeitslosigkeit",
         "Zyklische Arbeitslosigkeit",
         "Strukturelle Arbeitslosigkeit"],
        "Strukturelle Arbeitslosigkeit entsteht aufgrund des kontinuierlichen Wandels in der Wirtschaft, bei dem bestimmte Branchen schrumpfen und neue Branchen entstehen."
    ),
    (
        "Welche Art von Wirtschaftspolitik umfasst Maßnahmen wie Subventionen und Regulierung zur Beeinflussung der Wirtschaft?",
        "Regulierungspolitik",
        ["Handelspolitik",
         "Fiskalpolitik",
         "Regulierungspolitik",
         "Geldpolitik"],
        "Regulierungspolitik umfasst Maßnahmen wie Subventionen, Vorschriften und Regulierungen, die darauf abzielen, wirtschaftliche Aktivitäten zu beeinflussen und zu steuern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche wirtschaftliche Theorie betont die Bedeutung der Geldmenge als Hauptfaktor für das Wirtschaftswachstum und die Inflation?",
        "Monetarismus",
        ["Monetarismus",
         "Angebotsorientierte Theorie",
         "Keynesianische Theorie",
         "Nachfrageorientierte Theorie"],
        "Der Monetarismus betont, dass die Geldmenge eine zentrale Rolle bei der Bestimmung des Wirtschaftswachstums und der Inflation spielt und dass eine Kontrolle der Geldmenge erforderlich ist, um Preisstabilität zu gewährleisten."
    ),
    (
        "Welche Art von Marktstruktur ist durch eine Vielzahl von Anbietern und Produkten gekennzeichnet, bei denen jedes Unternehmen eine gewisse Marktmacht besitzt?",
        "Monopolistische Konkurrenz",
        ["Polypol",
         "Oligopol",
         "Monopolistische Konkurrenz",
         "Monopol"],
        "Monopolistische Konkurrenz ist durch viele Anbieter und Produkte gekennzeichnet, wobei jedes Unternehmen eine gewisse Marktmacht durch Produktdifferenzierung hat."
    ),
    (
        "Welche wirtschaftliche Kennzahl gibt den Gesamtwert aller im Inland produzierten Waren und Dienstleistungen innerhalb eines Jahres an?",
        "Bruttoinlandsprodukt (BIP)",
        ["Verbraucherpreisindex (VPI)",
         "Bruttoinlandsprodukt (BIP)",
         "Produzentenpreisindex (PPI)",
         "Handelsbilanz"],
        "Das Bruttoinlandsprodukt (BIP) gibt den Gesamtwert aller im Inland produzierten Waren und Dienstleistungen innerhalb eines Jahres an und ist ein wichtiges Maß für die wirtschaftliche Leistung eines Landes."
    ),
    (
        "Welche Art von Unternehmensstruktur erlaubt es, dass ein Unternehmen von seinen Eigentümern getrennt existiert und die Haftung auf die Einlagen beschränkt ist?",
        "Gesellschaft mit beschränkter Haftung (GmbH)",
        ["Genossenschaft",
         "Gesellschaft mit beschränkter Haftung (GmbH)",
         "Einzelunternehmen",
         "Aktiengesellschaft (AG)"],
        "Die Gesellschaft mit beschränkter Haftung (GmbH) erlaubt es einem Unternehmen, von seinen Eigentümern getrennt zu existieren, wobei die Haftung auf die Einlagen beschränkt ist."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche wirtschaftliche Kennzahl gibt an, wie sich die Preise für Produktionsfaktoren wie Rohstoffe und Arbeitskraft ändern?",
        "Produzentenpreisindex (PPI)",
        ["Verbraucherpreisindex (VPI)",
         "Handelsbilanz",
         "Bruttoinlandsprodukt (BIP)",
         "Produzentenpreisindex (PPI)"],
        "Der Produzentenpreisindex (PPI) misst die Preisänderungen von Produktionsfaktoren und gibt Aufschluss über die Preisentwicklung auf der Produzentenebene."
    ),
    (
        "Welche Art von Arbeitslosigkeit entsteht, wenn Personen kurzfristig arbeitslos sind, während sie einen neuen Job suchen?",
        "Friktionelle Arbeitslosigkeit",
        ["Strukturelle Arbeitslosigkeit",
         "Zyklische Arbeitslosigkeit",
         "Saisonale Arbeitslosigkeit",
         "Friktionelle Arbeitslosigkeit"],
        "Friktionelle Arbeitslosigkeit entsteht, wenn Personen kurzfristig arbeitslos sind, während sie zwischen Jobs wechseln oder nach einer neuen Anstellung suchen."
    ),
    (
        "Welche Art von Unternehmensstruktur ermöglicht eine gleichmäßige Verteilung der Gewinne und eine gleichwertige Teilnahme an der Unternehmensführung durch alle Mitglieder?",
        "Genossenschaft",
        ["Gesellschaft mit beschränkter Haftung (GmbH)",
         "Aktiengesellschaft (AG)",
         "Einzelunternehmen",
         "Genossenschaft"],
        "In einer Genossenschaft haben alle Mitglieder gleiches Stimmrecht und Anteil an den Gewinnen, und die Unternehmensführung ist demokratisch organisiert."
    ),
    (
        "Welche wirtschaftliche Theorie besagt, dass durch den freien Handel zwischen Ländern ein höheres Gesamtwohl erreicht werden kann?",
        "Freihandel",
        ["Protektionismus",
         "Freihandel",
         "Kollektivismus",
         "Autarkie"],
        "Die Theorie des Freihandels besagt, dass durch den freien Handel zwischen Ländern ein höheres Gesamtwohl erreicht werden kann, da Ressourcen effizienter genutzt und Wohlstand gesteigert wird."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Arbeitslosigkeit tritt aufgrund von Veränderungen in der Nachfrage nach spezifischen Arbeitskräften auf?",
        "Saisonale Arbeitslosigkeit",
        ["Zyklische Arbeitslosigkeit",
         "Strukturelle Arbeitslosigkeit",
         "Friktionelle Arbeitslosigkeit",
         "Saisonale Arbeitslosigkeit"],
        "Saisonale Arbeitslosigkeit tritt auf, wenn sich die Nachfrage nach Arbeitskräften aufgrund saisonaler Veränderungen, wie zum Beispiel in der Landwirtschaft oder im Einzelhandel, ändert."
    ),
        (
        "Welche Maßnahme zielt darauf ab, den Einfluss der Zentralbank auf die wirtschaftliche Stabilität durch Anpassung der Zinssätze zu verstärken?",
        "Geldpolitik",
        ["Fiskalpolitik",
         "Geldpolitik",
         "Regulierungspolitik",
         "Handelspolitik"],
        "Die Geldpolitik umfasst die Steuerung der Zinssätze und der Geldmenge durch die Zentralbank, um die wirtschaftliche Stabilität zu gewährleisten."
    ),
    (
        "Welche Wirtschaftsform ist durch staatliche Planung und Kontrolle der Produktionsmittel gekennzeichnet?",
        "Planwirtschaft",
        ["Kapitalismus",
         "Marktwirtschaft",
         "Planwirtschaft",
         "Mischwirtschaft"],
        "In einer Planwirtschaft übernimmt der Staat die zentrale Planung und Kontrolle über die Produktionsmittel und wirtschaftlichen Aktivitäten."
    ),
    (
        "Welche Theorie geht davon aus, dass die Anhäufung von Kapital und Investitionen die Grundlage für langfristiges Wirtschaftswachstum bildet?",
        "Kapitaltheorie",
        ["Angebotsorientierte Theorie",
         "Kapitaltheorie",
         "Monetarismus",
         "Keynesianische Theorie"],
        "Die Kapitaltheorie betont, dass Investitionen in Kapitalgüter und Anhäufung von Kapital entscheidend für langfristiges Wirtschaftswachstum sind."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche wirtschaftliche Kennzahl zeigt den Gesamtwert der Exporte minus den Gesamtwert der Importe eines Landes?",
        "Handelsbilanz",
        ["Verbraucherpreisindex (VPI)",
         "Handelsbilanz",
         "Bruttoinlandsprodukt (BIP)",
         "Produzentenpreisindex (PPI)"],
        "Die Handelsbilanz gibt den Unterschied zwischen dem Gesamtwert der Exporte und dem Gesamtwert der Importe eines Landes an."
    ),
    (
        "Welche Art von Marktstruktur beschreibt eine Situation, in der es nur einen Anbieter für ein Produkt oder eine Dienstleistung gibt?",
        "Monopol",
        ["Monopol",
         "Oligopol",
         "Polypol",
         "Monopolistische Konkurrenz"],
        "Ein Monopol liegt vor, wenn es nur einen einzigen Anbieter für ein Produkt oder eine Dienstleistung auf dem Markt gibt."
    ),
    (
        "Welche Theorie besagt, dass eine Erhöhung der Geldmenge in einer Volkswirtschaft kurzfristig zu einer Erhöhung der Beschäftigung führt?",
        "Monetarismus",
        ["Keynesianische Theorie",
         "Monetarismus",
         "Angebotsorientierte Theorie",
         "Klassische Theorie"],
        "Der Monetarismus argumentiert, dass eine Erhöhung der Geldmenge kurzfristig zu mehr Beschäftigung führen kann, jedoch langfristig zu Inflation führt."
    ),
    (
        "Welche Maßnahme wird verwendet, um die Gesamtwirtschaft durch Anpassungen der Staatsausgaben und Steuern zu stabilisieren?",
        "Fiskalpolitik",
        ["Regulierungspolitik",
         "Fiskalpolitik",
         "Geldpolitik",
         "Handelspolitik"],
        "Fiskalpolitik bezieht sich auf Anpassungen der Staatsausgaben und der Steuern, um wirtschaftliche Stabilität und Wachstum zu fördern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Form des Kapitalmarktes ist durch den Handel mit kurzfristigen, hochliquiden Finanzinstrumenten wie Schatzwechseln gekennzeichnet?",
        "Geldmarkt",
        ["Geldmarkt",
         "Kapitalmarkt",
         "Rohstoffmarkt",
         "Wertpapiermarkt"],
        "Der Geldmarkt ist der Teil des Kapitalmarkts, auf dem kurzfristige, hochliquide Finanzinstrumente wie Schatzwechsel und Termingelder gehandelt werden."
    ),
    (
        "Welche Art von Wirtschaftspolitik bezieht sich auf die Regulierung und Kontrolle des internationalen Handels durch Zölle und Importbeschränkungen?",
        "Handelspolitik",
        ["Regulierungspolitik",
         "Geldpolitik",
         "Handelspolitik",
         "Fiskalpolitik"],
        "Handelspolitik umfasst die Regulierung und Kontrolle des internationalen Handels durch Maßnahmen wie Zölle und Importbeschränkungen."
    ),
    (
        "Welche wirtschaftliche Theorie betont die Rolle der Angebotsseite und argumentiert, dass eine Senkung der Steuern zu einem Anstieg des Angebots und des Wachstums führt?",
        "Angebotsorientierte Wirtschaftstheorie",
        ["Nachfrageorientierte Theorie",
         "Klassische Theorie",
         "Angebotsorientierte Wirtschaftstheorie",
         "Monetarismus"],
        "Die angebotsorientierte Wirtschaftstheorie besagt, dass durch Steuersenkungen und Angebotsförderung das Wirtschaftswachstum gefördert wird."
    ),
    (
        "Welche Art von Marktmacht hat ein Unternehmen, wenn es mehrere Anbieter auf dem Markt gibt, aber der Markt von wenigen großen Unternehmen dominiert wird?",
        "Oligopol",
        ["Oligopol",
         "Polypol",
         "Monopol",
         "Monopolistische Konkurrenz"],
        "Ein Oligopol liegt vor, wenn der Markt von wenigen großen Unternehmen dominiert wird, die einen signifikanten Einfluss auf die Preise und den Markt haben."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche wirtschaftliche Kennzahl gibt an, wie stark sich die Preise für Rohstoffe und Investitionsgüter ändern?",
        "Produzentenpreisindex (PPI)",
        ["Bruttoinlandsprodukt (BIP)",
         "Handelsbilanz",
         "Produzentenpreisindex (PPI)",
         "Verbraucherpreisindex (VPI)"],
        "Der Produzentenpreisindex (PPI) misst die Preisänderungen von Rohstoffen und Investitionsgütern und gibt Hinweise auf zukünftige Preisentwicklungen auf der Verbraucher-ebene."
    ),
    (
        "Welche Art von Unternehmensstruktur ermöglicht es einem Einzelunternehmer, die volle Kontrolle über das Unternehmen zu haben und persönlich für alle Verbindlichkeiten zu haften?",
        "Einzelunternehmen",
        ["Gesellschaft mit beschränkter Haftung (GmbH)",
         "Einzelunternehmen",
         "Genossenschaft",
         "Aktiengesellschaft (AG)"],
        "Ein Einzelunternehmen ermöglicht es einem Einzelunternehmer, die volle Kontrolle über das Unternehmen zu haben und persönlich für alle Verbindlichkeiten zu haften."
    ),
    (
        "Welche Art von Steuer wird auf den Konsum von Waren und Dienstleistungen erhoben?",
        "Mehrwertsteuer (MwSt)",
        ["Kapitalertragsteuer",
         "Mehrwertsteuer (MwSt)",
         "Einkommensteuer",
         "Körperschaftsteuer"],
        "Die Mehrwertsteuer (MwSt) wird auf den Konsum von Waren und Dienstleistungen erhoben und ist eine wichtige Einnahmequelle für den Staat."
    ),
    (
        "Welche Art von Inflation tritt auf, wenn die Nachfrage nach Gütern und Dienstleistungen die Produktionskapazität übersteigt?",
        "Nachfrageinflation",
        ["Deflation",
         "Kostendruckinflation",
         "Hyperinflation",
         "Nachfrageinflation"],
        "Nachfrageinflation tritt auf, wenn die Nachfrage nach Gütern und Dienstleistungen die Produktionskapazität übersteigt und zu Preissteigerungen führt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Form der Unternehmensstruktur wird durch die Partnerschaft mehrerer Personen zur gemeinsamen Führung und Verantwortung für ein Unternehmen charakterisiert?",
        "Partnerschaft",
        ["Einzelunternehmen",
         "Aktiengesellschaft (AG)",
         "Genossenschaft",
         "Partnerschaft"],
        "Eine Partnerschaft zeichnet sich durch die gemeinsame Führung und Verantwortung mehrerer Personen für ein Unternehmen aus."
    ),
    (
        "Welche Art von Arbeitslosigkeit entsteht durch temporäre wirtschaftliche Schwankungen, wie zum Beispiel durch konjunkturelle Veränderungen?",
        "Zyklische Arbeitslosigkeit",
        ["Friktionelle Arbeitslosigkeit",
         "Zyklische Arbeitslosigkeit",
         "Strukturelle Arbeitslosigkeit",
         "Saisonale Arbeitslosigkeit"],
        "Zyklische Arbeitslosigkeit entsteht durch wirtschaftliche Schwankungen und konjunkturelle Veränderungen, die die Nachfrage nach Arbeitskräften beeinflussen."
    ),
    (
        "Welche Art von Unternehmensstruktur ermöglicht es, dass mehrere Personen die Verantwortung für das Unternehmen tragen und gemeinsam Entscheidungen treffen?",
        "Gesellschaft mit beschränkter Haftung (GmbH)",
        ["Aktiengesellschaft (AG)",
         "Genossenschaft",
         "Gesellschaft mit beschränkter Haftung (GmbH)",
         "Einzelunternehmen"],
        "Die Gesellschaft mit beschränkter Haftung (GmbH) erlaubt es mehreren Personen, gemeinsam ein Unternehmen zu führen und Verantwortung zu tragen."
    ),
    (
        "Welche wirtschaftliche Theorie argumentiert, dass der Markt durch den natürlichen Wettbewerb effizient reguliert wird und staatliche Eingriffe minimiert werden sollten?",
        "Laissez-faire",
        ["Laissez-faire",
         "Angebotsorientierte Theorie",
         "Keynesianische Theorie",
         "Monetarismus"],
        "Die Laissez-faire-Theorie besagt, dass der Markt durch natürlichen Wettbewerb effizient reguliert wird und dass staatliche Eingriffe minimiert werden sollten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche wirtschaftliche Kennzahl zeigt die Gesamtheit aller von Haushalten für Konsumausgaben aufgewendeten Mittel an?",
        "Konsumquote",
        ["Sparquote",
         "Investitionsquote",
         "Konsumquote",
         "Handelsbilanz"],
        "Die Konsumquote zeigt den Anteil des Einkommens an, der für Konsumausgaben verwendet wird, und ist ein wichtiger Indikator für das Verbraucherverhalten."
    ),
    (
        "Welche Art von Marktstruktur beschreibt einen Markt mit vielen Anbietern und vielen Nachfragern, wobei die Produkte weitgehend homogen sind?",
        "Polypol",
        ["Monopol",
         "Oligopol",
         "Monopolistische Konkurrenz",
         "Polypol"],
        "Im Polypol gibt es viele Anbieter und Nachfrager, und die Produkte sind weitgehend homogen, sodass kein einzelner Anbieter den Preis beeinflussen kann."
    ),
    (
        "Welche Art von Inflation tritt auf, wenn die Nachfrage nach Gütern und Dienstleistungen die Produktionskapazität übersteigt?",
        "Nachfrageinflation",
        ["Kostendruckinflation",
         "Deflation",
         "Hyperinflation",
         "Nachfrageinflation"],
        "Nachfrageinflation tritt auf, wenn die Nachfrage nach Gütern und Dienstleistungen die Produktionskapazität übersteigt und zu Preissteigerungen führt."
    ),
    (
        "Welche Form der Unternehmensstruktur wird durch die Partnerschaft mehrerer Personen zur gemeinsamen Führung und Verantwortung für ein Unternehmen charakterisiert?",
        "Partnerschaft",
        ["Einzelunternehmen",
         "Aktiengesellschaft (AG)",
         "Genossenschaft",
         "Partnerschaft"],
        "Eine Partnerschaft zeichnet sich durch die gemeinsame Führung und Verantwortung mehrerer Personen für ein Unternehmen aus."
    )
    
]
        
class PolWirtschaft(Screen):
    def __init__(self, frage, antwort, antwortmöglichkeiten, info_text, **kw):
        super(PolWirtschaft, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Wirtschaft"
        self.fragen = fragenwirt

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))

                
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()


class Fakten(Screen):
    def __init__(self, **kwargs):
        super(Fakten, self).__init__(**kwargs)
        self.lyt = FloatLayout()
        
        self.label = Label (text="Starten = Themenbereich wählen", size_hint=(None, None), size=(100,100), pos_hint={"center_x":0.5,"center_y":0.65})
        self.lyt.add_widget(self.label) 
        
        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100,100),
                           pos_hint={"center_x":0.15,"y":0}
                           )                   
        self.btn1.bind(on_press=self.wechselmenu) 
        self.lyt.add_widget(self.btn1)  
                       
        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0}
                           )
        self.btn2.bind(on_press=self.wechseltrp)
        self.lyt.add_widget(self.btn2)
      
        self.btn3 = Button (background_normal='profile.png', background_down='profile.png',
                            size_hint=(None, None),
                            size=(100,100),
                            pos_hint={"center_x":0.85,"y":0}
                            )
        self.btn3.bind(on_press=self.wechselprfl)
        self.lyt.add_widget(self.btn3)
        
        self.lyt.add_widget(Image(source="logo-1.png",
                                     size_hint=(None,None),
                                     size=(150,150),
                                     pos_hint={'center_x': 0.5, 'top': 1.0}))
        
        self.themen = Button(text="Themenbereiche", background_color = '#069AF3',
                              size_hint=(None, None), size=(150,100), pos_hint={"center_x":0.5, "center_y":0.45})
        self.themen.bind(on_press=self.topic_list)
        
        self.lyt.add_widget(self.themen)
        
        self.add_widget(self.lyt)
        
    def wechselmenu (self,instance):
        self.manager.current ='menu'
        
    def wechseltrp (self, instance):
        self.manager.current = 'trophe'
        
    def wechselprfl (self, instance):
        self.manager.current = 'profile'
        
    def topic_list(self, instance):
        popup_content = GridLayout(cols=1, spacing = 10, size_hint_y=None)
        popup_content.bind(minimum_height=popup_content.setter("height"))
        
        topics = ["Faszinierende Fakten","Geografische Fakten","Daten-Festtage","Preisträger"]
        
        for topic in topics:
         btn = Button (text=str(topic), size_hint_y=None, height=40)
         btn.bind(on_press=self.switch_to_topic)
         popup_content.add_widget(btn)
        
        self.popup = Popup(title= 'Themenbereich', size_hint=(None,None), size=(300, 400), auto_dismiss=True)
        self.popup.content = popup_content
        self.popup.open()
        
    def switch_to_topic(self, instance):
        self.popup.dismiss()
        topic_key = instance.text.lower().replace(' ', '_')
        questions = self.manager.fragen.get(topic_key, [])

        if questions:
            screen_name = f"fak_{topic_key}_0"
            if not self.manager.has_screen(screen_name):
                for i, frage in enumerate(questions):
                    text, antwort, antwortmöglichkeiten, info_text = frage
                    screen_name = f"fak_{topic_key}_{i}"
                    if topic_key == "faszinierende_fakten":
                        screen = MenschenFakten(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "geografische_fakten":
                        screen = GeograFakten(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "daten_festtage":
                        screen = DatenFest(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "preisträger":
                        screen = PreisFak(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    
                    self.manager.add_widget(screen)
            
            self.manager.current = f"fak_{topic_key}_0"
                          
fragenmenfakten =[
    
    ("Welches Organ ist das größte im menschlichen Körper?",
     "Haut",
     ["Leber", "Haut", "Gehirn", "Herz"],
     "Das größte Organ im menschlichen Körper ist die Haut. Sie bedeckt etwa 1,5 bis 2 Quadratmeter Fläche bei einem Erwachsenen und hat zahlreiche Funktionen, einschließlich Schutz, Temperaturregulation und Sinneswahrnehmung."),

    ("Wie viele Knochen hat ein erwachsener Mensch?",
     "206",
     ["230", "195", "208", "206"],
     "Ein erwachsener Mensch hat insgesamt 206 Knochen. Diese Anzahl ist bei Geburt höher, da Babys etwa 270 Knochen haben, die im Laufe der Zeit zusammenwachsen."),

    ("Welches Hormon wird hauptsächlich von der Bauchspeicheldrüse produziert und reguliert den Blutzuckerspiegel?",
     "Insulin",
     ["Insulin", "Adrenalin", "Serotonin", "Cortisol"],
     "Insulin ist das Hormon, das hauptsächlich von der Bauchspeicheldrüse produziert wird und eine entscheidende Rolle bei der Regulierung des Blutzuckerspiegels spielt. Es hilft den Zellen, Glukose aus dem Blut aufzunehmen."),

    ("Wie viele Sinne hat der Mensch traditionell?",
     "7",
     ["4", "5", "6", "7"],
     "Traditionell wird angenommen, dass der Mensch fünf Sinne hat: Sehen, Hören, Riechen, Schmecken und Tasten. Diese Sinne ermöglichen es uns, die Welt um uns herum wahrzunehmen."),

    ("Welche Blutgruppe ist als Universalspender bekannt?",
     "O",
     ["A", "B", "AB", "O"],
     "Die Blutgruppe O wird als Universalspender bezeichnet, da ihre roten Blutkörperchen keine Antigene enthalten, die eine Immunreaktion bei Empfängern mit anderen Blutgruppen auslösen könnten."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie lange dauert es durchschnittlich, bis sich Nahrung durch den gesamten Verdauungstrakt bewegt?",
     "24 bis 72 Stunden",
     ["6 bis 8 Stunden", "12 bis 24 Stunden", "24 bis 72 Stunden", "3 bis 5 Tage"],
     "Im Durchschnitt dauert es etwa 24 bis 72 Stunden, bis sich Nahrung durch den gesamten Verdauungstrakt bewegt. Dieser Zeitraum kann je nach Ernährung, Gesundheitszustand und individuellen Faktoren variieren."),

    ("Welcher Teil des Gehirns ist für das Gedächtnis zuständig?",
     "Hippocampus",
     ["Kleinhirn", "Thalamus", "Hypothalamus", "Hippocampus"],
     "Der Hippocampus ist der Teil des Gehirns, der hauptsächlich für das Gedächtnis und die räumliche Navigation zuständig ist. Er spielt eine wichtige Rolle bei der Konsolidierung von Kurzzeit- in Langzeitgedächtnis."),

    ("Wie viele Chromosomen hat ein menschlicher Körper normalerweise?",
     "46",
     ["42", "44", "46", "48"],
     "Ein menschlicher Körper hat normalerweise 46 Chromosomen, die in 23 Paare aufgeteilt sind. Diese Chromosomen tragen die genetische Information, die die Entwicklung und Funktion des Körpers steuert."),

    ("Welcher Muskel ist der stärkste im menschlichen Körper, bezogen auf seine Größe?",
     "Kaumuskel (Masseter)",
     ["Bizeps", "Zunge", "Herzmuskel", "Kaumuskel (Masseter)"],
     "Der Kaumuskel (Masseter) ist der stärkste Muskel im menschlichen Körper im Verhältnis zu seiner Größe. Er kann eine enorme Kraft auf die Kiefer ausüben, was beim Kauen von Nahrung hilft."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie viele Geschmacksknospen hat ein durchschnittlicher Mensch?",
     "10.000",
     ["500", "10.000", "5.000", "1.000"],
     "Ein durchschnittlicher Mensch hat etwa 10.000 Geschmacksknospen auf der Zunge und anderen Bereichen des Mundes. Diese Geschmacksknospen ermöglichen es uns, verschiedene Geschmacksrichtungen wie süß, sauer, salzig, bitter und umami zu erkennen."),

    ("Welche Substanz ist die häufigste im menschlichen Körper?",
     "Wasser",
     ["Kohlenhydrate", "Proteine", "Fett", "Wasser"],
     "Wasser ist die häufigste Substanz im menschlichen Körper und macht etwa 60% des Körpergewichts eines Erwachsenen aus. Es ist entscheidend für viele Körperfunktionen, einschließlich Temperaturregulation, Transport von Nährstoffen und Ausscheidung von Abfallstoffen."),

    ("Welche menschliche Zelle hat die längste Lebensdauer?",
     "Nervenzelle",
     ["Hautzelle", "Rote Blutkörperchen", "Nervenzelle", "Muskelzelle"],
     "Nervenzellen, insbesondere die Neuronen im Gehirn, haben die längste Lebensdauer im menschlichen Körper. Viele von ihnen können ein Leben lang halten, während andere Zellen regelmäßig erneuert werden."),

    ("Welcher Teil des Auges reguliert die Menge des einfallenden Lichts?",
     "Iris",
     ["Iris", "Linse", "Retina", "Hornhaut"],
     "Die Iris ist der Teil des Auges, der die Menge des einfallenden Lichts reguliert. Sie passt die Größe der Pupille an, um die Lichtmenge zu steuern, die auf die Netzhaut trifft."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie viele Liter Blut hat ein durchschnittlicher Erwachsener?",
     "5 bis 6 Liter",
     ["3 bis 4 Liter", "5 bis 6 Liter", "4 bis 5 Liter", "6 bis 7 Liter"],
     "Ein durchschnittlicher Erwachsener hat etwa 5 bis 6 Liter Blut im Körper. Das Blut spielt eine entscheidende Rolle beim Transport von Sauerstoff, Nährstoffen und Abfallprodukten zu und von den Zellen."),

    ("Welches Vitamin wird durch Sonnenlicht in der Haut produziert?",
     "Vitamin D",
     ["Vitamin D", "Vitamin B12", "Vitamin C", "Vitamin A "],
     "Vitamin D wird durch die Einwirkung von Sonnenlicht auf die Haut produziert. Es ist wichtig für die Knochengesundheit, da es die Aufnahme von Kalzium fördert."),

    ("Welcher Teil des Gehirns ist für die Koordination und das Gleichgewicht zuständig?",
     "Kleinhirn",
     ["Großhirn", "Kleinhirn", "Thalamus", "Hirnstamm"],
     "Das Kleinhirn ist für die Koordination von Bewegungen und das Gleichgewicht verantwortlich. Es befindet sich im hinteren Teil des Gehirns und arbeitet eng mit anderen Hirnregionen zusammen, um motorische Aktivitäten zu steuern."),

    ("Wie viele Atemzüge macht ein durchschnittlicher Mensch pro Tag?",
     "20.000 bis 25.000",
     ["10.000 bis 15.000", "15.000 bis 20.000", "20.000 bis 25.000", "25.000 bis 30.000"],
     "Ein durchschnittlicher Mensch macht etwa 20.000 bis 25.000 Atemzüge pro Tag. Atmen ist eine lebenswichtige Funktion, die den Körper mit Sauerstoff versorgt und Kohlendioxid entfernt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie viele Hauptgeschmacksrichtungen kann die menschliche Zunge erkennen?",
     "5",
     ["3", "4", "5", "6"],
     "Die menschliche Zunge kann fünf Hauptgeschmacksrichtungen erkennen: süß, sauer, salzig, bitter und umami. Jede dieser Geschmacksrichtungen wird durch spezifische Geschmacksrezeptoren auf der Zunge wahrgenommen."),

    ("Welcher Teil des Ohres ist für das Gleichgewicht verantwortlich?",
     "Vestibulärapparat",
     ["Trommelfell", "Gehörknöchelchen", "Cochlea", "Vestibulärapparat"],
     "Der Vestibulärapparat im Innenohr ist für das Gleichgewicht verantwortlich. Er besteht aus dem Vestibulum und den Bogengängen, die Informationen über die Position und Bewegung des Kopfes an das Gehirn weiterleiten."),

    ("Welche menschliche Zelle hat keine DNA?",
     "Rote Blutkörperchen",
     ["Nervenzelle", "Muskelzelle", "Hautzelle", "Rote Blutkörperchen"],
     "Rote Blutkörperchen (Erythrozyten) haben keine DNA. Diese Zellen verlieren ihren Zellkern und die DNA während der Reifung, um mehr Platz für Hämoglobin zu schaffen, das für den Sauerstofftransport verantwortlich ist."),
    
    (
    "Wie viele Muskeln hat der Mensch ungefähr im Körper?",
    "600",
    ["500", "600", "700", "800"],
    "Der menschliche Körper hat etwa 600 Muskeln. Diese Muskeln sind verantwortlich für Bewegung, Stabilität und viele andere Körperfunktionen."
),
(
    "Welches Organ produziert Insulin?",
    "Bauchspeicheldrüse",
    ["Leber", "Niere", "Bauchspeicheldrüse", "Nebennieren"],
    "Insulin wird von der Bauchspeicheldrüse produziert. Dieses Hormon spielt eine zentrale Rolle bei der Regulierung des Blutzuckerspiegels."
),
(
    "Wie viele Neuronen hat das menschliche Gehirn ungefähr?",
    "100 Milliarden",
    ["50 Milliarden", "75 Milliarden", "100 Milliarden", "150 Milliarden"],
    "Das menschliche Gehirn hat ungefähr 100 Milliarden Neuronen. Diese Nervenzellen sind für die Verarbeitung und Übertragung von Informationen im Gehirn zuständig."
),
(
    "Welches Hormon wird von der Schilddrüse produziert?",
    "Thyroxin",
    ["Adrenalin", "Thyroxin", "Insulin", "Serotonin"],
    "Das Hormon, das von der Schilddrüse produziert wird, ist Thyroxin. Es spielt eine wichtige Rolle bei der Regulierung des Stoffwechsels und des Energiestoffwechsels im Körper."
),
(
    "Wie lange dauert es, bis ein rotes Blutkörperchen seine Lebensdauer von ungefähr 120 Tagen erreicht?",
    "120 Tage",
    ["60 Tage", "90 Tage", "120 Tage", "150 Tage"],
    "Ein rotes Blutkörperchen hat eine Lebensdauer von etwa 120 Tagen. Nach dieser Zeit werden sie in der Milz und der Leber abgebaut."
),
(
    "Welcher Teil des Auges enthält die Lichtrezeptoren?",
    "Netzhaut",
    ["Hornhaut", "Linse", "Netzhaut", "Iris"],
    "Die Netzhaut enthält die Lichtrezeptoren, die Lichtsignale in elektrische Signale umwandeln, die dann an das Gehirn weitergeleitet werden."
),
(
    "Wie viele Zähne hat ein Erwachsener normalerweise?",
    "32",
    ["28", "30", "32", "34"],
    "Ein Erwachsener hat normalerweise 32 Zähne. Dazu gehören die Schneidezähne, Eckzähne, Backenzähne und die Weisheitszähne."
),
(
    "Welches Organ ist für die Produktion von Gallensäuren verantwortlich?",
    "Leber",
    ["Magen", "Leber", "Niere", "Pankreas"],
    "Die Leber ist für die Produktion von Gallensäuren verantwortlich. Diese werden in der Gallenblase gespeichert und helfen bei der Verdauung von Fetten."
),
(
    "Wie viele Liter Lymphflüssigkeit zirkulieren durchschnittlich täglich im menschlichen Körper?",
    "2 bis 4 Liter",
    ["1 bis 2 Liter", "2 bis 4 Liter", "4 bis 6 Liter", "6 bis 8 Liter"],
    "Im menschlichen Körper zirkulieren durchschnittlich 2 bis 4 Liter Lymphflüssigkeit täglich. Diese Flüssigkeit ist wichtig für das Immunsystem und den Abtransport von Abfallstoffen."
),
(
    "Welches Vitamin ist in besonders hohen Mengen in Karotten enthalten?",
    "Vitamin A",
    ["Vitamin B12", "Vitamin C", "Vitamin A", "Vitamin D"],
    "Karotten sind besonders reich an Vitamin A, das wichtig für das Sehvermögen, das Immunsystem und die Hautgesundheit ist."
),
(
    "Wie viele Atemzüge macht ein durchschnittlicher Mensch pro Minute?",
    "12 bis 20",
    ["8 bis 12", "12 bis 20", "20 bis 25", "25 bis 30"],
    "Ein durchschnittlicher Mensch macht etwa 12 bis 20 Atemzüge pro Minute. Diese Zahl kann je nach Aktivitätslevel und Gesundheitszustand variieren."
),
(
    "Welcher Bereich des Körpers hat die höchste Anzahl an Schweißdrüsen?",
    "Handflächen",
    ["Füße", "Rücken", "Handflächen", "Schädel"],
    "Die Handflächen und die Fußsohlen haben die höchste Anzahl an Schweißdrüsen im menschlichen Körper. Diese Drüsen sind wichtig für die Regulierung der Körpertemperatur."
),
(
    "Welches Hormon beeinflusst die Schlaf-Wach-Rhythmen?",
    "Melatonin",
    ["Serotonin", "Cortisol", "Melatonin", "Adrenalin"],
    "Melatonin ist das Hormon, das den Schlaf-Wach-Rhythmus beeinflusst. Es wird in der Nacht produziert und hilft, den Schlafzyklus zu regulieren."
),
(
    "Welches Organ filtert das Blut und produziert Urin?",
    "Nieren",
    ["Leber", "Lunge", "Nieren", "Herz"],
    "Die Nieren sind für das Filtern des Blutes und die Produktion von Urin verantwortlich. Sie spielen eine wesentliche Rolle bei der Regulierung des Wasserhaushalts und der Elektrolyte im Körper."
),
(
    "Wie viele Meter beträgt die durchschnittliche Entfernung, die die menschliche Stimme überträgt?",
    "1 bis 2 Meter",
    ["1 Meter", "2 Meter", "5 Meter", "10 Meter"],
    "Die durchschnittliche Entfernung, die die menschliche Stimme ohne Verstärkung überträgt, beträgt etwa 1 bis 2 Meter."
),
(
    "Welches System im Körper ist für den Transport von Nährstoffen und Sauerstoff verantwortlich?",
    "Kreislaufsystem",
    ["Verdauungssystem", "Atmungssystem", "Nervensystem", "Kreislaufsystem"],
    "Das Kreislaufsystem ist für den Transport von Nährstoffen, Sauerstoff und Abfallprodukten durch den Körper verantwortlich. Es umfasst das Herz und die Blutgefäße."
),
(
    "Wie viele Knochen hat ein Neugeborenes?",
    "270",
    ["250", "270", "300", "320"],
    "Ein Neugeborenes hat etwa 270 Knochen. Im Laufe des Lebens verschmelzen einige dieser Knochen, sodass Erwachsene typischerweise 206 Knochen haben."
),
(
    "Welches Hormon hilft beim Aufbau von Muskeln?",
    "Testosteron",
    ["Insulin", "Adrenalin", "Testosteron", "Thyroxin"],
    "Testosteron ist ein Hormon, das beim Aufbau von Muskeln hilft. Es spielt eine wichtige Rolle bei der Muskelentwicklung und der Steigerung der Muskelmasse."
),
(
    "Welches Organ ist für die Produktion von Verdauungssäften verantwortlich?",
    "Magen",
    ["Leber", "Pankreas", "Magen", "Darm"],
    "Der Magen ist für die Produktion von Verdauungssäften verantwortlich, die dabei helfen, Nahrung zu zersetzen und die Verdauung zu unterstützen."
),
(
    "Wie viele Hauptarten von Hautzellen gibt es?",
    "3",
    ["2", "3", "4", "5"],
    "Es gibt drei Hauptarten von Hautzellen: Keratinozyten, Melanozyten und Langerhans-Zellen. Diese Zellen haben verschiedene Funktionen zum Schutz und zur Aufrechterhaltung der Haut."
),
(
    "Welches Element ist das Hauptbestandteil der menschlichen Knochen?",
    "Kalzium",
    ["Magnesium", "Kalzium", "Eisen", "Phosphor"],
    "Kalzium ist das Hauptbestandteil der menschlichen Knochen. Es ist entscheidend für die Knochendichte und -stärke."
),
(
    "Welches Organ produziert das Hormon Adrenalin?",
    "Nebennieren",
    ["Hypophyse", "Nebennieren", "Schilddrüse", "Bauchspeicheldrüse"],
    "Adrenalin wird in den Nebennieren produziert. Es ist ein Hormon, das den Körper in Stresssituationen auf „Kampf oder Flucht“ vorbereitet."
),
(
    "Wie viele Prozent des menschlichen Körpers bestehen aus Wasser?",
    "60%",
    ["50%", "55%", "60%", "65%"],
    "Etwa 60% des menschlichen Körpers bestehen aus Wasser. Diese Menge kann je nach Alter, Geschlecht und Körperzusammensetzung variieren."
),
(
    "Welcher Teil des Nervensystems ist für die unwillkürlichen Funktionen zuständig?",
    "Autonomes Nervensystem",
    ["Zentrales Nervensystem", "Somatisches Nervensystem", "Autonomes Nervensystem", "Peripheres Nervensystem"],
    "Das autonome Nervensystem ist für unwillkürliche Funktionen wie Herzschlag, Verdauung und Atmung zuständig. Es reguliert Prozesse, die nicht unter bewusster Kontrolle stehen."
),
(
    "Welches Hormon wird für den Wachstumsprozess im Kindesalter produziert?",
    "Wachstums Hormon",
    ["Adrenalin", "Wachstums Hormon", "Thyroxin", "Testosteron"],
    "Das Wachstumshormon, das auch als Somatotropin bekannt ist, wird in der Hypophyse produziert und spielt eine zentrale Rolle beim Wachstum im Kindesalter."
),
(
    "Wie viele Muskeln sind für das Augenlid verantwortlich?",
    "3",
    ["2", "3", "4", "5"],
    "Drei Muskeln sind für die Bewegung des Augenlids verantwortlich: der obere Augenlidmuskel, der untere Augenlidmuskel und der Musculus orbicularis oculi."
),
(
    "Welches Organ hat die Aufgabe, Gifte aus dem Blut zu filtern?",
    "Leber",
    ["Niere", "Leber", "Lunge", "Darm"],
    "Die Leber ist das Organ, das Gifte aus dem Blut filtert. Sie entgiftet den Körper durch Umwandlung schädlicher Substanzen in weniger schädliche Formen."
),
(
    "Welches Hormon wird im Gehirn produziert und reguliert den Schlaf-Wach-Rhythmus?",
    "Melatonin",
    ["Adrenalin", "Melatonin", "Serotonin", "Cortisol"],
    "Melatonin wird im Gehirn produziert und ist entscheidend für die Regulierung des Schlaf-Wach-Rhythmus. Es wird in der Nacht freigesetzt und beeinflusst das Schlafverhalten."
),
(
    "Wie viele Stunden Schlaf benötigt ein Erwachsener im Durchschnitt pro Nacht?",
    "7 bis 9 Stunden",
    ["5 bis 7 Stunden", "6 bis 8 Stunden", "7 bis 9 Stunden", "8 bis 10 Stunden"],
    "Ein Erwachsener benötigt im Durchschnitt 7 bis 9 Stunden Schlaf pro Nacht, um sich erholt und gesund zu fühlen."
),
(
    "Welches Hormon beeinflusst den Stresspegel des Körpers?",
    "Cortisol",
    ["Insulin", "Adrenalin", "Cortisol", "Serotonin"],
    "Cortisol ist das Hormon, das den Stresspegel im Körper beeinflusst. Es wird in den Nebennieren produziert und hilft, den Körper auf Stresssituationen vorzubereiten."
),
(
    "Welcher Teil des menschlichen Gehirns ist für die Sprachproduktion zuständig?",
    "Broca-Areal",
    ["Wernicke-Areal", "Hippocampus", "Broca-Areal", "Thalamus"],
    "Das Broca-Areal ist der Teil des Gehirns, der für die Sprachproduktion zuständig ist. Es befindet sich im Frontallappen und ist entscheidend für das Sprechen und die Sprachverarbeitung."
),
(
    "Wie lange dauert es, bis die Hautzellen sich regenerieren?",
    "4 bis 6 Wochen",
    ["2 bis 4 Wochen", "4 bis 6 Wochen", "6 bis 8 Wochen", "8 bis 10 Wochen"],
    "Die Hautzellen regenerieren sich etwa alle 4 bis 6 Wochen. Dieser Prozess hilft, die Haut zu erneuern und zu reparieren."
),
(
    "Welcher Teil des Gehirns ist für die Steuerung der Bewegung verantwortlich?",
    "Motorischer Kortex",
    ["Sensorischer Kortex", "Kleinhirn", "Hippocampus", "Motorischer Kortex"],
    "Der motorische Kortex ist der Bereich des Gehirns, der die Bewegungen des Körpers steuert. Er sendet Signale an die Muskeln, um Bewegungen auszuführen."
),
(
    "Wie viele Liter Lymphe enthält das Lymphsystem eines Erwachsenen durchschnittlich?",
    "2 bis 3 Liter",
    ["1 bis 2 Liter", "2 bis 3 Liter", "3 bis 4 Liter", "4 bis 5 Liter"],
    "Das Lymphsystem eines Erwachsenen enthält durchschnittlich 2 bis 3 Liter Lymphe, die für das Immunsystem und den Abtransport von Abfallstoffen wichtig ist."
),
(
    "Welches Organ produziert die meisten roten Blutkörperchen?",
    "Knochenmark",
    ["Leber", "Milz", "Knochenmark", "Niere"],
    "Das Knochenmark ist das Organ, das die meisten roten Blutkörperchen produziert. Es ist für die Bildung aller Blutzellen verantwortlich."
),
(
    "Wie viele verschiedene Arten von Geschmacksknospen gibt es auf der Zunge?",
    "4",
    ["3", "4", "5", "6"],
    "Es gibt vier verschiedene Arten von Geschmacksknospen auf der Zunge: die Papillen, die für die Wahrnehmung der verschiedenen Geschmacksrichtungen verantwortlich sind."
),
(
    "Welches Enzym hilft bei der Verdauung von Kohlenhydraten?",
    "Amylase",
    ["Pepsin", "Lipase", "Amylase", "Lactase"],
    "Amylase ist das Enzym, das bei der Verdauung von Kohlenhydraten hilft. Es wird im Speichel und in der Bauchspeicheldrüse produziert und beginnt die Aufspaltung von Stärke."
),
(
    "Wie viel Prozent des menschlichen Körpers besteht aus Fett?",
    "15 bis 30%",
    ["10 bis 20%", "15 bis 30%", "25 bis 35%", "30 bis 40%"],
    "Der Anteil des Körperfetts im menschlichen Körper liegt normalerweise zwischen 15 und 30%, abhängig von Alter, Geschlecht und Fitnesslevel."
),
(
    "Welcher Muskel ist für das Schließen des Mundes verantwortlich?",
    "Kaumuskel",
    ["Zungenmuskel", "Kinnmuskel", "Kaumuskel", "Schläfenmuskel"],
    "Der Kaumuskel, auch Masseter genannt, ist für das Schließen des Mundes verantwortlich. Er ist einer der stärksten Muskeln im menschlichen Körper."
),
(
    "Wie viele Hauptteile hat das menschliche Herz?",
    "4",
    ["2", "3", "4", "5"],
    "Das menschliche Herz hat vier Hauptteile: zwei Vorhöhlen und zwei Kammern. Diese vier Kammern sind für den Blutfluss durch das Herz verantwortlich."
),
(
    "Welches Organ produziert die Verdauungssäfte für die Fette?",
    "Bauchspeicheldrüse",
    ["Leber", "Magen", "Dünndarm", "Bauchspeicheldrüse"],
    "Die Bauchspeicheldrüse produziert Verdauungssäfte, die Fette, Proteine und Kohlenhydrate im Dünndarm abbauen. Diese Enzyme sind entscheidend für die Verdauung."
),
(
    "Welches Vitamin ist wichtig für die Bildung von roten Blutkörperchen?",
    "Vitamin B12",
    ["Vitamin A", "Vitamin C", "Vitamin D", "Vitamin B12"],
    "Vitamin B12 ist wichtig für die Bildung von roten Blutkörperchen. Ein Mangel an Vitamin B12 kann zu Anämie und anderen gesundheitlichen Problemen führen."
),
(
    "Wie viele Tage dauert die Erneuerung der roten Blutkörperchen?",
    "120 Tage",
    ["30 Tage", "60 Tage", "90 Tage", "120 Tage"],
    "Rote Blutkörperchen haben eine Lebensdauer von etwa 120 Tagen. Nach dieser Zeit werden sie in der Milz und der Leber abgebaut und durch neue ersetzt."
),
(
    "Welches Organ im Körper hat die höchste Regenerationsfähigkeit?",
    "Leber",
    ["Haut", "Nieren", "Leber", "Lunge"],
    "Die Leber hat die höchste Regenerationsfähigkeit im menschlichen Körper. Sie kann sich nach Schäden oder einer teilweisen Entfernung wieder vollständig regenerieren."
),
(
    "Welches Hormon ist für die Regulierung des Wasserhaushalts im Körper zuständig?",
    "Antidiuretisches Hormon (ADH)",
    ["Adrenalin", "Cortisol", "Antidiuretisches Hormon (ADH)", "Insulin"],
    "Das Antidiuretische Hormon (ADH), auch Vasopressin genannt, ist für die Regulierung des Wasserhaushalts im Körper verantwortlich. Es wird von der Hypophyse produziert."
),
(
    "Wie viele Prozent der menschlichen Energie werden durch die Atmung bereitgestellt?",
    "70%",
    ["50%", "60%", "70%", "80%"],
    "Etwa 70% der menschlichen Energie wird durch die Atmung bereitgestellt. Die Atmung versorgt den Körper mit Sauerstoff, der für die Energieproduktion in den Zellen erforderlich ist."
),
(
    "Welcher Teil des Auges ist für das Scharfsehen zuständig?",
    "Netzhaut",
    ["Hornhaut", "Netzhaut", "Glaskörper", "Linse"],
    "Die Netzhaut ist der Teil des Auges, der für das Scharfsehen zuständig ist. Sie enthält lichtempfindliche Zellen, die Licht in elektrische Signale umwandeln, die dann zum Gehirn weitergeleitet werden."
),
(
    "Welches Organ ist am wichtigsten für die Regulation des Blutzuckerspiegels?",
    "Bauchspeicheldrüse",
    ["Leber", "Niere", "Bauchspeicheldrüse", "Herz"],
    "Die Bauchspeicheldrüse ist das Organ, das am wichtigsten für die Regulation des Blutzuckerspiegels ist. Sie produziert Insulin und Glukagon, die den Blutzuckerspiegel regulieren."
),
(
    "Wie viele Milliliter beträgt das durchschnittliche Blutvolumen eines Erwachsenen?",
    "5000",
    ["3000", "4000", "5000", "6000"],
    "Das durchschnittliche Blutvolumen eines Erwachsenen beträgt etwa 5000 Milliliter. Es variiert je nach Körpergröße und Gewicht."
),
(
    "Wie viele Sinne hat ein Neugeborenes in den ersten Wochen seines Lebens voll entwickelt?",
    "2",
    ["1", "2", "3", "4"],
    "Ein Neugeborenes hat in den ersten Wochen seines Lebens zwei Sinne vollständig entwickelt: das Hören und das Riechen. Die anderen Sinne entwickeln sich erst allmählich."
),
(
    "Wie viel Blut hat ein Neugeborenes ungefähr?",
    "300 bis 400 Milliliter",
    ["200 bis 300 Milliliter", "300 bis 400 Milliliter", "400 bis 500 Milliliter", "500 bis 600 Milliliter"],
    "Ein Neugeborenes hat ungefähr 300 bis 400 Milliliter Blut. Dies ist etwa ein Sechstel des Blutvolumens eines Erwachsenen."
),
(
    "Welches Hormon wird während der Schwangerschaft von der Plazenta produziert?",
    "HCG",
    ["Progesteron", "Östrogen", "HCG", "Insulin"],
    "HCG (humanes Choriongonadotropin) wird während der Schwangerschaft von der Plazenta produziert. Es ist wichtig für die Aufrechterhaltung der Schwangerschaft und kann in Schwangerschaftstests nachgewiesen werden."
),
(
    "Welches Organ ist für die Produktion von Gallenflüssigkeit verantwortlich?",
    "Leber",
    ["Gallenblase", "Leber", "Bauchspeicheldrüse", "Magen"],
    "Die Leber produziert die Gallenflüssigkeit, die in der Gallenblase gespeichert und bei Bedarf in den Dünndarm abgegeben wird, um Fette zu emulgieren und die Verdauung zu unterstützen."
),
(
    "Welcher Teil des Gehirns ist für die Emotionen zuständig?",
    "Limbisches System",
    ["Hippocampus", "Thalamus", "Limbisches System", "Kleinhirn"],
    "Das limbische System ist der Teil des Gehirns, der für die Verarbeitung von Emotionen zuständig ist. Es umfasst Strukturen wie die Amygdala und den Hippocampus."
),
(
    "Wie lange dauert die Verdauung von festen Nahrungsmitteln im Magen durchschnittlich?",
    "2 bis 4 Stunden",
    ["1 bis 2 Stunden", "2 bis 4 Stunden", "4 bis 6 Stunden", "6 bis 8 Stunden"],
    "Die Verdauung von festen Nahrungsmitteln im Magen dauert durchschnittlich 2 bis 4 Stunden, abhängig von der Art der Nahrung und anderen Faktoren."
),
(
    "Wie viele Atemzüge macht ein Säugling pro Minute in der Regel?",
    "30 bis 60",
    ["20 bis 40", "30 bis 60", "40 bis 70", "50 bis 80"],
    "Ein Säugling macht in der Regel etwa 30 bis 60 Atemzüge pro Minute. Diese Rate ist höher als bei Erwachsenen, deren Atemfrequenz etwa 12 bis 20 Atemzüge pro Minute beträgt."
),
(
    "Wie nennt man die Studie der Gelenke im menschlichen Körper?",
    "Arthrologie",
    ["Orthopädie", "Rheumatologie", "Kinesiologie", "Arthrologie"],
    "Die Studie der Gelenke im menschlichen Körper wird als Arthrologie bezeichnet. Sie befasst sich mit der Struktur, Funktion und Erkrankungen der Gelenke."
),
(
    "Welches Organ hat die Fähigkeit, selbst Blut zu produzieren?",
    "Knochenmark",
    ["Leber", "Milz", "Niere", "Knochenmark"],
    "Das Knochenmark hat die Fähigkeit, selbst Blut zu produzieren. Es ist für die Bildung der Blutzellen, einschließlich roter und weißer Blutkörperchen, sowie Blutplättchen verantwortlich."
),
(
    "Wie viele unterschiedliche Arten von Zellen gibt es im menschlichen Körper?",
    "200",
    ["100", "150", "200", "250"],
    "Es gibt etwa 200 verschiedene Arten von Zellen im menschlichen Körper. Diese Zellen erfüllen verschiedene Funktionen und sind in verschiedenen Geweben und Organen verteilt."
),
(
    "Wie viele Nervenenden sind in der menschlichen Haut ungefähr vorhanden?",
    "5 Millionen",
    ["1 Million", "2 Millionen", "3 Millionen", "5 Millionen"],
    "Die menschliche Haut enthält ungefähr 5 Millionen Nervenenden. Diese Nervenenden sind für die Wahrnehmung von Berührung, Druck, Temperatur und Schmerz verantwortlich."
),
(
    "Welches Organ hat die größte Kapazität zur Speicherung von Nährstoffen?",
    "Leber",
    ["Nieren", "Lunge", "Leber", "Gallenblase"],
    "Die Leber hat die größte Kapazität zur Speicherung von Nährstoffen. Sie speichert Glykogen, Vitamine und Mineralstoffe und gibt diese bei Bedarf an den Körper ab."
),
(
    "Welches Hormon ist für die Regulation des Kalziumspiegels im Blut verantwortlich?",
    "Parathormon",
    ["Östrogen", "Testosteron", "Parathormon", "Insulin"],
    "Parathormon ist für die Regulation des Kalziumspiegels im Blut verantwortlich. Es wird von den Nebenschilddrüsen produziert und reguliert die Kalziumaufnahme aus dem Darm und die Kalziumfreisetzung aus den Knochen."
),
(
    "Wie viele Muskeln sind im menschlichen Gesicht für die Mimik verantwortlich?",
    "43",
    ["30", "35", "43", "50"],
    "Im menschlichen Gesicht gibt es etwa 43 Muskeln, die für die Mimik verantwortlich sind. Diese Muskeln ermöglichen eine Vielzahl von Gesichtsausdrücken."
),
(
    "Welches Element ist in der menschlichen Haut für die Bräunung verantwortlich?",
    "Melanin",
    ["Kollagen", "Keratin", "Melanin", "Elastin"],
    "Melanin ist das Element in der menschlichen Haut, das für die Bräunung verantwortlich ist. Es schützt die Haut vor UV-Strahlen und gibt der Haut ihre Farbe."
),
(
    "Welches Organ produziert Hormone, die den Stoffwechsel regulieren?",
    "Schilddrüse",
    ["Leber", "Nieren", "Schilddrüse", "Bauchspeicheldrüse"],
    "Die Schilddrüse produziert Hormone wie Thyroxin und Triiodthyronin, die den Stoffwechsel regulieren und verschiedene Körperfunktionen beeinflussen."
),
(
    "Wie lange dauert die Regeneration der Hautzellen nach einer Verletzung?",
    "1 bis 3 Wochen",
    ["1 Woche", "1 bis 2 Wochen", "2 bis 4 Wochen", "1 bis 3 Wochen"],
    "Die Regeneration der Hautzellen nach einer Verletzung dauert in der Regel 1 bis 3 Wochen, abhängig von der Schwere der Verletzung und der individuellen Heilungsrate."
),
(
    "Wie viele Liter Speichel produziert ein Mensch durchschnittlich pro Tag?",
    "1 bis 1,5 Liter",
    ["0,5 bis 1 Liter", "1 bis 1,5 Liter", "1,5 bis 2 Liter", "2 bis 2,5 Liter"],
    "Ein Mensch produziert durchschnittlich 1 bis 1,5 Liter Speichel pro Tag. Speichel spielt eine wichtige Rolle bei der Verdauung und dem Schutz der Mundschleimhaut."
),
(
    "Welcher Bereich des Gehirns ist für die Entscheidungsfindung verantwortlich?",
    "Frontallappen",
    ["Hinterhauptslappen", "Temporallappen", "Parietallappen", "Frontallappen"],
    "Der Frontallappen ist der Bereich des Gehirns, der für die Entscheidungsfindung, Planung und soziale Interaktionen verantwortlich ist. Er befindet sich im vorderen Teil des Gehirns."
)
]

class MenschenFakten(Screen):
    def __init__(self,  frage, antwort, antwortmöglichkeiten, info_text, **kw):
        super(MenschenFakten, self).__init__(**kw)    
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Menschenfaszinierende Fakten"
        self.fragen = fragenmenfakten

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))

            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

   
        
fragengeofak = [
    
    ("Welches ist das größte Land der Welt nach Fläche?",
     "Russland",
     ["Kanada", "China", "USA", "Russland"],
     "Das größte Land der Welt nach Fläche ist Russland. Mit einer Fläche von etwa 17,1 Millionen Quadratkilometern erstreckt es sich über Europa und Asien."),

    ("Welcher Fluss ist der längste der Welt?",
     "Nil",
     ["Amazonas", "Nil", "Mississippi", "Jangtse"],
     "Der längste Fluss der Welt ist der Nil. Er fließt über etwa 6.650 Kilometer durch nordöstliches Afrika und mündet ins Mittelmeer."),

    ("Welcher See ist der größte Süßwassersee der Welt nach Fläche?",
     "Oberer See",
     ["Victoriasee", "Oberer See", "Kaspisches Meer", "Baikalsee"],
     "Der größte Süßwassersee der Welt nach Fläche ist der Obere See in Nordamerika. Er ist Teil der Großen Seen und hat eine Fläche von etwa 82.100 Quadratkilometern."),

    ("Welcher Gebirgszug ist der längste der Welt?",
     "Anden",
     ["Rocky Mountains", "Himalaya", "Alpen", "Anden"],
     "Der längste Gebirgszug der Welt sind die Anden in Südamerika. Sie erstrecken sich über etwa 7.000 Kilometer entlang der Westküste des Kontinents."),

    ("Welche Wüste ist die größte der Welt?",
     "Sahara",
     ["Gobi", "Sahara", "Kalahari", "Antarktische Wüste"],
     "Die größte Wüste der Welt ist die Sahara in Nordafrika. Sie umfasst eine Fläche von etwa 9,2 Millionen Quadratkilometern."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welches ist das bevölkerungsreichste Land der Welt?",
     "China",
     ["Indien", "USA", "Indonesien", "China"],
     "Das bevölkerungsreichste Land der Welt ist China, mit einer Bevölkerung von über 1,4 Milliarden Menschen."),

    ("Welcher Ozean ist der tiefste der Welt?",
     "Pazifischer Ozean",
     ["Atlantischer Ozean", "Indischer Ozean", "Pazifischer Ozean", "Arktischer Ozean"],
     "Der tiefste Ozean der Welt ist der Pazifische Ozean. Er erreicht seine größte Tiefe im Marianengraben, der etwa 11.034 Meter tief ist."),

    ("Welches Land hat die meisten Inseln?",
     "Schweden",
     ["Indonesien", "Philippinen", "Finnland", "Schweden"],
     "Das Land mit den meisten Inseln ist Schweden. Es hat etwa 267.570 Inseln, mehr als jedes andere Land auf der Welt."),

    ("Welcher Vulkan ist der höchste der Welt?",
     "Ojos del Salado",
     ["Mount Everest", "Mauna Kea", "Kilimandscharo", "Ojos del Salado"],
     "Der höchste Vulkan der Welt ist der Ojos del Salado in den Anden an der Grenze zwischen Chile und Argentinien. Er erreicht eine Höhe von etwa 6.893 Metern."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Kontinent hat die meisten Länder?",
     "Afrika",
     ["Asien", "Europa", "Afrika", "Südamerika"],
     "Der Kontinent mit den meisten Ländern ist Afrika. Es gibt insgesamt 54 anerkannte souveräne Staaten in Afrika."),

    ("Welcher ist der größte Ozean der Welt?",
     "Pazifischer Ozean",
     ["Atlantischer Ozean", "Indischer Ozean", "Pazifischer Ozean", "Arktischer Ozean"],
     "Der größte Ozean der Welt ist der Pazifische Ozean. Er bedeckt etwa 63 Millionen Quadratkilometer, was etwa einem Drittel der Erdoberfläche entspricht."),

    ("Welcher Fluss fließt durch die meisten Länder?",
     "Donau",
     ["Nil", "Amazonas", "Donau", "Rhein"],
     "Der Fluss, der durch die meisten Länder fließt, ist die Donau. Sie fließt durch zehn Länder in Europa: Deutschland, Österreich, Slowakei, Ungarn, Kroatien, Serbien, Bulgarien, Rumänien, Moldawien und die Ukraine."),

    ("Welches ist das kleinste Land der Welt nach Fläche?",
     "Vatikanstadt",
     ["Monaco", "San Marino", "Liechtenstein", "Vatikanstadt"],
     "Das kleinste Land der Welt nach Fläche ist die Vatikanstadt. Sie hat eine Fläche von etwa 44 Hektar und ist das Zentrum der römisch-katholischen Kirche."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Berg ist der höchste der Welt?",
     "Mount Everest",
     ["K2", "Kangchenjunga", "Lhotse", "Mount Everest"],
     "Der höchste Berg der Welt ist der Mount Everest im Himalaya-Gebirge. Er erreicht eine Höhe von etwa 8.848 Metern über dem Meeresspiegel."),

    ("Welcher See ist der tiefste der Welt?",
     "Baikalsee",
     ["Tanganjikasee", "Baikalsee", "Victoriasee", "Kaspisches Meer"],
     "Der tiefste See der Welt ist der Baikalsee in Sibirien, Russland. Er hat eine maximale Tiefe von etwa 1.642 Metern."),

    ("Welches ist das größte Binnenland der Welt?",
     "Kasachstan",
     ["Mongolei", "Bolivien", "Tschad", "Kasachstan"],
     "Das größte Binnenland der Welt ist Kasachstan. Es hat eine Fläche von etwa 2,7 Millionen Quadratkilometern und grenzt an keinen Ozean."),

    ("Welcher Fluss hat das größte Einzugsgebiet der Welt?",
     "Amazonas",
     ["Nil", "Amazonas", "Mississippi", "Kongo"],
     "Der Fluss mit dem größten Einzugsgebiet der Welt ist der Amazonas. Sein Einzugsgebiet erstreckt sich über etwa 7 Millionen Quadratkilometer."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welche Stadt ist die bevölkerungsreichste der Welt?",
     "Tokio",
     ["New York", "Shanghai", "Mumbai", "Tokio"],
     "Die bevölkerungsreichste Stadt der Welt ist Tokio, Japan. Die Metropolregion Tokio hat eine Bevölkerung von über 37 Millionen Menschen."),

    ("Welcher Kontinent ist der kälteste der Welt?",
     "Antarktika",
     ["Europa", "Nordamerika", "Asien", "Antarktika"],
     "Der kälteste Kontinent der Welt ist Antarktika. Es ist auch der trockenste, windigste und höchste Kontinent."),

    ("Welche Wüste ist die trockenste der Welt?",
     "Atacama-Wüste",
     ["Sahara", "Gobi", "Kalahari", "Atacama-Wüste"],
     "Die trockenste Wüste der Welt ist die Atacama-Wüste in Chile. Einige ihrer Gebiete haben seit Jahrhunderten keinen Niederschlag mehr erhalten."),
    
    (
    "Welches Land hat die längste Küstenlinie?",
    "Kanada",
    ["Kanada", "Australien", "Russland", "USA"],
    "Das Land mit der längsten Küstenlinie ist Kanada. Seine Küstenlinie erstreckt sich über etwa 202.080 Kilometer."
),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Berg ist der höchste in Afrika?",
    "Kilimandscharo",
    ["Mount Kenya", "Kilimandscharo", "Ras Dashen", "Atlasgebirge"],
    "Der höchste Berg in Afrika ist der Kilimandscharo. Er erreicht eine Höhe von etwa 5.895 Metern."
),
(
    "Welches ist der größte See in Afrika?",
    "Victoriasee",
    ["Baikalsee", "Kaspisches Meer", "Victoriasee", "Tanganjikasee"],
    "Der größte See in Afrika ist der Victoriasee. Er hat eine Fläche von etwa 68.800 Quadratkilometern."
),
(
    "Welcher Fluss ist der längste in Südamerika?",
    "Amazonas",
    ["Amazonas", "Orinoko", "Paraná", "Madeira"],
    "Der längste Fluss in Südamerika ist der Amazonas. Er erstreckt sich über etwa 7.062 Kilometer."
),
(
    "Welches Land hat die größte Bevölkerung in Europa?",
    "Deutschland",
    ["Frankreich", "Italien", "Spanien", "Deutschland"],
    "Das Land mit der größten Bevölkerung in Europa ist Deutschland, mit etwa 83 Millionen Einwohnern."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Gebirge erstreckt sich über die Grenzen von Europa und Asien?",
    "Uralgebirge",
    ["Alpen", "Pyrenäen", "Karpaten", "Uralgebirge"],
    "Das Uralgebirge erstreckt sich über die Grenzen von Europa und Asien und bildet eine natürliche Grenze zwischen diesen Kontinenten."
),
(
    "Welche Wüste ist die zweitgrößte der Welt?",
    "Kalahari",
    ["Gobi", "Kalahari", "Antarktische Wüste", "Sahara"],
    "Die zweitgrößte Wüste der Welt ist die Kalahari, die sich über Teile von Botswana, Namibia und Südafrika erstreckt."
),
(
    "Welches Land hat den niedrigsten Punkt der Erde?",
    "Jordanien",
    ["Israel", "Jordanien", "Ägypten", "Kuwait"],
    "Der niedrigste Punkt der Erde liegt am Toten Meer in Jordanien, der etwa 430 Meter unter dem Meeresspiegel liegt."
),
(
    "Welcher Ozean ist der wärmste der Welt?",
    "Indischer Ozean",
    ["Arktischer Ozean", "Atlantischer Ozean", "Indischer Ozean", "Pazifischer Ozean"],
    "Der wärmste Ozean der Welt ist der Indische Ozean, insbesondere in den Regionen um die Malediven und die Seychellen."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welche Stadt ist die größte in Australien?",
    "Sydney",
    ["Melbourne", "Brisbane", "Perth", "Sydney"],
    "Die größte Stadt in Australien ist Sydney, bekannt für ihren Hafen und das Opernhaus."
),
(
    "Welcher Kontinent hat die niedrigste Durchschnittstemperatur?",
    "Antarktika",
    ["Europa", "Asien", "Antarktika", "Nordamerika"],
    "Der Kontinent mit der niedrigsten Durchschnittstemperatur ist Antarktika. Hier werden die kältesten Temperaturen der Erde gemessen."
),
(
    "Welches Land ist der größte Exporteur von Kaffee?",
    "Brasilien",
    ["Kolumbien", "Vietnam", "Brasilien", "Äthiopien"],
    "Der größte Exporteur von Kaffee ist Brasilien. Das Land produziert und exportiert mehr Kaffee als jedes andere Land."
),
(
    "Welcher See hat die größte Tiefe in Afrika?",
    "Tanganjikasee",
    ["Victoriasee", "Tanganjikasee", "Malawisee", "Chadsee"],
    "Der tiefste See in Afrika ist der Tanganjikasee mit einer maximalen Tiefe von etwa 1.470 Metern."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Gebirge bildet die natürliche Grenze zwischen Europa und Asien?",
    "Uralgebirge",
    ["Alpen", "Pyrenäen", "Karpaten", "Uralgebirge"],
    "Das Uralgebirge bildet die natürliche Grenze zwischen Europa und Asien und erstreckt sich über 2.500 Kilometer."
),
(
    "Welcher Fluss fließt durch London?",
    "Themse",
    ["Rhein", "Loire", "Themse", "Elbe"],
    "Der Fluss, der durch London fließt, ist die Themse. Er hat eine Länge von etwa 346 Kilometern."
),
(
    "Welches Land hat die meisten Berge über 8.000 Meter?",
    "Nepal",
    ["Tibet", "Nepal", "China", "Indien"],
    "Das Land mit den meisten Bergen über 8.000 Meter ist Nepal. Hier befinden sich acht der 14 höchsten Berge der Welt, einschließlich des Mount Everest."
),
(
    "Welcher Kontinent hat die größte Fläche?",
    "Asien",
    ["Afrika", "Europa", "Asien", "Südamerika"],
    "Der größte Kontinent nach Fläche ist Asien. Er erstreckt sich über etwa 44,58 Millionen Quadratkilometer."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welche Wüste liegt in Australien?",
    "Great Victoria Desert",
    ["Sahara", "Gobi", "Great Victoria Desert", "Kalahari"],
    "Die größte Wüste in Australien ist die Great Victoria Desert, die sich über etwa 348.750 Quadratkilometer erstreckt."
),
(
    "Welches Land hat die größte Anzahl an UNESCO-Welterbestätten?",
    "Italien",
    ["Frankreich", "Deutschland", "Italien", "China"],
    "Das Land mit der größten Anzahl an UNESCO-Welterbestätten ist Italien. Es gibt über 50 Welterbestätten in Italien."
),
(
    "Welcher Fluss fließt durch Ägypten?",
    "Nil",
    ["Nil", "Amazonas", "Mississippi", "Yangtze"],
    "Der Fluss, der durch Ägypten fließt, ist der Nil. Er ist der längste Fluss der Welt und hat eine große Bedeutung für die ägyptische Zivilisation."
),
(
    "Welche Inselgruppe gehört zu Norwegen?",
    "Svalbard",
    ["Grönland", "Azoren", "Svalbard", "Kanaren"],
    "Die Inselgruppe Svalbard gehört zu Norwegen. Sie liegt im Arktischen Ozean nördlich von Norwegen."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches ist das größte Binnenmeer der Welt?",
    "Kaspisches Meer",
    ["Oberer See", "Kaspisches Meer", "Totes Meer", "Marmarameer"],
    "Das größte Binnenmeer der Welt ist das Kaspische Meer. Es hat eine Fläche von etwa 371.000 Quadratkilometern."
),
(
    "Welcher Kontinent ist bekannt für seine große Anzahl an aktiven Vulkanen?",
    "Asien",
    ["Europa", "Asien", "Afrika", "Südamerika"],
    "Der Kontinent Asien ist bekannt für seine große Anzahl an aktiven Vulkanen, insbesondere im pazifischen Feuerring."
),
(
    "Welcher Kontinent ist der zweitgrößte der Welt nach Fläche?",
    "Afrika",
    ["Europa", "Asien", "Afrika", "Südamerika"],
    "Der zweitgrößte Kontinent nach Fläche ist Afrika. Er hat eine Fläche von etwa 30,2 Millionen Quadratkilometern."
),
(
    "Welches Land hat die längste Küstenlinie der Welt?",
    "Kanada",
    ["Russland", "Australien", "Kanada", "Indonesien"],
    "Das Land mit der längsten Küstenlinie der Welt ist Kanada. Die Küstenlinie erstreckt sich über etwa 202.080 Kilometer."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Kontinent hat die geringste Bevölkerungsdichte?",
    "Antarktika",
    ["Europa", "Afrika", "Antarktika", "Südamerika"],
    "Der Kontinent mit der geringsten Bevölkerungsdichte ist Antarktika. Aufgrund der extremen Bedingungen leben dort nur sehr wenige Menschen."
),
(
    "Welches Land hat die größte Anzahl an Vulkane?",
    "Indonesien",
    ["Japan", "Indonesien", "Island", "Italien"],
    "Das Land mit der größten Anzahl an Vulkanen ist Indonesien. Es gibt dort über 130 aktive Vulkane."
),
(
    "Welches Land liegt auf den meisten Breitengraden?",
    "Russland",
    ["Kanada", "Russland", "USA", "China"],
    "Das Land, das sich über die meisten Breitengrade erstreckt, ist Russland. Es reicht von der Arktis bis zur gemäßigten Zone."
),
(
    "Welches ist das größte tropische Regenwaldgebiet der Welt?",
    "Amazonas-Regenwald",
    ["Congo-Regenwald", "Amazonas-Regenwald", "Daintree-Regenwald", "Madagaskar-Regenwald"],
    "Das größte tropische Regenwaldgebiet der Welt ist der Amazonas-Regenwald, der sich über neun Länder in Südamerika erstreckt."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Fluss hat das größte Wasservolumen der Welt?",
    "Amazonas",
    ["Nil", "Amazonas", "Mississippi", "Yangtse"],
    "Der Fluss mit dem größten Wasservolumen der Welt ist der Amazonas. Er führt mehr Wasser als die nächsten sieben größten Flüsse zusammen."
),
(
    "Welche Stadt ist die höchste Hauptstadt der Welt?",
    "La Paz",
    ["Quito", "Bogotá", "Lima", "La Paz"],
    "Die höchste Hauptstadt der Welt ist La Paz in Bolivien, die auf etwa 3.650 Metern über dem Meeresspiegel liegt."
),
(
    "Welches Land hat den längsten Fluss in Europa?",
    "Russland",
    ["Deutschland", "Frankreich", "Russland", "Österreich"],
    "Der längste Fluss in Europa ist die Wolga, die durch Russland fließt und eine Länge von etwa 3.530 Kilometern hat."
),
(
    "Welcher Kontinent hat die größte Wüste?",
    "Afrika",
    ["Asien", "Afrika", "Australien", "Nordamerika"],
    "Der Kontinent mit der größten Wüste ist Afrika. Die Sahara ist die größte Wüste und erstreckt sich über Nordafrika."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Berg ist der höchste in Europa?",
    "Mont Blanc",
    ["Matterhorn", "Mont Blanc", "Eiger", "Elbrus"],
    "Der höchste Berg in Europa ist der Mont Blanc. Er liegt in den Alpen und erreicht eine Höhe von etwa 4.808 Metern."
),
(
    "Welcher Fluss ist der längste in Asien?",
    "Jangtse",
    ["Mekong", "Ganges", "Jangtse", "Indus"],
    "Der längste Fluss in Asien ist der Jangtse. Er fließt über etwa 6.300 Kilometer durch China."
),
(
    "Welcher See liegt auf dem höchsten Punkt der Erde?",
    "Titicacasee",
    ["Baikalsee", "Titicacasee", "Kaspisches Meer", "Viktoriasee"],
    "Der Titicacasee liegt auf dem höchsten Punkt der Erde. Er befindet sich auf etwa 3.812 Metern über dem Meeresspiegel in den Anden."
),
(
    "Welches Land hat die längste Grenze zu den USA?",
    "Kanada",
    ["Mexiko", "Kanada", "Russland", "China"],
    "Das Land mit der längsten Grenze zu den USA ist Kanada. Die Grenze erstreckt sich über etwa 8.891 Kilometer."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welche Inselgruppe ist die größte der Welt?",
    "Indonesien",
    ["Malediven", "Philippinen", "Indonesien", "Kanaren"],
    "Die größte Inselgruppe der Welt ist Indonesien. Es umfasst mehr als 17.000 Inseln."
),
(
    "Welcher Gebirgszug ist der höchste der Welt?",
    "Himalaya",
    ["Alpen", "Anden", "Himalaya", "Rocky Mountains"],
    "Der höchste Gebirgszug der Welt ist der Himalaya. Er enthält die höchsten Gipfel, darunter den Mount Everest."
),
(
    "Welches Land hat die meisten offiziell anerkannten Sprachen?",
    "Südafrika",
    ["Schweiz", "Indien", "Südafrika", "Belgien"],
    "Das Land mit den meisten offiziell anerkannten Sprachen ist Südafrika. Es hat 11 Amtssprachen."
),
(
    "Welches Land hat die größte Wüste innerhalb seiner Grenzen?",
    "Australien",
    ["Saudi-Arabien", "Ägypten", "Australien", "Chile"],
    "Das Land mit der größten Wüste innerhalb seiner Grenzen ist Australien. Die Great Victoria Desert ist die größte Wüste Australiens."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Fluss ist der größte in Australien?",
    "Murray-Darling",
    ["Murray-Darling", "Lachlan", "Goulburn", "Murrumbidgee"],
    "Der größte Fluss in Australien ist das Murray-Darling-System, das sich über etwa 3.750 Kilometer erstreckt."
),
(
    "Welches Land hat die größte Anzahl an Naturerbestätten der UNESCO?",
    "Australien",
    ["China", "Australien", "Italien", "USA"],
    "Das Land mit der größten Anzahl an Naturerbestätten der UNESCO ist Australien, das mehrere beeindruckende Naturwunder beherbergt."
),
(
    "Welcher Kontinent hat die höchste durchschnittliche Höhenlage?",
    "Asien",
    ["Asien", "Südamerika", "Europa", "Nordamerika"],
    "Der Kontinent mit der höchsten durchschnittlichen Höhenlage ist Asien. Er enthält die höchsten Gebirgszüge, einschließlich des Himalayas."
),
(
    "Welcher See ist der größte in Afrika?",
    "Victoriasee",
    ["Tanganjikasee", "Kaspisches Meer", "Baikalsee", "Victoriasee"],
    "Der größte See in Afrika ist der Victoriasee. Er hat eine Fläche von etwa 68.800 Quadratkilometern."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Land ist der größte Exporteur von Rohöl?",
    "Saudi-Arabien",
    ["Russland", "Venezuela", "Saudi-Arabien", "USA"],
    "Das Land mit den größten Exporten von Rohöl ist Saudi-Arabien. Es ist ein führender Anbieter auf dem globalen Ölmarkt."
),
(
    "Welches ist das größte Land in Ozeanien?",
    "Australien",
    ["Neuseeland", "Papua-Neuguinea", "Australien", "Fidschi"],
    "Das größte Land in Ozeanien ist Australien. Es ist der größte Kontinent und das größte Land der Region."
),
(
    "Welches Land hat die längste Grenze zu China?",
    "Mongolei",
    ["Indien", "Pakistan", "Russland", "Mongolei"],
    "Das Land mit der längsten Grenze zu China ist die Mongolei. Die Grenze erstreckt sich über etwa 4.677 Kilometer."
),
(
    "Welcher See ist der größte in Europa?",
    "Ladogasee",
    ["Balaton", "Ladogasee", "Genfersee", "Oberer See"],
    "Der größte See in Europa ist der Ladogasee in Russland. Er hat eine Fläche von etwa 9080 Quadratkilometern."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Kontinent hat die meisten Vulkane?",
    "Asien",
    ["Europa", "Südamerika", "Asien", "Afrika"],
    "Der Kontinent mit den meisten Vulkane ist Asien. Die Region um den Pazifischen Feuerring enthält zahlreiche aktive Vulkane."
),
(
    "Welches Land hat die größte Fläche in der Antarktis?",
    "Antarktis",
    ["Chile", "Argentinien", "Australien", "Antarktis"],
    "Die Antarktis ist der größte Bereich der Antarktis, die den gesamten Kontinent umfasst und etwa 14 Millionen Quadratkilometer groß ist."
),
(
    "Welcher Fluss fließt durch Paris?",
    "Seine",
    ["Rhein", "Loire", "Garonne", "Seine"],
    "Der Fluss, der durch Paris fließt, ist die Seine. Er ist etwa 777 Kilometer lang und fließt durch die französische Hauptstadt."
),
(
    "Welcher Ozean ist der kleinste der Welt?",
    "Arktischer Ozean",
    ["Atlantischer Ozean", "Indischer Ozean", "Arktischer Ozean", "Pazifischer Ozean"],
    "Der kleinste Ozean der Welt ist der Arktische Ozean. Er bedeckt eine Fläche von etwa 15 Millionen Quadratkilometern."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Land hat die größte Fläche in Europa?",
    "Russland",
    ["Frankreich", "Deutschland", "Russland", "Spanien"],
    "Das Land mit der größten Fläche in Europa ist Russland. Ein Teil seines Territoriums erstreckt sich über Europa, der Rest liegt in Asien."
),
(
    "Welcher Berg ist der höchste in Nordamerika?",
    "Denali",
    ["Mount Logan", "Mount McKinley", "Mount Saint Elias", "Denali"],
    "Der höchste Berg in Nordamerika ist Denali, auch bekannt als Mount McKinley, mit einer Höhe von etwa 6.190 Metern."
),
(
    "Welcher Fluss fließt durch New York City?",
    "Hudson River",
    ["Mississippi", "Ohio River", "Hudson River", "Delaware River"],
    "Der Fluss, der durch New York City fließt, ist der Hudson River. Er erstreckt sich über etwa 507 Kilometer in den Staat New York."
),
(
    "Welches ist das größte Land in Südamerika?",
    "Brasilien",
    ["Argentinien", "Peru", "Brasilien", "Kolumbien"],
    "Das größte Land in Südamerika ist Brasilien. Es nimmt etwa die Hälfte der Kontinentfläche ein und ist das fünftgrößte Land der Welt."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Land hat die größte Fläche in der Karibik?",
    "Kuba",
    ["Jamaika", "Haiti", "Dominikanische Republik", "Kuba"],
    "Das größte Land in der Karibik nach Fläche ist Kuba. Es hat eine Fläche von etwa 110.860 Quadratkilometern."
),
(
    "Welches Land hat die größte Wüste in Nordamerika?",
    "USA",
    ["Mexiko", "USA", "Kanada", "Honduras"],
    "Das Land mit der größten Wüste in Nordamerika ist die USA. Die größte Wüste ist die Mojave-Wüste."
),
(
    "Welcher Fluss bildet einen Großteil der Grenze zwischen Kanada und den USA?",
    "St. Lawrence River",
    ["Mississippi River", "Columbia River", "St. Lawrence River", "Ohio River"],
    "Der Fluss, der einen Großteil der Grenze zwischen Kanada und den USA bildet, ist der St. Lawrence River."
),
(
    "Welches Land hat den tiefsten Punkt in Afrika?",
    "Ägypten",
    ["Ägypten", "Südafrika", "Kenia", "Tansania"],
    "Der tiefste Punkt in Afrika ist das Tal des Toten Meeres in Ägypten, das etwa 430 Meter unter dem Meeresspiegel liegt."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Land hat die größte Anzahl an Großstädten mit über 10 Millionen Einwohnern?",
    "China",
    ["Indien", "USA", "China", "Brasilien"],
    "Das Land mit der größten Anzahl an Großstädten mit über 10 Millionen Einwohnern ist China. Zu den Städten gehören Shanghai, Peking und Guangzhou."
),
(
    "Welcher Gebirgszug erstreckt sich über die Grenze zwischen Europa und Asien?",
    "Uralgebirge",
    ["Alpen", "Anden", "Uralgebirge", "Kaukasus"],
    "Der Gebirgszug, der sich über die Grenze zwischen Europa und Asien erstreckt, ist das Uralgebirge."
),
(
    "Welches Land ist der größte Exporteur von Kaffee?",
    "Brasilien",
    ["Vietnam", "Kolumbien", "Brasilien", "Äthiopien"],
    "Das Land, das den größten Anteil am Kaffeeexport hat, ist Brasilien. Es ist der weltweit führende Kaffeeproduzent."
),
(
    "Welches Land hat die größte Anzahl von aktiven Vulkanen in der Region des Pazifischen Feuerrings?",
    "Indonesien",
    ["Neuseeland", "Japan", "Indonesien", "Papua-Neuguinea"],
    "Das Land mit der größten Anzahl von aktiven Vulkanen in der Region des Pazifischen Feuerrings ist Indonesien."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Land hat die größte Anzahl an Nationalparks?",
    "USA",
    ["Kanada", "Australien", "USA", "Südafrika"],
    "Das Land mit der größten Anzahl an Nationalparks ist die USA. Es gibt dort über 60 Nationalparks."
),
(
    "Welches ist der größte See in Australien?",
    "Lake Eyre",
    ["Lake Hume", "Lake Victoria", "Lake Eyre", "Lake Argyle"],
    "Der größte See in Australien ist der Lake Eyre. Er hat eine Fläche von etwa 9.500 Quadratkilometern, wenn er voll ist."
),
(
    "Welches Land hat die meisten nationalen Feiertage?",
    "Indien",
    ["Mexiko", "Indien", "China", "Brasilien"],
    "Das Land mit den meisten nationalen Feiertagen ist Indien. Es gibt zahlreiche regionale und religiöse Feiertage."
),
(
    "Welches Land hat die größte Anzahl von offiziellen Amtssprachen?",
    "Indien",
    ["Belgien", "Schweiz", "Indien", "Kanada"],
    "Das Land mit der größten Anzahl von offiziellen Amtssprachen ist Indien. Es hat 22 offiziell anerkannte Sprachen."
)
]

class GeograFakten(Screen):
    def __init__(self,  frage, antwort, antwortmöglichkeiten, info_text, **kw):
        super(GeograFakten, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Geografische Fakten"
        self.fragen = fragengeofak

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))

            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

 
        
fragendatenfest = [
    
    ("Welcher Tag wird weltweit als Internationaler Tag der Mutter Erde gefeiert?",
     "22. April",
     ["5. Juni", "22. April", "1. Mai", "8. März"],
     "Der Internationale Tag der Mutter Erde wird weltweit am 22. April gefeiert. Dieser Tag ist auch als Earth Day bekannt und fördert das Umweltbewusstsein und den Schutz unseres Planeten."),

    ("Wann wird der Tag der Arbeit in den meisten Ländern gefeiert?",
     "1. Mai",
     ["1. Mai", "4. Juli", "25. Dezember", "15. August"],
     "Der Tag der Arbeit wird in den meisten Ländern am 1. Mai gefeiert. Dieser Tag würdigt die Errungenschaften der Arbeiterbewegung und ist in vielen Ländern ein gesetzlicher Feiertag."),

    ("Welcher Tag ist als Welt-Aids-Tag bekannt?",
     "1. Dezember",
     ["1. Januar", "14. Februar", "1. Dezember", "31. Oktober"],
     "Der Welt-Aids-Tag wird jedes Jahr am 1. Dezember begangen. Dieser Tag dient der Bewusstseinsbildung für HIV/AIDS und der Unterstützung der von der Krankheit Betroffenen."),

    ("Wann wird der Internationale Frauentag gefeiert?",
     "8. März",
     ["8. März", "20. März", "1. Juni", "11. Oktober"],
     "Der Internationale Frauentag wird am 8. März gefeiert. An diesem Tag werden die Errungenschaften von Frauen gewürdigt und auf die Gleichstellung der Geschlechter aufmerksam gemacht."),

    ("Welcher Tag wird als Weltumwelttag begangen?",
     "5. Juni",
     ["5. Juni", "22. April", "8. März", "15. September"],
     "Der Weltumwelttag wird am 5. Juni begangen. Dieser Tag wurde von den Vereinten Nationen ins Leben gerufen, um das weltweite Bewusstsein für Umweltprobleme zu schärfen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Tag ist bekannt als Internationaler Tag der Demokratie?",
     "15. September",
     ["3. Mai", "15. September", "20. November", "10. Dezember"],
     "Der Internationale Tag der Demokratie wird am 15. September gefeiert. An diesem Tag wird die Bedeutung demokratischer Prinzipien und der Schutz der Menschenrechte betont."),

    ("Wann wird der Internationale Tag der Menschenrechte gefeiert?",
     "10. Dezember",
     ["10. Dezember", "1. Dezember", "24. Oktober", "20. Juni"],
     "Der Internationale Tag der Menschenrechte wird am 10. Dezember gefeiert. Dieser Tag erinnert an die Allgemeine Erklärung der Menschenrechte, die 1948 von den Vereinten Nationen verabschiedet wurde."),

    ("Welcher Tag ist als Internationaler Tag des Friedens bekannt?",
     "21. September",
     ["21. Juni", "21. September", "2. Oktober", "24. Dezember"],
     "Der Internationale Tag des Friedens wird am 21. September begangen. Er wurde von den Vereinten Nationen ins Leben gerufen, um den Weltfrieden und die Beendigung von Konflikten zu fördern."),

    ("Wann wird der Welttag der kulturellen Vielfalt für Dialog und Entwicklung gefeiert?",
     "21. Mai",
     ["18. April", "21. Mai", "9. August", "12. November"],
     "Der Welttag der kulturellen Vielfalt für Dialog und Entwicklung wird am 21. Mai gefeiert. Dieser Tag hebt die Bedeutung kultureller Vielfalt und interkulturellen Dialogs hervor."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Tag wird als Internationaler Tag der Freundschaft begangen?",
     "30. Juli",
     ["14. Februar", "1. August", "30. Juli", "20. September"],
     "Der Internationale Tag der Freundschaft wird am 30. Juli gefeiert. Dieser Tag soll die Freundschaft zwischen Völkern, Ländern und Kulturen fördern."),

    ("Wann wird der Internationale Tag der Jugend gefeiert?",
     "12. August",
     ["1. Juni", "20. November", "12. August", "15. Juli"],
     "Der Internationale Tag der Jugend wird am 12. August gefeiert. Dieser Tag betont die Bedeutung der Jugend und ihrer Rolle in der Gesellschaft."),

    ("Welcher Tag ist bekannt als Internationaler Tag zur Beseitigung der Gewalt gegen Frauen?",
     "25. November",
     ["8. März", "10. Dezember", "25. November", "5. Juni"],
     "Der Internationale Tag zur Beseitigung der Gewalt gegen Frauen wird am 25. November begangen. An diesem Tag wird auf das Problem der Gewalt gegen Frauen aufmerksam gemacht und zu deren Bekämpfung aufgerufen."),

    ("Wann wird der Weltgesundheitstag gefeiert?",
     "7. April",
     ["1. Dezember", "7. April", "5. Mai", "10. Oktober"],
     "Der Weltgesundheitstag wird am 7. April gefeiert. Dieser Tag wurde von der Weltgesundheitsorganisation (WHO) ins Leben gerufen, um das Bewusstsein für globale Gesundheitsprobleme zu schärfen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Tag wird als Internationaler Tag des Ehrenamtes begangen?",
     "5. Dezember",
     ["5. Dezember", "15. Januar", "20. Juni", "8. März"],
     "Der Internationale Tag des Ehrenamtes wird am 5. Dezember gefeiert. Dieser Tag würdigt die Arbeit von Freiwilligen weltweit und hebt die Bedeutung des Ehrenamts hervor."),

    ("Wann wird der Internationale Tag der Familie gefeiert?",
     "15. Mai",
     ["15. Mai", "1. Juni", "12. August", "20. November"],
     "Der Internationale Tag der Familie wird am 15. Mai gefeiert. An diesem Tag wird die Bedeutung der Familie als grundlegende Einheit der Gesellschaft betont."),

    ("Welcher Tag ist als Welttag der sozialen Gerechtigkeit bekannt?",
     "20. Februar",
     ["20. Februar", "1. Mai", "10. Dezember", "15. September"],
     "Der Welttag der sozialen Gerechtigkeit wird am 20. Februar begangen. Dieser Tag betont die Bedeutung der sozialen Gerechtigkeit zur Förderung von Frieden und Wohlstand."),

    ("Wann wird der Internationale Tag der Toleranz gefeiert?",
     "16. November",
     ["16. November", "1. September", "10. Dezember", "20. Februar"],
     "Der Internationale Tag der Toleranz wird am 16. November gefeiert. Dieser Tag erinnert an die Notwendigkeit der Toleranz in einer vielfältigen Welt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Tag ist bekannt als Internationaler Tag der Migranten?",
     "18. Dezember",
     ["18. Dezember", "20. Juni", "15. Juli", "8. März"],
     "Der Internationale Tag der Migranten wird am 18. Dezember gefeiert. An diesem Tag wird die Bedeutung von Migration und die Rechte von Migranten betont."),

    ("Wann wird der Internationale Tag des Gedenkens an die Opfer des Holocausts begangen?",
     "27. Januar",
     ["27. Januar", "8. Mai", "9. November", "20. Juni"],
     "Der Internationale Tag des Gedenkens an die Opfer des Holocausts wird am 27. Januar begangen. Dieser Tag erinnert an die Befreiung des Konzentrationslagers Auschwitz-Birkenau im Jahr 1945."),

    ("Welcher Tag wird als Welttag des Wassers gefeiert?",
     "22. März",
     ["5. Juni", "22. März", "8. September", "10. Oktober"],
     "Der Welttag des Wassers wird am 22. März gefeiert. Dieser Tag wurde von den Vereinten Nationen ins Leben gerufen, um auf die Bedeutung von Wasser und die Notwendigkeit eines nachhaltigen Umgangs mit Wasserressourcen hinzuweisen."),
    (
        "Welcher Tag ist bekannt als Welttag der Poesie?",
        "21. März",
        ["21. März", "5. Juni", "8. Mai", "3. Oktober"],
        "Der Welttag der Poesie wird jährlich am 21. März gefeiert und würdigt die Poesie als eine Form des kulturellen Ausdrucks und der Kreativität."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "An welchem Tag wird der Internationale Tag des Waldes gefeiert?",
        "21. März",
        ["21. März", "1. Mai", "5. Dezember", "16. Oktober"],
        "Der Internationale Tag des Waldes, der jährlich am 21. März begangen wird, hebt die Bedeutung von Wäldern und deren nachhaltigen Schutz hervor."
    ),
    (
        "Wann wird der Welttag der meteorologischen Dienste gefeiert?",
        "23. März",
        ["22. März", "1. April", "23. März", "3. Juni"],
        "Der Welttag der meteorologischen Dienste am 23. März würdigt die Bedeutung der Wettervorhersage und Klimabeobachtung für die Menschheit."
    ),
    (
        "Welcher Tag wird als Internationaler Tag der Familien gefeiert?",
        "15. Mai",
        ["15. Mai", "1. Juni", "7. April", "22. Oktober"],
        "Der Internationale Tag der Familien, der am 15. Mai gefeiert wird, betont die Rolle der Familie als grundlegende Einheit der Gesellschaft."
    ),
    (
        "Wann wird der Internationale Tag der biologischen Vielfalt begangen?",
        "22. Mai",
        ["10. Oktober", "20. März", "8. Juni", "22. Mai"],
        "Der Internationale Tag der biologischen Vielfalt wird jedes Jahr am 22. Mai gefeiert, um die Bedeutung der Artenvielfalt für das Leben auf der Erde hervorzuheben."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "An welchem Tag wird der Welttag des Buches gefeiert?",
        "23. April",
        ["1. März", "3. Oktober", "23. April", "5. Juni"],
        "Der Welttag des Buches am 23. April ist ein internationaler Gedenktag, der das Lesen, Bücher und den Schutz des Urheberrechts fördert."
    ),
    (
        "Welcher Tag wird als Internationaler Tag der Pressefreiheit begangen?",
        "3. Mai",
        ["3. Mai", "1. Juni", "24. Oktober", "10. Dezember"],
        "Der Internationale Tag der Pressefreiheit am 3. Mai unterstreicht die Bedeutung einer freien und unabhängigen Presse für die Demokratie."
    ),
    (
        "Wann wird der Internationale Tag der Milch gefeiert?",
        "1. Juni",
        ["1. Juni", "15. Juli", "18. Oktober", "8. August"],
        "Der Internationale Tag der Milch wird am 1. Juni begangen und würdigt die Bedeutung der Milch als Nahrungsmittel und deren Beitrag zur Ernährung."
    ),
    (
        "Welcher Tag ist bekannt als Welttag der Umwelt?",
        "5. Juni",
        ["10. Oktober", "21. April", "5. Juni", "15. November"],
        "Der Welttag der Umwelt, der jedes Jahr am 5. Juni gefeiert wird, zielt darauf ab, das Bewusstsein für Umweltprobleme weltweit zu fördern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "An welchem Datum wird der Internationale Tag der Menschenrechte gefeiert?",
        "10. Dezember",
        ["20. November", "15. Mai", "10. Dezember", "5. Juni"],
        "Der Internationale Tag der Menschenrechte am 10. Dezember erinnert an die Verabschiedung der Allgemeinen Erklärung der Menschenrechte im Jahr 1948."
    ),
    (
        "Wann wird der Internationale Tag des Gedenkens an die Opfer des Holocaust begangen?",
        "27. Januar",
        ["27. Januar", "3. Oktober", "9. November", "18. Dezember"],
        "Der Internationale Tag des Gedenkens an die Opfer des Holocaust wird jährlich am 27. Januar begangen und erinnert an die Befreiung des Konzentrationslagers Auschwitz-Birkenau."
    ),
    (
        "Welcher Tag wird als Internationaler Tag des Waldes gefeiert?",
        "21. März",
        ["5. Mai", "1. Juni", "21. März", "22. September"],
        "Der Internationale Tag des Waldes, der am 21. März gefeiert wird, hebt die Bedeutung der Wälder für die Erhaltung des Ökosystems hervor."
    ),
    (
        "Wann wird der Internationale Tag der Menschen mit Behinderungen gefeiert?",
        "3. Dezember",
        ["5. Juni", "10. Oktober", "3. Dezember", "16. November"],
        "Der Internationale Tag der Menschen mit Behinderungen, der jährlich am 3. Dezember begangen wird, zielt darauf ab, das Bewusstsein für die Rechte und Bedürfnisse von Menschen mit Behinderungen zu fördern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Tag ist bekannt als Welttag der Berge?",
        "11. Dezember",
        ["11. Dezember", "5. Mai", "16. Oktober", "21. Juni"],
        "Der Welttag der Berge, der jährlich am 11. Dezember gefeiert wird, betont die Bedeutung der Berge für die nachhaltige Entwicklung und den Umweltschutz."
    ),
    (
        "An welchem Tag wird der Internationale Tag der Bildung gefeiert?",
        "24. Januar",
        ["24. Januar", "1. März", "20. Juni", "22. Mai"],
        "Der Internationale Tag der Bildung, der am 24. Januar begangen wird, unterstreicht die Rolle von Bildung für Frieden und nachhaltige Entwicklung."
    ),
    (
        "Wann wird der Internationale Tag des Gedenkens an die Opfer des Sklavenhandels gefeiert?",
        "23. August",
        ["23. August", "10. Dezember", "15. Juli", "22. Mai"],
        "Der Internationale Tag des Gedenkens an die Opfer des Sklavenhandels am 23. August erinnert an das Leid und die Widerstandskraft der versklavten Afrikaner."
    ),
    (
        "Welcher Tag wird als Internationaler Tag des Ehrenamtes gefeiert?",
        "5. Dezember",
        ["5. Dezember", "22. März", "1. Juni", "12. August"],
        "Der Internationale Tag des Ehrenamtes, der jährlich am 5. Dezember gefeiert wird, würdigt das Engagement von Freiwilligen weltweit."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "An welchem Datum wird der Welttag der kulturellen Vielfalt gefeiert?",
        "21. Mai",
        ["15. Januar", "21. Mai", "5. Dezember", "3. Oktober"],
        "Der Welttag der kulturellen Vielfalt für Dialog und Entwicklung wird jedes Jahr am 21. Mai begangen, um das Bewusstsein für die Bedeutung kultureller Vielfalt zu schärfen."
    ),
    (
        "Wann wird der Welttag gegen den Menschenhandel begangen?",
        "30. Juli",
        ["18. Oktober", "30. Juli", "10. Dezember", "5. Mai"],
        "Der Welttag gegen den Menschenhandel wird am 30. Juli begangen und zielt darauf ab, das Bewusstsein für die Bekämpfung des Menschenhandels zu schärfen."
    ),
        (
        "Welcher Tag wird als Welttag des Fernsehens begangen?",
        "21. November",
        ["21. November", "15. Januar", "8. März", "10. Mai"],
        "Der Welttag des Fernsehens wird am 21. November gefeiert und unterstreicht die Rolle des Fernsehens in der Kommunikation und der Globalisierung."
    ),
    (
        "Wann wird der Internationale Tag des Jazz gefeiert?",
        "30. April",
        ["10. Mai", "30. April", "21. Juni", "15. November"],
        "Der Internationale Tag des Jazz wird am 30. April gefeiert und würdigt die Bedeutung des Jazz als kulturelles Erbe und Symbol der Freiheit."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Tag ist bekannt als Welttag der Alphabetisierung?",
        "8. September",
        ["8. September", "1. Januar", "12. Dezember", "22. Februar"],
        "Der Welttag der Alphabetisierung wird am 8. September begangen, um auf die Bedeutung der Bildung und den Kampf gegen Analphabetismus hinzuweisen."
    ),
    (
        "Wann wird der Internationale Tag des Friedens gefeiert?",
        "21. September",
        ["1. Dezember", "10. Oktober", "21. September", "5. Juni"],
        "Der Internationale Tag des Friedens wird am 21. September gefeiert, um die Bedeutung des Friedens und der Gewaltfreiheit zu betonen."
    ),
    (
        "Welcher Tag wird als Welttag der kulturellen Vielfalt begangen?",
        "21. Mai",
        ["3. Oktober", "16. November", "21. Mai", "18. Dezember"],
        "Der Welttag der kulturellen Vielfalt wird am 21. Mai gefeiert und hebt die Bedeutung kultureller Vielfalt und Dialogs zwischen den Kulturen hervor."
    ),
    (
        "Wann wird der Internationale Tag des Sports für Entwicklung und Frieden gefeiert?",
        "6. April",
        ["5. Juni", "6. April", "30. September", "10. Mai"],
        "Der Internationale Tag des Sports für Entwicklung und Frieden wird am 6. April gefeiert und betont die Rolle des Sports in der Förderung von Frieden und Entwicklung."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Tag ist bekannt als Welttag der Ozeane?",
        "8. Juni",
        ["8. Juni", "15. März", "22. April", "1. September"],
        "Der Welttag der Ozeane wird jedes Jahr am 8. Juni gefeiert, um auf die Bedeutung der Ozeane für das Leben auf der Erde aufmerksam zu machen."
    ),
    (
        "Wann wird der Internationale Tag der Migranten gefeiert?",
        "18. Dezember",
        ["18. Dezember", "1. März", "21. Februar", "5. Mai"],
        "Der Internationale Tag der Migranten wird am 18. Dezember gefeiert und erinnert an die Rechte und den Beitrag von Migranten weltweit."
    ),
    (
        "Welcher Tag wird als Internationaler Tag des Gedenkens an die Opfer von Terroranschlägen begangen?",
        "21. August",
        ["21. August", "15. Januar", "10. Dezember", "22. März"],
        "Der Internationale Tag des Gedenkens an die Opfer von Terroranschlägen wird am 21. August begangen und würdigt das Andenken der Opfer."
    ),
    (
        "Wann wird der Internationale Tag gegen Rassismus gefeiert?",
        "21. März",
        ["21. März", "30. Juni", "16. November", "8. Dezember"],
        "Der Internationale Tag gegen Rassismus wird am 21. März gefeiert und betont die Notwendigkeit des Kampfes gegen alle Formen von Rassismus."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Tag ist bekannt als Welttag des Theaters?",
        "27. März",
        ["27. März", "22. Mai", "3. Dezember", "12. August"],
        "Der Welttag des Theaters wird am 27. März gefeiert und würdigt die Bedeutung des Theaters als kulturelle Kunstform."
    ),
    (
        "Wann wird der Internationale Tag der Jugend gefeiert?",
        "12. August",
        ["5. Juni", "12. August", "18. September", "21. Oktober"],
        "Der Internationale Tag der Jugend wird am 12. August gefeiert und hebt die Rolle der Jugend in der Gesellschaft hervor."
    ),
    (
        "Welcher Tag wird als Welttag des geistigen Eigentums gefeiert?",
        "26. April",
        ["26. April", "10. Dezember", "1. Mai", "21. September"],
        "Der Welttag des geistigen Eigentums wird am 26. April gefeiert und betont die Bedeutung des Schutzes von Innovationen und Urheberrechten."
    ),
    (
        "Wann wird der Internationale Tag der Demokratie gefeiert?",
        "15. September",
        ["20. Juni", "8. Mai", "15. September", "3. Oktober"],
        "Der Internationale Tag der Demokratie wird am 15. September gefeiert und unterstreicht die Bedeutung demokratischer Werte weltweit."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Tag ist bekannt als Welttag des Ehrenamtes?",
        "5. Dezember",
        ["5. Dezember", "1. März", "8. Oktober", "25. Juni"],
        "Der Welttag des Ehrenamtes wird am 5. Dezember gefeiert und würdigt die Freiwilligenarbeit weltweit."
    ),
    (
        "Wann wird der Internationale Tag des Lichts gefeiert?",
        "16. Mai",
        ["16. Mai", "1. Juni", "3. November", "10. April"],
        "Der Internationale Tag des Lichts wird am 16. Mai gefeiert und hebt die Rolle des Lichts in Wissenschaft, Kultur und Bildung hervor."
    ),
    (
        "Welcher Tag wird als Welttag der Post gefeiert?",
        "9. Oktober",
        ["15. Mai", "9. Oktober", "8. Juni", "21. Februar"],
        "Der Welttag der Post wird am 9. Oktober gefeiert und würdigt die Rolle der Postdienste im globalen Kommunikationssystem."
    ),
    (
        "Wann wird der Internationale Tag der Demokratie gefeiert?",
        "15. September",
        ["15. September", "5. Juni", "21. April", "30. Januar"],
        "Der Internationale Tag der Demokratie wird am 15. September gefeiert und erinnert an die Bedeutung der Demokratie für Freiheit und Menschenrechte."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Tag ist bekannt als Welttag des Tourismus?",
        "27. September",
        ["8. März", "27. September", "18. Oktober", "3. Mai"],
        "Der Welttag des Tourismus wird am 27. September gefeiert und hebt die Bedeutung des Tourismus für die wirtschaftliche und soziale Entwicklung hervor."
    ),
    (
        "Wann wird der Internationale Tag der Toleranz gefeiert?",
        "16. November",
        ["16. November", "1. April", "22. Dezember", "5. Juni"],
        "Der Internationale Tag der Toleranz wird am 16. November gefeiert und betont die Notwendigkeit der Toleranz in einer vielfältigen Gesellschaft."
    ),
    (
    "Welcher Tag wird als Weltwassertag gefeiert?",
    "22. März",
    ["10. Oktober", "18. Dezember", "22. März", "21. Juni"],
    "Der Weltwassertag wird am 22. März gefeiert, um auf die Bedeutung von Wasser und den nachhaltigen Umgang mit Wasserressourcen aufmerksam zu machen."
),
(
    "Wann wird der Internationale Tag der Mutter gefeiert?",
    "Zweiter Sonntag im Mai",
    ["21. September", "8. März", "5. Mai", "Zweiter Sonntag im Mai"],
    "Der Internationale Tag der Mutter wird in vielen Ländern am zweiten Sonntag im Mai gefeiert und würdigt die Bedeutung von Müttern in der Gesellschaft."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Tag ist bekannt als Internationaler Tag des Waldes?",
    "21. März",
    ["15. August", "21. März", "30. September", "1. Juni"],
    "Der Internationale Tag des Waldes wird am 21. März begangen, um das Bewusstsein für den Schutz und die nachhaltige Nutzung der Wälder zu fördern."
),
(
    "Wann wird der Welttierschutztag gefeiert?",
    "4. Oktober",
    ["4. Oktober", "1. September", "7. Juni", "22. April"],
    "Der Welttierschutztag wird am 4. Oktober gefeiert und betont die Bedeutung des Schutzes und der Rechte von Tieren weltweit."
),
(
    "Welcher Tag wird als Internationaler Tag der Bildung begangen?",
    "24. Januar",
    ["24. Januar", "8. September", "15. November", "5. Juni"],
    "Der Internationale Tag der Bildung wird am 24. Januar gefeiert und hebt die Bedeutung von Bildung für die gesellschaftliche und individuelle Entwicklung hervor."
),
(
    "Wann wird der Internationale Tag der älteren Menschen gefeiert?",
    "1. Oktober",
    ["18. Dezember", "1. Oktober", "12. August", "25. November"],
    "Der Internationale Tag der älteren Menschen wird am 1. Oktober gefeiert und würdigt den Beitrag älterer Menschen zur Gesellschaft."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Tag ist bekannt als Welttag der Pressefreiheit?",
    "3. Mai",
    ["5. Juni", "3. Mai", "15. September", "10. Dezember"],
    "Der Welttag der Pressefreiheit wird am 3. Mai gefeiert und betont die Bedeutung der freien Presse für Demokratie und Menschenrechte."
),
(
    "Wann wird der Welttag der Poesie gefeiert?",
    "21. März",
    ["21. März", "10. Oktober", "1. Juli", "5. Dezember"],
    "Der Welttag der Poesie wird am 21. März gefeiert, um die Bedeutung der Poesie als kulturelles Erbe zu würdigen und ihre Vielfalt zu fördern."
),
(
    "Welcher Tag wird als Internationaler Tag der Berge begangen?",
    "11. Dezember",
    ["15. September", "10. April", "22. März", "11. Dezember"],
    "Der Internationale Tag der Berge wird am 11. Dezember gefeiert und hebt die Bedeutung der Berge für die Ökosysteme und die Menschheit hervor."
),
(
    "Wann wird der Welttag der Meteorologie gefeiert?",
    "23. März",
    ["5. Juni", "12. Oktober", "23. März", "1. November"],
    "Der Welttag der Meteorologie wird am 23. März gefeiert und würdigt die Bedeutung der Meteorologie für den Wetterdienst und die Gesellschaft."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Tag ist bekannt als Welttag der Statistik?",
    "20. Oktober",
    ["1. Juni", "15. September", "5. Mai", "20. Oktober"],
    "Der Welttag der Statistik wird am 20. Oktober gefeiert und betont die Rolle der Statistik in der Politik, Wirtschaft und Forschung."
),
(
    "Wann wird der Welttag des Buches und des Urheberrechts gefeiert?",
    "23. April",
    ["16. November", "8. Dezember", "15. Juli", "23. April"],
    "Der Welttag des Buches und des Urheberrechts wird am 23. April gefeiert und hebt die Bedeutung von Büchern und den Schutz geistigen Eigentums hervor."
),
(
    "Welcher Tag wird als Internationaler Tag der Biodiversität begangen?",
    "22. Mai",
    ["21. März", "30. Juni", "22. Mai", "8. September"],
    "Der Internationale Tag der Biodiversität wird am 22. Mai gefeiert und betont die Bedeutung der biologischen Vielfalt für das Überleben der Menschheit."
),
(
    "Wann wird der Internationale Tag der Gerechtigkeit gefeiert?",
    "17. Juli",
    ["1. Oktober", "17. Juli", "10. Dezember", "22. Mai"],
    "Der Internationale Tag der Gerechtigkeit wird am 17. Juli gefeiert und erinnert an die Bedeutung der Gerechtigkeit und des internationalen Strafrechts."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Tag ist bekannt als Welttag der Städte?",
    "31. Oktober",
    ["1. August", "15. März", "31. Oktober", "10. Dezember"],
    "Der Welttag der Städte wird am 31. Oktober gefeiert und hebt die Rolle von Städten in der nachhaltigen Entwicklung und im globalen Wandel hervor."
),
(
    "Wann wird der Internationale Tag der Freundschaft gefeiert?",
    "30. Juli",
    ["15. Mai", "30. Juli", "8. Juni", "5. Dezember"],
    "Der Internationale Tag der Freundschaft wird am 30. Juli gefeiert und fördert die Freundschaft zwischen Völkern, Ländern und Kulturen."
),
(
    "Welcher Tag wird als Internationaler Tag der Gesundheit begangen?",
    "7. April",
    ["25. Oktober", "12. August", "15. September", "7. April"],
    "Der Internationale Tag der Gesundheit wird am 7. April gefeiert und betont die Bedeutung von Gesundheit für das Wohlbefinden der Menschen."
),
(
    "Wann wird der Internationale Tag der Muttersprache gefeiert?",
    "21. Februar",
    ["12. Juni", "5. September", "21. Februar", "16. November"],
    "Der Internationale Tag der Muttersprache wird am 21. Februar gefeiert und hebt die Bedeutung der sprachlichen Vielfalt und der kulturellen Identität hervor."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Tag ist bekannt als Welttag der Erde?",
    "22. April",
    ["10. Mai", "15. Juli", "22. April", "1. Januar"],
    "Der Welttag der Erde wird am 22. April gefeiert und fördert das Umweltbewusstsein sowie den Schutz des Planeten."
),
(
    "Wann wird der Internationale Tag der Frauen und Mädchen in der Wissenschaft gefeiert?",
    "11. Februar",
    ["15. April", "11. Februar", "30. September", "8. März"],
    "Der Internationale Tag der Frauen und Mädchen in der Wissenschaft wird am 11. Februar gefeiert und betont die Rolle von Frauen in der Wissenschaft und Technologie."
),

]

class DatenFest(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(DatenFest, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Daten Festtage"
        self.fragen = fragendatenfest

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

 
fragenpreisfak = [
    
    ("Wer erhielt den Nobelpreis für Physik im Jahr 1921?",
     "Albert Einstein",
     ["Niels Bohr", "Marie Curie", "Albert Einstein", "Erwin Schrödinger"],
     "Albert Einstein erhielt den Nobelpreis für Physik im Jahr 1921 für seine Entdeckung des photoelektrischen Effekts."),

    ("Wer gewann den Friedensnobelpreis im Jahr 1993 zusammen mit Nelson Mandela?",
     "F. W. de Klerk",
     ["Mahatma Gandhi", "Martin Luther King Jr.", "F. W. de Klerk", "Desmond Tutu"],
     "F. W. de Klerk gewann zusammen mit Nelson Mandela den Friedensnobelpreis im Jahr 1993 für ihre gemeinsamen Anstrengungen zur Beendigung der Apartheid in Südafrika."),

    ("Welcher Schriftsteller erhielt den Nobelpreis für Literatur im Jahr 1954?",
     "Ernest Hemingway",
     ["Gabriel Garcia Marquez", "William Faulkner", "Ernest Hemingway", "Toni Morrison"],
     "Ernest Hemingway erhielt den Nobelpreis für Literatur im Jahr 1954 für seinen meisterhaften Stil, der jüngst in 'Der alte Mann und das Meer' demonstriert wurde."),

    ("Wer wurde 2009 mit dem Nobelpreis für Physiologie oder Medizin für die Entdeckung des HIV-Virus ausgezeichnet?",
     "Françoise Barré-Sinoussi und Luc Montagnier",
     ["Harald zur Hausen", "Barry J. Marshall", "Françoise Barré-Sinoussi und Luc Montagnier", "Elizabeth Blackburn"],
     "Françoise Barré-Sinoussi und Luc Montagnier wurden 2009 für die Entdeckung des HIV-Virus mit dem Nobelpreis für Physiologie oder Medizin ausgezeichnet."),

    ("Wer erhielt den Oscar für den besten Hauptdarsteller im Jahr 2020?",
     "Joaquin Phoenix",
     ["Leonardo DiCaprio", "Joaquin Phoenix", "Brad Pitt", "Adam Driver"],
     "Joaquin Phoenix erhielt den Oscar für den besten Hauptdarsteller im Jahr 2020 für seine Rolle in 'Joker'."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Film gewann den Oscar für den besten Film im Jahr 2018?",
     "The Shape of Water",
     ["La La Land", "Moonlight", "The Shape of Water", "Green Book"],
     "The Shape of Water gewann den Oscar für den besten Film im Jahr 2018."),

    ("Wer erhielt den Nobelpreis für Wirtschaftswissenschaften im Jahr 2001 für seine Arbeit zur Asymmetrie der Information?",
     "Joseph Stiglitz",
     ["Paul Krugman", "Amartya Sen", "Joseph Stiglitz", "Robert Shiller"],
     "Joseph Stiglitz erhielt den Nobelpreis für Wirtschaftswissenschaften im Jahr 2001 für seine Arbeit zur Asymmetrie der Information."),

    ("Wer gewann 2019 den Booker Prize für den Roman 'The Testaments'?",
     "Margaret Atwood",
     ["Salman Rushdie", "Hilary Mantel", "Margaret Atwood", "Bernardine Evaristo"],
     "Margaret Atwood gewann 2019 den Booker Prize für ihren Roman 'The Testaments', der eine Fortsetzung von 'The Handmaid's Tale' ist."),

    ("Wer erhielt 2016 den Nobelpreis für Literatur?",
     "Bob Dylan",
     ["Haruki Murakami", "Philip Roth", "Alice Munro", "Bob Dylan"],
     "Bob Dylan erhielt 2016 den Nobelpreis für Literatur für seine poetischen Neuschöpfungen in der großen amerikanischen Songtradition."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Wer gewann den Friedensnobelpreis im Jahr 2014 für seinen Kampf gegen die Unterdrückung von Kindern und jungen Menschen und für das Recht aller Kinder auf Bildung?",
     "Malala Yousafzai und Kailash Satyarthi",
     ["Barack Obama", "Al Gore", "Malala Yousafzai und Kailash Satyarthi", "Greta Thunberg"],
     "Malala Yousafzai und Kailash Satyarthi gewannen den Friedensnobelpreis im Jahr 2014 für ihren Kampf gegen die Unterdrückung von Kindern und jungen Menschen und für das Recht aller Kinder auf Bildung."),

    ("Wer erhielt den Nobelpreis für Chemie im Jahr 2020 für die Entwicklung der CRISPR-Cas9-Methode zur Genom-Editierung?",
     "Emmanuelle Charpentier und Jennifer Doudna",
     ["Frances Arnold", "Joachim Frank", "Emmanuelle Charpentier und Jennifer Doudna", "Venkatraman Ramakrishnan"],
     "Emmanuelle Charpentier und Jennifer Doudna erhielten 2020 den Nobelpreis für Chemie für die Entwicklung der CRISPR-Cas9-Methode zur Genom-Editierung."),

    ("Welcher Schauspieler erhielt den Golden Globe für den besten Hauptdarsteller in einem Drama im Jahr 2020?",
     "Joaquin Phoenix",
     ["Christian Bale", "Joaquin Phoenix", "Adam Driver", "Antonio Banderas"],
     "Joaquin Phoenix erhielt 2020 den Golden Globe für den besten Hauptdarsteller in einem Drama für seine Rolle in 'Joker'."),

    ("Wer gewann den Grammy für das Album des Jahres im Jahr 2021?",
     "Taylor Swift",
     ["Beyoncé", "Taylor Swift", "Billie Eilish", "Dua Lipa"],
     "Taylor Swift gewann den Grammy für das Album des Jahres im Jahr 2021 für ihr Album 'Folklore'."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer erhielt den Nobelpreis für Frieden im Jahr 2009?",
     "Barack Obama",
     ["Al Gore", "Kofi Annan", "Barack Obama", "Yasser Arafat"],
     "Barack Obama erhielt den Nobelpreis für Frieden im Jahr 2009 für seine außergewöhnlichen Bemühungen, die internationale Diplomatie und die Zusammenarbeit zwischen den Völkern zu stärken."),

    ("Welcher Wissenschaftler erhielt den Nobelpreis für Physik im Jahr 2019 für die Entdeckung eines Exoplaneten, der einen sonnenähnlichen Stern umkreist?",
     "Michel Mayor und Didier Queloz",
     ["James Peebles", "Arthur Ashkin", "Michel Mayor und Didier Queloz", "Gerard Mourou"],
     "Michel Mayor und Didier Queloz erhielten 2019 den Nobelpreis für Physik für die Entdeckung eines Exoplaneten, der einen sonnenähnlichen Stern umkreist."),

    ("Wer gewann den Pulitzer-Preis für Belletristik im Jahr 2019 für seinen Roman 'The Overstory'?",
     "Richard Powers",
     ["Colson Whitehead", "Richard Powers", "Andrew Sean Greer", "Jennifer Egan"],
     "Richard Powers gewann 2019 den Pulitzer-Preis für Belletristik für seinen Roman 'The Overstory'."),

    ("Wer erhielt den Nobelpreis für Chemie im Jahr 2019 für die Entwicklung von Lithium-Ionen-Batterien?",
     "John B. Goodenough, M. Stanley Whittingham und Akira Yoshino",
     ["Frances Arnold", "John B. Goodenough, M. Stanley Whittingham und Akira Yoshino", "Greg Winter", "Jean-Pierre Sauvage"],
     "John B. Goodenough, M. Stanley Whittingham und Akira Yoshino erhielten 2019 den Nobelpreis für Chemie für die Entwicklung von Lithium-Ionen-Batterien."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Musiker gewann den Grammy für den besten neuen Künstler im Jahr 2020?",
     "Billie Eilish",
     ["Lizzo", "Lil Nas X", "Billie Eilish", "Maggie Rogers"],
     "Billie Eilish gewann 2020 den Grammy für den besten neuen Künstler."),

    ("Wer erhielt den Nobelpreis für Frieden im Jahr 2018 für seine Bemühungen, sexuelle Gewalt als Waffe in bewaffneten Konflikten zu beenden?",
     "Denis Mukwege und Nadia Murad",
     ["Malala Yousafzai", "Denis Mukwege und Nadia Murad", "Kailash Satyarthi", "Leymah Gbowee"],
     "Denis Mukwege und Nadia Murad erhielten 2018 den Nobelpreis für Frieden für ihre Bemühungen, sexuelle Gewalt als Waffe in bewaffneten Konflikten zu beenden."),

    ("Welcher Regisseur gewann den Oscar für die beste Regie im Jahr 2019 für den Film 'Parasite'?",
     "Bong Joon-ho",
     ["Quentin Tarantino", "Martin Scorsese", "Bong Joon-ho", "Sam Mendes"],
     "Bong Joon-ho gewann 2019 den Oscar für die beste Regie für den Film 'Parasite'."),
    
    (
    "Wer erhielt den Nobelpreis für Physik im Jahr 2018 für die Entwicklung der Laser-Technologie?",
    "Arthur Ashkin, Gérard Mourou und Donna Strickland",
    ["Penrose", "Arthur Ashkin, Gérard Mourou und Donna Strickland", "Thorne", "Weiss"],
    "Für die Entwicklung der Laser-Technologie wurden 2018 Arthur Ashkin, Gérard Mourou und Donna Strickland mit dem Nobelpreis für Physik ausgezeichnet."
),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Wer gewann den Oscar für den besten Hauptdarsteller im Jahr 2019?",
    "Rami Malek",
    ["Christian Bale", "Rami Malek", "Brad Pitt", "Joaquin Phoenix"],
    "Den Oscar für den besten Hauptdarsteller im Jahr 2019 erhielt Rami Malek für seine Darstellung von Freddie Mercury in 'Bohemian Rhapsody'."
),
(
    "Welcher Film gewann den Oscar für den besten Film im Jahr 2020?",
    "Parasite",
    ["1917", "Once Upon a Time in Hollywood", "Parasite", "Joker"],
    "Der Oscar für den besten Film ging 2020 an 'Parasite', der erste nicht-englischsprachige Film, der diese Auszeichnung erhielt."
),
(
    "Wer erhielt den Nobelpreis für Literatur im Jahr 2018?",
    "Olga Tokarczuk und Peter Handke",
    ["Mario Vargas Llosa", "Olga Tokarczuk und Peter Handke", "J.M. Coetzee", "Haruki Murakami"],
    "Der Nobelpreis für Literatur 2018 wurde an zwei Autoren verliehen: Olga Tokarczuk und Peter Handke."
),
(
    "Wer gewann den Grammy für das beste Album des Jahres im Jahr 2022?",
    "Jon Batiste",
    ["Taylor Swift", "Beyoncé", "Billie Eilish", "Jon Batiste"],
    "Im Jahr 2022 wurde der Grammy für das beste Album des Jahres an Jon Batiste für sein Album 'We Are' vergeben."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Wer erhielt den Nobelpreis für Chemie im Jahr 2018 für die Kryo-Elektronenmikroskopie?",
    "Jacques Dubochet, Joachim Frank und Richard Henderson",
    ["Richard Henderson", "Jacques Dubochet, Joachim Frank und Richard Henderson", "Frances Arnold", "Jean-Pierre Sauvage"],
    "Der Nobelpreis für Chemie 2017 ging an Jacques Dubochet, Joachim Frank und Richard Henderson für ihre Arbeiten zur Kryo-Elektronenmikroskopie."
),
(
    "Welcher Film gewann den Oscar für den besten Animationsfilm im Jahr 2021?",
    "Soul",
    ["Onward", "Soul", "Wolfwalkers", "The Croods: A New Age"],
    "Den Oscar für den besten Animationsfilm erhielt 2021 'Soul', produziert von Pixar Animation Studios."
),
(
    "Wer erhielt den Pulitzer-Preis für Belletristik im Jahr 2020 für 'The Nickel Boys'?",
    "Colson Whitehead",
    ["Colson Whitehead", "Sally Rooney", "Richard Powers", "Jennifer Egan"],
    "Der Pulitzer-Preis für Belletristik 2020 wurde Colson Whitehead für seinen Roman 'The Nickel Boys' verliehen."
),
(
    "Wer erhielt den Nobelpreis für Medizin im Jahr 2018 für Immun-Checkpoint-Inhibitoren?",
    "James Allison und Tasuku Honjo",
    ["David J. Allison", "Tasuku Honjo und James Allison", "William Kaelin", "Gregg Semenza"],
    "Für ihre Entdeckungen in Bezug auf Immun-Checkpoint-Inhibitoren erhielten James Allison und Tasuku Honjo 2018 den Nobelpreis für Medizin."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Film gewann den Oscar für das beste Originaldrehbuch im Jahr 2021?",
    "Promising Young Woman",
    ["Mank", "The Trial of the Chicago 7", "Promising Young Woman", "Judas and the Black Messiah"],
    "Der Oscar für das beste Originaldrehbuch ging 2021 an 'Promising Young Woman', geschrieben von Emerald Fennell."
),
(
    "Wer erhielt den Nobelpreis für Physik im Jahr 2017 für die Entdeckung der Gravitationswellen?",
    "Rainer Weiss, Barry C. Barish und Kip S. Thorne",
    ["Rainer Weiss, Barry C. Barish und Kip S. Thorne", "Roger Penrose", "LIGO Team", "Stephen Hawking"],
    "Die Entdeckung der Gravitationswellen brachte 2017 Rainer Weiss, Barry C. Barish und Kip S. Thorne den Nobelpreis für Physik."
),
(
    "Wer erhielt den Golden Globe für die beste Nebendarstellerin im Jahr 2020?",
    "Laura Dern",
    ["Janelle Monáe", "Margot Robbie", "Laura Dern", "Kathy Bates"],
    "Laura Dern erhielt 2020 den Golden Globe für die beste Nebendarstellerin für ihre Rolle in 'Marriage Story'."
),
(
    "Welcher Komponist gewann den Pulitzer-Preis für Musik im Jahr 2019 für 'Into the Silent Land'?",
    "Andrew Norman",
    ["John Adams", "Jennifer Higdon", "Andrew Norman", "David Lang"],
    "Andrew Norman wurde 2019 mit dem Pulitzer-Preis für Musik für sein Werk 'Into the Silent Land' ausgezeichnet."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Wer erhielt den Nobelpreis für Chemie im Jahr 2017 für die Kryo-Elektronenmikroskopie?",
    "Jacques Dubochet, Joachim Frank und Richard Henderson",
    ["Frances Arnold", "Jean-Pierre Sauvage", "Jacques Dubochet, Joachim Frank und Richard Henderson", "Greg Winter"],
    "Jacques Dubochet, Joachim Frank und Richard Henderson erhielten 2017 den Nobelpreis für Chemie für ihre Entwicklungen in der Kryo-Elektronenmikroskopie."
),
(
    "Welcher Film gewann den Oscar für die beste Dokumentation im Jahr 2020?",
    "American Factory",
    ["For Sama", "American Factory", "The Cave", "Honeyland"],
    "Der Oscar für die beste Dokumentation ging 2020 an 'American Factory', produziert von den Obamas."
),
(
    "Wer erhielt den Nobelpreis für Physik im Jahr 2022 für Quantenverschränkung?",
    "Alain Aspect, John F. Clauser und Anton Zeilinger",
    ["Alain Aspect, John F. Clauser und Anton Zeilinger", "Roger Penrose", "Juan Maldacena", "Georg Bednorz"],
    "Für ihre Arbeit zur Quantenverschränkung erhielten Alain Aspect, John F. Clauser und Anton Zeilinger 2022 den Nobelpreis für Physik."
),
(
    "Welcher Musiker gewann den Grammy für das beste Rockalbum im Jahr 2021?",
    "The Strokes",
    ["Foo Fighters", "The Strokes", "Brandi Carlile", "The Pumas"],
    "The Strokes erhielten 2021 den Grammy für das beste Rockalbum für 'The New Abnormal'."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Wer erhielt den Nobelpreis für Literatur im Jahr 2020?",
    "Louise Glück",
    ["Haruki Murakami", "Peter Handke", "Louise Glück", "J.M. Coetzee"],
    "Louise Glück wurde 2020 mit dem Nobelpreis für Literatur ausgezeichnet für ihre herausragenden poetischen Werke."
),
(
    "Welcher Regisseur gewann den Oscar für die beste Regie im Jahr 2022?",
    "Jane Campion",
    ["Kenneth Branagh", "Jane Campion", "Paul Thomas Anderson", "Steven Spielberg"],
    "Jane Campion gewann 2022 den Oscar für die beste Regie für 'The Power of the Dog'."
),
(
    "Wer erhielt den Nobelpreis für Physik im Jahr 2020 für schwarze Löcher?",
    "Roger Penrose",
    ["Roger Penrose", "Reinhard Genzel", "Andrea Ghez", "Kip Thorne"],
    "Roger Penrose wurde 2020 mit dem Nobelpreis für Physik für seine Arbeiten zu schwarzen Löchern ausgezeichnet."
),
(
    "Wer gewann den Pulitzer-Preis für Belletristik im Jahr 2018 für 'The Underground Railroad'?",
    "Colson Whitehead",
    ["Colson Whitehead", "Sally Rooney", "Richard Powers", "Jennifer Egan"],
    "Für 'The Underground Railroad' wurde Colson Whitehead 2018 mit dem Pulitzer-Preis für Belletristik ausgezeichnet."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Wer erhielt den Nobelpreis für Medizin im Jahr 2021 für die Entdeckung des SARS-CoV-2-Virus?",
    "David W. Colston und Michael Houghton",
    ["David W. Colston und Michael Houghton", "Christian Drosten", "Ralph Baric", "Paul Elrich"],
    "David W. Colston und Michael Houghton erhielten 2021 den Nobelpreis für Medizin für die Entdeckung des SARS-CoV-2-Virus."
),
(
    "Welcher Film gewann den Oscar für den besten fremdsprachigen Film im Jahr 2018?",
    "Roma",
    ["Capernaum", "Roma", "Shoplifters", "Never Look Away"],
    "Der Oscar für den besten fremdsprachigen Film ging 2018 an 'Roma', ein Werk von Alfonso Cuarón."
),
(
    "Wer erhielt den Nobelpreis für Physik im Jahr 2022 für seine Arbeiten zu Quantensystemen?",
    "Alain Aspect, John F. Clauser und Anton Zeilinger",
    ["Roger Penrose", "Alain Aspect, John F. Clauser und Anton Zeilinger", "James Peebles", "Jean-Pierre Sauvage"],
    "Der Nobelpreis für Physik 2022 ging an Alain Aspect, John F. Clauser und Anton Zeilinger für ihre Beiträge zur Quantenmechanik."
),
(
    "Welcher Film gewann den Oscar für den besten Animationsfilm im Jahr 2022?",
    "Encanto",
    ["Encanto", "Luca", "Raya and the Last Dragon", "Flee"],
    "Der Oscar für den besten Animationsfilm 2022 ging an 'Encanto' von Walt Disney."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Wer erhielt den Grammy für das beste Pop-Duo oder -Gruppe im Jahr 2021?",
    "Lady Gaga und Ariana Grande",
    ["The Weeknd", "BTS", "Lady Gaga und Ariana Grande", "Dua Lipa und Elton John"],
    "Lady Gaga und Ariana Grande erhielten 2021 den Grammy für das beste Pop-Duo oder -Gruppe für ihren Song 'Rain on Me'."
),
(
    "Welcher Autor gewann 2015 den Nobelpreis für Literatur?",
    "Svetlana Alexievich",
    ["Svetlana Alexievich", "Bob Dylan", "Patrick Modiano", "Alice Munro"],
    "Der Nobelpreis für Literatur 2015 wurde an Svetlana Alexievich verliehen für ihre Arbeiten über die Geschichte der Sowjetunion."
),
(
    "Welcher Musiker gewann den Grammy für das beste R&B-Album im Jahr 2020?",
    "Anderson .Paak",
    ["Lizzo", "Anderson .Paak", "H.E.R.", "Chris Brown"],
    "Anderson .Paak gewann 2020 den Grammy für das beste R&B-Album mit 'Ventura'."
),
(
    "Wer erhielt den Oscar für den besten Hauptdarsteller im Jahr 2019?",
    "Joaquin Phoenix",
    ["Joaquin Phoenix", "Leonardo DiCaprio", "Brad Pitt", "Adam Driver"],
    "Joaquin Phoenix erhielt 2019 den Oscar für den besten Hauptdarsteller für seine Rolle in 'Joker'."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Wer erhielt den Nobelpreis für Chemie im Jahr 2019 für die Entwicklung von Lithium-Ionen-Batterien?",
    "John B. Goodenough, M. Stanley Whittingham und Akira Yoshino",
    ["Jean-Pierre Sauvage", "John B. Goodenough, M. Stanley Whittingham und Akira Yoshino", "Frances Arnold", "Benjamin List"],
    "John B. Goodenough, M. Stanley Whittingham und Akira Yoshino erhielten 2019 den Nobelpreis für ihre Arbeiten an Lithium-Ionen-Batterien."
),
(
    "Welcher Film gewann den Oscar für die beste Regie im Jahr 2019?",
    "Bong Joon-ho",
    ["Martin Scorsese", "Quentin Tarantino", "Bong Joon-ho", "Sam Mendes"],
    "Bong Joon-ho gewann 2019 den Oscar für die beste Regie für den Film 'Parasite'."
),
(
    "Wer erhielt den Pulitzer-Preis für Belletristik im Jahr 2021 für 'The Night Watchman'?",
    "Louise Erdrich",
    ["Richard Powers", "Louise Erdrich", "Colson Whitehead", "Jennifer Egan"],
    "Der Pulitzer-Preis für Belletristik 2021 ging an Louise Erdrich für 'The Night Watchman'."
),
(
    "Wer gewann den Nobelpreis für Frieden im Jahr 2014 für seinen Kampf für Kinderrechte?",
    "Kailash Satyarthi und Malala Yousafzai",
    ["Kailash Satyarthi und Malala Yousafzai", "Barack Obama", "Al Gore", "Greta Thunberg"],
    "Kailash Satyarthi und Malala Yousafzai erhielten 2014 den Friedensnobelpreis für ihren Einsatz für Kinderrechte und Bildung."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Film erhielt 2021 den Oscar für das beste Originaldrehbuch?",
    "Promising Young Woman",
    ["The Trial of the Chicago 7", "Nomadland", "Promising Young Woman", "Judas and the Black Messiah"],
    "Der Oscar für das beste Originaldrehbuch 2021 ging an 'Promising Young Woman', geschrieben von Emerald Fennell."
),
(
    "Wer erhielt den Grammy für das beste neue Künstler im Jahr 2021?",
    "Megan Thee Stallion",
    ["Megan Thee Stallion", "Billie Eilish", "Dua Lipa", "Phoebe Bridgers"],
    "Megan Thee Stallion wurde 2021 für das beste neue Künstler ausgezeichnet."
),
(
    "Welcher Wissenschaftler erhielt den Nobelpreis für Medizin im Jahr 2018 für die Entdeckung von Mechanismen der zellulären Sauerstoffregulation?",
    "William G. Kaelin Jr., Sir Peter J. Ratcliffe und Gregg L. Semenza",
    ["William G. Kaelin Jr., Sir Peter J. Ratcliffe und Gregg L. Semenza", "Yoshinori Ohsumi", "Jeffrey C. Hall", "Michael Rosbash"],
    "Der Nobelpreis für Medizin 2018 wurde an William G. Kaelin Jr., Sir Peter J. Ratcliffe und Gregg L. Semenza verliehen."
),
(
    "Welcher Musiker gewann den Grammy für das beste Pop-Album im Jahr 2021?",
    "Taylor Swift",
    ["Taylor Swift", "Dua Lipa", "Billie Eilish", "H.E.R."],
    "Taylor Swift gewann 2021 den Grammy für das beste Pop-Album für 'Folklore'."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Wer gewann den Pulitzer-Preis für Sachbuch im Jahr 2020 für 'The Undocumented Americans'?",
    "Karina Aguilera Skvirsky",
    ["Karina Aguilera Skvirsky", "Ibram X. Kendi", "David Grann", "Mary L. Trump"],
    "Karina Aguilera Skvirsky wurde 2020 für 'The Undocumented Americans' ausgezeichnet."
),
(
    "Welcher Film gewann den Oscar für das beste Schnitt im Jahr 2020?",
    "Parasite",
    ["Parasite", "1917", "Once Upon a Time in Hollywood", "The Irishman"],
    "Der Oscar für den besten Schnitt ging 2020 an 'Parasite'."
),
(
    "Wer erhielt den Nobelpreis für Chemie im Jahr 2020 für die Entwicklung von CRISPR-Cas9?",
    "Emmanuelle Charpentier und Jennifer Doudna",
    ["Emmanuelle Charpentier und Jennifer Doudna", "Frances Arnold", "Jean-Pierre Sauvage", "Benjamin List"],
    "Der Nobelpreis für Chemie 2020 wurde an Emmanuelle Charpentier und Jennifer Doudna verliehen."
),
(
    "Welcher Regisseur gewann den Oscar für die beste Regie im Jahr 2022?",
    "Jane Campion",
    ["Jane Campion", "Kenneth Branagh", "Paul Thomas Anderson", "Steven Spielberg"],
    "Jane Campion erhielt 2022 den Oscar für die beste Regie für 'The Power of the Dog'."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Wer gewann den Grammy für das beste Metal-Album im Jahr 2021?",
    "Fiona Apple",
    ["Fiona Apple", "Tool", "Body Count", "Deftones"],
    "Tool gewann 2021 den Grammy für das beste Metal-Album mit 'Fear Inoculum'."
),
(
    "Welcher Film gewann den Oscar für das beste visuelle Design im Jahr 2021?",
    "Dune",
    ["Dune", "The Midnight Sky", "Mank", "Tenet"],
    "Der Oscar für das beste visuelle Design ging 2021 an 'Dune'."
),
(
    "Wer erhielt den Nobelpreis für Frieden im Jahr 2018 für seine Arbeit gegen sexuelle Gewalt in Konflikten?",
    "Denis Mukwege und Nadia Murad",
    ["Denis Mukwege und Nadia Murad", "Kailash Satyarthi", "Aung San Suu Kyi", "Leymah Gbowee"],
    "Denis Mukwege und Nadia Murad erhielten 2018 den Friedensnobelpreis für ihren Einsatz gegen sexuelle Gewalt in Konflikten."
),
(
    "Welcher Musiker gewann den Grammy für das beste Country-Album im Jahr 2021?",
    "Chris Stapleton",
    ["Chris Stapleton", "Miranda Lambert", "Eric Church", "Brothers Osborne"],
    "Chris Stapleton erhielt 2021 den Grammy für das beste Country-Album für 'Starting Over'."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Film gewann den Oscar für die beste Regie im Jahr 2021?",
    "Jane Campion",
    ["Emerald Fennell", "Jane Campion", "David Fincher", "Chloé Zhao"],
    "Der Preis für die beste Regie ging 2021 an Jane Campion für ihre Arbeit an einem Film, der in der amerikanischen Wildnis spielt."
),
(
    "Wer erhielt den Nobelpreis für Physik im Jahr 2022 für seine Arbeiten zur Quantenverschränkung?",
    "Alain Aspect",
    ["Alain Aspect", "Roger Penrose", "Anton Zeilinger", "John F. Clauser"],
    "Der Nobelpreis für Physik 2022 wurde für bahnbrechende Experimente verliehen, die unsere Auffassung von Quantenmechanik grundlegend verändert haben."
),
(
    "Welcher Musiker gewann den Grammy für das beste Pop-Duo oder -Gruppe im Jahr 2021?",
    "Lady Gaga und Ariana Grande",
    ["BTS", "Dua Lipa", "Lady Gaga und Ariana Grande", "The Weeknd"],
    "Der Grammy für das beste Pop-Duo oder -Gruppe ging an eine Kollaboration, die 2021 ein herausragendes gemeinsames Werk präsentierte."
),
(
    "Welcher Autor erhielt den Pulitzer-Preis für Belletristik im Jahr 2022 für 'The Netanyahus'?",
    "Joshua Cohen",
    ["Jennifer Egan", "Joshua Cohen", "Richard Powers", "Colson Whitehead"],
    "Für den Pulitzer-Preis in der Belletristik wurde ein Autor ausgezeichnet, dessen Buch die politische Landschaft und Familiengeschichte tiefgreifend erkundet."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Film gewann den Oscar für das beste internationale Feature im Jahr 2022?",
    "Drive My Car",
    ["The Hand of God", "Drive My Car", "A Hero", "Flee"],
    "Der Preis für das beste internationale Feature ging an einen japanischen Film, der eine bewegende Geschichte über Verlust und Vergebung erzählt."
),
(
    "Wer erhielt den Nobelpreis für Chemie im Jahr 2022 für seine Beiträge zur Chemie der Zellbiologie?",
    "Carolyn R. Bertozzi, Morten Meldal und K. Barry Sharpless",
    ["David W.C. MacMillan", "Carolyn R. Bertozzi, Morten Meldal und K. Barry Sharpless", "Benjamin List", "Frances Arnold"],
    "Diese Nobelpreisträger wurden für ihre Entwicklungen in der chemischen Biologie ausgezeichnet, die wesentliche Fortschritte in der Zellforschung ermöglicht haben."
),
(
    "Welcher Film gewann den Oscar für das beste Originaldrehbuch im Jahr 2021?",
    "Promising Young Woman",
    ["Judas and the Black Messiah", "Minari", "Promising Young Woman", "The Trial of the Chicago 7"],
    "Für das beste Originaldrehbuch wurde ein Film ausgezeichnet, der sich intensiv mit Themen der Rache und Gerechtigkeit auseinandersetzt."
),
(
    "Wer erhielt den Grammy für das beste R&B-Album im Jahr 2022?",
    "Silk Sonic",
    ["Jazmine Sullivan", "Silk Sonic", "H.E.R.", "SZA"],
    "Der Grammy für das beste R&B-Album ging an ein Duo, das 2021 ein von Kritikern hochgelobtes Album veröffentlicht hat."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Film gewann den Oscar für die beste Kameraarbeit im Jahr 2022?",
    "Dune",
    ["West Side Story", "Dune", "The Power of the Dog", "Nightmare Alley"],
    "Für die beste Kameraarbeit wurde ein Film ausgezeichnet, dessen visuelle Pracht und epische Darstellung die Jury beeindruckten."
),
(
    "Wer erhielt den Nobelpreis für Frieden im Jahr 2021 für seinen Einsatz für Menschenrechte?",
    "Ales Bialiatski, Memorial und Center for Civil Liberties",
    ["Ales Bialiatski, Memorial und Center for Civil Liberties", "Greta Thunberg", "Al Gore", "Kailash Satyarthi"],
    "Der Friedensnobelpreis ging an Personen und Organisationen, die sich entschieden gegen Menschenrechtsverletzungen einsetzen."
),
(
    "Wer gewann den Grammy für das beste Pop-Album im Jahr 2021?",
    "Taylor Swift",
    ["Billie Eilish", "Dua Lipa", "Ariana Grande", "Taylor Swift"],
    "Der Grammy für das beste Pop-Album ging an eine Künstlerin, deren Album durch eine außergewöhnliche Mischung aus Melancholie und Kreativität hervorsticht."
),
(
    "Welcher Autor erhielt den Pulitzer-Preis für Sachbuch im Jahr 2021?",
    "Isabel Wilkerson",
    ["David Grann", "Isabel Wilkerson", "Michael Lewis", "Hampton Sides"],
    "Der Pulitzer-Preis für Sachbuch wurde an eine Autorin verliehen, die sich mit der sozialen Hierarchie in den USA auseinandersetzt."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Schauspieler gewann den Oscar für die beste Nebenrolle im Jahr 2021?",
    "Daniel Kaluuya",
    ["Paul Raci", "Leslie Odom Jr.", "Sacha Baron Cohen", "Daniel Kaluuya"],
    "Der Oscar für die beste Nebenrolle ging an einen Schauspieler, dessen kraftvolle Darstellung in einem biografischen Drama große Anerkennung fand."
),
(
    "Welcher Film gewann den Oscar für die beste Regie im Jahr 2022?",
    "Jane Campion",
    ["Kenneth Branagh", "Jane Campion", "Chloé Zhao", "Steven Spielberg"],
    "Der Oscar für die beste Regie ging an eine Regisseurin, die eine eindrucksvolle Geschichte über eine Familie in einem konfliktreichen Land inszenierte."
),
(
    "Wer erhielt den Nobelpreis für Medizin im Jahr 2021 für seine Arbeiten zur mRNA-Technologie?",
    "David P. Baltimore, Drew Weissman und Katalin Karikó",
    ["David P. Baltimore, Drew Weissman und Katalin Karikó", "Ardem Patapoutian", "Jeffrey C. Hall", "David Julius"],
    "Der Nobelpreis für Medizin wurde für bahnbrechende Arbeiten verliehen, die entscheidend zur Entwicklung von Impfstoffen beigetragen haben."
),
(
    "Welcher Film gewann den Oscar für das beste internationale Feature im Jahr 2022?",
    "Drive My Car",
    ["A Hero", "Flee", "The Hand of God", "Drive My Car"],
    "Der Preis für das beste internationale Feature wurde an einen Film verliehen, der die emotionale Reise eines Mannes in einem fremden Land schildert."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Musiker gewann den Grammy für das beste neue Album im Jahr 2021?",
    "Megan Thee Stallion",
    ["Phoebe Bridgers", "Doja Cat", "BTS", "Megan Thee Stallion"],
    "Der Grammy für das beste neue Album ging an eine Künstlerin, deren Debütalbum durch seine kraftvollen Texte und originellen Beats beeindruckte."
),
(
    "Wer erhielt den Nobelpreis für Chemie im Jahr 2020 für die Entwicklung der CRISPR-Cas9-Technologie?",
    "Emmanuelle Charpentier und Jennifer Doudna",
    ["John B. Goodenough", "David W.C. MacMillan", "Frances Arnold", "Emmanuelle Charpentier und Jennifer Doudna"],
    "Der Nobelpreis für Chemie ging an zwei Wissenschaftlerinnen, die eine bahnbrechende Methode zur Genom-Editierung entwickelten."
),
(
    "Welcher Schauspieler gewann den Oscar für die beste Hauptrolle im Jahr 2021?",
    "Anthony Hopkins",
    ["Riz Ahmed", "Gary Oldman", "Chadwick Boseman", "Anthony Hopkins"],
    "Der Oscar für die beste Hauptrolle wurde an einen Schauspieler verliehen, dessen Leistung in einem intensiven Drama das Publikum tief berührte."
),
(
    "Welcher Film gewann den Oscar für die beste visuelle Effekte im Jahr 2022?",
    "Dune",
    ["No Time to Die", "Spider-Man: No Way Home", "Dune", "The Matrix Resurrections"],
    "Der Oscar für die besten visuellen Effekte ging an einen Film, der für seine beeindruckenden und innovativen visuellen Effekte gefeiert wurde."
),

    
]

class PreisFak(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(PreisFak, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Preisträger Fakten"
        self.fragen = fragenpreisfak

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

 
class Hobbys(Screen):
    def __init__(self, **kwargs):
        super(Hobbys, self).__init__(**kwargs)
        self.lyt = FloatLayout()
        
        self.label = Label (text="Starten = Themenbereich wählen", size_hint=(None, None), size=(100,100), pos_hint={"center_x":0.5,"center_y":0.65})
        self.lyt.add_widget(self.label) 
        
        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100,100),
                           pos_hint={"center_x":0.15,"y":0}
                           )                   
        self.btn1.bind(on_press=self.wechselmenu) 
        self.lyt.add_widget(self.btn1)  
                       
        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0}
                           )
        self.btn2.bind(on_press=self.wechseltrp)
        self.lyt.add_widget(self.btn2)
      
        self.btn3 = Button (background_normal='profile.png', background_down='profile.png',
                            size_hint=(None, None),
                            size=(100,100),
                            pos_hint={"center_x":0.85,"y":0}
                            )
        self.btn3.bind(on_press=self.wechselprfl)
        self.lyt.add_widget(self.btn3)
        
        self.lyt.add_widget(Image(source="logo-1.png",
                                     size_hint=(None,None),
                                     size=(150,150),
                                     pos_hint={'center_x': 0.5, 'top': 1.0}))
        
        self.themen = Button(text="Themenbereiche", background_color = '#069AF3',
                              size_hint=(None, None), size=(150,100), pos_hint={"center_x":0.5, "center_y":0.45})
        self.themen.bind(on_press=self.topic_list)
        
        self.lyt.add_widget(self.themen)
        
        self.add_widget(self.lyt)
        
    def wechselmenu (self,instance):
        self.manager.current ='menu'
        
    def wechseltrp (self, instance):
        self.manager.current = 'trophe'
        
    def wechselprfl (self, instance):
        self.manager.current = 'profile'
        
    def topic_list(self, instance):
        popup_content = GridLayout(cols=1, spacing = 10, size_hint_y=None)
        popup_content.bind(minimum_height=popup_content.setter("height"))
        
        topics = ["Bücher","Reisen","Kunst","Sports"]
        
        for topic in topics:
         btn = Button (text=str(topic), size_hint_y=None, height=40)
         btn.bind(on_press=self.switch_to_topic)
         popup_content.add_widget(btn)
        
        self.popup = Popup(title= 'Themenbereich', size_hint=(None,None), size=(300, 400), auto_dismiss=True)
        self.popup.content = popup_content
        self.popup.open()
        
    def switch_to_topic(self, instance):
        self.popup.dismiss()
        topic_key = instance.text.lower().replace(' ', '_')
        questions = self.manager.fragen.get(topic_key, [])

        if questions:
            screen_name = f"hob_{topic_key}_0"
            if not self.manager.has_screen(screen_name):
                for i, frage in enumerate(questions):
                    text, antwort, antwortmöglichkeiten, info_text = frage
                    screen_name = f"hob_{topic_key}_{i}"
                    if topic_key == "bücher":
                        screen = HOBBücher(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "reisen":
                        screen = HOBReisen(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "kunst":
                        screen = HOBKunst(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "sports":
                        screen = HOBSport(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    
                    self.manager.add_widget(screen)
            
            self.manager.current = f"hob_{topic_key}_0"
        
fragenhobbücher = [
    
     ("Welcher Roman beginnt mit dem berühmten Satz 'Es war die beste Zeit, es war die schlimmste Zeit'?",
     "Eine Geschichte aus zwei Städten",
     ["Krieg und Frieden", "Der große Gatsby", "Moby Dick", "Eine Geschichte aus zwei Städten"],
     "Der Roman 'Eine Geschichte aus zwei Städten' von Charles Dickens beginnt mit dem berühmten Satz 'Es war die beste Zeit, es war die schlimmste Zeit'."),

    ("Wer schrieb den Klassiker 'Der alte Mann und das Meer'?",
     "Ernest Hemingway",
     ["Mark Twain", "F. Scott Fitzgerald", "John Steinbeck", "Ernest Hemingway"],
     "Ernest Hemingway schrieb den Klassiker 'Der alte Mann und das Meer', der 1952 veröffentlicht wurde."),

    ("Welcher Roman von J.K. Rowling ist der erste in der Harry-Potter-Reihe?",
     "Harry Potter und der Stein der Weisen",
     ["Harry Potter und die Kammer des Schreckens", "Harry Potter und der Gefangene von Askaban", "Harry Potter und der Feuerkelch", "Harry Potter und der Stein der Weisen"],
     "Der erste Roman in der Harry-Potter-Reihe von J.K. Rowling ist 'Harry Potter und der Stein der Weisen'."),

    ("Welcher Roman wurde von George Orwell geschrieben und beschreibt eine dystopische Zukunft unter totalitärer Herrschaft?",
     "1984",
     ["Schöne neue Welt", "Fahrenheit 451", "Brave New World", "1984"],
     "George Orwells Roman '1984' beschreibt eine dystopische Zukunft unter totalitärer Herrschaft."),

    ("Welches Buch wurde von Harper Lee geschrieben und behandelt die Themen Rassismus und Ungerechtigkeit in den Südstaaten der USA?",
     "Wer die Nachtigall stört",
     ["Von Mäusen und Menschen", "Die Trauben der Zorn", "Wer die Nachtigall stört", "Unterwegs"],
     "Harper Lees Buch 'Wer die Nachtigall stört' behandelt die Themen Rassismus und Ungerechtigkeit in den Südstaaten der USA."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Wer ist der Autor des Romans 'Moby Dick'?",
     "Herman Melville",
     ["Nathaniel Hawthorne", "Edgar Allan Poe", "Herman Melville", "Herman Melville"],
     "Herman Melville ist der Autor des Romans 'Moby Dick', der 1851 veröffentlicht wurde."),

    ("Welches Werk von J.R.R. Tolkien ist ein Prequel zur 'Herr der Ringe'-Trilogie?",
     "Der Hobbit",
     ["Das Silmarillion", "Die Kinder Húrins", "Der Hobbit", "Der Herr der Ringe"],
     "J.R.R. Tolkiens 'Der Hobbit' ist ein Prequel zur 'Herr der Ringe'-Trilogie."),

    ("Welcher russische Autor schrieb 'Krieg und Frieden'?",
     "Leo Tolstoi",
     ["Fyodor Dostoevsky", "Anton Tschechow", "Alexander Puschkin", "Leo Tolstoi"],
     "Leo Tolstoi schrieb 'Krieg und Frieden', einen der bedeutendsten Romane der russischen Literatur."),

    ("Welches Buch von Gabriel García Márquez ist ein Beispiel für magischen Realismus?",
     "Hundert Jahre Einsamkeit",
     ["Liebe in den Zeiten der Cholera", "Chronik eines angekündigten Todes", "Hundert Jahre Einsamkeit", "Der Herbst des Patriarchen"],
     "Gabriel García Márquez' 'Hundert Jahre Einsamkeit' ist ein berühmtes Beispiel für magischen Realismus."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher dystopische Roman wurde von Aldous Huxley geschrieben?",
     "Schöne neue Welt",
     ["1984", "Fahrenheit 451", "Schöne neue Welt", "Die Maschinen stehen still"],
     "Aldous Huxleys 'Schöne neue Welt' ist ein dystopischer Roman, der 1932 veröffentlicht wurde."),

    ("Welches Buch von Mary Shelley gilt als eines der ersten Werke der Science-Fiction?",
     "Frankenstein",
     ["Dracula", "Der seltsame Fall des Dr. Jekyll und Mr. Hyde", "Frankenstein", "Die Zeitmaschine"],
     "Mary Shelleys 'Frankenstein' gilt als eines der ersten Werke der Science-Fiction."),

    ("Wer schrieb die Romanreihe 'Das Lied von Eis und Feuer', die als Vorlage für die Serie 'Game of Thrones' diente?",
     "George R.R. Martin",
     ["J.R.R. Tolkien", "Robert Jordan", "Terry Pratchett", "George R.R. Martin"],
     "George R.R. Martin schrieb die Romanreihe 'Das Lied von Eis und Feuer', die als Vorlage für die Serie 'Game of Thrones' diente."),

    ("Welcher Roman von Margaret Atwood spielt in einer dystopischen Zukunft und wurde als Serie adaptiert?",
     "Der Report der Magd",
     ["Oryx und Crake", "Der Report der Magd", "Die Zeuginnen", "Der blinde Mörder"],
     "Margaret Atwoods Roman 'Der Report der Magd' spielt in einer dystopischen Zukunft und wurde als Serie adaptiert."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Roman von F. Scott Fitzgerald spielt in den 1920er Jahren und behandelt Themen wie Reichtum und Exzess?",
     "Der große Gatsby",
     ["Tender is the Night", "Die Schönen und die Verdammten", "Der große Gatsby", "Diesseits vom Paradies"],
     "F. Scott Fitzgeralds Roman 'Der große Gatsby' spielt in den 1920er Jahren und behandelt Themen wie Reichtum und Exzess."),

    ("Welcher Autor schrieb 'Der Fänger im Roggen', ein Roman über die Jugend und das Erwachsenwerden?",
     "J.D. Salinger",
     ["Jack Kerouac", "John Steinbeck", "J.D. Salinger", "William Golding"],
     "J.D. Salinger schrieb 'Der Fänger im Roggen', ein Roman über die Jugend und das Erwachsenwerden."),

    ("Welches Buch von George Orwell ist eine Allegorie auf die russische Revolution und die Sowjetunion?",
     "Farm der Tiere",
     ["1984", "Farm der Tiere", "Ein Mann sieht rot", "Die Straße"],
     "George Orwells 'Farm der Tiere' ist eine Allegorie auf die russische Revolution und die Sowjetunion."),

    ("Welcher Roman von J.R.R. Tolkien spielt in Mittelerde und ist der erste Teil einer Trilogie?",
     "Die Gefährten",
     ["Die zwei Türme", "Die Rückkehr des Königs", "Der Hobbit", "Die Gefährten"],
     "J.R.R. Tolkiens 'Die Gefährten' ist der erste Teil der 'Herr der Ringe'-Trilogie und spielt in Mittelerde."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Klassiker der amerikanischen Literatur wurde von Herman Melville geschrieben und handelt von einer Walfangreise?",
     "Moby Dick",
     ["Billy Budd", "Typee", "Mardi", "Moby Dick"],
     "Herman Melvilles 'Moby Dick' handelt von einer Walfangreise und ist ein Klassiker der amerikanischen Literatur."),

    ("Welcher Roman von Jane Austen handelt von den Schwierigkeiten und Missverständnissen der Liebe und des Lebens in der englischen Gesellschaft des 19. Jahrhunderts?",
     "Stolz und Vorurteil",
     ["Emma", "Verstand und Gefühl", "Stolz und Vorurteil", "Mansfield Park"],
     "Jane Austens 'Stolz und Vorurteil' handelt von den Schwierigkeiten und Missverständnissen der Liebe und des Lebens in der englischen Gesellschaft des 19. Jahrhunderts."),

    ("Wer ist der Autor des dystopischen Romans 'Fahrenheit 451'?",
     "Ray Bradbury",
     ["Philip K. Dick", "Isaac Asimov", "Ray Bradbury", "Arthur C. Clarke"],
     "Ray Bradbury ist der Autor des dystopischen Romans 'Fahrenheit 451', der die Gesellschaft und Zensur thematisiert."),
    
    (
    "Welcher Roman von J.R.R. Tolkien beschreibt die Abenteuer von Frodo und seiner Reise, um den einen Ring zu zerstören?",
    "Die Gefährten",
    ["Die Rückkehr des Königs", "Die zwei Türme", "Der Hobbit", "Die Gefährten"],
    "J.R.R. Tolkiens 'Die Gefährten' beschreibt die Abenteuer von Frodo und seiner Reise, um den einen Ring zu zerstören."
),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Buch von Gabriel García Márquez ist ein Beispiel für magischen Realismus und erzählt von der Geschichte der Familie Buendía?",
    "Hundert Jahre Einsamkeit",
    ["Liebe in den Zeiten der Cholera", "Hundert Jahre Einsamkeit", "Chronik eines angekündigten Todes", "Der Herbst des Patriarchen"],
    "Gabriel García Márquez' 'Hundert Jahre Einsamkeit' ist ein Beispiel für magischen Realismus und erzählt die Geschichte der Familie Buendía."
),
(
    "Welcher Roman von J.D. Salinger erzählt die Geschichte eines Jugendlichen namens Holden Caulfield, der durch New York wandert?",
    "Der Fänger im Roggen",
    ["Jack Kerouac", "J.D. Salinger", "John Steinbeck", "William Faulkner"],
    "J.D. Salinger schrieb 'Der Fänger im Roggen', der die Geschichte eines Jugendlichen namens Holden Caulfield erzählt, der durch New York wandert."
),
(
    "Welches Buch von Margaret Atwood beschreibt eine dystopische Zukunft und wurde erfolgreich als Serie adaptiert?",
    "Der Report der Magd",
    ["Oryx und Crake", "Der Report der Magd", "Die Zeuginnen", "Der blinde Mörder"],
    "Margaret Atwoods 'Der Report der Magd' beschreibt eine dystopische Zukunft und wurde erfolgreich als Serie adaptiert."
),
(
    "Welches Werk von John Steinbeck beschreibt die Reise einer Familie auf der Suche nach einem besseren Leben während der Großen Depression?",
    "Die Trauben des Zorns",
    ["Von Mäusen und Menschen", "Die Trauben des Zorns", "East of Eden", "Rebellen im Blut"],
    "John Steinbecks 'Die Trauben des Zorns' beschreibt die Reise einer Familie auf der Suche nach einem besseren Leben während der Großen Depression."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Roman von Jane Austen behandelt die Themen Liebe und Missverständnisse in der englischen Gesellschaft des 19. Jahrhunderts?",
    "Stolz und Vorurteil",
    ["Emma", "Stolz und Vorurteil", "Verstand und Gefühl", "Mansfield Park"],
    "Jane Austens 'Stolz und Vorurteil' behandelt die Themen Liebe und Missverständnisse in der englischen Gesellschaft des 19. Jahrhunderts."
),
(
    "Welches Buch von J.R.R. Tolkien ist ein Prequel zur 'Herr der Ringe'-Trilogie und erzählt von einem Abenteuer in Mittelerde?",
    "Der Hobbit",
    ["Der Hobbit", "Die Rückkehr des Königs", "Die zwei Türme", "Die Gefährten"],
    "J.R.R. Tolkiens 'Der Hobbit' ist ein Prequel zur 'Herr der Ringe'-Trilogie und erzählt von einem Abenteuer in Mittelerde."
),
(
    "Welcher Roman von Herman Melville handelt von der Jagd nach einem weißen Wal und ist ein Klassiker der amerikanischen Literatur?",
    "Moby Dick",
    ["Billy Budd", "Typee", "Moby Dick", "Mardi"],
    "Herman Melvilles 'Moby Dick' handelt von der Jagd nach einem weißen Wal und ist ein Klassiker der amerikanischen Literatur."
),
(
    "Welches Buch von J.D. Salinger beschreibt die Abenteuer eines jungen Mannes namens Holden Caulfield in New York?",
    "Der Fänger im Roggen",
    ["Der Fänger im Roggen", "Franny und Zooey", "Neun Geschichten", "Seymour: Eine Einführung"],
    "J.D. Salingers 'Der Fänger im Roggen' beschreibt die Abenteuer eines jungen Mannes namens Holden Caulfield in New York."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Klassiker der englischen Literatur von William Golding beschreibt eine Gruppe von Jungen, die auf einer einsamen Insel gestrandet sind?",
    "Herr der Fliegen",
    ["Die Wellen", "Der geheime Garten", "Herr der Fliegen", "Ein Fest für die Vögel"],
    "William Goldings 'Herr der Fliegen' beschreibt eine Gruppe von Jungen, die auf einer einsamen Insel gestrandet sind und um ihr Überleben kämpfen."
),
(
    "Welcher Roman von J.K. Rowling beschreibt das Abenteuer von Harry Potter im dritten Jahr an der Hogwarts-Schule?",
    "Harry Potter und der Gefangene von Askaban",
    ["Harry Potter und der Stein der Weisen", "Harry Potter und die Kammer des Schreckens", "Harry Potter und der Gefangene von Askaban", "Harry Potter und der Feuerkelch"],
    "J.K. Rowlings 'Harry Potter und der Gefangene von Askaban' beschreibt Harry Potters Abenteuer im dritten Jahr an der Hogwarts-Schule."
),
(
    "Welcher Roman von George Orwell ist bekannt für seine dystopische Darstellung einer totalitären Gesellschaft unter der Herrschaft des Großen Bruders?",
    "1984",
    ["Schöne neue Welt", "Die Maschinen stehen still", "1984", "Fahrenheit 451"],
    "George Orwells '1984' ist bekannt für seine dystopische Darstellung einer totalitären Gesellschaft unter der Herrschaft des Großen Bruders."
),
(
    "Welches Buch von John Steinbeck erzählt von der Freundschaft zweier Landarbeiter während der Großen Depression?",
    "Von Mäusen und Menschen",
    ["Die Trauben des Zorns", "Von Mäusen und Menschen", "East of Eden", "Der große Gatsby"],
    "John Steinbecks 'Von Mäusen und Menschen' erzählt von der Freundschaft zweier Landarbeiter während der Großen Depression."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Klassiker von Leo Tolstoi beschreibt die romantischen und politischen Konflikte in Russland zur Zeit der Napoleonischen Kriege?",
    "Krieg und Frieden",
    ["Anna Karenina", "Der Tod Ivan Iljitsch", "Krieg und Frieden", "Resurrection"],
    "Leo Tolstois 'Krieg und Frieden' beschreibt die romantischen und politischen Konflikte in Russland zur Zeit der Napoleonischen Kriege."
),
(
    "Welcher Roman von Herman Melville ist bekannt für seine detaillierte Beschreibung einer Walfangreise und eines weißen Wals?",
    "Moby Dick",
    ["Billy Budd", "Moby Dick", "Typee", "Omoo"],
    "Herman Melvilles 'Moby Dick' ist bekannt für seine detaillierte Beschreibung einer Walfangreise und eines weißen Wals."
),
(
    "Welches Buch von Gabriel García Márquez beschreibt eine unsterbliche Liebe zwischen Fermina und Florentino und ist ein Beispiel für magischen Realismus?",
    "Liebe in den Zeiten der Cholera",
    ["Hundert Jahre Einsamkeit", "Chronik eines angekündigten Todes", "Liebe in den Zeiten der Cholera", "Der Herbst des Patriarchen"],
    "Gabriel García Márquez' 'Liebe in den Zeiten der Cholera' beschreibt eine unsterbliche Liebe zwischen Fermina und Florentino und ist ein Beispiel für magischen Realismus."
),
(
    "Welcher Roman von Charles Dickens, der von einem Waisenjungen im viktorianischen England handelt, beschreibt das Leben von Oliver Twist?",
    "Oliver Twist",
    ["David Copperfield", "Oliver Twist", "Great Expectations", "A Tale of Two Cities"],
    "Charles Dickens' 'Oliver Twist' beschreibt das Leben von Oliver Twist, einem Waisenjungen im viktorianischen England."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Buch von Ernest Hemingway beschreibt die Abenteuer eines alten Fischers in Kuba und seine epische Schlacht mit einem riesigen Marlin?",
    "Der alte Mann und das Meer",
    ["In einem anderen Land", "Der alte Mann und das Meer", "Wem die Stunde schlägt", "Nach dem Sturm"],
    "Ernest Hemingways 'Der alte Mann und das Meer' beschreibt die Abenteuer eines alten Fischers in Kuba und seine epische Schlacht mit einem riesigen Marlin."
),
(
    "Welcher Klassiker von Leo Tolstoi behandelt den Konflikt zwischen Russland und Napoleon während der Napoleonischen Kriege?",
    "Krieg und Frieden",
    ["Anna Karenina", "Krieg und Frieden", "Der Tod Ivan Iljitsch", "Resurrection"],
    "Leo Tolstois 'Krieg und Frieden' behandelt den Konflikt zwischen Russland und Napoleon während der Napoleonischen Kriege."
),
(
    "Welcher Roman von Mary Shelley, der die Geschichte eines Wissenschaftlers und seiner Schöpfung beschreibt, gilt als eines der ersten Werke des Science-Fiction-Genres?",
    "Frankenstein",
    ["Dracula", "Frankenstein", "Die Zeitmaschine", "Der seltsame Fall des Dr. Jekyll und Mr. Hyde"],
    "Mary Shelleys 'Frankenstein' gilt als eines der ersten Werke des Science-Fiction-Genres und beschreibt die Geschichte eines Wissenschaftlers und seiner Schöpfung."
),
(
    "Welcher Roman von George Orwell ist eine satirische Fabel über den Aufstieg und Fall einer Schweine-Diktatur?",
    "Farm der Tiere",
    ["1984", "Farm der Tiere", "Brave New World", "Die Maschinen stehen still"],
    "George Orwells 'Farm der Tiere' ist eine satirische Fabel über den Aufstieg und Fall einer Schweine-Diktatur."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Buch von J.K. Rowling beschreibt Harry Potters erste Abenteuer und seine Ankunft an der Zauberschule Hogwarts?",
    "Harry Potter und der Stein der Weisen",
    ["Harry Potter und der Stein der Weisen", "Harry Potter und die Kammer des Schreckens", "Harry Potter und der Gefangene von Askaban", "Harry Potter und der Feuerkelch"],
    "J.K. Rowlings 'Harry Potter und der Stein der Weisen' beschreibt Harry Potters erste Abenteuer und seine Ankunft an der Zauberschule Hogwarts."
),
(
    "Welches Buch von F. Scott Fitzgerald beschreibt das glamouröse, aber tragische Leben von Jay Gatsby in den 1920er Jahren?",
    "Der große Gatsby",
    ["Tender is the Night", "Der große Gatsby", "Die Schönen und die Verdammten", "Diesseits vom Paradies"],
    "F. Scott Fitzgeralds 'Der große Gatsby' beschreibt das glamouröse, aber tragische Leben von Jay Gatsby in den 1920er Jahren."
),
(
    "Welcher Roman von George Orwell zeigt eine Zukunft, in der Bücher verboten sind und verbrannt werden?",
    "Fahrenheit 451",
    ["1984", "Fahrenheit 451", "Die Maschinen stehen still", "Brave New World"],
    "George Orwells 'Fahrenheit 451' zeigt eine Zukunft, in der Bücher verboten sind und verbrannt werden."
),
(
    "Welcher Klassiker von William Faulkner beschreibt das Leben einer südstaatlichen Familie während des Amerikanischen Bürgerkriegs?",
    "Stern des Südens",
    ["Licht im August", "Stern des Südens", "Die Glut", "Der Lärm der Zeit"],
    "William Faulkners 'Stern des Südens' beschreibt das Leben einer südstaatlichen Familie während des Amerikanischen Bürgerkriegs."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Roman von J.R.R. Tolkien erzählt die Geschichte von Bilbo Beutlin und seiner Reise zum Einsamen Berg?",
    "Der Hobbit",
    ["Der Hobbit", "Die zwei Türme", "Die Rückkehr des Königs", "Die Gefährten"],
    "J.R.R. Tolkiens 'Der Hobbit' erzählt die Geschichte von Bilbo Beutlin und seiner Reise zum Einsamen Berg."
),
(
    "Welches Buch von Mary Shelley beschreibt die Geschichte eines Wissenschaftlers, der ein künstliches Leben erschafft?",
    "Frankenstein",
    ["Frankenstein", "Der seltsame Fall des Dr. Jekyll und Mr. Hyde", "Die Zeitmaschine", "Dracula"],
    "Mary Shelleys 'Frankenstein' beschreibt die Geschichte eines Wissenschaftlers, der ein künstliches Leben erschafft."
),
(
    "Welcher Roman von Gabriel García Márquez erzählt von der Geschichte einer fiktiven Stadt und deren außergewöhnlichen Ereignissen?",
    "Hundert Jahre Einsamkeit",
    ["Der Herbst des Patriarchen", "Liebe in den Zeiten der Cholera", "Hundert Jahre Einsamkeit", "Chronik eines angekündigten Todes"],
    "Gabriel García Márquez' 'Hundert Jahre Einsamkeit' erzählt von der Geschichte einer fiktiven Stadt und deren außergewöhnlichen Ereignissen."
),
(
    "Welcher Klassiker von Jack London beschreibt die Geschichte eines Hundes, der von einem Familienhund zum Schlittenhund wird?",
    "Ruf der Wildnis",
    ["Weiße Fangzähne", "Ruf der Wildnis", "Der Seewolf", "Die Tochter des Schneesturms"],
    "Jack Londons 'Ruf der Wildnis' beschreibt die Geschichte eines Hundes, der von einem Familienhund zum Schlittenhund wird."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Roman von Jane Austen beschreibt die Geschichte von Elizabeth Bennet und ihrer Familie im England des 19. Jahrhunderts?",
    "Stolz und Vorurteil",
    ["Emma", "Stolz und Vorurteil", "Verstand und Gefühl", "Mansfield Park"],
    "Jane Austens 'Stolz und Vorurteil' beschreibt die Geschichte von Elizabeth Bennet und ihrer Familie im England des 19. Jahrhunderts."
),
(
    "Welches Buch von J.D. Salinger handelt von einem jungen Mann, der nach dem Tod seines Bruders versucht, sich selbst zu finden?",
    "Der Fänger im Roggen",
    ["Franny und Zooey", "Seymour: Eine Einführung", "Der Fänger im Roggen", "Neun Geschichten"],
    "J.D. Salingers 'Der Fänger im Roggen' handelt von einem jungen Mann, der nach dem Tod seines Bruders versucht, sich selbst zu finden."
),
(
    "Welcher Roman von Ernest Hemingway erzählt von einem amerikanischen Soldaten, der während des Ersten Weltkriegs in Italien kämpft?",
    "Wem die Stunde schlägt",
    ["Der alte Mann und das Meer", "Wem die Stunde schlägt", "In einem anderen Land", "Nach dem Sturm"],
    "Ernest Hemingways 'Wem die Stunde schlägt' erzählt von einem amerikanischen Soldaten, der während des Ersten Weltkriegs in Italien kämpft."
),
(
    "Welches Buch von J.K. Rowling beschreibt Harry Potters Abenteuer in seinem zweiten Jahr an der Hogwarts-Schule?",
    "Harry Potter und die Kammer des Schreckens",
    ["Harry Potter und der Stein der Weisen", "Harry Potter und die Kammer des Schreckens", "Harry Potter und der Gefangene von Askaban", "Harry Potter und der Feuerkelch"],
    "J.K. Rowlings 'Harry Potter und die Kammer des Schreckens' beschreibt Harry Potters Abenteuer in seinem zweiten Jahr an der Hogwarts-Schule."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Roman von Margaret Atwood wurde als Serie erfolgreich adaptiert und spielt in einer dystopischen Zukunft?",
    "Der Report der Magd",
    ["Oryx und Crake", "Die Zeuginnen", "Der Report der Magd", "Der blinde Mörder"],
    "Margaret Atwoods 'Der Report der Magd' spielt in einer dystopischen Zukunft und wurde erfolgreich als Serie adaptiert."
),
(
    "Welches Buch von Gabriel García Márquez behandelt die Erlebnisse und das Schicksal der Familie Buendía über mehrere Generationen?",
    "Hundert Jahre Einsamkeit",
    ["Liebe in den Zeiten der Cholera", "Hundert Jahre Einsamkeit", "Chronik eines angekündigten Todes", "Der Herbst des Patriarchen"],
    "Gabriel García Márquez' 'Hundert Jahre Einsamkeit' behandelt die Erlebnisse und das Schicksal der Familie Buendía über mehrere Generationen."
),
(
    "Welcher Roman von Aldous Huxley beschreibt eine Zukunft, in der Menschen genetisch manipuliert und konditioniert werden?",
    "Schöne neue Welt",
    ["1984", "Fahrenheit 451", "Schöne neue Welt", "Die Maschinen stehen still"],
    "Aldous Huxleys 'Schöne neue Welt' beschreibt eine Zukunft, in der Menschen genetisch manipuliert und konditioniert werden."
),
(
    "Welcher Klassiker von Charles Dickens beschreibt das Leben des kleinen Oliver Twist, der in einem Waisenhaus aufwächst?",
    "Oliver Twist",
    ["David Copperfield", "Oliver Twist", "Great Expectations", "Bleak House"],
    "Charles Dickens' 'Oliver Twist' beschreibt das Leben des kleinen Oliver Twist, der in einem Waisenhaus aufwächst."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Roman von Leo Tolstoi ist bekannt für seine tiefgründige Darstellung der russischen Gesellschaft und ihrer politischen Umwälzungen?",
    "Krieg und Frieden",
    ["Anna Karenina", "Der Tod Ivan Iljitsch", "Krieg und Frieden", "Resurrection"],
    "Leo Tolstois 'Krieg und Frieden' ist bekannt für seine tiefgründige Darstellung der russischen Gesellschaft und ihrer politischen Umwälzungen."
),
(
    "Welches Buch von Mary Shelley ist ein Klassiker der Science-Fiction und erzählt die Geschichte eines Wissenschaftlers, der künstliches Leben erschafft?",
    "Frankenstein",
    ["Der seltsame Fall des Dr. Jekyll und Mr. Hyde", "Die Zeitmaschine", "Frankenstein", "Dracula"],
    "Mary Shelleys 'Frankenstein' erzählt die Geschichte eines Wissenschaftlers, der künstliches Leben erschafft und ist ein Klassiker der Science-Fiction."
),
(
    "Welcher Roman von Jack London beschreibt die Abenteuer eines Hundes in der Wildnis des Yukon-Territoriums?",
    "Ruf der Wildnis",
    ["Weiße Fangzähne", "Ruf der Wildnis", "Der Seewolf", "Die Tochter des Schneesturms"],
    "Jack Londons 'Ruf der Wildnis' beschreibt die Abenteuer eines Hundes in der Wildnis des Yukon-Territoriums."
),
(
    "Welcher Roman von J.K. Rowling führt Harry Potter in sein viertes Jahr an der Hogwarts-Schule und beschreibt die Ereignisse des Trimagischen Turniers?",
    "Harry Potter und der Feuerkelch",
    ["Harry Potter und der Stein der Weisen", "Harry Potter und die Kammer des Schreckens", "Harry Potter und der Gefangene von Askaban", "Harry Potter und der Feuerkelch"],
    "J.K. Rowlings 'Harry Potter und der Feuerkelch' führt Harry Potter in sein viertes Jahr an der Hogwarts-Schule und beschreibt die Ereignisse des Trimagischen Turniers."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Buch von George Orwell zeigt eine dystopische Welt, in der Menschen in einer totalitären Gesellschaft ohne Freiheit leben?",
    "1984",
    ["Farm der Tiere", "1984", "Brave New World", "Fahrenheit 451"],
    "George Orwells '1984' zeigt eine dystopische Welt, in der Menschen in einer totalitären Gesellschaft ohne Freiheit leben."
),
(
    "Welches Buch von Jane Austen handelt von der vergeblichen Suche nach einem Ehemann in der englischen Gesellschaft des 19. Jahrhunderts?",
    "Emma",
    ["Stolz und Vorurteil", "Emma", "Verstand und Gefühl", "Mansfield Park"],
    "Jane Austens 'Emma' handelt von der vergeblichen Suche nach einem Ehemann in der englischen Gesellschaft des 19. Jahrhunderts."
),
(
    "Welcher Roman von Kurt Vonnegut ist bekannt für seinen experimentellen Schreibstil und seine anti-kriegs Botschaft?",
    "Schlachthof 5",
    ["Slaughterhouse-Five", "Cat's Cradle", "Breakfast of Champions", "God Bless You, Mr. Rosewater"],
    "Kurt Vonneguts 'Schlachthof 5' ist bekannt für seinen experimentellen Schreibstil und seine anti-kriegs Botschaft."
),
(
    "Welches Buch von Mark Twain erzählt die Abenteuer eines Jungen und eines Sklaven auf dem Mississippi River?",
    "Die Abenteuer von Huckleberry Finn",
    ["Die Abenteuer von Huckleberry Finn", "Tom Sawyer", "Der Prinz und der Bettelknabe", "Die Abenteuer des Tom Sawyer"],
    "Mark Twains 'Die Abenteuer von Huckleberry Finn' erzählt die Abenteuer eines Jungen und eines Sklaven auf dem Mississippi River."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Klassiker von Herman Melville handelt von einer Walfangreise und der Besessenheit eines Kapitäns?",
    "Moby Dick",
    ["Billy Budd", "Typee", "Moby Dick", "The Piazza Tales"],
    "Herman Melvilles 'Moby Dick' handelt von einer Walfangreise und der Besessenheit eines Kapitäns."
),
(
    "Welches Buch von James Joyce ist bekannt für seinen stream-of-consciousness-Stil und beschreibt einen einzigen Tag in Dublin?",
    "Ulysses",
    ["A Portrait of the Artist as a Young Man", "Dubliners", "Ulysses", "Finnegans Wake"],
    "James Joyces 'Ulysses' ist bekannt für seinen stream-of-consciousness-Stil und beschreibt einen einzigen Tag in Dublin."
),
(
    "Welcher Roman von Gabriel García Márquez erzählt von der außergewöhnlichen Lebensgeschichte eines Gynäkologen und seiner Tochter?",
    "Liebe in den Zeiten der Cholera",
    ["Hundert Jahre Einsamkeit", "Liebe in den Zeiten der Cholera", "Chronik eines angekündigten Todes", "Der Herbst des Patriarchen"],
    "Gabriel García Márquez' 'Liebe in den Zeiten der Cholera' erzählt von der außergewöhnlichen Lebensgeschichte eines Gynäkologen und seiner Tochter."
),
(
    "Welches Buch von Franz Kafka beschreibt den Kampf eines Mannes gegen ein undurchdringliches Gerichtssystem?",
    "Der Prozess",
    ["Das Schloss", "Der Prozess", "Amerika", "Die Verwandlung"],
    "Franz Kafkas 'Der Prozess' beschreibt den Kampf eines Mannes gegen ein undurchdringliches Gerichtssystem."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Werk von H.G. Wells beschreibt die Erlebnisse eines Zeitreisenden, der in die ferne Zukunft reist?",
    "Die Zeitmaschine",
    ["Der Krieg der Welten", "Die Zeitmaschine", "Die unsichtbare Insel", "Insel der Gefangenen"],
    "H.G. Wells' 'Die Zeitmaschine' beschreibt die Erlebnisse eines Zeitreisenden, der in die ferne Zukunft reist."
),
(
    "Welches Buch von Virginia Woolf behandelt das Leben und die Gedanken einer Frau im England des 19. Jahrhunderts?",
    "Mrs. Dalloway",
    ["To the Lighthouse", "Mrs. Dalloway", "Orlando", "The Waves"],
    "Virginia Woolfs 'Mrs. Dalloway' behandelt das Leben und die Gedanken einer Frau im England des 19. Jahrhunderts."
),
(
    "Welcher Roman von Thomas Mann beschreibt das Leben des jungen Hans Castorp in einem Sanatorium in der Schweiz?",
    "Der Zauberberg",
    ["Buddenbrooks", "Der Zauberberg", "Doktor Faustus", "Mario und der Zauberer"],
    "Thomas Manns 'Der Zauberberg' beschreibt das Leben des jungen Hans Castorp in einem Sanatorium in der Schweiz."
),
(
    "Welches Buch von John Steinbeck erzählt von der großen Depression und der Armut einer Familie in Kalifornien?",
    "Die Trauben des Zorns",
    ["Von Mäusen und Menschen", "Die Trauben des Zorns", "East of Eden", "Der Winter der ertrunkenen Männer"],
    "John Steinbecks 'Die Trauben des Zorns' erzählt von der großen Depression und der Armut einer Familie in Kalifornien."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Buch von Oscar Wilde beschreibt den Verfall eines Mannes, der sein Porträt anstelle seines eigenen Alterungsprozesses sieht?",
    "Das Bildnis des Dorian Gray",
    ["Das Bildnis des Dorian Gray", "Die Canterville Gespenst", "Der glückliche Prinz", "Salomé"],
    "Oscar Wildes 'Das Bildnis des Dorian Gray' beschreibt den Verfall eines Mannes, der sein Porträt anstelle seines eigenen Alterungsprozesses sieht."
),
(
    "Welcher Roman von Leo Tolstoi behandelt die Beziehung und Konflikte zwischen Anna Karenina und ihrem Liebhaber?",
    "Anna Karenina",
    ["Krieg und Frieden", "Anna Karenina", "Der Tod Ivan Iljitsch", "Resurrection"],
    "Leo Tolstois 'Anna Karenina' behandelt die Beziehung und Konflikte zwischen Anna Karenina und ihrem Liebhaber."
),
(
    "Welches Buch von Aldous Huxley beschreibt eine Welt, in der Menschen durch genetische Manipulation und soziale Konditionierung kontrolliert werden?",
    "Schöne neue Welt",
    ["1984", "Schöne neue Welt", "Fahrenheit 451", "Die Maschinen stehen still"],
    "Aldous Huxleys 'Schöne neue Welt' beschreibt eine Welt, in der Menschen durch genetische Manipulation und soziale Konditionierung kontrolliert werden."
),
(
    "Welcher Klassiker von Ernest Hemingway handelt von den Kämpfen eines alten Fischers gegen einen riesigen Marlin?",
    "Der alte Mann und das Meer",
    ["Der alte Mann und das Meer", "Wem die Stunde schlägt", "In einem anderen Land", "Nach dem Sturm"],
    "Ernest Hemingways 'Der alte Mann und das Meer' handelt von den Kämpfen eines alten Fischers gegen einen riesigen Marlin."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Buch von Harper Lee beschreibt die Kindheit eines Mädchens in den Südstaaten der USA und den rassistischen Konflikt, dem ihr Vater gegenübersteht?",
    "Wer die Nachtigall stört",
    ["Die Kälte des Winters", "Wer die Nachtigall stört", "Fahrenheit 451", "Der große Gatsby"],
    "Harper Lees 'Wer die Nachtigall stört' beschreibt die Kindheit eines Mädchens in den Südstaaten der USA und den rassistischen Konflikt, dem ihr Vater gegenübersteht."
),
(
    "Welcher Roman von John Steinbeck beschreibt die Schwierigkeiten der Arbeiterschaft in der amerikanischen Landwirtschaft während der Depression?",
    "Von Mäusen und Menschen",
    ["Von Mäusen und Menschen", "Die Trauben des Zorns", "East of Eden", "Der Winter der ertrunkenen Männer"],
    "John Steinbecks 'Von Mäusen und Menschen' beschreibt die Schwierigkeiten der Arbeiterschaft in der amerikanischen Landwirtschaft während der Depression."
),
(
    "Welches Buch von William Golding erzählt von einer Gruppe von Jungen, die auf einer unbewohnten Insel gestrandet sind und um das Überleben kämpfen?",
    "Herr der Fliegen",
    ["Der Herr der Fliegen", "Die Inschrift", "Die Kinder der Nacht", "Der Gott der Unruhe"],
    "William Goldings 'Herr der Fliegen' erzählt von einer Gruppe von Jungen, die auf einer unbewohnten Insel gestrandet sind und um das Überleben kämpfen."
),
(
    "Welches Buch von J.R.R. Tolkien beschreibt den letzten Teil der Herr der Ringe-Trilogie und den endgültigen Kampf gegen Sauron?",
    "Die Rückkehr des Königs",
    ["Die zwei Türme", "Der Hobbit", "Die Rückkehr des Königs", "Die Gefährten"],
    "J.R.R. Tolkiens 'Die Rückkehr des Königs' beschreibt den letzten Teil der Herr der Ringe-Trilogie und den endgültigen Kampf gegen Sauron."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Buch von Agatha Christie ist ein berühmter Kriminalroman, in dem Hercule Poirot einen Mord in einem luxuriösen Zug aufklärt?",
    "Mord im Orient-Express",
    ["Mord im Orient-Express", "Das Leben und die Abenteuer von Hercule Poirot", "Mord auf dem Nil", "Das unvollendete Bildnis"],
    "Agatha Christies 'Mord im Orient-Express' ist ein berühmter Kriminalroman, in dem Hercule Poirot einen Mord in einem luxuriösen Zug aufklärt."
),
(
    "Welches Buch von J.D. Salinger beschreibt die Erfahrungen eines Teenagers, der Schwierigkeiten hat, sich in der Erwachsenenwelt zurechtzufinden?",
    "Der Fänger im Roggen",
    ["Der Fänger im Roggen", "Franny und Zooey", "Neun Geschichten", "Seymour: Eine Einführung"],
    "J.D. Salingers 'Der Fänger im Roggen' beschreibt die Erfahrungen eines Teenagers, der Schwierigkeiten hat, sich in der Erwachsenenwelt zurechtzufinden."
),
(
    "Welches Buch von Franz Kafka beschreibt die Transformation eines Mannes in ein Insekt und die Auswirkungen auf sein Leben?",
    "Die Verwandlung",
    ["Die Verwandlung", "Der Prozess", "Das Schloss", "Amerika"],
    "Franz Kafkas 'Die Verwandlung' beschreibt die Transformation eines Mannes in ein Insekt und die Auswirkungen auf sein Leben."
)

]
        
class HOBBücher(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(HOBBücher, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Bücher"
        self.fragen = fragenhobbücher

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

 
        
fragenhobreisen = [
    
     ("Welche Stadt ist bekannt als die Stadt der Lichter?",
     "Paris",
     ["New York", "Tokyo", "London", "Paris"],
     "Paris ist bekannt als die Stadt der Lichter, berühmt für seine beleuchteten Sehenswürdigkeiten und romantische Atmosphäre."),

    ("Welches Land ist bekannt für seine alten Pyramiden?",
     "Ägypten",
     ["Mexiko", "Indien", "China", "Ägypten"],
     "Ägypten ist bekannt für seine alten Pyramiden, darunter die berühmten Pyramiden von Gizeh."),

    ("Welches Wahrzeichen ist ein berühmtes Symbol von Sydney?",
     "Sydney Opernhaus",
     ["Eiffelturm", "Kolosseum", "Sydney Opernhaus", "Freiheitsstatue"],
     "Das Sydney Opernhaus ist ein berühmtes Wahrzeichen von Sydney und ein architektonisches Meisterwerk."),

    ("Welche Stadt wird oft als die Wiege der Renaissance bezeichnet?",
     "Florenz",
     ["Paris", "Rom", "Athen", "Florenz"],
     "Florenz wird oft als die Wiege der Renaissance bezeichnet, bekannt für seine Kunst und Architektur."),

    ("In welchem Land befindet sich die Große Mauer?",
     "China",
     ["Japan", "Indien", "Südkorea", "China"],
     "Die Große Mauer befindet sich in China und ist eines der beeindruckendsten Bauwerke der Welt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Fluss fließt durch London?",
     "Thames",
     ["Seine", "Thames", "Rhein", "Donau"],
     "Die Thames fließt durch London und ist ein bedeutendes Wahrzeichen der Stadt."),

    ("Welches Land ist für den Machu Picchu bekannt?",
     "Peru",
     ["Brasilien", "Chile", "Mexiko", "Peru"],
     "Peru ist für den Machu Picchu bekannt, eine beeindruckende Inka-Ruine in den Anden."),

    ("Welche Stadt ist die Hauptstadt von Japan?",
     "Tokyo",
     ["Kyoto", "Osaka", "Tokyo", "Hiroshima"],
     "Tokyo ist die Hauptstadt von Japan und eine der bevölkerungsreichsten Städte der Welt."),

    ("In welchem Land liegt das Taj Mahal?",
     "Indien",
     ["Pakistan", "Bangladesch", "Sri Lanka", "Indien"],
     "Das Taj Mahal liegt in Indien und ist ein Symbol für die Liebe und ein Meisterwerk der Architektur."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welches europäische Land ist bekannt für seine Fjorde?",
     "Norwegen",
     ["Schweden", "Finnland", "Island", "Norwegen"],
     "Norwegen ist bekannt für seine atemberaubenden Fjorde und spektakulären Landschaften."),

    ("Welches Land ist die Heimat des berühmten Eiffelturms?",
     "Frankreich",
     ["Spanien", "Deutschland", "Frankreich", "Italien"],
     "Frankreich ist die Heimat des berühmten Eiffelturms, der in Paris steht."),

    ("Welche Stadt ist bekannt für den Karneval und die Copacabana?",
     "Rio de Janeiro",
     ["Buenos Aires", "Havanna", "Rio de Janeiro", "Lima"],
     "Rio de Janeiro ist bekannt für den Karneval und die Copacabana, einen der berühmtesten Strände der Welt."),

    ("In welchem Land liegt der Grand Canyon?",
     "USA",
     ["Kanada", "Mexiko", "Australien", "USA"],
     "Der Grand Canyon liegt in den USA und ist eines der beeindruckendsten Naturwunder der Welt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist bekannt für seine Tulpen und Windmühlen?",
     "Niederlande",
     ["Belgien", "Deutschland", "Dänemark", "Niederlande"],
     "Die Niederlande sind bekannt für ihre Tulpenfelder und Windmühlen, insbesondere in der Region rund um Amsterdam."),

    ("Welche Stadt ist berühmt für den Schiefen Turm?",
     "Pisa",
     ["Rom", "Florenz", "Venedig", "Pisa"],
     "Der Schiefe Turm von Pisa befindet sich in der italienischen Stadt Pisa und ist ein berühmtes Wahrzeichen."),

    ("Welches Land ist bekannt für das Outback und das Great Barrier Reef?",
     "Australien",
     ["Neuseeland", "Südafrika", "Australien", "Fidschi"],
     "Australien ist bekannt für das Outback und das Great Barrier Reef, das größte Korallenriff der Welt."),

    ("Welche Stadt ist für die antike Akropolis berühmt?",
     "Athen",
     ["Rom", "Istanbul", "Athen", "Kairo"],
     "Athen ist für die antike Akropolis berühmt, die auf einem Hügel über der Stadt thront und ein bedeutendes historisches Wahrzeichen ist."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welches Land ist berühmt für seine Sambatänzer und den Zuckerhut?",
     "Brasilien",
     ["Argentinien", "Brasilien", "Kolumbien", "Venezuela"],
     "Brasilien ist berühmt für seine Sambatänzer und den Zuckerhut, einen ikonischen Berg in Rio de Janeiro."),

    ("In welchem Land liegt die berühmte Ruine von Petra?",
     "Jordanien",
     ["Ägypten", "Israel", "Jordanien", "Libanon"],
     "Die berühmte Ruine von Petra liegt in Jordanien und ist ein beeindruckendes archäologisches und historisches Wahrzeichen."),

    ("Welches Land ist bekannt für seine Whisky-Produktion und die Highlands?",
     "Schottland",
     ["Irland", "Wales", "Kanada", "Schottland"],
     "Schottland ist bekannt für seine Whisky-Produktion und die malerischen Highlands, eine Region mit atemberaubenden Landschaften."),
    
        (
        "Welcher berühmte Fluss in Afrika war entscheidend für die Entwicklung der antiken Zivilisation entlang seiner Ufer?",
        "Nil",
        ["Yangtze", "Nil", "Mississippi", "Amazonas"],
        "Der Nil, der durch Ägypten fließt, war für die antike Zivilisation entlang seiner Ufer von großer Bedeutung. Er gilt als der längste Fluss in Afrika und hat maßgeblich zur Entwicklung der ägyptischen Kultur beigetragen."
    ),
        ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "In welchem Land findet man die historischen Tempelanlagen von Angkor Wat, die als Weltkulturerbe gelten?",
        "Kambodscha",
        ["Kambodscha", "Vietnam", "Laos", "Thailand"],
        "Die beeindruckenden Tempelanlagen von Angkor Wat befinden sich in Kambodscha. Sie sind als Weltkulturerbe anerkannt und gelten als bedeutendes Beispiel für die Architektur der Khmer-Zivilisation."
    ),
    (
        "Welche Stadt in Italien ist berühmt für ihre Kanäle und wird oft als 'Die Stadt der Brücken' bezeichnet?",
        "Venedig",
        ["Florenz", "Mailand", "Venedig", "Rom"],
        "Venedig, bekannt für seine zahlreichen Kanäle und Brücken, wird oft als 'Die Stadt der Brücken' bezeichnet. Die einzigartige Stadtstruktur macht sie zu einem der beliebtesten Reiseziele in Italien."
    ),
    (
        "Welches Land in Südamerika ist bekannt für die Ruinen von Machu Picchu, einer alten Inka-Stadt?",
        "Peru",
        ["Bolivien", "Kolumbien", "Peru", "Ecuador"],
        "Die Ruinen von Machu Picchu befinden sich in Peru und sind ein bedeutendes archäologisches Erbe der Inka-Zivilisation. Diese alte Stadt ist ein beliebtes Ziel für Reisende aus aller Welt."
    ),
    (
        "In welchem europäischen Land kann man das berühmte Schloss Neuschwanstein besuchen, das oft als Märchenschloss bezeichnet wird?",
        "Deutschland",
        ["Frankreich", "Österreich", "Deutschland", "Schweiz"],
        "Das Schloss Neuschwanstein, das oft als Märchenschloss bezeichnet wird, befindet sich in Deutschland. Es ist bekannt für seine romantische Architektur und zieht jedes Jahr zahlreiche Touristen an."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Stadt in Australien ist bekannt für ihre ikonische Oper und ihre schönen Strände?",
        "Sydney",
        ["Perth", "Brisbane", "Sydney", "Melbourne"],
        "Sydney ist berühmt für das Sydney Opera House und seine beeindruckenden Strände. Die Stadt ist ein beliebtes Ziel für Touristen, die sowohl kulturelle als auch entspannende Erlebnisse suchen."
    ),
    (
        "Welcher große See in Afrika ist bekannt für seine Größe und seine Bedeutung für das Ökosystem der Region?",
        "Victoriasee",
        ["Tanganjikasee", "Victoriasee", "Malawisee", "Albertsee"],
        "Der Victoriasee ist der größte See in Afrika und hat eine entscheidende Bedeutung für das Ökosystem der Region. Er liegt an der Grenze zwischen mehreren Ländern und spielt eine wichtige Rolle im Leben der Menschen vor Ort."
    ),
    (
        "Welches Land in Asien ist bekannt für seine faszinierenden Tempel, darunter der Tempel von Angkor Wat?",
        "Kambodscha",
        ["Thailand", "Kambodscha", "Vietnam", "Laos"],
        "Kambodscha ist bekannt für die Tempelanlagen von Angkor Wat, die als eines der bedeutendsten archäologischen Wunder der Welt gelten. Diese Stätten sind ein faszinierendes Ziel für Reisende."
    ),
    (
        "In welcher Stadt in Frankreich befindet sich der berühmte Eiffelturm?",
        "Paris",
        ["Marseille", "Paris", "Nizza", "Lyon"],
        "Der Eiffelturm, ein weltberühmtes Wahrzeichen, befindet sich in Paris. Die Stadt ist bekannt für ihre romantische Atmosphäre und ihre historische Architektur."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Land ist für seine luxuriösen Strände und Inseln bekannt, darunter die Malediven und Mauritius?",
        "Malediven",
        ["Fidschi", "Malediven", "Mauritius", "Bahamas"],
        "Die Malediven sind weltweit bekannt für ihre luxuriösen Strände und Inseln. Diese Inselkette ist ein beliebtes Ziel für Reisende, die paradiesische Strände und kristallklares Wasser suchen."
    ),
    (
        "Welcher amerikanische Fluss ist bekannt für seine bedeutende Rolle in der Geschichte und seine lange Länge?",
        "Mississippi",
        ["Mississippi", "Columbia", "Amazonas", "Colorado"],
        "Der Mississippi-Fluss ist einer der längsten Flüsse in Nordamerika und hat eine große historische Bedeutung. Er hat die Entwicklung der Region maßgeblich beeinflusst."
    ),
    (
        "In welchem Land befindet sich die beeindruckende Landschaft des Grand Canyon, die für ihre atemberaubende Schönheit bekannt ist?",
        "Vereinigte Staaten",
        ["Vereinigte Staaten", "Kanada", "Mexiko", "Australien"],
        "Der Grand Canyon, bekannt für seine atemberaubende Schönheit und immense Größe, befindet sich in den Vereinigten Staaten. Er ist eines der beeindruckendsten Naturwunder der Welt."
    ),
    (
        "Welche Inselgruppe in Griechenland ist berühmt für ihre weißen Sandstrände und blauen Gewässer?",
        "Kykladen",
        ["Kykladen", "Rhodos", "Kreta", "Korfu"],
        "Die Kykladen, eine Inselgruppe in Griechenland, sind bekannt für ihre weißen Sandstrände und das klare, blaue Wasser. Sie sind ein beliebtes Reiseziel für Sonnenanbeter."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches südamerikanische Land ist berühmt für seine riesigen Regenwälder und seine biologische Vielfalt?",
        "Brasilien",
        ["Argentinien", "Chile", "Kolumbien", "Brasilien"],
        "Brasilien ist berühmt für seine riesigen Regenwälder, insbesondere das Amazonasgebiet, das eine der größten biologischen Vielfalt der Welt beherbergt."
    ),
    (
        "Welches Land ist bekannt für seine archäologischen Stätten wie die Ruinen von Petra?",
        "Jordanien",
        ["Syrien", "Ägypten", "Libanon", "Jordanien"],
        "Jordanien ist bekannt für die archäologischen Stätten von Petra, einer alten Stadt, die in die Felsen gemeißelt wurde und als eines der sieben Weltwunder der modernen Welt gilt."
    ),
    (
        "Welche Stadt ist bekannt für ihre historischen Ruinen, einschließlich der Akropolis, und ihre bedeutende Rolle in der antiken griechischen Kultur?",
        "Athen",
        ["Athen", "Istanbul", "Kairo", "Rom"],
        "Athen ist bekannt für ihre historischen Ruinen, einschließlich der Akropolis, und spielte eine zentrale Rolle in der antiken griechischen Kultur. Die Stadt ist ein bedeutendes kulturelles Erbe."
    ),
    (
        "In welchem Land kann man die historischen Ruinen der antiken Stadt Pompeji besichtigen, die durch einen Vulkanausbruch konserviert wurden?",
        "Italien",
        ["Spanien", "Türkei", "Marokko", "Italien"],
        "Die antiken Ruinen von Pompeji, die durch den Ausbruch des Vesuvs im Jahr 79 n. Chr. konserviert wurden, befinden sich in Italien und bieten einen faszinierenden Einblick in das Leben der Römer."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Land in Südostasien ist bekannt für seine reiche Kultur und seine Tempelanlagen, einschließlich des Wat Arun in Bangkok?",
        "Thailand",
        ["Laos", "Kambodscha", "Vietnam", "Thailand"],
        "Thailand ist bekannt für seine reiche Kultur und seine beeindruckenden Tempelanlagen, darunter der Wat Arun in Bangkok, der für seine schöne Architektur und seine historische Bedeutung geschätzt wird."
    ),
    (
        "Welche Metropole in Kanada ist bekannt für ihre beeindruckende Skyline und den CN Tower?",
        "Toronto",
        ["Toronto", "Montreal", "Calgary", "Vancouver"],
        "Toronto ist bekannt für seine beeindruckende Skyline und den CN Tower, der als eines der höchsten frei stehenden Bauwerke der Welt gilt. Die Stadt ist ein bedeutendes Zentrum für Kultur und Wirtschaft in Kanada."
    ),
        (
        "Welches Land ist für die prachtvollen Tempelanlagen von Kyoto bekannt?",
        "Japan",
        ["China", "Japan", "Korea", "Thailand"],
        "Japan ist bekannt für die prachtvollen Tempelanlagen von Kyoto, die bedeutende kulturelle und historische Stätten darstellen. Kyoto war früher die Hauptstadt Japans und ist reich an historischen Tempeln und Schreinen."
    ),
    (
        "In welchem Land kann man das beeindruckende Taj Mahal besichtigen?",
        "Indien",
        ["Indien", "Pakistan", "Bangladesch", "Nepal"],
        "Das Taj Mahal, eines der bekanntesten Wahrzeichen der Welt, befindet sich in Indien. Dieses Mausoleum wurde von Kaiser Shah Jahan in Erinnerung an seine Frau Mumtaz Mahal erbaut und gilt als Meisterwerk der Mogularchitektur."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche australische Stadt ist berühmt für ihre Strände und das Opera House?",
        "Sydney",
        ["Brisbane", "Melbourne", "Adelaide", "Sydney"],
        "Sydney ist berühmt für ihre beeindruckenden Strände und das ikonische Sydney Opera House. Die Stadt ist ein beliebtes Touristenziel, das sowohl kulturelle als auch natürliche Attraktionen bietet."
    ),
    (
        "In welchem Land kann man die beeindruckende Felsenstadt Petra besuchen?",
        "Jordanien",
        ["Ägypten", "Jordanien", "Syrien", "Libanon"],
        "Petra, eine antike Stadt, die in Felsen gemeißelt wurde, befindet sich in Jordanien. Sie ist bekannt für ihre beeindruckende Architektur und gilt als eines der sieben Weltwunder der modernen Welt."
    ),
    (
        "Welche Stadt ist bekannt für ihre beeindruckende Architektur und die Sagrada Familia von Antoni Gaudí?",
        "Barcelona",
        ["Madrid", "Barcelona", "Valencia", "Sevilla"],
        "Barcelona ist bekannt für die beeindruckende Architektur von Antoni Gaudí, einschließlich der berühmten Sagrada Familia. Die Stadt bietet eine einzigartige Mischung aus historischer und moderner Architektur."
    ),
    (
        "Welches Land ist für seine historischen Pyramiden von Gizeh berühmt?",
        "Ägypten",
        ["Ägypten", "Libyen", "Marokko", "Algerien"],
        "Ägypten ist bekannt für die beeindruckenden Pyramiden von Gizeh, die zu den sieben Weltwundern der Antike gehören. Diese monumentalen Bauwerke sind ein bedeutendes archäologisches Erbe."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "In welchem Land befindet sich das berühmte Christ the Redeemer Statue, das auf dem Corcovado-Berg steht?",
        "Brasilien",
        ["Argentinien", "Chile", "Kolumbien", "Brasilien"],
        "Die berühmte Statue 'Christ the Redeemer', die auf dem Corcovado-Berg steht, befindet sich in Brasilien. Sie ist ein bedeutendes Wahrzeichen von Rio de Janeiro und bietet einen spektakulären Blick auf die Stadt."
    ),
    (
        "Welches Land ist für seine beeindruckenden Fjorde und die Stadt Bergen bekannt?",
        "Norwegen",
        ["Schweden", "Dänemark", "Norwegen", "Island"],
        "Norwegen ist bekannt für seine atemberaubenden Fjorde und die Stadt Bergen, die als Tor zu den Fjorden gilt. Die beeindruckende Landschaft macht Norwegen zu einem beliebten Ziel für Naturliebhaber."
    ),
    (
        "In welchem Land kann man die atemberaubende Architektur der Hagia Sophia in Istanbul erleben?",
        "Türkei",
        ["Türkei", "Griechenland", "Ägypten", "Iran"],
        "Die Hagia Sophia, bekannt für ihre atemberaubende Architektur und historische Bedeutung, befindet sich in Istanbul, Türkei. Sie war ursprünglich eine Kirche, später eine Moschee und ist jetzt ein Museum."
    ),
    (
        "Welches Land ist bekannt für seine farbenfrohen und lebhaften Märkte in Marrakesch?",
        "Marokko",
        ["Algerien", "Marokko", "Tunesien", "Ägypten"],
        "Marokko ist bekannt für seine farbenfrohen und lebhaften Märkte in Marrakesch. Die Stadt bietet ein reiches kulturelles Erbe und ist bekannt für ihre traditionellen Märkte und Souks."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "In welchem Land befindet sich die beeindruckende alte Stadt Dubrovnik, die oft als 'Perle der Adria' bezeichnet wird?",
        "Kroatien",
        ["Kroatien", "Serbien", "Montenegro", "Bosnien und Herzegowina"],
        "Dubrovnik, oft als 'Perle der Adria' bezeichnet, befindet sich in Kroatien. Die alte Stadtmauer und die historische Altstadt sind bedeutende Attraktionen an der kroatischen Adriaküste."
    ),
    (
        "Welches Land ist bekannt für seine malerischen Tulpenfelder und Windmühlen?",
        "Niederlande",
        ["Belgien", "Niederlande", "Luxemburg", "Deutschland"],
        "Die Niederlande sind bekannt für ihre malerischen Tulpenfelder und historischen Windmühlen. Diese ikonischen Symbole des Landes ziehen jedes Jahr viele Touristen an."
    ),
    (
        "Welches Land in Afrika ist für seine atemberaubenden Wüstenlandschaften wie die Sahara bekannt?",
        "Ägypten",
        ["Ägypten", "Südafrika", "Nigeria", "Marokko"],
        "Ägypten ist bekannt für die beeindruckenden Wüstenlandschaften der Sahara. Die Wüste umfasst große Teile des Landes und bietet faszinierende Landschaften und historische Stätten."
    ),
    (
        "In welchem Land kann man die historische Stadt Machu Picchu besuchen?",
        "Peru",
        ["Chile", "Bolivien", "Peru", "Kolumbien"],
        "Machu Picchu, eine alte Inka-Stadt, die in den Anden liegt, befindet sich in Peru. Die beeindruckenden Ruinen sind ein bedeutendes archäologisches Erbe und ziehen jedes Jahr viele Besucher an."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Stadt in Japan ist für ihre futuristische Architektur und das Einkaufsviertel Shibuya bekannt?",
        "Tokio",
        ["Osaka", "Kyoto", "Nara", "Tokio"],
        "Tokio ist bekannt für seine futuristische Architektur und das belebte Einkaufsviertel Shibuya. Die Stadt bietet eine spannende Mischung aus traditioneller und moderner Kultur."
    ),
    (
        "Welches Land ist für seine beeindruckenden Landschaften und die berühmte Route 66 bekannt?",
        "Vereinigte Staaten",
        ["Kanada", "Mexiko", "Vereinigte Staaten", "Australien"],
        "Die Vereinigten Staaten sind bekannt für ihre beeindruckenden Landschaften und die historische Route 66, die als eine der berühmtesten Straßen in Amerika gilt und durch viele interessante Städte führt."
    ),
    (
        "Welches Land ist für seine luxuriösen Resorts auf den Malediven bekannt?",
        "Malediven",
        ["Sri Lanka", "Indien", "Malawi", "Malediven"],
        "Die Malediven sind bekannt für ihre luxuriösen Resorts und traumhaften Strände. Diese Inselkette im Indischen Ozean ist ein beliebtes Ziel für Erholungssuchende und Honeymooner."
    ),
    (
        "In welchem europäischen Land findet man das historische Gebäude der Westminster Abbey?",
        "Vereinigtes Königreich",
        ["Frankreich", "Vereinigtes Königreich", "Deutschland", "Spanien"],
        "Westminster Abbey, ein historisches Gebäude in London, Vereinigtes Königreich, ist bekannt für seine Bedeutung bei königlichen Zeremonien und seine beeindruckende gotische Architektur."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Land ist für seine wunderschönen Strände auf der Insel Bali bekannt?",
        "Indonesien",
        ["Thailand", "Indonesien", "Philippinen", "Malaysia"],
        "Indonesien ist bekannt für die Insel Bali, die für ihre wunderschönen Strände und lebendige Kultur berühmt ist. Bali ist ein beliebtes Reiseziel für Sonnenanbeter und Kulturliebhaber."
    ),
    (
        "Welches Land in Südamerika ist für seine beeindruckenden Wasserfälle von Iguazú bekannt?",
        "Argentinien",
        ["Chile", "Brasilien", "Argentinien", "Peru"],
        "Argentinien ist bekannt für die beeindruckenden Wasserfälle von Iguazú, die sich an der Grenze zu Brasilien erstrecken. Diese Wasserfälle gehören zu den größten und spektakulärsten der Welt."
    ),
    (
        "In welchem Land kann man die berühmten Ruinen von Pompeji besichtigen?",
        "Italien",
        ["Italien", "Griechenland", "Türkei", "Frankreich"],
        "Die berühmten Ruinen von Pompeji, die durch den Ausbruch des Vesuvs im Jahr 79 n. Chr. konserviert wurden, befinden sich in Italien. Sie bieten einen einzigartigen Einblick in das Leben der Römer."
    ),
    (
        "Welches Land in Südafrika ist für seine beeindruckenden Weinanbaugebiete rund um Stellenbosch bekannt?",
        "Südafrika",
        ["Kenia", "Tansania", "Südafrika", "Namibia"],
        "Südafrika ist bekannt für seine beeindruckenden Weinanbaugebiete rund um Stellenbosch. Die Region ist berühmt für ihre Weine und bietet malerische Landschaften und historische Weingüter."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "In welchem Land kann man die beeindruckenden Tempelruinen von Angkor Wat besichtigen?",
        "Kambodscha",
        ["Thailand", "Kambodscha", "Vietnam", "Laos"],
        "Die Tempelruinen von Angkor Wat, die als eines der bedeutendsten archäologischen Wunder der Welt gelten, befinden sich in Kambodscha. Sie sind ein bedeutendes Erbe der Khmer-Zivilisation."
    ),
    (
        "Welches Land in Europa ist für seine wunderschönen Küstenstädte wie Dubrovnik bekannt?",
        "Kroatien",
        ["Italien", "Griechenland", "Kroatien", "Spanien"],
        "Kroatien ist bekannt für seine wunderschönen Küstenstädte wie Dubrovnik, die oft als 'Perle der Adria' bezeichnet wird. Die historische Stadtmauer und die malerische Altstadt sind Hauptattraktionen."
    ),
    (
        "Welches Land ist bekannt für seine futuristische Stadtarchitektur, darunter das Burj Khalifa?",
        "Vereinigte Arabische Emirate",
        ["Katar", "Saudi-Arabien", "Vereinigte Arabische Emirate", "Oman"],
        "Die Vereinigten Arabischen Emirate sind bekannt für ihre futuristische Stadtarchitektur, insbesondere das Burj Khalifa in Dubai, das als das höchste Gebäude der Welt gilt."
    ),
        (
        "Welche Stadt in Kanada ist bekannt für ihre beeindruckende Architektur und die CN Tower?",
        "Toronto",
        ["Montreal", "Ottawa", "Toronto", "Vancouver"],
        "Toronto, eine große Stadt in Kanada, ist bekannt für ihre beeindruckende Architektur. Ein besonderes Highlight ist der CN Tower, der 553 Meter hoch ist und eine atemberaubende Aussicht bietet."
    ),
        ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "In welchem Land kann man die beeindruckenden weißen Sandstrände der Seychellen genießen?",
        "Seychellen",
        ["Madagaskar", "Mauritius", "Komoren", "Seychellen"],
        "Die Seychellen sind eine Inselgruppe im Indischen Ozean. Diese Region ist berühmt für ihre unberührten weißen Sandstrände und kristallklares Wasser, das perfekte Bedingungen für einen Strandurlaub bietet."
    ),
    (
        "Welches Land ist für seine einzigartigen Gletscherlandschaften und die Stadt Reykjavik bekannt?",
        "Island",
        ["Finnland", "Schweden", "Island", "Norwegen"],
        "Island bietet einige der beeindruckendsten Gletscherlandschaften der Welt. Die Stadt Reykjavik ist nicht nur die Hauptstadt, sondern auch ein hervorragender Ausgangspunkt, um die natürlichen Wunder Islands zu erkunden."
    ),
    (
        "In welchem Land kann man die beeindruckenden historischen Stätten von Petra besichtigen?",
        "Jordanien",
        ["Irak", "Libanon", "Jordanien", "Syrien"],
        "Petra, die antike Stadt, die in den Felsen gemeißelt wurde, liegt in Jordanien. Diese beeindruckende Stätte zieht Besucher an, die sich für die archäologische Geschichte und die Architektur der alten Welt interessieren."
    ),
    (
        "Welches Land ist bekannt für seine spektakulären Nordlichter und die Stadt Tromsø?",
        "Norwegen",
        ["Finnland", "Norwegen", "Schweden", "Dänemark"],
        "Norwegen ist bekannt für die beeindruckenden Nordlichter, besonders in der Stadt Tromsø. Diese Stadt bietet ideale Bedingungen, um dieses faszinierende Naturphänomen zu beobachten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "In welchem Land kann man die antiken Ruinen von Ephesos besichtigen?",
        "Türkei",
        ["Ägypten", "Griechenland", "Italien", "Türkei"],
        "Die antiken Ruinen von Ephesos, eine der bedeutendsten archäologischen Stätten der Welt, befinden sich in der Türkei. Diese Stätte bietet einen tiefen Einblick in die Geschichte der antiken Welt."
    ),
    (
        "Welche Stadt in Italien ist berühmt für ihre Kanäle und die Rialtobrücke?",
        "Venedig",
        ["Florenz", "Rom", "Venedig", "Mailand"],
        "Venedig ist weltweit bekannt für seine malerischen Kanäle und die historische Rialtobrücke. Die Stadt bietet eine einzigartige Atmosphäre, die durch ihre Wasserstraßen und Architektur geprägt ist."
    ),
    (
        "Welches Land ist für seine beeindruckenden Wasserfälle von Iguazú bekannt?",
        "Argentinien",
        ["Brasilien", "Peru", "Bolivien", "Argentinien"],
        "Die Wasserfälle von Iguazú erstrecken sich an der Grenze zwischen Argentinien und Brasilien. Diese Naturwunder gehören zu den größten und beeindruckendsten Wasserfällen der Welt."
    ),
    (
        "In welchem Land kann man die beeindruckenden Sanddünenlandschaften von Wadi Rum erleben?",
        "Jordanien",
        ["Saudi-Arabien", "Oman", "Jordanien", "Kuwait"],
        "Wadi Rum in Jordanien ist bekannt für seine spektakulären Sanddünenlandschaften. Die Region bietet eine einzigartige Wüstenlandschaft, die oft als Kulisse für Filme verwendet wird."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Stadt in Australien ist bekannt für das Sydney Opera House und den Sydney Harbour?",
        "Sydney",
        ["Melbourne", "Perth", "Sydney", "Brisbane"],
        "Sydney ist berühmt für das ikonische Sydney Opera House und den Sydney Harbour. Diese Stadt ist ein kulturelles Zentrum und bietet zahlreiche Sehenswürdigkeiten entlang ihrer spektakulären Küste."
    ),
    (
        "Welches Land ist bekannt für die historischen Tempelruinen von Angkor Wat?",
        "Kambodscha",
        ["Laos", "Thailand", "Vietnam", "Kambodscha"],
        "Angkor Wat ist die größte religiöse Monumentanlage der Welt und befindet sich in Kambodscha. Die Ruinen sind ein bedeutendes Beispiel der Khmer-Architektur und ziehen jährlich viele Touristen an."
    ),
    (
        "In welchem Land kann man die beeindruckende Architektur der Stadt Amsterdam mit ihren Kanälen erleben?",
        "Niederlande",
        ["Belgien", "Niederlande", "Luxemburg", "Deutschland"],
        "Amsterdam in den Niederlanden ist bekannt für ihre beeindruckende Architektur und malerischen Kanäle. Die Stadt ist ein beliebtes Ziel für Touristen, die die historische und kulturelle Atmosphäre genießen möchten."
    ),
    (
        "Welches Land ist für seine historischen Ruinen von Machu Picchu bekannt?",
        "Peru",
        ["Chile", "Kolumbien", "Peru", "Ecuador"],
        "Machu Picchu ist eine beeindruckende Inka-Stätte in Peru. Die Ruinen bieten einen faszinierenden Einblick in die Inka-Zivilisation und sind ein beliebtes Ziel für Reisende aus aller Welt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Land in Afrika ist für seine beeindruckenden Wüstenlandschaften, wie die Namib-Wüste, bekannt?",
        "Namibia",
        ["Südafrika", "Namibia", "Botswana", "Zimbabwe"],
        "Namibia ist bekannt für seine atemberaubenden Wüstenlandschaften, einschließlich der Namib-Wüste. Diese Region bietet faszinierende Sanddünen und einzigartige Naturphänomene."
    ),
    (
        "In welchem Land kann man die historischen Ruinen von Pompeji besichtigen, die durch den Ausbruch des Vesuvs konserviert wurden?",
        "Italien",
        ["Griechenland", "Frankreich", "Italien", "Türkei"],
        "Die Ruinen von Pompeji, die durch den Ausbruch des Vesuvs im Jahr 79 n. Chr. erhalten wurden, befinden sich in Italien. Sie bieten einen einzigartigen Blick auf das Leben in der römischen Antike."
    ),
    (
        "Welches Land in Europa ist für seine romantische Architektur und das berühmte Schloss Neuschwanstein bekannt?",
        "Deutschland",
        ["Frankreich", "Österreich", "Schweiz", "Deutschland"],
        "Deutschland ist berühmt für das romantische Schloss Neuschwanstein, das als Vorlage für das Disney-Schloss diente. Es liegt in der bayerischen Alpenregion und zieht viele Besucher an."
    ),
    (
        "In welchem Land kann man die antiken Ruinen von Tikal besuchen, die von der Maya-Zivilisation erbaut wurden?",
        "Guatemala",
        ["Mexiko", "Honduras", "Belize", "Guatemala"],
        "Tikal, eine bedeutende Maya-Stadt, befindet sich in Guatemala. Die Ruinen sind ein wichtiges archäologisches Gebiet und bieten faszinierende Einblicke in die Geschichte der Maya-Zivilisation."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Land in Asien ist für seine malerischen Reisterrassen in der Region Sapa bekannt?",
        "Vietnam",
        ["Laos", "Kambodscha", "Vietnam", "Thailand"],
        "Vietnam ist bekannt für seine atemberaubenden Reisterrassen in der Region Sapa. Diese malerische Landschaft ist ein beliebtes Ziel für Naturliebhaber und Wanderer."
    ),
    (
        "In welchem Land kann man die historische Stadt Dubrovnik besuchen, die oft als 'Perle der Adria' bezeichnet wird?",
        "Kroatien",
        ["Serbien", "Montenegro", "Bosnien und Herzegowina", "Kroatien"],
        "Dubrovnik, oft als 'Perle der Adria' bezeichnet, liegt in Kroatien. Die alte Stadtmauer und die historische Altstadt sind wichtige kulturelle und touristische Highlights an der kroatischen Adriaküste."
    ),
    (
        "Welches Land in Südamerika ist für seine beeindruckenden Strände und das pulsierende Leben von Rio de Janeiro bekannt?",
        "Brasilien",
        ["Chile", "Peru", "Bolivien", "Brasilien"],
        "Brasilien ist bekannt für seine beeindruckenden Strände, einschließlich der berühmten Copacabana in Rio de Janeiro. Die Stadt bietet ein lebhaftes Nachtleben und eine reiche Kultur."
    ),
    (
        "Welches Land ist für seine historischen Stätten und die große Chinesische Mauer bekannt?",
        "China",
        ["Japan", "Südkorea", "China", "Vietnam"],
        "China ist bekannt für die historische Chinesische Mauer, ein beeindruckendes Bauwerk, das sich über Tausende von Kilometern erstreckt. Die Mauer ist ein bedeutendes Wahrzeichen der chinesischen Geschichte."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "In welchem Land kann man die beeindruckenden Tempelruinen von Angkor Wat besuchen?",
        "Kambodscha",
        ["Thailand", "Vietnam", "Kambodscha", "Laos"],
        "Angkor Wat, ein bedeutendes archäologisches Monument, liegt in Kambodscha. Die Ruinen sind ein herausragendes Beispiel für die Khmer-Architektur und ziehen zahlreiche Besucher an."
    ),
    (
        "Welches Land ist für seine antiken Ruinen von Petra, einer beeindruckenden Stadt, die in die Felsen gemeißelt ist, bekannt?",
        "Jordanien",
        ["Syrien", "Saudi-Arabien", "Jordanien", "Irak"],
        "Petra in Jordanien ist für ihre beeindruckenden in die Felsen gemeißelten Gebäude bekannt. Die antike Stadt bietet einen faszinierenden Einblick in die Geschichte der Region."
    )
    
]
        
class HOBReisen(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(HOBReisen, self).__init__(**kw)       
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Reisen"
        self.fragen = fragenhobreisen

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

        
fragenhobkunst = [
    
     ("Wer malte die berühmte 'Mona Lisa'?",
     "Leonardo da Vinci",
     ["Vincent van Gogh", "Pablo Picasso", "Leonardo da Vinci", "Claude Monet"],
     "Die berühmte 'Mona Lisa' wurde von Leonardo da Vinci gemalt und ist eines der bekanntesten Kunstwerke der Welt."),

    ("Welcher Künstler ist bekannt für seine surrealistischen Werke und das Gemälde 'Die Beständigkeit der Erinnerung'?",
     "Salvador Dalí",
     ["René Magritte", "Salvador Dalí", "Max Ernst", "Joan Miró"],
     "Salvador Dalí ist bekannt für seine surrealistischen Werke, darunter das berühmte Gemälde 'Die Beständigkeit der Erinnerung'."),

    ("Welcher Künstler schnitt sich bekanntermaßen ein Ohr ab und malte 'Sternennacht'?",
     "Vincent van Gogh",
     ["Paul Gauguin", "Vincent van Gogh", "Henri Matisse", "Edgar Degas"],
     "Vincent van Gogh schnitt sich bekanntermaßen ein Ohr ab und malte das berühmte Gemälde 'Sternennacht'."),

    ("Welcher italienische Künstler schuf die Skulptur 'David' und malte die Decke der Sixtinischen Kapelle?",
     "Michelangelo",
     ["Leonardo da Vinci", "Donatello", "Raphael", "Michelangelo"],
     "Michelangelo schuf die Skulptur 'David' und malte die Decke der Sixtinischen Kapelle."),

    ("Welcher Künstler ist bekannt für seine kubistischen Werke und das Gemälde 'Guernica'?",
     "Pablo Picasso",
     ["Georges Braque", "Pablo Picasso", "Juan Gris", "Fernand Léger"],
     "Pablo Picasso ist bekannt für seine kubistischen Werke und das Gemälde 'Guernica', das die Schrecken des Krieges darstellt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welche Kunstbewegung ist bekannt für ihre Betonung von Licht und Farbe und umfasst Künstler wie Claude Monet und Pierre-Auguste Renoir?",
     "Impressionismus",
     ["Expressionismus", "Impressionismus", "Surrealismus", "Kubismus"],
     "Der Impressionismus ist bekannt für seine Betonung von Licht und Farbe und umfasst Künstler wie Claude Monet und Pierre-Auguste Renoir."),

    ("Welcher Künstler ist bekannt für seine Pop-Art-Werke und das berühmte Gemälde 'Campbell's Soup Cans'?",
     "Andy Warhol",
     ["Roy Lichtenstein", "Keith Haring", "Andy Warhol", "David Hockney"],
     "Andy Warhol ist bekannt für seine Pop-Art-Werke und das berühmte Gemälde 'Campbell's Soup Cans'."),

    ("Welcher Künstler malte 'Das letzte Abendmahl'?",
     "Leonardo da Vinci",
     ["Michelangelo", "Raphael", "Sandro Botticelli", "Leonardo da Vinci"],
     "Leonardo da Vinci malte das berühmte Gemälde 'Das letzte Abendmahl'."),

    ("Welcher niederländische Künstler ist bekannt für seine detaillierten Porträts und das Gemälde 'Die Nachtwache'?",
     "Rembrandt",
     ["Johannes Vermeer", "Rembrandt", "Hieronymus Bosch", "Pieter Bruegel der Ältere"],
     "Rembrandt ist bekannt für seine detaillierten Porträts und das berühmte Gemälde 'Die Nachtwache'."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher norwegische Künstler schuf das ikonische Werk 'Der Schrei'?",
     "Edvard Munch",
     ["Gustav Klimt", "Edvard Munch", "Egon Schiele", "Franz von Stuck"],
     "Edvard Munch schuf das ikonische Werk 'Der Schrei', das für seine Ausdruckskraft und emotionale Intensität bekannt ist."),

    ("Welche Bewegung, angeführt von Wassily Kandinsky, war die erste, die vollständig abstrakte Kunstwerke schuf?",
     "Der Blaue Reiter",
     ["Der Blaue Reiter", "Die Brücke", "De Stijl", "Futurismus"],
     "Der Blaue Reiter, angeführt von Wassily Kandinsky, war die erste Bewegung, die vollständig abstrakte Kunstwerke schuf."),

    ("Welcher Künstler ist bekannt für seine großen, blauen, monochromen Gemälde und die 'International Klein Blue' Farbe?",
     "Yves Klein",
     ["Yves Klein", "Mark Rothko", "Barnett Newman", "Ellsworth Kelly"],
     "Yves Klein ist bekannt für seine großen, blauen, monochromen Gemälde und die von ihm entwickelte 'International Klein Blue' Farbe."),

    ("Welcher Künstler war ein Pionier der abstrakten Expressionismus-Bewegung und ist bekannt für seine 'Drip Paintings'?",
     "Jackson Pollock",
     ["Willem de Kooning", "Mark Rothko", "Barnett Newman", "Jackson Pollock"],
     "Jackson Pollock war ein Pionier der abstrakten Expressionismus-Bewegung und ist bekannt für seine 'Drip Paintings'."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher britische Street-Art-Künstler ist für seine sozialkritischen und oft provokativen Werke bekannt?",
     "Banksy",
     ["Shepard Fairey", "Jean-Michel Basquiat", "Keith Haring", "Banksy"],
     "Banksy ist ein britischer Street-Art-Künstler, der für seine sozialkritischen und oft provokativen Werke bekannt ist."),

    ("Welcher Künstler schuf die Serie von Gemälden mit Seerosen, die in seinem Garten in Giverny inspiriert wurden?",
     "Claude Monet",
     ["Pierre-Auguste Renoir", "Paul Cézanne", "Vincent van Gogh", "Claude Monet"],
     "Claude Monet schuf die berühmte Serie von Gemälden mit Seerosen, die von seinem Garten in Giverny inspiriert wurden."),

    ("Welcher Künstler ist bekannt für seine pointillistischen Werke, wie 'Ein Sonntagnachmittag auf der Insel La Grande Jatte'?",
     "Georges Seurat",
     ["Paul Signac", "Georges Seurat", "Camille Pissarro", "Henri-Edmond Cross"],
     "Georges Seurat ist bekannt für seine pointillistischen Werke, darunter 'Ein Sonntagnachmittag auf der Insel La Grande Jatte'."),

    ("Welcher italienische Barockkünstler ist bekannt für seine dramatische Beleuchtung und realistischen Darstellungen in Werken wie 'Die Berufung des Heiligen Matthäus'?",
     "Caravaggio",
     ["Gian Lorenzo Bernini", "Caravaggio", "Artemisia Gentileschi", "Peter Paul Rubens"],
     "Caravaggio ist bekannt für seine dramatische Beleuchtung und realistischen Darstellungen, wie in 'Die Berufung des Heiligen Matthäus'."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Künstler und Bildhauer ist bekannt für seine monumentalen Werke wie 'Der Denker'?",
     "Auguste Rodin",
     ["Henry Moore", "Constantin Brâncuși", "Alberto Giacometti", "Auguste Rodin"],
     "Auguste Rodin ist bekannt für seine monumentalen Skulpturen wie 'Der Denker'."),

    ("Welcher mexikanische Künstler ist für seine großformatigen Wandgemälde und seine Rolle in der Muralismus-Bewegung bekannt?",
     "Diego Rivera",
     ["David Alfaro Siqueiros", "José Clemente Orozco", "Frida Kahlo", "Diego Rivera"],
     "Diego Rivera ist für seine großformatigen Wandgemälde und seine Rolle in der Muralismus-Bewegung bekannt."),

    ("Welcher Künstler schuf das berühmte Werk 'Das Mädchen mit dem Perlenohrring'?",
     "Johannes Vermeer",
     ["Rembrandt", "Johannes Vermeer", "Frans Hals", "Jan Steen"],
     "Johannes Vermeer schuf das berühmte Werk 'Das Mädchen mit dem Perlenohrring', das für seine feine Detailarbeit und seine Schönheit bekannt ist."),
    
        (
        "Welcher berühmte Maler ist bekannt für seine Werke wie 'Die Sternennacht' und 'Die Irissen'?",
        "Vincent van Gogh",
        ["Claude Monet", "Paul Cézanne", "Henri Matisse", "Vincent van Gogh"],
        "Die Kunstwerke von Vincent van Gogh haben durch ihre lebendigen Farben und dynamischen Pinselstriche große Bekanntheit erlangt. Besonders hervorzuheben sind seine bekannten Werke 'Die Sternennacht' und 'Die Irissen', die sowohl den Einfluss seines einzigartigen Stils als auch seine bedeutende Rolle in der Kunstgeschichte unterstreichen."
    ),
        ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Künstler schuf das ikonische Werk 'Die Geburt der Venus'?",
        "Sandro Botticelli",
        ["Leonardo da Vinci", "Raphael", "Sandro Botticelli", "Michelangelo"],
        "Ein bemerkenswertes Meisterwerk der italienischen Renaissance ist 'Die Geburt der Venus'. Dieses ikonische Werk zeigt die Göttin Venus, die aus dem Meer aufsteigt. Sandro Botticelli schuf dieses berühmte Gemälde, das für seine Schönheit und Komplexität bekannt ist."
    ),
    (
        "Welcher französische Künstler ist bekannt für seine berühmte Reihe von Gemälden mit Seerosen?",
        "Claude Monet",
        ["Édouard Manet", "Pierre-Auguste Renoir", "Claude Monet", "Camille Pissarro"],
        "Die Seerosen-Gemälde sind ein herausragendes Beispiel für den Impressionismus. Claude Monet, ein Meister dieses Stils, schuf eine beeindruckende Reihe von Gemälden, die die Darstellung von Licht und Farbe revolutionierten."
    ),
    (
        "Welcher Künstler schuf das berühmte Fresko 'Das letzte Abendmahl'?",
        "Leonardo da Vinci",
        ["Michelangelo", "Leonardo da Vinci", "Raphael", "Donatello"],
        "Das Fresko 'Das letzte Abendmahl' ist ein bedeutendes religiöses Kunstwerk, das den Moment zeigt, in dem Jesus seine Jünger über seinen bevorstehenden Verrat informiert. Dieses Meisterwerk wurde von Leonardo da Vinci geschaffen und ist für seine tiefgründige Darstellung bekannt."
    ),
    (
        "Welcher Künstler ist bekannt für seine surrealistischen Gemälde wie 'Die Beständigkeit der Erinnerung'?",
        "Salvador Dalí",
        ["Max Ernst", "Joan Miró", "René Magritte", "Salvador Dalí"],
        "Die surrealistischen Werke, die bizarre Darstellungen von schmelzenden Uhren und surrealen Landschaften zeigen, stammen von Salvador Dalí. Sein berühmtes Gemälde 'Die Beständigkeit der Erinnerung' ist ein herausragendes Beispiel für seinen einzigartigen Stil."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher niederländische Maler ist bekannt für seine Porträts und seine Werke wie 'Die Nachtwache'?",
        "Rembrandt van Rijn",
        ["Frans Hals", "Jan Steen", "Johannes Vermeer", "Rembrandt van Rijn"],
        "Rembrandt van Rijn revolutionierte die Porträtmalerei durch seine meisterhafte Anwendung von Licht und Schatten. Eines seiner bekanntesten Werke ist 'Die Nachtwache', ein bedeutendes Porträtgemälde, das seinen Einfluss auf die Kunstgeschichte unterstreicht."
    ),
    (
        "Welcher italienische Künstler schuf das berühmte Marmordenkmal 'David'?",
        "Michelangelo",
        ["Leonardo da Vinci", "Donatello", "Michelangelo", "Raphael"],
        "Das Marmordenkmal 'David' ist eines der großen Meisterwerke der Renaissance. Michelangelo schuf diese Statue, die den biblischen Helden David in beeindruckender Detailtreue zeigt und seine Fähigkeiten als Bildhauer demonstriert."
    ),
    (
        "Welcher Künstler ist bekannt für die Schaffung des Skulpturenkomplexes 'Die vier Jahreszeiten'?",
        "Gian Lorenzo Bernini",
        ["Antonio Canova", "Donatello", "Gian Lorenzo Bernini", "Alberto Giacometti"],
        "Gian Lorenzo Bernini, ein führender Bildhauer des Barock, ist für seinen Skulpturenkomplex 'Die vier Jahreszeiten' bekannt. Seine Werke sind für ihre dynamische Bewegung und emotionale Intensität berühmt."
    ),
    (
        "Welcher spanische Maler ist für seine surrealistischen Werke wie 'Guernica' bekannt?",
        "Pablo Picasso",
        ["Francisco Goya", "Joan Miró", "Pablo Picasso", "Salvador Dalí"],
        "Pablo Picasso ist bekannt für seine surrealistischen Werke, einschließlich des monumentalen Gemäldes 'Guernica'. Dieses Werk ist ein kraftvolles Protestgemälde gegen den Krieg und die Zerstörung."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Künstler ist bekannt für seine monumentale Statue 'Der Denker'?",
        "Auguste Rodin",
        ["Auguste Rodin", "Henry Moore", "Alberto Giacometti", "Alexander Calder"],
        "Die monumentale Statue 'Der Denker' ist eines der bekanntesten Werke von Auguste Rodin. Diese Skulptur, die einen nachdenklichen Mann zeigt, ist ein hervorragendes Beispiel für seine Fähigkeit zur emotionalen Ausdruckskraft."
    ),
    (
        "Welcher amerikanische Künstler ist bekannt für seine Pop-Art-Werke wie 'Campbell's Soup Cans'?",
        "Andy Warhol",
        ["Roy Lichtenstein", "Robert Rauschenberg", "Andy Warhol", "Jasper Johns"],
        "Andy Warhol ist für seine Pop-Art-Werke bekannt, darunter die berühmte Serie 'Campbell's Soup Cans'. Seine Arbeiten reflektieren den Einfluss der Pop-Art-Bewegung und zeigen Alltagsgegenstände in einem neuen, kunstvollen Kontext."
    ),
    (
        "Welcher Künstler ist bekannt für seine Gemälde wie 'Mädchen mit dem Perlenohrring'?",
        "Johannes Vermeer",
        ["Frans Hals", "Rembrandt van Rijn", "Johannes Vermeer", "Jan Vermeer"],
        "Johannes Vermeer ist bekannt für sein Gemälde 'Mädchen mit dem Perlenohrring', das als herausragendes Beispiel für die niederländische Malerei des 17. Jahrhunderts gilt. Das Porträt zeigt Vermeers meisterhafte Technik und Detailgenauigkeit."
    ),
    (
        "Welcher surrealistische Künstler ist für seine Werke wie 'Der Mensch im Angesicht des Himmels' bekannt?",
        "René Magritte",
        ["René Magritte", "Salvador Dalí", "Max Ernst", "Joan Miró"],
        "René Magritte ist bekannt für seine surrealistischen Werke, wie das Gemälde 'Der Mensch im Angesicht des Himmels'. Seine Gemälde zeichnen sich durch geheimnisvolle und rätselhafte Bildkombinationen aus, die zum Nachdenken anregen."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Künstler ist berühmt für seine abstrakten Gemälde in der Kunstbewegung des Expressionismus?",
        "Wassily Kandinsky",
        ["Egon Schiele", "Paul Klee", "Wassily Kandinsky", "Franz Marc"],
        "Wassily Kandinsky spielt eine zentrale Rolle im Expressionismus mit seinen abstrakten Gemälden. Seine Arbeiten sind bekannt für ihre innovative Verwendung von Farben und Formen, die die Ausdruckskraft der abstrakten Kunst verdeutlichen."
    ),
    (
        "Welcher Künstler ist bekannt für seine Gemälde der 'Sixtinischen Kapelle' wie 'Die Erschaffung Adams'?",
        "Michelangelo",
        ["Leonardo da Vinci", "Raphael", "Michelangelo", "Sandro Botticelli"],
        "Die Fresken in der Sixtinischen Kapelle, einschließlich 'Die Erschaffung Adams', sind Meisterwerke der italienischen Renaissance. Michelangelo ist der Künstler, der diese beeindruckenden Werke geschaffen hat, die seine außergewöhnlichen Fähigkeiten in der Malerei zeigen."
    ),
    (
        "Welcher Künstler ist für seine monumentalen Skulpturen im Freien wie 'Der Kuss' bekannt?",
        "Gustav Klimt",
        ["Auguste Rodin", "Henry Moore", "Gustav Klimt", "Alberto Giacometti"],
        "Gustav Klimt ist für seine monumentalen Skulpturen im Freien bekannt, einschließlich der berühmten Skulptur 'Der Kuss'. Neben seinen Gemälden des Jugendstils hat Klimt auch bemerkenswerte Skulpturen geschaffen, die seinen künstlerischen Stil ergänzen."
    ),
    (
        "Welcher amerikanische Künstler ist bekannt für seine Gemälde, die die sozialen und politischen Themen der Harlem Renaissance reflektieren?",
        "Jacob Lawrence",
        ["Romare Bearden", "Aaron Douglas", "Jacob Lawrence", "Archibald Motley"],
        "Jacob Lawrence ist bekannt für seine Gemälde, die die sozialen und politischen Themen der Harlem Renaissance reflektieren. Seine Werke bieten einen bedeutenden Einblick in das afroamerikanische Leben und die kulturelle Bewegung dieser Zeit."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher französische Künstler ist bekannt für seine Gemälde der 'Nymphen' und 'Die Dusche'?",
        "Henri Matisse",
        ["Claude Monet", "Édouard Manet", "Henri Matisse", "Pierre-Auguste Renoir"],
        "Henri Matisse ist für seine Gemälde wie 'Die Nymphen' und 'Die Dusche' bekannt. Er war ein führender Vertreter des Fauvismus, einer Bewegung, die für ihre lebhaften Farben und expressiven Formen bekannt ist."
    ),
    (
    "Welcher Künstler ist bekannt für sein Gemälde 'Der Schrei', das eine ikonische Darstellung von Angst zeigt?",
    "Edvard Munch",
    ["Gustav Klimt", "Vincent van Gogh", "Edvard Munch", "Pablo Picasso"],
    "Das Gemälde 'Der Schrei' ist berühmt für seine emotionale Intensität und die Darstellung von existenzieller Angst. Dieses Werk revolutionierte die Ausdruckskraft in der Kunst des 19. Jahrhunderts durch seine innovative Herangehensweise an die Darstellung von Emotionen."
),

(
    "Welcher Künstler ist bekannt für seine monumentale Skulptur 'David' aus Bronze?",
    "Donatello",
    ["Michelangelo", "Donatello", "Gian Lorenzo Bernini", "Alberto Giacometti"],
    "Die monumentale Bronze-Skulptur 'David' zeigt den biblischen Helden in einer beeindruckenden Darstellung. Diese Statue ist ein Meisterwerk der italienischen Renaissance, das die Skulpturkunst der Zeit maßgeblich beeinflusste."
),

(
    "Welcher Künstler ist für seine Gemälde der 'Wassermädchen' und 'Das Wasser' bekannt?",
    "Pierre-Auguste Renoir",
    ["Claude Monet", "Pierre-Auguste Renoir", "Edgar Degas", "Édouard Manet"],
    "Die Gemälde der 'Wassermädchen' und 'Das Wasser' sind typische Beispiele des Impressionismus, der durch lebhafte Farben und Lichtdarstellungen geprägt ist. Diese Werke fangen Szenen des täglichen Lebens mit einer besonderen Sensibilität für Licht und Farbe ein."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Künstler ist für seine futuristischen Gemälde wie 'Die Stadt im Dämmerlicht' bekannt?",
    "Umberto Boccioni",
    ["Giacomo Balla", "Umberto Boccioni", "Marinetti", "Fortunato Depero"],
    "Futuristische Gemälde wie 'Die Stadt im Dämmerlicht' zeigen dynamische Bewegung und moderne Stadtlandschaften. Diese Werke sind prägend für die Entwicklung der modernen Kunst und reflektieren den Geist der damaligen Zeit."
),

(
    "Welcher italienische Künstler ist bekannt für seine Detailtreue in der Darstellung von natürlichen Szenen und Tieren?",
    "Caravaggio",
    ["Giotto", "Caravaggio", "Titian", "Andrea Mantegna"],
    "Revolutionäre Techniken wie die dramatische Lichtführung und die große Detailtreue prägen die Darstellungen alltäglicher Szenen und Tiere in den Gemälden. Diese einzigartigen Ansätze haben die Kunst der Barockzeit maßgeblich beeinflusst."
),

(
    "Welcher Maler ist für seine surrealistischen Werke wie 'Die verborgene Realität' bekannt?",
    "Max Ernst",
    ["René Magritte", "Salvador Dalí", "Max Ernst", "Joan Miró"],
    "Mit surrealistischen Arbeiten wie 'Die verborgene Realität' erschuf dieser Künstler bizarre und traumhafte Bildkompositionen, die den Betrachter in eine andere Welt entführen. Seine Werke sind herausragende Beispiele für den Surrealismus."
),

(
    "Welcher französische Künstler ist bekannt für seine Gemälde der 'Boulevard-Szenen' und 'Café-Szenen'?",
    "Édouard Manet",
    ["Édouard Manet", "Camille Pissarro", "Berthe Morisot", "Alfred Sisley"],
    "Die Darstellungen urbaner Szenen wie den 'Boulevard-Szenen' und 'Café-Szenen' trugen maßgeblich zur Entwicklung des Impressionismus bei und reflektieren die zeitgenössische Gesellschaft auf innovative Weise."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Künstler ist bekannt für seine Gemälde des 'Karnevals der Tiere' und 'Der heilige Georg'?",
    "Jean-Baptiste-Siméon Chardin",
    ["Jacques-Louis David", "Jean-Baptiste-Siméon Chardin", "Nicolas Poussin", "Georges Rouault"],
    "Detailreiche Darstellungen und feine Ausarbeitung des täglichen Lebens zeichnen die Werke wie 'Karneval der Tiere' aus. Diese Gemälde sind Beispiele für die besondere Aufmerksamkeit, die auf die alltäglichen Themen gelegt wurde."
),

(
    "Welcher Künstler schuf die berühmte Statue 'Venus von Milo'?",
    "Unbekannt",
    ["Unbekannt", "Praxiteles", "Phidias", "Lysippus"],
    "Diese Statue der Venus, bekannt für ihre majestätische Schönheit, stammt aus der hellenistischen Periode. Der Name des Schöpfers ist leider unbekannt, aber das Werk bleibt ein herausragendes Beispiel antiker griechischer Kunst."
),

(
    "Welcher Künstler ist für seine Gemälde von 'Die Fischen' und 'Die Fischerei' bekannt?",
    "Joaquín Sorolla",
    ["El Greco", "Joaquín Sorolla", "Diego Rivera", "José de Ribera"],
    "Die Werke wie 'Die Fischen' und 'Die Fischerei' spiegeln eine besondere Leidenschaft für Licht und Natur wider. Diese Gemälde zeigen Sorollas Meisterschaft in der Darstellung von Licht und Farbe im Freien."
),

(
    "Welcher Künstler ist für seine Gemälde von 'Die Freiheit führt das Volk' und 'Der Tod von Sardanapal' bekannt?",
    "Eugène Delacroix",
    ["Eugène Delacroix", "Jean-Auguste-Dominique Ingres", "François Boucher", "Antoine-Jean Gros"],
    "Dramatische und emotionale Ausdruckskraft prägen Werke wie 'Die Freiheit führt das Volk'. Diese Gemälde sind prägende Beispiele für den Romantismus und zeigen Delacroixs leidenschaftliche Malweise."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Maler ist für seine Werke der 'Stadtlandschaften' und 'Die Brücke' bekannt?",
    "Lyonel Feininger",
    ["Lyonel Feininger", "Kurt Schwitters", "Paul Klee", "Wassily Kandinsky"],
    "Stilistische und geometrische Darstellungen von Architektur und städtischen Szenen finden sich in den Gemälden wie 'Stadtlandschaften' und 'Die Brücke'. Diese Werke reflektieren Feiningers einzigartige Sichtweise auf die moderne Welt."
),

(
    "Welcher Künstler ist für seine Gemälde der 'Die Blumen' und 'Der Garten' bekannt?",
    "Georgia O'Keeffe",
    ["Georgia O'Keeffe", "Frida Kahlo", "Tamara de Lempicka", "Artemisia Gentileschi"],
    "Große, detaillierte Darstellungen und abstrakte Formen prägen die Werke wie 'Die Blumen' und 'Der Garten'. Diese Gemälde zeigen O'Keeffes besondere Fähigkeit, Natur und Pflanzen auf einzigartige Weise zu visualisieren."
),

(
    "Welcher Künstler ist bekannt für seine Gemälde wie 'Die Schule von Athen'?",
    "Raphael",
    ["Leonardo da Vinci", "Raphael", "Michelangelo", "Titian"],
    "Das Gemälde 'Die Schule von Athen' ist eine ideale Sammlung der antiken Philosophie und Wissenschaft. Raphael schuf dieses Meisterwerk, das für seine klassische und harmonische Darstellung bekannt ist."
),

(
    "Welcher Künstler ist für seine Gemälde wie 'Die Unschuld der Frau' und 'Die Muse' bekannt?",
    "Gustav Klimt",
    ["Egon Schiele", "Gustav Klimt", "Henri Toulouse-Lautrec", "Alphonse Mucha"],
    "Beeindruckende Gemälde des Jugendstils, wie 'Die Unschuld der Frau' und 'Die Muse', zeichnen sich durch dekorative und symbolistische Elemente aus. Klimts Arbeiten sind bekannt für ihre besondere Ästhetik und Ausdruckskraft."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Künstler ist für seine Werke der 'Drei Grazien' und 'Der Frühling' bekannt?",
    "Sandro Botticelli",
    ["Sandro Botticelli", "Leonardo da Vinci", "Caravaggio", "Michelangelo"],
    "Herausragende Beispiele der italienischen Renaissance finden sich in Werken wie 'Drei Grazien' und 'Der Frühling'. Botticellis Meisterschaft in der Darstellung von mythologischen Szenen prägt diese bedeutenden Gemälde."
),

(
    "Welcher Künstler ist bekannt für seine Gemälde der 'Abstrakten Kompositionen' und 'Der Blau'?",
    "Paul Klee",
    ["Paul Klee", "Wassily Kandinsky", "Kurt Schwitters", "Franz Marc"],
    "Abstrakte Gemälde wie 'Abstrakte Kompositionen' und 'Der Blau' zeigen eine innovative Verwendung von Farbe und Form. Klees Arbeiten sind entscheidend für die Entwicklung der modernen Kunst und spiegeln seine einzigartige Vision wider."
),
]


class HOBKunst(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(HOBKunst, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Kunst"
        self.fragen = fragenhobkunst

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

        
fragenhobsport = [
    
    ("Welcher Sportler hält den Rekord für die meisten Grand-Slam-Titel im Herrentennis?",
     "Roger Federer",
     ["Rafael Nadal", "Novak Djokovic", "Pete Sampras", "Roger Federer"],
     "Roger Federer hält den Rekord für die meisten Grand-Slam-Titel im Herrentennis mit insgesamt 20 Titeln."),

    ("Welche Sportart wird auch als 'The Sweet Science' bezeichnet?",
     "Boxen",
     ["Schwimmen", "Leichtathletik", "Boxen", "Fußball"],
     "Boxen wird auch als 'The Sweet Science' bezeichnet, aufgrund seiner technischen Finesse und strategischen Tiefe."),

    ("Welcher Fußballspieler hat die meisten Tore in der Geschichte der FIFA-Weltmeisterschaft erzielt?",
     "Miroslav Klose",
     ["Lionel Messi", "Cristiano Ronaldo", "Pelé", "Miroslav Klose"],
     "Miroslav Klose hat die meisten Tore in der Geschichte der FIFA-Weltmeisterschaft erzielt, mit insgesamt 16 Toren."),

    ("In welchem Jahr fand die erste moderne Olympiade der Neuzeit statt?",
     "1896",
     ["1904", "1924", "1896", "1936"],
     "Die erste moderne Olympiade der Neuzeit fand im Jahr 1896 in Athen, Griechenland, statt."),

    ("Welches Land hat die meisten Goldmedaillen in der Geschichte der Olympischen Sommerspiele gewonnen?",
     "USA",
     ["Russland", "China", "Deutschland", "USA"],
     "Die USA haben die meisten Goldmedaillen in der Geschichte der Olympischen Sommerspiele gewonnen, gefolgt von Russland und China."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Wer hält den Rekord für die meisten NBA-Meisterschaften als Spieler?",
     "Bill Russell",
     ["Michael Jordan", "Magic Johnson", "LeBron James", "Bill Russell"],
     "Bill Russell hält den Rekord für die meisten NBA-Meisterschaften als Spieler mit insgesamt 11 Titeln."),

    ("Welcher Leichtathlet hält den Weltrekord im 100-Meter-Lauf?",
     "Usain Bolt",
     ["Carl Lewis", "Jesse Owens", "Usain Bolt", "Justin Gatlin"],
     "Usain Bolt hält den Weltrekord im 100-Meter-Lauf mit einer Zeit von 9,58 Sekunden."),

    ("Welcher Golfer wird oft als 'The Golden Bear' bezeichnet?",
     "Jack Nicklaus",
     ["Arnold Palmer", "Tiger Woods", "Phil Mickelson", "Jack Nicklaus"],
     "Jack Nicklaus wird oft als 'The Golden Bear' bezeichnet und gilt als einer der größten Golfer aller Zeiten."),

    ("Welcher Tennisspieler hat die meisten Grand-Slam-Titel im Dameneinzel gewonnen?",
     "Margaret Court",
     ["Serena Williams", "Steffi Graf", "Martina Navratilova", "Margaret Court"],
     "Margaret Court hat die meisten Grand-Slam-Titel im Dameneinzel gewonnen, mit insgesamt 24 Titeln."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Schwimmer hält den Rekord für die meisten Goldmedaillen bei Olympischen Spielen?",
     "Michael Phelps",
     ["Ian Thorpe", "Mark Spitz", "Ryan Lochte", "Michael Phelps"],
     "Michael Phelps hält den Rekord für die meisten Goldmedaillen bei Olympischen Spielen, mit insgesamt 23 Goldmedaillen."),

    ("Welcher Athlet wird oft als 'The Greatest' aller Zeiten bezeichnet und war im Boxen ungeschlagen?",
     "Muhammad Ali",
     ["Mike Tyson", "Sugar Ray Robinson", "George Foreman", "Muhammad Ali"],
     "Muhammad Ali wird oft als 'The Greatest' aller Zeiten bezeichnet und war im Boxen ungeschlagen."),

    ("Welcher Fußballspieler hat die meisten Tore in der Geschichte der UEFA Champions League erzielt?",
     "Cristiano Ronaldo",
     ["Lionel Messi", "Neymar", "Robert Lewandowski", "Cristiano Ronaldo"],
     "Cristiano Ronaldo hat die meisten Tore in der Geschichte der UEFA Champions League erzielt, mit über 130 Toren."),

    ("Welches Land hat die meisten Medaillen bei den Olympischen Winterspielen gewonnen?",
     "Norwegen",
     ["USA", "Deutschland", "Kanada", "Norwegen"],
     "Norwegen hat die meisten Medaillen bei den Olympischen Winterspielen gewonnen, gefolgt von den USA und Deutschland."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welche Tennisspielerin hält den Rekord für die meisten Grand-Slam-Titel im Dameneinzel, der auch als 'Serena Slam' bekannt ist?",
     "Serena Williams",
     ["Venus Williams", "Maria Sharapova", "Simona Halep", "Serena Williams"],
     "Serena Williams hält den Rekord für die meisten Grand-Slam-Titel im Dameneinzel, der auch als 'Serena Slam' bekannt ist."),

    ("Welcher Sprinter hielt vor Usain Bolt den Weltrekord im 100-Meter-Lauf?",
     "Asafa Powell",
     ["Tyson Gay", "Maurice Greene", "Justin Gatlin", "Asafa Powell"],
     "Asafa Powell hielt vor Usain Bolt den Weltrekord im 100-Meter-Lauf mit einer Zeit von 9,74 Sekunden."),

    ("Welcher Basketballspieler führte die Chicago Bulls zu sechs NBA-Meisterschaften in den 1990er Jahren?",
     "Michael Jordan",
     ["Kobe Bryant", "Magic Johnson", "Larry Bird", "Michael Jordan"],
     "Michael Jordan führte die Chicago Bulls zu sechs NBA-Meisterschaften in den 1990er Jahren und gilt als einer der besten Basketballspieler aller Zeiten."),

    ("Welcher Athlet hält den Weltrekord im Marathonlauf der Männer?",
     "Eliud Kipchoge",
     ["Haile Gebrselassie", "Kenenisa Bekele", "Wilson Kipsang", "Eliud Kipchoge"],
     "Eliud Kipchoge hält den Weltrekord im Marathonlauf der Männer mit einer Zeit von 2 Stunden, 1 Minute und 39 Sekunden."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    (
    "Welcher Fußballer gilt als der beste Torschütze der FIFA-Weltmeisterschaften aller Zeiten?",
    "Miroslav Klose",
    ["Cristiano Ronaldo", "Pele", "Lionel Messi", "Miroslav Klose"],
    "Der Rekord für die meisten Tore in FIFA-Weltmeisterschaften wird von einem Spieler gehalten, der insgesamt 16 Tore in vier Turnieren erzielt hat."
),

(
    "Welcher Sportler gewann die meisten Goldmedaillen bei den Olympischen Sommerspielen?",
    "Michael Phelps",
    ["Usain Bolt", "Mark Spitz", "Cristiano Ronaldo", "Michael Phelps"],
    "Mit insgesamt 23 Goldmedaillen hält dieser Sportler den Rekord für die meisten Goldmedaillen in der Geschichte der Olympischen Sommerspiele."
),

(
    "Welcher Tennisspieler hält den Rekord für die meisten Grand-Slam-Titel im Einzel?",
    "Novak Djokovic",
    ["Roger Federer", "Rafael Nadal", "Pete Sampras", "Novak Djokovic"],
    "Der Rekord für die meisten Grand-Slam-Titel im Einzel wird von einem Tennisspieler gehalten, der in dieser Kategorie die Spitzenposition einnimmt."
),

(
    "Welches Land gewann die erste Fußball-Weltmeisterschaft im Jahr 1930?",
    "Uruguay",
    ["Brasilien", "Uruguay", "Deutschland", "Argentinien"],
    "Die erste Fußball-Weltmeisterschaft, die 1930 stattfand, wurde von einem Land gewonnen, das auch als Gastgeber des Turniers auftrat."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "In welchem Jahr wurden die ersten modernen Olympischen Spiele wiederbelebt?",
    "1896",
    ["1900", "1896", "1924", "1880"],
    "Das Jahr, in dem die ersten modernen Olympischen Spiele wiederbelebt wurden, markiert den Beginn der modernen Olympiade."
),

(
    "Wer gewann die letzte FIFA-Weltmeisterschaft vor der Coronavirus-Pandemie 2018?",
    "Frankreich",
    ["Real Madrid", "Bayern München", "Manchester City", "Frankreich"],
    "Die FIFA-Weltmeisterschaft 2018 in Russland wurde von einem Land gewonnen, das Kroatien im Finale besiegte."
),

(
    "Welcher Sportler ist bekannt für seine Erfolge im Eiskunstlauf und seine vierfachen Sprünge?",
    "Yuzuru Hanyu",
    ["Evgeni Plushenko", "Patrick Chan", "Yuzuru Hanyu", "Tessa Virtue"],
    "Ein Eiskunstläufer, bekannt für seine Fähigkeit, vierfache Sprünge in seine Programme einzubauen, hat bedeutende Erfolge in diesem Sport erzielt."
),

(
    "Welche Mannschaft gewann die UEFA Champions League 2023?",
    "Manchester City",
    ["Liverpool", "Real Madrid", "Bayern München", "Manchester City"],
    "Der erste Titel in der UEFA Champions League wurde 2023 von einer Mannschaft gewonnen, die sich diesen prestigeträchtigen Pokal sicherte."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Wer hält den Rekord für den längsten Wimbledon-Sieg in der Geschichte des Tennis?",
    "John Isner",
    ["Rafael Nadal", "John Isner", "Novak Djokovic", "LeBron James"],
    "Der längste Wimbledon-Sieg, der 2010 stattfand und über 11 Stunden dauerte, wurde von einem Spieler erzielt, der diesen Rekord hält."
),

(
    "Welches Land hat die meisten Goldmedaillen in der Geschichte der Olympischen Winterspiele gewonnen?",
    "Norwegen",
    ["USA", "Kanada", "Schweden", "Norwegen"],
    "Die meisten Goldmedaillen in der Geschichte der Olympischen Winterspiele wurden von einem Land gewonnen, das eine starke Tradition in Wintersportarten hat."
),

(
    "Welcher Sport ist bekannt für den Einsatz eines Schlägers und eines kleinen, weißen Balls?",
    "Tennis",
    ["Badminton", "Squash", "Golf", "Tennis"],
    "Ein Sport, bei dem ein Schläger verwendet wird, um einen kleinen, weißen Ball über ein Netz zu schlagen, ist als Tennis bekannt."
),

(
    "Wer ist der Rekordhalter für die meisten Punkte in einem einzelnen NBA-Spiel?",
    "Wilt Chamberlain",
    ["Michael Jordan", "Kobe Bryant", "LeBron James", "Wilt Chamberlain"],
    "Der Rekord für die meisten Punkte in einem einzelnen NBA-Spiel, mit 100 Punkten, wird von einem Spieler gehalten."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Sportler ist als 'The Greatest' bekannt und wurde in der Boxwelt berühmt?",
    "Muhammad Ali",
    ["Joe Frazier", "George Foreman", "Sugar Ray Leonard", "Muhammad Ali"],
    "Dieser Boxsportler, bekannt als 'The Greatest', wurde durch seine beeindruckenden Fähigkeiten und seine charismatische Persönlichkeit berühmt."
),

(
    "In welchem Sport wird der Begriff 'Hole-in-One' verwendet?",
    "Golf",
    ["Tennis", "Schwimmen", "Fußball", "Golf"],
    "Der Begriff 'Hole-in-One' beschreibt im Golf die Situation, in der ein Spieler den Ball mit einem Schlag direkt ins Loch trifft."
),

(
    "Welches Land gewann die erste Frauen-Weltmeisterschaft im Handball?",
    "Norwegen",
    ["Deutschland", "Frankreich", "Dänemark", "Norwegen"],
    "Die erste Frauen-Weltmeisterschaft im Handball, die 1993 stattfand, wurde von einem Land gewonnen, das in diesem Sport erfolgreich ist."
),

(
    "Welcher Sport beinhaltet das Schießen von Bällen in einen Korb und wird auf einem Basketballplatz gespielt?",
    "Basketball",
    ["Volleyball", "Handball", "Fußball", "Basketball"],
    "Beim Basketball werden Bälle in einen Korb geschossen, und der Sport wird auf einem entsprechenden Platz gespielt."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Tennisspieler hält den Rekord für die meisten Grand-Slam-Titel im Einzel?",
    "Novak Djokovic",
    ["Roger Federer", "Rafael Nadal", "Novak Djokovic", "Pete Sampras"],
    "Der Rekord für die meisten Grand-Slam-Titel im Einzel wird von einem Tennisspieler gehalten, der diese Kategorie anführt."
),

(
    "Welches Land hat die meisten Goldmedaillen in der Geschichte der Olympischen Winterspiele gewonnen?",
    "Norwegen",
    ["USA", "Kanada", "Norwegen", "Schweden"],
    "In der Geschichte der Olympischen Winterspiele hat ein Land, das für seine Wintersporttradition bekannt ist, die meisten Goldmedaillen gewonnen."
),

(
    "Welcher Sportler ist bekannt für seine Erfolge im Eiskunstlauf und seine vierfachen Sprünge?",
    "Yuzuru Hanyu",
    ["Patrick Chan", "Yuzuru Hanyu", "Evgeni Plushenko", "Tessa Virtue"],
    "Ein Eiskunstläufer, der durch seine Erfolge und seine Fähigkeit, vierfache Sprünge in seine Programme einzubauen, bekannt ist, hat bedeutende Leistungen in diesem Sport erzielt."
),

(
    "Welches Land gewann die erste Frauen-Weltmeisterschaft im Handball?",
    "Norwegen",
    ["Frankreich", "Norwegen", "Dänemark", "Deutschland"],
    "Im Jahr 1993 wurde die erste Frauen-Weltmeisterschaft im Handball von einem Land gewonnen, das in diesem Sport erfolgreich ist."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Tennisspieler hält den Rekord für die meisten Grand-Slam-Titel im Einzel?",
    "Novak Djokovic",
    ["Rafael Nadal", "Roger Federer", "Pete Sampras", "Novak Djokovic"],
    "Der Rekord für die meisten Grand-Slam-Titel im Einzel wird von einem Tennisspieler gehalten, der diese Kategorie dominiert."
),
(
    "Welcher Sportler ist für seine Leistungen im Marathonlauf bekannt, insbesondere für den Weltrekord über die 42,195 Kilometer?",
    "Eliud Kipchoge",
    ["Brigid Kosgei", "Eliud Kipchoge", "Haile Gebrselassie", "Dennis Kipruto"],
    "Der Weltrekord im Marathonlauf über 42,195 Kilometer wird von einem Sportler gehalten, der für seine außergewöhnlichen Leistungen in dieser Disziplin bekannt ist."
),

(
    "Welcher Tennisspieler ist bekannt für seine beeindruckenden Leistungen bei den Grand-Slam-Turnieren, insbesondere bei den Australian Open?",
    "Novak Djokovic",
    ["Roger Federer", "Rafael Nadal", "Novak Djokovic", "Andy Murray"],
    "Ein Tennisspieler, der zahlreiche Titel bei den Australian Open gewonnen hat und als einer der besten Tennisspieler aller Zeiten gilt, ist für seine Erfolge bei diesem Turnier bekannt."
),

(
    "Welcher Sportler hat die meisten Goldmedaillen bei den Olympischen Winterspielen gewonnen?",
    "Ole Einar Bjørndalen",
    ["Marit Bjørgen", "Ole Einar Bjørndalen", "Petter Northug", "Darya Domracheva"],
    "Der Rekord für die meisten Goldmedaillen bei den Olympischen Winterspielen gehört einem Sportler, der als einer der größten Biathleten bekannt ist."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Sport ist für das Spielen auf einem Spielfeld mit 11 Spielern pro Team bekannt, bei dem der Ball ins Tor geschossen werden muss?",
    "Fußball",
    ["Basketball", "Handball", "Fußball", "Hockey"],
    "Ein Sport, bei dem 11 Spieler pro Team auf einem Spielfeld spielen und das Ziel darin besteht, den Ball ins gegnerische Tor zu schießen, ist als Fußball bekannt."
),

(
    "Welcher Sportler ist für seine Leistungen im Boxen bekannt, insbesondere für seinen Kampf gegen Sonny Liston?",
    "Muhammad Ali",
    ["Sonny Liston", "Muhammad Ali", "George Foreman", "Joe Frazier"],
    "Ein Boxsportler, der durch seinen berühmten Kampf gegen Sonny Liston bekannt wurde und als 'The Greatest' gilt, hat in der Boxwelt beeindruckende Erfolge erzielt."
),

(
    "Welcher Sportler ist für seine Erfolge im Skispringen bekannt, einschließlich des Gewinns der Vierschanzentournee?",
    "Severin Freund",
    ["Kamil Stoch", "Severin Freund", "Eddy Edwards", "Gregor Schlierenzauer"],
    "Der Gewinn der Vierschanzentournee gehört zu den Erfolgen eines Sportlers, der im Skispringen bedeutende Leistungen erbracht hat."
),

(
    "Welcher Tennisprofi hat die meisten Titel bei den French Open gewonnen?",
    "Rafael Nadal",
    ["Roger Federer", "Rafael Nadal", "Novak Djokovic", "Andre Agassi"],
    "Der Rekord für die meisten Titel bei den French Open wird von einem Tennisprofi gehalten, der als 'König des Sandplatzes' bekannt ist."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Land gewann die erste Rugby-Weltmeisterschaft?",
    "Neuseeland",
    ["Südafrika", "Australien", "England", "Neuseeland"],
    "Die erste Rugby-Weltmeisterschaft, die 1987 stattfand, wurde von einem Land gewonnen, das für seine starke Rugby-Tradition bekannt ist."
),

(
    "Welcher Sportler ist bekannt für seine Leistungen im Schwimmen, insbesondere für seine Rekorde über die 100 Meter Freistil?",
    "Caeleb Dressel",
    ["Michael Phelps", "Caeleb Dressel", "Ryan Lochte", "Ian Thorpe"],
    "Ein Schwimmer, der für seine Rekorde über die 100 Meter Freistil bekannt ist, hat im Schwimmsport beeindruckende Leistungen gezeigt."
),

(
    "Welcher Sport ist für das Spiel mit einem Schläger und einem kleinen weißen Ball bekannt, der auf einem Tisch gespielt wird?",
    "Tischtennis",
    ["Badminton", "Tischtennis", "Squash", "Golf"],
    "Ein Sport, bei dem ein Schläger verwendet wird, um einen kleinen weißen Ball über ein Netz auf einem Tisch zu schlagen, ist als Tischtennis bekannt."
),

(
    "Welcher Sportler hat den Weltrekord im 100-Meter-Sprint aufgestellt?",
    "Usain Bolt",
    ["Tyson Gay", "Justin Gatlin", "Usain Bolt", "Asafa Powell"],
    "Der Weltrekord im 100-Meter-Sprint, der für außergewöhnliche Sprintleistungen bekannt ist, wird von einem Sportler gehalten."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Fußballspieler hat die meisten Tore in einer einzelnen Saison der UEFA Champions League erzielt?",
    "Cristiano Ronaldo",
    ["Lionel Messi", "Cristiano Ronaldo", "Robert Lewandowski", "Kylian Mbappé"],
    "Der Rekord für die meisten Tore in einer einzelnen Saison der UEFA Champions League gehört einem Fußballspieler, der als einer der besten aller Zeiten gilt."
),

(
    "Welcher Sportler hat die meisten Goldmedaillen in der Geschichte der Olympischen Sommer- und Winterspiele gewonnen?",
    "Michael Phelps",
    ["Carl Lewis", "Usain Bolt", "Michael Phelps", "Mark Spitz"],
    "Der Rekord für die meisten Goldmedaillen in der Geschichte der Olympischen Sommer- und Winterspiele wird von einem Sportler gehalten, der insgesamt 23 Goldmedaillen gewonnen hat."
),

(
    "Welcher Sport ist für die Ausführung von Dives und Sprüngen vom Trampolin bekannt?",
    "Turndisziplin",
    ["Kunstspringen", "Turndisziplin", "Eisschnelllauf", "Leichtathletik"],
    "Eine Sportart, die für die Ausführung von Dives und Sprüngen vom Trampolin bekannt ist, umfasst sowohl Sprünge aus dem Wasser als auch von einem Brett."
),

(
    "Welcher Sportler ist für seine Erfolge im Gewichtheben bekannt, einschließlich des Gewinns zahlreicher Goldmedaillen bei den Olympischen Spielen?",
    "Pyrros Dimas",
    ["Naim Süleymanoğlu", "Pyrros Dimas", "Hakan Yılmaz", "Tigran Martirosyan"],
    "Ein Gewichtheber, der für seine Erfolge bei den Olympischen Spielen bekannt ist und zahlreiche Goldmedaillen gewonnen hat, wird in dieser Sportart besonders geschätzt."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welches Land hat die meisten Medaillen bei den Olympischen Winterspielen gewonnen?",
    "Norwegen",
    ["Schweden", "Kanada", "USA", "Norwegen"],
    "Die meisten Medaillen bei den Olympischen Winterspielen wurden von einem Land gewonnen, das für seine starke Tradition in Wintersportarten bekannt ist."
),

(
    "Welcher Sportler ist bekannt für seine Leistungen im Basketball, insbesondere für seine Erfolge mit den Chicago Bulls?",
    "Michael Jordan",
    ["Magic Johnson", "Larry Bird", "Michael Jordan", "Kobe Bryant"],
    "Ein Basketballspieler, der für seine herausragenden Leistungen mit den Chicago Bulls in den 1990er Jahren bekannt ist, hat den Sport maßgeblich geprägt."
),

(
    "Welches Land gewann die erste Rugby-Weltmeisterschaft der Frauen?",
    "Neuseeland",
    ["Australien", "England", "Neuseeland", "Kanada"],
    "Die erste Rugby-Weltmeisterschaft der Frauen, die 1998 stattfand, wurde von einem Land gewonnen, das die Stärke des Frauensports im Rugby unter Beweis stellte."
),

(
    "Welcher Tennisspieler hat den Rekord für die meisten Wimbledon-Titel im Einzel gewonnen?",
    "Roger Federer",
    ["Rafael Nadal", "Novak Djokovic", "Roger Federer", "Pete Sampras"],
    "Der Rekord für die meisten Wimbledon-Titel im Einzel wird von einem Tennisspieler gehalten, der insgesamt acht Siege errungen hat."
),
("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
(
    "Welcher Sport ist bekannt für das Spielen auf einem Feld mit einem Netz und Bällen, bei dem Punkte durch Schläge über das Netz erzielt werden?",
    "Volleyball",
    ["Basketball", "Volleyball", "Badminton", "Tennis"],
    "Ein Sport, bei dem Punkte erzielt werden, indem der Ball über ein Netz geschlagen wird, und der auf einem Feld gespielt wird, ist als Volleyball bekannt."
),

(
    "Welcher Sportler ist für seine Erfolge im Golf bekannt, insbesondere für seine Siege bei den Major-Turnieren?",
    "Tiger Woods",
    ["Jack Nicklaus", "Phil Mickelson", "Tiger Woods", "Arnold Palmer"],
    "Ein Golfspieler, der für seine zahlreichen Siege bei Major-Turnieren bekannt ist, hat im Golf herausragende Erfolge erzielt."
),

(
    "Welches Land hat die meisten Goldmedaillen bei den Olympischen Winterspielen gewonnen?",
    "Norwegen",
    ["Schweiz", "Kanada", "USA", "Norwegen"],
    "Die meisten Goldmedaillen bei den Olympischen Winterspielen wurden von einem Land gewonnen, das für seine herausragenden Leistungen im Wintersport bekannt ist."
),
    
]
        
class HOBSport(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(HOBSport, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Sports"
        self.fragen = fragenhobsport

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

   

class Naturwissenschaften(Screen):
    def __init__(self, **kwargs):
        super(Naturwissenschaften, self).__init__(**kwargs)
        self.lyt = FloatLayout()
        
        self.label = Label (text="Starten = Themenbereich wählen", size_hint=(None, None), size=(100,100), pos_hint={"center_x":0.5,"center_y":0.65})
        self.lyt.add_widget(self.label) 
        
        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100,100),
                           pos_hint={"center_x":0.15,"y":0}
                           )                   
        self.btn1.bind(on_press=self.wechselmenu) 
        self.lyt.add_widget(self.btn1)  
                       
        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0}
                           )
        self.btn2.bind(on_press=self.wechseltrp)
        self.lyt.add_widget(self.btn2)
      
        self.btn3 = Button (background_normal='profile.png', background_down='profile.png',
                            size_hint=(None, None),
                            size=(100,100),
                            pos_hint={"center_x":0.85,"y":0}
                            )
        self.btn3.bind(on_press=self.wechselprfl)
        self.lyt.add_widget(self.btn3)
        
        self.lyt.add_widget(Image(source="logo-1.png",
                                     size_hint=(None,None),
                                     size=(150,150),
                                     pos_hint={'center_x': 0.5, 'top': 1.0}))
            
        self.themen = Button(text="Themenbereiche", background_color = '#069AF3',
                              size_hint=(None, None), size=(150,100), pos_hint={"center_x":0.5, "center_y":0.45})
        self.themen.bind(on_press=self.topic_list)
        
        self.lyt.add_widget(self.themen)
        
        self.add_widget(self.lyt)
        
    def wechselmenu (self,instance):
        self.manager.current ='menu'
        
    def wechseltrp (self, instance):
        self.manager.current = 'trophe'
        
    def wechselprfl (self, instance):
        self.manager.current = 'profile'
        
    def topic_list(self, instance):
        popup_content = GridLayout(cols=1, spacing = 10, size_hint_y=None)
        popup_content.bind(minimum_height=popup_content.setter("height"))
        
        topics = ["Astronomie","Chemie","Physik","Biologie"]
        
        for topic in topics:
         btn = Button (text=str(topic), size_hint_y=None, height=40)
         btn.bind(on_press=self.switch_to_topic)
         popup_content.add_widget(btn)
        
        self.popup = Popup(title= 'Themenbereich', size_hint=(None,None), size=(300, 400), auto_dismiss=True)
        self.popup.content = popup_content
        self.popup.open()
        
    def switch_to_topic(self, instance):
        self.popup.dismiss()
        topic_key = instance.text.lower().replace(' ', '_')
        questions = self.manager.fragen.get(topic_key, [])

        if questions:
            screen_name = f"{topic_key}_0"
            if not self.manager.has_screen(screen_name):
                for i, frage in enumerate(questions):
                    text, antwort, antwortmöglichkeiten, info_text = frage
                    screen_name = f"{topic_key}_{i}"
                    if topic_key == "astronomie":
                        screen = NAAstronomie(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "chemie":
                        screen = NAChemie(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "physik":
                        screen = NAPhysik(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "biologie":
                        screen = NABiologie(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    
                    self.manager.add_widget(screen)
            
            self.manager.current = f"{topic_key}_0"

fragenastro = [ 
               
    ("Welcher Planet in unserem Sonnensystem hat die meisten Monde?",
     "Jupiter",
     ["Mars", "Jupiter", "Saturn", "Neptun"],
     "Es gibt viele Planeten in unserem Sonnensystem, die von Monden umkreist werden. Diese Monde variieren stark in Größe und Zusammensetzung, und einige Planeten haben mehr Monde als andere. Der Planet mit den meisten Monden ist Jupiter, der über 79 bestätigte Monde hat."),

    ("Welche Art von Stern wird auch als 'Roter Riese' bezeichnet?",
     "Ein alter, expandierender Stern",
     ["Ein neugeborener Stern", "Ein sterbender Stern", "Ein Stern, der sich in der Mitte seines Lebenszyklus befindet", "Ein alter, expandierender Stern"],
     "Sterne durchlaufen verschiedene Phasen in ihrem Lebenszyklus. Eine Phase tritt auf, wenn Sterne ihren Vorrat an Wasserstoff im Kern fast vollständig aufgebraucht haben und anfangen zu expandieren. Diese Sterne nennt man 'Rote Riesen', und sie sind alte, expandierende Sterne."),

    ("Wie heißt das größte bekannte Objekt im Asteroidengürtel zwischen Mars und Jupiter?",
     "Ceres",
     ["Vesta", "Pallas", "Hygiea", "Ceres"],
     "Im Asteroidengürtel zwischen Mars und Jupiter gibt es viele große Objekte. Eines dieser Objekte ist so groß, dass es auch als Zwergplanet klassifiziert wird. Das größte bekannte Objekt im Asteroidengürtel ist Ceres."),

    ("Was ist die Hauptursache für die Entstehung von Sonnenflecken?",
     "Magnetische Aktivitäten der Sonne",
     ["Staubwolken", "Gravitationswellen", "Einschläge von Meteoriten", "Magnetische Aktivitäten der Sonne"],
     "Die Oberfläche der Sonne ist ständig in Bewegung und unterliegt verschiedenen Einflüssen. Eine dieser Einflüsse sind magnetische Aktivitäten, die zu kühleren und dunkleren Bereichen führen. Diese Bereiche nennt man Sonnenflecken, und sie entstehen hauptsächlich durch magnetische Aktivitäten der Sonne."),

    ("Wie lange dauert es, bis das Licht der Sonne die Erde erreicht?",
     "Etwa 8 Minuten",
     ["Etwa 4 Minuten", "Etwa 8 Minuten", "Etwa 16 Minuten", "Etwa 2 Minuten"],
     "Das Licht der Sonne legt eine enorme Strecke zurück, bevor es die Erde erreicht. Diese Geschwindigkeit entspricht der Lichtgeschwindigkeit, die ungefähr 299.792 Kilometer pro Sekunde beträgt. Deshalb dauert es etwa 8 Minuten, bis das Licht der Sonne die Erde erreicht."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Planet wird oft als der 'Rote Planet' bezeichnet?",
     "Mars",
     ["Jupiter", "Mars", "Venus", "Saturn"],
     "Aufgrund seiner einzigartigen Farbe wird einer der Planeten in unserem Sonnensystem als der 'Rote Planet' bezeichnet. Diese rötliche Farbe entsteht durch Eisenoxid, das auf seiner Oberfläche reichlich vorhanden ist. Dieser Planet ist der Mars."),

    ("Was ist der größte Planet in unserem Sonnensystem?",
     "Jupiter",
     ["Saturn", "Neptun", "Uranus", "Jupiter"],
     "In unserem Sonnensystem gibt es mehrere große Planeten, aber einer übertrifft alle anderen in Bezug auf Größe. Dieser Planet hat einen Durchmesser von etwa 143.000 Kilometern und besteht hauptsächlich aus Wasserstoff und Helium. Der größte Planet in unserem Sonnensystem ist Jupiter."),

    ("Welcher Planet hat das berühmte Ringsystem?",
     "Saturn",
     ["Neptun", "Uranus", "Mars", "Saturn"],
     "Einige Planeten in unserem Sonnensystem haben Ringe, aber nur einer hat ein besonders auffälliges und berühmtes Ringsystem. Diese Ringe bestehen aus Milliarden von Eisteilchen und Gesteinsbrocken. Saturn ist der Planet mit dem berühmten Ringsystem."),

    ("Welcher Planet ist der Sonne am nächsten?",
     "Merkur",
     ["Venus", "Erde", "Mars", "Merkur"],
     "Die Planeten unseres Sonnensystems haben unterschiedliche Entfernungen zur Sonne. Einer dieser Planeten hat eine besonders nahe Umlaufbahn um die Sonne. Wegen seiner Nähe zur Sonne hat er extreme Temperaturschwankungen zwischen Tag und Nacht. Dieser Planet ist Merkur."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Was ist die Milchstraße?",
     "Unsere Galaxie",
     ["Ein Stern", "Ein Planet", "Eine Galaxie", "Unsere Galaxie"],
     "Es gibt viele Galaxien im Universum, aber nur eine beherbergt unser Sonnensystem. Diese Galaxie enthält schätzungsweise 100 bis 400 Milliarden Sterne und ist unsere Heimatgalaxie. Die Milchstraße ist unsere Galaxie."),

    ("Welcher Stern ist der nächstgelegene zur Erde?",
     "Die Sonne",
     ["Proxima Centauri", "Alpha Centauri", "Barnard's Stern", "Die Sonne"],
     "Der nächstgelegene Stern zur Erde spielt eine zentrale Rolle in unserem Sonnensystem. Dieser Stern ist der zentrale Stern unseres Sonnensystems und liefert die Energie, die das Leben auf der Erde ermöglicht. Der nächstgelegene Stern zur Erde ist die Sonne."),

    ("Welches ist das hellste Objekt am Nachthimmel (nach dem Mond)?",
     "Venus",
     ["Mars", "Jupiter", "Sirius", "Venus"],
     "Am Nachthimmel gibt es viele helle Objekte, aber eines davon ist besonders auffällig. Dieses Objekt wird oft als 'Morgenstern' oder 'Abendstern' bezeichnet. Das hellste Objekt am Nachthimmel nach dem Mond ist die Venus."),

    ("Was ist eine Supernova?",
     "Die Explosion eines Sterns",
     ["Die Geburt eines Sterns", "Die Kollision zweier Sterne", "Die Explosion eines Sterns", "Das Verschwinden eines Sterns"],
     "Wenn Sterne das Ende ihres Lebenszyklus erreichen, können sie in einem gewaltigen Ereignis enden. Diese Explosionen sind so hell, dass sie ganze Galaxien überstrahlen können. Eine Supernova ist die Explosion eines Sterns."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie viele Planeten gibt es in unserem Sonnensystem?",
     "8",
     ["7", "8", "9", "10"],
     "Unser Sonnensystem beherbergt mehrere Planeten, die um die Sonne kreisen. Diese Planeten variieren in Größe und Zusammensetzung. Es gibt acht Planeten in unserem Sonnensystem: Merkur, Venus, Erde, Mars, Jupiter, Saturn, Uranus und Neptun."),

    ("Was ist die Hauptkomponente der Sonne?",
     "Wasserstoff",
     ["Helium", "Wasserstoff", "Kohlenstoff", "Sauerstoff"],
     "Die Sonne besteht aus mehreren Elementen, aber eines davon ist besonders dominierend. Dieser Hauptbestandteil wird durch Kernfusion in ein anderes Element umgewandelt, was die Energie der Sonne freisetzt. Die Hauptkomponente der Sonne ist Wasserstoff."),

    ("Was ist ein Schwarzes Loch?",
     "Ein Bereich im Raum mit extrem starker Schwerkraft",
     ["Ein leerer Raum", "Ein sehr heller Stern", "Ein großer Planet", "Ein Bereich im Raum mit extrem starker Schwerkraft"],
     "Im Universum gibt es Regionen, die eine unglaubliche Anziehungskraft besitzen. Diese Regionen entstehen oft aus kollabierenden Sternen und sind so stark, dass nichts entkommen kann, nicht einmal Licht. Ein Schwarzes Loch ist ein Bereich im Raum mit extrem starker Schwerkraft."),

    ("Wie heißt der größte Mond des Saturn?",
     "Titan",
     ["Europa", "Ganymed", "Titan", "Callisto"],
     "Saturn hat mehrere Monde, aber einer von ihnen ist besonders groß und bemerkenswert. Dieser Mond ist größer als der Planet Merkur und besitzt eine dichte Atmosphäre. Der größte Mond des Saturn ist Titan."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Raumsonde war die erste, die erfolgreich auf dem Mars gelandet ist?",
     "Viking 1",
     ["Viking 1", "Pathfinder", "Curiosity", "Opportunity"],
     "Die Erforschung des Mars wurde durch mehrere Raumsonden ermöglicht. Eine dieser Sonden war die erste, die erfolgreich auf dem Mars landete und detaillierte Bilder zurücksendete. Viking 1 war die erste Raumsonde, die erfolgreich auf dem Mars gelandet ist."),

    ("Was ist die Oortsche Wolke?",
     "Eine riesige Wolke aus Kometen am Rande des Sonnensystems",
     ["Eine Gaswolke um die Sonne", "Eine Gruppe von Asteroiden zwischen Mars und Jupiter", "Ein Galaxienhaufen", "Eine riesige Wolke aus Kometen am Rande des Sonnensystems"],
     "Unser Sonnensystem ist von verschiedenen Strukturen umgeben. Eine dieser Strukturen dient als Reservoir für langperiodische Kometen. Die Oortsche Wolke ist eine riesige Wolke aus Kometen am Rande des Sonnensystems."),

    ("Welche Raumsonde hat als erste die Oberfläche des Pluto fotografiert?",
     "New Horizons",
     ["Voyager 1", "Pioneer 10", "New Horizons", "Galileo"],
     "Die Erkundung der äußeren Bereiche unseres Sonnensystems ist durch Raumsonden möglich geworden. Eine dieser Sonden passierte den Pluto und lieferte die ersten Nahaufnahmen seiner Oberfläche. Diese Raumsonde ist New Horizons."),
    
        (
        "Welche Form hat die Umlaufbahn der Planeten in unserem Sonnensystem?",
        "Elliptisch",
        ["Rund", "Linear", "Elliptisch", "Spiral"],
        "Durch die Gravitationsgesetze und die Verteilung der Massen im Sonnensystem bewegen sich die Planeten auf leicht ovalen Bahnen um die Sonne. Diese Bahnen werden als elliptisch bezeichnet."
    ),
        ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Himmelskörpern bezeichnet man als Gasriesen?",
        "Jupiter und Saturn",
        ["Jupiter und Saturn", "Mars und Erde", "Uranus und Neptun", "Merkur und Venus"],
        "Planeten, die hauptsächlich aus Wasserstoff und Helium bestehen und sehr groß sind, werden als Gasriesen bezeichnet. Beispiele dafür in unserem Sonnensystem sind Jupiter und Saturn."
    ),
    (
        "Welches Teleskop lieferte die ersten detaillierten Bilder von fernen Galaxien?",
        "Hubble-Teleskop",
        ["James Webb Teleskop", "Spitzer-Teleskop", "Hubble-Teleskop", "Chandra-Teleskop"],
        "Seit 1990 liefert ein Weltraumteleskop atemberaubende Bilder von fernen Galaxien, Nebeln und anderen kosmischen Phänomenen. Dieses Teleskop, bekannt als Hubble-Weltraumteleskop, revolutionierte unser Verständnis des Universums."
    ),
    (
        "Welcher Planet hat die höchste Rotationsgeschwindigkeit in unserem Sonnensystem?",
        "Jupiter",
        ["Merkur", "Venus", "Saturn", "Jupiter"],
        "Mit einer Rotationsdauer von nur etwa 10 Stunden dreht sich Jupiter schneller als jeder andere Planet in unserem Sonnensystem. Diese hohe Geschwindigkeit führt zu extremen Wetterphänomenen."
    ),
    (
        "Welches ist das häufigste Element im Universum?",
        "Wasserstoff",
        ["Sauerstoff", "Helium", "Kohlenstoff", "Wasserstoff"],
        "Etwa 75% der normalen Materie im Universum bestehen aus einem Element, das auch den Hauptbestandteil der Sterne bildet. Dieses Element ist Wasserstoff."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Kraft hält die Planeten in ihren Umlaufbahnen um die Sonne?",
        "Gravitation",
        ["Magnetismus", "Gravitation", "Zentrifugalkraft", "Lichtdruck"],
        "Die Kraft, die von der Masse der Sonne ausgeht und die Planeten auf ihren Bahnen hält, ist die Gravitation. Ohne diese Kraft würden die Planeten ins Weltall abdriften."
    ),
    (
        "Wie nennt man die Region um einen Stern, in der flüssiges Wasser existieren kann?",
        "Habitable Zone",
        ["Exosphäre", "Habitable Zone", "Asteroidengürtel", "Oortsche Wolke"],
        "In der sogenannten „Goldilocks-Zone“ um einen Stern sind die Bedingungen so, dass flüssiges Wasser auf einem Planeten existieren kann. Diese Zone wird als habitable Zone bezeichnet."
    ),
    (
        "Welches Phänomen tritt auf, wenn ein Stern seine äußeren Schichten abstößt?",
        "Planetarischer Nebel",
        ["Supernova", "Schwarzes Loch", "Quasar", "Planetarischer Nebel"],
        "Wenn ein Stern das Ende seines Lebens erreicht und seine äußeren Schichten abstößt, entsteht eine leuchtende Gaswolke, die oft symmetrische Formen annimmt. Dieses Phänomen ist als planetarischer Nebel bekannt."
    ),
    (
        "Welcher Zwergplanet befindet sich im Kuipergürtel?",
        "Pluto",
        ["Ceres", "Makemake", "Haumea", "Pluto"],
        "Jenseits von Neptun liegt eine Region voller eisiger Körper und Zwergplaneten, die als Kuipergürtel bekannt ist. Einer der bekanntesten Zwergplaneten in dieser Region ist Pluto."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Planet wird als „Morgenstern“ bezeichnet?",
        "Venus",
        ["Mars", "Jupiter", "Saturn", "Venus"],
        "Aufgrund ihrer Helligkeit und Sichtbarkeit kurz vor Sonnenaufgang oder nach Sonnenuntergang wird die Venus oft als „Morgenstern“ oder „Abendstern“ bezeichnet."
    ),
    (
        "Welche Galaxie ist der Milchstraße am nächsten?",
        "Andromeda-Galaxie",
        ["Triangulum-Galaxie", "Sombrero-Galaxie", "Andromeda-Galaxie", "Magellansche Wolken"],
        "Etwa 2,5 Millionen Lichtjahre von uns entfernt befindet sich die nächstgelegene große Galaxie, die Andromeda-Galaxie. Diese Galaxie bewegt sich auf Kollisionskurs mit der Milchstraße."
    ),
    (
        "Welche Raumsonde hat als erste die Oberfläche des Saturnmondes Titan erkundet?",
        "Huygens",
        ["Voyager 2", "Cassini", "Galileo", "Huygens"],
        "Im Jahr 2005 landete eine Raumsonde im Rahmen der Cassini-Huygens-Mission auf Titan, dem größten Mond des Saturn, und lieferte die ersten Bilder von dessen Oberfläche. Diese Sonde trägt den Namen Huygens."
    ),
    (
        "Wie alt ist das Universum ungefähr?",
        "13,8 Milliarden Jahre",
        ["4,5 Milliarden Jahre", "13,8 Milliarden Jahre", "10 Milliarden Jahre", "20 Milliarden Jahre"],
        "Auf Grundlage kosmologischer Beobachtungen und Modelle wird das Alter des Universums auf etwa 13,8 Milliarden Jahre geschätzt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist das Phänomen, bei dem Licht durch die Gravitation eines massiven Objekts gekrümmt wird?",
        "Gravitationslinse",
        ["Rotverschiebung", "Gravitationslinse", "Dopplereffekt", "Beugung"],
        "Wenn das Licht eines entfernten Objekts durch die Gravitation eines massereichen Objekts gekrümmt wird, entsteht ein Effekt, der als Gravitationslinse bezeichnet wird. Dies führt zu Verzerrungen und Mehrfachbildern."
    ),
    (
        "Was ist der Name des ersten erdähnlichen Planeten, der in der bewohnbaren Zone einer anderen Sonne entdeckt wurde?",
        "Kepler-22b",
        ["Proxima b", "Gliese 581c", "Kepler-22b", "TRAPPIST-1d"],
        "Kepler-22b wurde als erster Exoplanet entdeckt, der in der bewohnbaren Zone eines sonnenähnlichen Sterns liegt. Diese Entdeckung war ein bedeutender Schritt in der Suche nach erdähnlichen Planeten."
    ),
    (
        "Welcher Planet hat das stärkste Magnetfeld in unserem Sonnensystem?",
        "Jupiter",
        ["Erde", "Saturn", "Neptun", "Jupiter"],
        "Das Magnetfeld von Jupiter ist etwa 20.000-mal stärker als das der Erde und das stärkste im gesamten Sonnensystem. Dieses Magnetfeld spielt eine wichtige Rolle bei der Bildung der Strahlungsgürtel des Planeten."
    ),
    (
        "Was beschreibt das kosmologische Prinzip?",
        "Das Universum ist im großen Maßstab homogen und isotrop",
        ["Das Universum dehnt sich gleichmäßig aus", "Das Universum ist im großen Maßstab homogen und isotrop", "Es gibt kein Zentrum im Universum", "Das Universum wird sich irgendwann wieder zusammenziehen"],
        "Das kosmologische Prinzip geht davon aus, dass das Universum, wenn man es in großen Maßstäben betrachtet, in jeder Richtung gleich (isotrop) und an jedem Punkt ähnlich (homogen) ist."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Typ von Stern explodiert als Supernova vom Typ Ia?",
        "Weißer Zwerg in einem Doppelsternsystem",
        ["Roter Riese", "Brauner Zwerg", "Weißer Zwerg in einem Doppelsternsystem", "Blauer Riese"],
        "Eine Supernova vom Typ Ia entsteht, wenn ein weißer Zwerg in einem Doppelsternsystem so viel Materie von seinem Begleitstern ansammelt, dass eine Kernfusion gezündet wird, was schließlich zur Explosion führt."
    ),
    (
        "Welcher Planet hat die größte Anzahl an Vulkanen im Sonnensystem?",
        "Venus",
        ["Erde", "Mars", "Io", "Venus"],
        "Von allen Planeten im Sonnensystem weist die Venus die meisten Vulkane auf. Während die meisten dieser Vulkane erloschen sind, gibt es Hinweise darauf, dass einige möglicherweise noch aktiv sein könnten."
    ),
    (
        "Wie nennt man das Ende des Lebenszyklus eines massereichen Sterns?",
        "Supernova",
        ["Weißer Zwerg", "Neutronenstern", "Supernova", "Roter Riese"],
        "Wenn ein massereicher Stern sein Leben beendet, kommt es zu einer gewaltigen Explosion, bei der er seine äußeren Schichten abstößt und sein Kern kollabiert. Diese Explosion wird als Supernova bezeichnet."
    ),
        (
        "Welcher Mond des Jupiter ist der größte und besitzt eine eigene Magnetosphäre?",
        "Ganymed",
        ["Kallisto", "Ganymed", "Europa", "Io"],
        "Der größte Mond Jupiters, der auch die einzige Magnetosphäre unter den Jupitermonden besitzt, ist Ganymed. Er übertrifft alle anderen Monde des Sonnensystems sowohl in Größe als auch in seiner einzigartigen Magnetosphäre."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Struktur markiert den Mittelpunkt unserer Galaxie?",
        "Ein supermassives Schwarzes Loch",
        ["Ein Quasar", "Ein supermassives Schwarzes Loch", "Eine Ansammlung von Sternen", "Eine Neutronensternkollision"],
        "Im Zentrum der Milchstraße befindet sich ein extrem massives Objekt, das die gesamte Galaxie beeinflusst. Dieses Objekt ist ein supermassives Schwarzes Loch, bekannt als Sagittarius A*."
    ),
    
    (
        "Was ist ein Pulsar?",
        "Ein schnell rotierender Neutronenstern",
        ["Ein schnell rotierender Neutronenstern", "Ein Planet mit extremem Magnetfeld", "Ein weißer Zwerg mit hoher Temperatur", "Ein explodierender Stern"],
        "Pulsare sind spezielle Neutronensterne, die durch ihre extrem schnelle Rotation und die Aussendung von Strahlung auffallen. Diese Strahlung erscheint auf der Erde als regelmäßige Pulse."
    ),
    
    (
        "Welcher Exoplanet wurde 2019 erstmals fotografiert?",
        "PDS 70b",
        ["Kepler-186f", "PDS 70b", "Gliese 581g", "Proxima Centauri b"],
        "Die direkte Fotografie eines Exoplaneten gelang 2019 mit PDS 70b, einem Exoplaneten, dessen Bild mit dem Very Large Telescope in Chile aufgenommen wurde, und der einen bedeutenden Fortschritt in der Astronomie darstellt."
    ),
    
    (
        "Welche Art von Galaxie ist die Milchstraße?",
        "Spiralgalaxie",
        ["Elliptische Galaxie", "Spiralgalaxie", "Irreguläre Galaxie", "Linsenförmige Galaxie"],
        "Die Milchstraße ist als Spiralgalaxie bekannt, was sich durch ihre sich um das galaktische Zentrum windenden Spiralarme auszeichnet. Diese Galaxieform ist eine der häufigsten im Universum."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt die Drake-Gleichung?",
        "Die Wahrscheinlichkeit für außerirdisches Leben",
        ["Die Wahrscheinlichkeit für außerirdisches Leben", "Die Masse eines Schwarzen Lochs", "Die Expansionsrate des Universums", "Die Umlaufbahnen der Planeten"],
        "Die Drake-Gleichung zielt darauf ab, die Anzahl der intelligenten Zivilisationen in unserer Galaxie zu schätzen, die potenziell Kontakt mit uns aufnehmen könnten, indem sie verschiedene astronomische und biologische Faktoren berücksichtigt."
    ),
    
    (
        "Was verursacht die jährlichen Meteoritenschauer?",
        "Trümmer von Kometen",
        ["Trümmer von Kometen", "Verfallene Satelliten", "Sonneneruptionen", "Asteroidenkollisionen"],
        "Wenn die Erde die Bahn eines Kometen kreuzt und auf die dort hinterlassenen Trümmer stößt, entstehen die jährlich wiederkehrenden Meteoritenschauer. Diese Trümmer verglühen in der Erdatmosphäre und verursachen die hellen Meteore."
    ),
    
    (
        "Welches Element wird im Inneren von Sternen in der Endphase ihrer Entwicklung hauptsächlich gebildet?",
        "Eisen",
        ["Sauerstoff", "Helium", "Eisen", "Wasserstoff"],
        "In der letzten Phase ihrer Entwicklung bilden Sterne hauptsächlich Eisen in ihrem Kern. Diese Fusion bringt keine zusätzliche Energie und führt letztlich zum Kollaps des Sterns oder zu einer Supernova."
    ),
    
    (
        "Was ist die Ursache für die Gezeiten auf der Erde?",
        "Die Gravitation des Mondes",
        ["Die Gravitation der Sonne", "Meeresströmungen", "Die Gravitation des Mondes", "Die Erdrotation"],
        "Die Gezeiten auf der Erde werden durch die Gravitation des Mondes verursacht. Diese Gravitationskraft zieht das Wasser der Ozeane an, was zu den regelmäßigen Anhebungen und Senkungen des Meeresspiegels führt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Planet hat die längste Rotationsperiode, also den längsten Tag?",
        "Venus",
        ["Uranus", "Merkur", "Venus", "Mars"],
        "Mit einer extrem langsamen Rotation hat die Venus den längsten Tag im Sonnensystem. Ein Tag auf der Venus dauert etwa 243 Erdentage, was länger ist als ein Venusjahr."
    ),
    
    (
        "Welche kosmische Struktur wird als „kosmischer Mikrowellenhintergrund“ bezeichnet?",
        "Die Nachglut des Urknalls",
        ["Eine Wolke aus interstellarem Gas", "Die Nachglut des Urknalls", "Eine supermassive Galaxie", "Ein Supernova-Überrest"],
        "Der kosmische Mikrowellenhintergrund (CMB) ist die Strahlung, die aus den frühen Phasen des Universums stammt, als es sich nach dem Urknall abkühlte. Diese Strahlung gibt uns wichtige Hinweise auf die frühe Geschichte des Universums."
    ),
    
    (
        "Welcher Effekt beschreibt die Rotverschiebung von Licht, die durch die Ausdehnung des Universums verursacht wird?",
        "Doppler-Effekt",
        ["Kerr-Effekt", "Doppler-Effekt", "Gravitationslinseneffekt", "Photoelektrischer Effekt"],
        "Die Rotverschiebung von Licht, die durch die Expansion des Universums verursacht wird, wird durch den Doppler-Effekt beschrieben. Dieses Phänomen tritt auf, wenn sich Lichtquellen von uns wegbewegen und ihre Wellenlängen verlängert werden."
    ),
    
    (
        "Welches Phänomen tritt auf, wenn ein Stern die äußeren Schichten abstößt und nur ein heißer Kern übrig bleibt?",
        "Weißer Zwerg",
        ["Neutronenstern", "Weißer Zwerg", "Brauner Zwerg", "Schwarzes Loch"],
        "Ein weißer Zwerg ist das Überbleibsel eines Sterns, der seine äußeren Schichten abgestoßen hat. Diese dichten Überreste bestehen vor allem aus Kohlenstoff und Sauerstoff und kühlen über Milliarden Jahre ab."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt das Fermi-Paradoxon?",
        "Der Widerspruch zwischen der hohen Wahrscheinlichkeit von außerirdischem Leben und dem Mangel an Beweisen dafür",
        ["Die Unmöglichkeit schneller interstellarer Reisen", "Das Fehlen von Quasaren in der Nähe", "Die fehlende Dunkle Materie", "Der Widerspruch zwischen der hohen Wahrscheinlichkeit von außerirdischem Leben und dem Mangel an Beweisen dafür"],
        "Das Fermi-Paradoxon thematisiert den scheinbaren Widerspruch zwischen der hohen Wahrscheinlichkeit für außerirdisches Leben in unserer Galaxie und dem Fehlen konkreter Beweise oder Kontakte mit solchen Lebensformen."
    ),
    
    (
        "Welcher Mechanismus treibt die Bewegung der tektonischen Platten auf der Erde an?",
        "Konvektionsströme im Erdmantel",
        ["Gravitation des Mondes", "Magnetfeld der Erde", "Konvektionsströme im Erdmantel", "Vulkanische Aktivität"],
        "Die Bewegung der tektonischen Platten wird durch Konvektionsströme im Erdmantel verursacht. Diese Ströme entstehen durch die Wärme im Inneren der Erde, die das Mantelmaterial in Bewegung versetzt."
    ),
    
    (
        "Was ist ein Quasar?",
        "Ein aktiver galaktischer Kern mit extrem heller Strahlung",
        ["Ein entstehender Stern", "Ein aktiver galaktischer Kern mit extrem heller Strahlung", "Ein sterbender Planet", "Eine Supernova im Anfangsstadium"],
        "Ein Quasar ist ein extrem leuchtkräftiger galaktischer Kern, der von einem supermassiven Schwarzen Loch betrieben wird. Diese Objekte sind einige der hellsten bekannten Quellen im Universum."
    ),
    
    (
        "Welches Gas ist in der Atmosphäre des Mars am häufigsten vorhanden?",
        "Kohlendioxid",
        ["Stickstoff", "Kohlendioxid", "Wasserstoff", "Sauerstoff"],
        "Die Atmosphäre des Mars besteht überwiegend aus Kohlendioxid, das etwa 95% der Atmosphäre ausmacht. Dies führt zu extrem niedrigen Temperaturen und macht den Planeten für Menschen unbewohnbar."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welcher Stern wird aufgrund seiner Nähe zur Erde am häufigsten als Fixpunkt für die Navigation verwendet?",
        "Polaris",
        ["Polaris", "Vega", "Sirius", "Betelgeuse"],
        "Polaris, auch bekannt als der Nordstern, liegt nahezu direkt über dem geografischen Nordpol der Erde. Daher ist er seit Jahrhunderten ein stabiler und zuverlässiger Fixpunkt für die Navigation."
    ),
    
    (
        "Welcher Raumflug führte zur ersten bemannten Mondlandung?",
        "Apollo 11",
        ["Apollo 13", "Apollo 12", "Apollo 10", "Apollo 11"],
        "Die erste bemannte Mondlandung wurde durch die Apollo-11-Mission erreicht. Am 20. Juli 1969 betrat Neil Armstrong als erster Mensch die Mondoberfläche, gefolgt von Buzz Aldrin."
    ),
    
    (
        "Was sind die Hauptbestandteile von Kometen?",
        "Eis und Staub",
        ["Lava und Gestein", "Metall und Stein", "Eis und Staub", "Wasserstoff und Helium"],
        "Kometen bestehen primär aus Eis und Staub. Wenn sie sich der Sonne nähern, sublimieren die Eismaterialien und erzeugen die charakteristischen Schweife des Kometen."
    ),
        (
        "Welcher Typ von Galaxien ist durch eine sehr zentrale Verdichtung und wenig bis gar keine Spiralarme charakterisiert?",
        "Elliptische Galaxie",
        ["Linsenförmige Galaxie", "Elliptische Galaxie", "Irreguläre Galaxie", "Spiralgalaxie"],
        "Galaxien dieses Typs haben eine sehr zentrale Verdichtung von Sternen und weisen keine ausgeprägten Spiralarme auf. Sie erscheinen meist oval bis rund und enthalten wenig interstellares Gas und Staub."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist der Hauptunterschied zwischen einem weißen Zwerg und einem Neutronenstern?",
        "Die Dichte",
        ["Die Farbe", "Die Dichte", "Die Masse", "Die Temperatur"],
        "Der Hauptunterschied zwischen diesen beiden Sternüberresten liegt in ihrer Dichte. Neutronensterne sind deutlich dichter, da sie fast ausschließlich aus Neutronen bestehen, im Gegensatz zu weißen Zwergen."
    ),
    
    (
        "Welches astronomische Ereignis wird durch die Verschmelzung von zwei Neutronensternen verursacht?",
        "Kilonova",
        ["Supernova", "Nova", "Kilonova", "Mikroquasar"],
        "Dieses spezielle Ereignis tritt auf, wenn zwei Neutronensterne kollidieren und miteinander verschmelzen. Es kann zu extrem energiereichen Explosionen und der Bildung von schweren Elementen wie Gold führen."
    ),
    
    (
        "Wie nennt man die Grenze um ein Schwarzes Loch, jenseits derer nichts entkommen kann?",
        "Ereignishorizont",
        ["Photonenkugel", "Schockwelle", "Ereignishorizont", "Singularität"],
        "Die Grenze eines Schwarzen Lochs, ab der jegliche Materie und Licht nicht mehr entkommen können, wird als Ereignishorizont bezeichnet. Dies ist der Punkt, an dem die Fluchtgeschwindigkeit die Lichtgeschwindigkeit überschreitet."
    ),
    
    (
        "Welcher Mond des Saturn zeigt Hinweise auf einen unterirdischen Ozean?",
        "Enceladus",
        ["Rhea", "Enceladus", "Titan", "Iapetus"],
        "Dieser Mond des Saturn zeigt durch seine aktiven Geysire, dass unter seiner gefrorenen Oberfläche ein Ozean aus flüssigem Wasser existieren könnte. Dies hat bedeutende Auswirkungen auf die Suche nach Leben im Sonnensystem."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist der Unterschied zwischen einem Pulsar und einem Magnetar?",
        "Das Magnetfeld",
        ["Die Masse", "Das Magnetfeld", "Der Rotationsgeschwindigkeit", "Die Größe"],
        "Pulsare und Magnetare sind beide Neutronensterne, jedoch unterscheiden sie sich durch das Magnetfeld. Magnetare besitzen ein außergewöhnlich starkes Magnetfeld, das Milliarden von Malen stärker ist als das eines typischen Pulsars."
    ),
    
    (
        "Welches astronomische Objekt wird als 'Roter Überriese' bezeichnet?",
        "Betelgeuse",
        ["Vega", "Betelgeuse", "Sirius", "Arcturus"],
        "Dieser Rote Überriese im Sternbild Orion ist bekannt für seine enorme Größe und Helligkeit. Betelgeuse ist einer der größten Sterne, den wir am Nachthimmel sehen können."
    ),
    
    (
        "Welches Instrument wird verwendet, um Exoplaneten direkt durch die Beobachtung der Transitmethode zu entdecken?",
        "Weltraumteleskop",
        ["Röntgenteleskop", "Weltraumteleskop", "Bodenbasiertes Teleskop", "Radioteleskop"],
        "Zur direkten Beobachtung von Exoplaneten durch die Transitmethode werden spezielle Instrumente eingesetzt, die sich im Weltraum befinden. Diese Teleskope können das Abdimmen eines Sterns beobachten, wenn ein Planet vor ihm vorbeizieht."
    ),
    
    (
        "Was misst der Hubble-Weltraumteleskop hauptsächlich?",
        "Optisches Licht",
        ["Infrarotstrahlung", "Optisches Licht", "Ultraviolettstrahlung", "Radiowellen"],
        "Dieses berühmte Weltraumteleskop ist vor allem auf die Beobachtung von optischem Licht spezialisiert. Es kann jedoch auch im UV- und nahen Infrarotbereich arbeiten und liefert uns klare Bilder aus dem Weltraum."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Ereignis markiert das Ende der Hauptreihe für einen Stern?",
        "Der Wasserstoffbrennstoff im Kern ist aufgebraucht",
        ["Der Wasserstoffbrennstoff im Kern ist aufgebraucht", "Der Stern beginnt, Wasserstoff zu fusionieren", "Der Stern wird zu einem Neutronenstern", "Der Stern bildet eine Supernova"],
        "Das Ende der Hauptreihe eines Sterns tritt ein, wenn der Wasserstoffbrennstoff im Kern erschöpft ist. Ab diesem Punkt beginnt der Stern eine Phase der Umwandlung und Entwicklung hin zu einem anderen Stadium."
    ),
    
    (
        "Welche Region des Weltraums enthält die meisten Galaxien?",
        "Galaxienhaufen",
        ["Sternhaufen", "Galaxienhaufen", "Kugelsternhaufen", "Einzelne Galaxien"],
        "Diese großen kosmischen Strukturen bestehen aus zahlreichen Galaxien, die durch gravitative Kräfte zusammengehalten werden. Galaxienhaufen sind die größten bekannten Strukturen im Universum."
    ),
    
    (
        "Was ist der 'Sternenhimmel'?",
        "Der sichtbare Himmel von der Erde aus",
        ["Der sichtbare Himmel von der Erde aus", "Der gesamte Himmel in der Galaxie", "Eine Sammlung von Galaxien", "Das Zentrum der Galaxie"],
        "Der Begriff beschreibt den Teil des Himmels, den wir von der Erde aus sehen können. Er umfasst die Vielzahl von Sternen und anderen Himmelskörpern, die uns bei Nacht sichtbar sind."
    ),
    
    (
        "Welches Astronomische Instrument verwendet die Interferometrie, um Bilder von fernen Himmelsobjekten zu erstellen?",
        "Interferometer",
        ["Radioteleskop", "Interferometer", "Weltraumteleskop", "Optisches Teleskop"],
        "Dieses Instrument verwendet die Technik der Interferometrie, um Bilder von weit entfernten Himmelsobjekten mit hoher Auflösung zu erstellen. Durch die Kombination mehrerer Teleskope kann eine sehr präzise Bilddarstellung erreicht werden."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist der Unterschied zwischen einem Komet und einem Asteroiden?",
        "Kometen bestehen aus Eis und Staub, Asteroiden aus Gestein",
        ["Kometen haben keine Umlaufbahn", "Kometen sind größer als Asteroiden", "Kometen bestehen aus Eis und Staub, Asteroiden aus Gestein", "Kometen bestehen aus Eisen, Asteroiden aus Gestein"],
        "Kometen und Asteroiden unterscheiden sich vor allem in ihrer Zusammensetzung. Kometen bestehen größtenteils aus Eis und Staub und entwickeln beim Vorbeiflug an der Sonne einen charakteristischen Schweif, während Asteroiden aus Gestein bestehen."
    ),
    
    (
        "Welche Theorie beschreibt den Ursprung des Universums?",
        "Urknall-Theorie",
        ["Steady-State-Theorie", "Multiversum-Theorie", "Urknall-Theorie", "Kollaps-Theorie"],
        "Die gängige Theorie zur Erklärung des Universums besagt, dass es durch ein enormes, explosives Ereignis entstand. Der Urknall markiert den Beginn des Universums vor etwa 13,8 Milliarden Jahren."
    ),
    
    (
        "Welcher Planet im Sonnensystem hat die größte Neigung seiner Rotationsachse?",
        "Uranus",
        ["Neptun", "Uranus", "Saturn", "Mars"],
        "Dieser Planet weist die größte Neigung seiner Rotationsachse auf, mit einem Winkel von etwa 98 Grad. Dies führt zu extremen Jahreszeiten und ungewöhnlichen Wetterbedingungen auf dem Planeten."
    ),
    
    (
        "Was bezeichnet man als 'Weißes Loch'?",
        "Ein hypothetisches Objekt, das Materie ausstößt",
        ["Ein Weißes Loch", "Ein explodierender Stern", "Ein Weißer Zwerg", "Ein Schwarzes Loch mit aktiver Akkretion"],
        "Ein Weißes Loch ist eine theoretische Vorstellung, die als Gegenteil eines Schwarzen Lochs angesehen wird. Es würde Materie und Energie ausstoßen, im Gegensatz zu einem Schwarzen Loch, das Materie anzieht."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Wie nennt man den Effekt, bei dem die Lichtkurve eines Sterns durch den Vorbeizug eines Planeten abnimmt?",
        "Transitmethode",
        ["Spektralanalyse", "Gravitationslinse", "Doppler-Effekt", "Transitmethode"],
        "Dieser Effekt wird verwendet, um Exoplaneten zu entdecken, indem das leichte Abdimmen eines Sterns beobachtet wird, wenn ein Planet vor ihm vorbeizieht und einen Teil des Lichtes blockiert."
    ),
    
    (
        "Welcher Planet ist der zweitgrößte im Sonnensystem?",
        "Saturn",
        ["Uranus", "Neptun", "Saturn", "Jupiter"],
        "Dieser Planet ist der zweitgrößte im Sonnensystem, nach Jupiter. Saturn ist bekannt für seine beeindruckenden Ringe und seine enorme Größe."
    )
    
]               
               
class NAAstronomie(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(NAAstronomie, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Astronomie"
        self.fragen = fragenastro
        
        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

   
fragenchem = [
    
    ("Welches chemische Element hat das Symbol 'O'?",
     "Sauerstoff",
     ["Osmium", "Oganesson", "Sauerstoff", "Oxonium"],
     "Im Periodensystem der Elemente gibt es ein Element, das für das Leben auf der Erde unerlässlich ist. Dieses Element ist farblos, geruchlos und macht etwa 21% der Erdatmosphäre aus. Das chemische Element mit dem Symbol 'O' ist Sauerstoff."),

    ("Welches chemische Element ist das leichteste?",
     "Wasserstoff",
     ["Helium", "Lithium", "Wasserstoff", "Beryllium"],
     "Die Atome der chemischen Elemente haben unterschiedliche Massen. Das leichteste Element hat nur ein Proton in seinem Kern und ist das häufigste Element im Universum. Das leichteste chemische Element ist Wasserstoff."),

    ("Was ist die chemische Formel für Kochsalz?",
     "NaCl",
     ["KCl", "NaCl", "CaCl2", "MgCl2"],
     "Kochsalz, das in der Küche und in vielen industriellen Prozessen verwendet wird, besteht aus Natrium und Chlor. Die chemische Formel für dieses Salz ist NaCl, was für Natriumchlorid steht."),

    ("Welches Element hat das chemische Symbol 'Fe'?",
     "Eisen",
     ["Fluor", "Eisen", "Fermium", "Francium"],
     "Dieses Metall ist seit der Antike bekannt und wird in Bauwerken, Werkzeugen und Waffen verwendet. Sein chemisches Symbol leitet sich vom lateinischen Namen 'Ferrum' ab. Das Element mit dem Symbol 'Fe' ist Eisen."),

    ("Welches Gas ist bei Raumtemperatur farblos, geruchlos und macht etwa 78% der Erdatmosphäre aus?",
     "Stickstoff",
     ["Sauerstoff", "Argon", "Kohlenstoffdioxid", "Stickstoff"],
     "Ein bestimmtes Gas ist in großen Mengen in der Erdatmosphäre vorhanden und spielt eine wichtige Rolle in vielen chemischen und biologischen Prozessen. Dieses farblose und geruchlose Gas macht etwa 78% der Erdatmosphäre aus. Dieses Gas ist Stickstoff."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Säure ist in Zitronen in hoher Konzentration enthalten?",
     "Zitronensäure",
     ["Essigsäure", "Zitronensäure", "Salzsäure", "Schwefelsäure"],
     "Zitronen haben einen besonders sauren Geschmack, der durch das Vorhandensein einer bestimmten organischen Säure verursacht wird. Diese Säure wird häufig in der Lebensmittelindustrie als Konservierungsmittel und Aromastoff verwendet. Die in Zitronen enthaltene Säure ist Zitronensäure."),

    ("Welches chemische Element hat das Symbol 'Au'?",
     "Gold",
     ["Silber", "Kupfer", "Gold", "Aluminium"],
     "Dieses Element ist bekannt für seinen Glanz und seine Verwendung in Schmuck und Münzen. Sein chemisches Symbol stammt vom lateinischen Namen 'Aurum'. Das Element mit dem Symbol 'Au' ist Gold."),

    ("Welches chemische Element hat das höchste Atomgewicht?",
     "Uran",
     ["Blei", "Quecksilber", "Uran", "Plutonium"],
     "Einige chemische Elemente haben sehr hohe Atomgewichte, aber eines übertrifft die anderen. Dieses Element wird häufig in der Kernenergie und in Kernwaffen verwendet. Das chemische Element mit dem höchsten Atomgewicht ist Uran."),

    ("Was ist die chemische Formel für Wasser?",
     "H2O",
     ["H2O", "HO2", "H3O", "OH2"],
     "Dieses Molekül ist essentiell für alles Leben auf der Erde und besteht aus zwei Wasserstoffatomen und einem Sauerstoffatom. Die chemische Formel für Wasser ist H2O."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches chemische Element hat das Symbol 'K'?",
     "Kalium",
     ["Kalzium", "Kobalt", "Kalium", "Krypton"],
     "Dieses weiche, silbrig-weiße Metall ist ein essentieller Nährstoff für Pflanzen und Tiere. Sein chemisches Symbol leitet sich vom lateinischen Namen 'Kalium' ab. Das Element mit dem Symbol 'K' ist Kalium."),

    ("Welches Gas wird als 'Lachgas' bezeichnet?",
     "Distickstoffmonoxid",
     ["Distickstoffmonoxid", "Kohlenstoffdioxid", "Methan", "Ammoniak"],
     "Dieses Gas wird in der Medizin als Anästhetikum verwendet und hat euphorische Wirkungen, wenn es inhaliert wird. Chemisch gesehen ist es ein Oxid von Stickstoff. Das Gas, das als 'Lachgas' bezeichnet wird, ist Distickstoffmonoxid."),

    ("Welches chemische Element hat das Symbol 'Pb'?",
     "Blei",
     ["Platin", "Bismut", "Blei", "Polonium"],
     "Dieses Schwermetall ist seit der Antike bekannt und wurde in Rohren, Farben und Benzin verwendet. Sein chemisches Symbol stammt vom lateinischen Namen 'Plumbum'. Das Element mit dem Symbol 'Pb' ist Blei."),

    ("Was ist die chemische Formel für Ozon?",
     "O3",
     ["O2", "O3", "O4", "O"],
     "Dieses Molekül besteht aus drei Sauerstoffatomen und bildet eine Schicht in der Erdatmosphäre, die die Erde vor ultravioletter Strahlung schützt. Die chemische Formel für Ozon ist O3."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches chemische Element hat das Symbol 'Hg'?",
     "Quecksilber",
     ["Hafnium", "Helium", "Quecksilber", "Holmium"],
     "Dieses Metall ist bei Raumtemperatur flüssig und wird oft in Thermometern und Barometern verwendet. Sein chemisches Symbol stammt vom lateinischen Namen 'Hydrargyrum'. Das Element mit dem Symbol 'Hg' ist Quecksilber."),

    ("Welches Element ist das zweithäufigste in der Erdkruste?",
     "Silizium",
     ["Aluminium", "Eisen", "Sauerstoff", "Silizium"],
     "Dieses Element ist ein wichtiger Bestandteil von Sand und Gesteinen und wird in der Elektronikindustrie verwendet. Das zweithäufigste Element in der Erdkruste ist Silizium."),

    ("Welches chemische Element hat das Symbol 'Ag'?",
     "Silber",
     ["Argon", "Silber", "Astat", "Arsen"],
     "Dieses Edelmetall ist bekannt für seinen Glanz und seine Verwendung in Schmuck und Münzen. Sein chemisches Symbol stammt vom lateinischen Namen 'Argentum'. Das Element mit dem Symbol 'Ag' ist Silber."),

    ("Was ist die chemische Formel für Ammoniak?",
     "NH3",
     ["NH4", "NH3", "NH2", "NH"],
     "Dieses farblose Gas mit einem stechenden Geruch wird häufig als Düngemittel und in Reinigungsmitteln verwendet. Die chemische Formel für Ammoniak ist NH3."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches chemische Element hat das Symbol 'C'?",
     "Kohlenstoff",
     ["Calcium", "Chrom", "Kohlenstoff", "Cobalt"],
     "Dieses Element ist die Grundlage des Lebens auf der Erde und kommt in allen lebenden Organismen vor. Das chemische Element mit dem Symbol 'C' ist Kohlenstoff."),

    ("Welches chemische Element ist der Hauptbestandteil von Erdgas?",
     "Methan",
     ["Ethan", "Propangas", "Butan", "Methan"],
     "Dieses Gas ist der Hauptbestandteil von Erdgas und wird als Brennstoff und in der chemischen Industrie verwendet. Der Hauptbestandteil von Erdgas ist Methan."),

    ("Welches chemische Element hat das Symbol 'Na'?",
     "Natrium",
     ["Natrium", "Neon", "Nickel", "Niob"],
     "Dieses weiche, silbrig-weiße Metall reagiert heftig mit Wasser und wird häufig in der Chemieindustrie verwendet. Sein chemisches Symbol stammt vom lateinischen Namen 'Natrium'. Das Element mit dem Symbol 'Na' ist Natrium."),
    
        (
        "Welches chemische Element hat das Symbol 'Cl'?",
        "Chlor",
        ["Chrom", "Chlor", "Cobalt", "Kupfer"],
        "Dieses Element ist ein starkes Desinfektionsmittel und wird häufig in Schwimmbädern verwendet. Das chemische Element mit dem Symbol 'Cl' ist Chlor."
    ),
        ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element hat das Symbol 'He'?",
        "Helium",
        ["Hydrogen", "Helium", "Hafnium", "Holmium"],
        "Dieses Gas ist das zweitleichteste Element im Universum und wird in Luftballons verwendet, da es leichter als Luft ist. Das chemische Element mit dem Symbol 'He' ist Helium."
    ),
    (
        "Welches Element ist in der Chemie für seine Verwendung in Bleistiften bekannt?",
        "Kohlenstoff",
        ["Blei", "Zinn", "Kohlenstoff", "Titan"],
        "Obwohl es in Bleistiften verwendet wird, besteht die Mine nicht aus Blei, sondern aus einer speziellen Form von Kohlenstoff, bekannt als Graphit."
    ),
    (
        "Welche chemische Verbindung ist die Hauptkomponente von Sand?",
        "Siliziumdioxid",
        ["Kohlenstoffdioxid", "Kalziumkarbonat", "Siliziumdioxid", "Aluminiumsilikat"],
        "Sand besteht hauptsächlich aus einer chemischen Verbindung, die als Siliziumdioxid bekannt ist und in Quarz vorkommt."
    ),
    (
        "Welches chemische Element hat das Symbol 'Ca'?",
        "Calcium",
        ["Chrom", "Cobalt", "Kupfer", "Calcium"],
        "Dieses Element ist ein wichtiger Bestandteil von Knochen und Zähnen und spielt eine wichtige Rolle in biologischen Prozessen. Das Element mit dem Symbol 'Ca' ist Calcium."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist die chemische Formel für Schwefelsäure?",
        "H2SO4",
        ["HNO3", "H2SO4", "HCl", "H2CO3"],
        "Diese starke Säure ist weit verbreitet in der Industrie, insbesondere in der Herstellung von Düngemitteln. Die chemische Formel für Schwefelsäure ist H2SO4."
    ),
    (
        "Welches chemische Element hat das Symbol 'Cu'?",
        "Kupfer",
        ["Kupfer", "Chrom", "Kalium", "Cobalt"],
        "Dieses rote Metall wird häufig in elektrischen Leitungen verwendet und hat ein chemisches Symbol, das vom lateinischen Namen 'Cuprum' stammt. Das Element mit dem Symbol 'Cu' ist Kupfer."
    ),
    (
        "Welches Element wird auch als 'König der Metalle' bezeichnet?",
        "Gold",
        ["Platin", "Gold", "Quecksilber", "Silber"],
        "Dieses Edelmetall ist seit Jahrtausenden begehrt und wird als Wertmaßstab in vielen Kulturen verwendet. Es wird oft als 'König der Metalle' bezeichnet und sein Symbol ist Au."
    ),
    (
        "Was ist die chemische Formel für Essigsäure?",
        "CH3COOH",
        ["CH3COOH", "CH4", "C2H5OH", "HCOOH"],
        "Essigsäure ist der Hauptbestandteil von Essig und hat die chemische Formel CH3COOH."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element hat das Symbol 'Zn'?",
        "Zink",
        ["Xenon", "Zink", "Zinn", "Zirkonium"],
        "Dieses Metall wird häufig zum Verzinken von Stahl verwendet, um Rost zu verhindern. Das Element mit dem Symbol 'Zn' ist Zink."
    ),
    (
        "Welches chemische Element wird für die Herstellung von Chips in Computern verwendet?",
        "Silizium",
        ["Silizium", "Germanium", "Kohlenstoff", "Kupfer"],
        "Dieses Element ist ein Halbleiter und wird in großen Mengen in der Elektronikindustrie, insbesondere für die Herstellung von Computerchips, verwendet. Das Element ist Silizium."
    ),
    (
        "Welches Element ist bekannt für seine extreme Reaktivität mit Wasser und wird in der Chemie als Reaktionsmittel verwendet?",
        "Natrium",
        ["Kalium", "Calcium", "Natrium", "Lithium"],
        "Dieses Metall reagiert heftig mit Wasser und wird häufig in der Chemie als starkes Reaktionsmittel eingesetzt. Das Element ist Natrium."
    ),
    (
        "Welches Element hat das chemische Symbol 'I'?",
        "Iod",
        ["Iridium", "Iod", "Indium", "Ittrium"],
        "Dieses Halogen wird oft in Desinfektionsmitteln und als Nahrungsergänzungsmittel zur Vorbeugung von Jodmangel verwendet. Sein chemisches Symbol ist 'I'."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element ist flüssig bei Raumtemperatur und hat das Symbol 'Br'?",
        "Brom",
        ["Brom", "Bor", "Beryllium", "Quecksilber"],
        "Neben Quecksilber ist dieses Element eines der wenigen, das bei Raumtemperatur flüssig ist. Es hat das Symbol 'Br' und wird häufig in der Chemieindustrie verwendet."
    ),
    (
        "Welches chemische Element hat das Symbol 'F'?",
        "Fluor",
        ["Fluor", "Fermium", "Radon", "Francium"],
        "Dieses hochreaktive Element ist das elektronegativste und wird in Zahnpasta verwendet, um Karies vorzubeugen. Das Element mit dem Symbol 'F' ist Fluor."
    ),
    (
        "Welches chemische Element hat das Symbol 'Ar'?",
        "Argon",
        ["Aktinium", "Arsen", "Argon", "Antimon"],
        "Dieses Edelgas ist in großen Mengen in der Erdatmosphäre vorhanden und wird oft als Schutzgas in Schweißverfahren verwendet. Das Element mit dem Symbol 'Ar' ist Argon."
    ),
    (
        "Welches chemische Element hat das Symbol 'Ni'?",
        "Nickel",
        ["Niob", "Nickel", "Neon", "Neptunium"],
        "Dieses Metall wird häufig in Legierungen wie Edelstahl verwendet und hat ein chemisches Symbol, das leicht mit 'Neon' verwechselt werden kann. Das Element ist Nickel."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element hat das Symbol 'Ti'?",
        "Titan",
        ["Tellur", "Titan", "Thorium", "Thallium"],
        "Dieses Element ist bekannt für seine hohe Festigkeit und Korrosionsbeständigkeit und wird häufig in der Luft- und Raumfahrt verwendet. Das Element mit dem Symbol 'Ti' ist Titan."
    ),
    (
        "Welches chemische Element hat das Symbol 'Xe'?",
        "Xenon",
        ["Xylen", "Xylophon", "Xenium", "Xenon"],
        "Dieses Edelgas wird in speziellen Lampen verwendet, einschließlich Scheinwerfern und Projektoren. Das chemische Symbol ist 'Xe', und das Element ist Xenon."
    ),
        (
        "Welches chemische Element hat das Symbol 'Mg'?",
        "Magnesium",
        ["Mangan", "Magnesium", "Molybdän", "Moscovium"],
        "Dieses silbrig-weiße Metall ist ein essenzieller Bestandteil von Chlorophyll und wird in Feuerwerkskörpern für seine hellweiße Flamme verwendet. Das chemische Element mit dem Symbol 'Mg' ist Magnesium. Es ist außerdem wichtig für viele biologische Funktionen im menschlichen Körper."
    ),
    (
        "Welches chemische Element hat das Symbol 'P'?",
        "Phosphor",
        ["Phosphor", "Platin", "Palladium", "Plutonium"],
        "Dieses Element ist lebenswichtig und spielt eine Schlüsselrolle in der DNA und in den Zellmembranen. Es kommt in verschiedenen Formen vor, darunter weißer und roter Phosphor. Das Element mit dem Symbol 'P' ist Phosphor. Phosphor ist auch ein Hauptbestandteil von Düngemitteln."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist die chemische Formel für Methan?",
        "CH4",
        ["C2H6", "CH3", "C2H4", "CH4"],
        "Dieses einfache Kohlenwasserstoff-Molekül besteht aus einem Kohlenstoffatom und vier Wasserstoffatomen. Es ist der Hauptbestandteil von Erdgas. Die chemische Formel für Methan ist CH4. Methan ist auch ein starkes Treibhausgas."
    ),
    (
        "Welches chemische Element hat das Symbol 'Al'?",
        "Aluminium",
        ["Aluminium", "Aktinium", "Arsen", "Antimon"],
        "Dieses silbrig-weiße Metall ist bekannt für seine Leichtigkeit und wird häufig in der Luft- und Raumfahrtindustrie verwendet. Das chemische Element mit dem Symbol 'Al' ist Aluminium. Es ist auch das häufigste Metall in der Erdkruste."
    ),
    (
        "Welches chemische Element hat das Symbol 'Cr'?",
        "Chrom",
        ["Cobalt", "Cer", "Kupfer", "Chrom"],
        "Dieses harte, glänzende Metall wird oft für die Verchromung von Fahrzeugteilen und als Korrosionsschutz verwendet. Das chemische Element mit dem Symbol 'Cr' ist Chrom. Es ist auch für seine Verwendung in Edelstahl bekannt."
    ),
    (
        "Welches chemische Element hat das Symbol 'Ne'?",
        "Neon",
        ["Neptunium", "Niob", "Neon", "Nickel"],
        "Dieses Edelgas wird häufig in farbenfrohen Leuchtreklamen verwendet und leuchtet in einem charakteristischen rötlichen Farbton. Das Element mit dem Symbol 'Ne' ist Neon. Neon ist eines der seltensten Elemente in der Erdatmosphäre."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element hat das Symbol 'Mn'?",
        "Mangan",
        ["Magnesium", "Mercury", "Mangan", "Molybdän"],
        "Dieses Übergangsmetall ist wichtig für die Stahlherstellung und ist ein essentielles Spurenelement für den menschlichen Körper. Das chemische Element mit dem Symbol 'Mn' ist Mangan. Mangan wird auch in Batterien verwendet."
    ),
    (
        "Welches chemische Element hat das Symbol 'Br'?",
        "Brom",
        ["Bor", "Beryllium", "Barium", "Brom"],
        "Dieses Element ist ein Halogen und eines der wenigen, das bei Raumtemperatur in flüssiger Form vorkommt. Das chemische Element mit dem Symbol 'Br' ist Brom. Es wird auch in Flammschutzmitteln und Pestiziden eingesetzt."
    ),
    (
        "Was ist die chemische Formel für Ethanol?",
        "C2H5OH",
        ["C2H5OH", "CH3OH", "C2H4O", "C3H7OH"],
        "Diese Substanz ist auch als Alkohol bekannt und wird sowohl in Getränken als auch als Kraftstoffzusatz verwendet. Die chemische Formel für Ethanol ist C2H5OH. Ethanol wird auch in Desinfektionsmitteln verwendet."
    ),
    (
        "Welches chemische Element hat das Symbol 'Sb'?",
        "Antimon",
        ["Tellur", "Strontium", "Antimon", "Silber"],
        "Dieses Metalloid wurde in der Antike zur Herstellung von Kosmetika verwendet und ist heute in Legierungen und Flammschutzmitteln zu finden. Das Element mit dem Symbol 'Sb' ist Antimon. Es spielt auch eine Rolle in der Halbleitertechnologie."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element hat das Symbol 'Pt'?",
        "Platin",
        ["Palladium", "Platin", "Protactinium", "Polonium"],
        "Dieses wertvolle Edelmetall wird in Schmuck und als Katalysator in der chemischen Industrie verwendet. Das chemische Element mit dem Symbol 'Pt' ist Platin. Platin ist auch in der Automobilindustrie in Katalysatoren weit verbreitet."
    ),
    (
        "Welches chemische Element hat das Symbol 'V'?",
        "Vanadium",
        ["Vanadium", "Vikrium", "Verdium", "Vandium"],
        "Dieses Übergangsmetall wird hauptsächlich zur Herstellung von starken Legierungen verwendet und ist bekannt für seine Stabilität gegen Korrosion. Das chemische Element mit dem Symbol 'V' ist Vanadium. Vanadium wird auch in der chemischen Industrie als Katalysator verwendet."
    ),
    (
        "Was ist die chemische Formel für Blausäure?",
        "HCN",
        ["HCN", "H2SO4", "NH3", "HCl"],
        "Diese hochgiftige Verbindung ist auch unter dem Namen Cyanwasserstoff bekannt und kommt in einigen Pflanzen natürlich vor. Die chemische Formel für Blausäure ist HCN. Sie wurde in der Vergangenheit auch als chemische Waffe eingesetzt."
    ),
    (
        "Welches chemische Element hat das Symbol 'Sn'?",
        "Zinn",
        ["Zinn", "Zirkonium", "Zink", "Scandium"],
        "Dieses Element wird häufig in der Löttechnik und zur Verzinnung von Stahl verwendet, um Korrosion zu verhindern. Das chemische Element mit dem Symbol 'Sn' ist Zinn. Zinn ist auch ein wichtiger Bestandteil von Bronze."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element hat das Symbol 'Co'?",
        "Cobalt",
        ["Calcium", "Cobalt", "Chrom", "Kupfer"],
        "Dieses Element wird zur Herstellung von Legierungen und als blaues Pigment in Glas und Keramik verwendet. Das chemische Element mit dem Symbol 'Co' ist Cobalt. Cobalt wird auch in Lithium-Ionen-Batterien verwendet."
    ),
    (
        "Welches chemische Element hat das Symbol 'Ge'?",
        "Germanium",
        ["Gallium", "Germanium", "Gold", "Gallium"],
        "Dieses Halbleitermaterial wird häufig in der Elektronikindustrie verwendet und hat eine ähnliche chemische Struktur wie Silizium. Das chemische Element mit dem Symbol 'Ge' ist Germanium. Germanium wird auch in Infrarotoptiken verwendet."
    ),
    (
        "Was ist die chemische Formel für Essigsäure?",
        "CH3COOH",
        ["C2H5OH", "C2H4O", "CH3COOH", "HCOOH"],
        "Essigsäure ist die Hauptkomponente von Essig und spielt eine wichtige Rolle in der Lebensmittelindustrie. Die chemische Formel für Essigsäure ist CH3COOH. Essigsäure wird auch in der Chemieindustrie zur Herstellung von Kunststoffen verwendet."
    ),
    (
        "Welches chemische Element hat das Symbol 'Hg'?",
        "Quecksilber",
        ["Quecksilber", "Hafnium", "Helium", "Holmium"],
        "Dieses Metall ist bei Raumtemperatur flüssig und wird oft in Thermometern und Barometern verwendet. Das Element mit dem Symbol 'Hg' ist Quecksilber. Es ist auch bekannt für seine Verwendung in Amalgamfüllungen in der Zahnmedizin."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element hat das Symbol 'Ti'?",
        "Titan",
        ["Thallium", "Titan", "Thorium", "Tellur"],
        "Dieses Metall ist bekannt für seine hohe Festigkeit und Korrosionsbeständigkeit und wird häufig in der Luft- und Raumfahrt verwendet. Das chemische Element mit dem Symbol 'Ti' ist Titan. Titan wird auch in medizinischen Implantaten verwendet."
    ),
    (
        "Welches chemische Element hat das Symbol 'Kr'?",
        "Krypton",
        ["Kalium", "Kadmium", "Krypton", "Kalifornium"],
        "Dieses Edelgas wird oft in fluoreszierenden Leuchtstoffröhren und Blitzlampen verwendet. Das chemische Element mit dem Symbol 'Kr' ist Krypton. Krypton wird auch in einigen Arten von Lasern verwendet."
    ),
        (
        "Welches chemische Element hat das Symbol 'Zn'?",
        "Zink",
        ["Zirkonium", "Xenon", "Zink", "Kadmium"],
        "Dieses Metall wird häufig in der Galvanisierung verwendet, um Stahl vor Korrosion zu schützen. Das chemische Element mit dem Symbol 'Zn' ist Zink. Es spielt auch eine wichtige Rolle in der menschlichen Ernährung und ist für das Immunsystem unerlässlich."
    ),
    (
        "Welches chemische Element hat das Symbol 'As'?",
        "Arsen",
        ["Astat", "Argon", "Antimon", "Arsen"],
        "Dieses Halbmetall ist bekannt für seine Toxizität und wird in Insektiziden und Holzschutzmitteln verwendet. Das chemische Element mit dem Symbol 'As' ist Arsen. Es wurde auch historisch als Gift eingesetzt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist die chemische Formel für Natriumchlorid?",
        "NaCl",
        ["KCl", "NaCl", "MgCl2", "CaCl2"],
        "Dieses einfache Salz ist in der Natur weit verbreitet und wird in der Küche als Speisesalz verwendet. Die chemische Formel für Natriumchlorid ist NaCl. Es ist lebenswichtig für den Wasserhaushalt des Körpers."
    ),
    (
        "Welches chemische Element hat das Symbol 'Li'?",
        "Lithium",
        ["Lithium", "Lanthan", "Lutetium", "Lawrencium"],
        "Dieses Leichtmetall wird in wiederaufladbaren Batterien und in der Glasindustrie verwendet. Das chemische Element mit dem Symbol 'Li' ist Lithium. Es wird auch in der Psychiatrie zur Behandlung von bipolaren Störungen verwendet."
    ),
    (
        "Welches chemische Element hat das Symbol 'Ba'?",
        "Barium",
        ["Bor", "Bismut", "Beryllium", "Barium"],
        "Dieses Erdalkalimetall wird häufig in der Radiologie verwendet, um den Verdauungstrakt sichtbar zu machen. Das chemische Element mit dem Symbol 'Ba' ist Barium. Es kommt auch in Feuerwerkskörpern vor, wo es grüne Farben erzeugt."
    ),
    (
        "Welches chemische Element hat das Symbol 'Cs'?",
        "Cäsium",
        ["Cäsium", "Curium", "Calcium", "Cer"],
        "Dieses äußerst reaktive Metall wird in Atomuhren und als Katalysator in chemischen Reaktionen verwendet. Das chemische Element mit dem Symbol 'Cs' ist Cäsium. Es hat die genaueste bekannte Zeiteinheit erzeugt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist die chemische Formel für Schwefelsäure?",
        "H2SO4",
        ["HCl", "HNO3", "H3PO4", "H2SO4"],
        "Diese starke Säure wird häufig in der Industrie verwendet, besonders bei der Herstellung von Düngemitteln und Chemikalien. Die chemische Formel für Schwefelsäure ist H2SO4. Sie ist eine der am häufigsten produzierten Chemikalien weltweit."
    ),
    (
        "Welches chemische Element hat das Symbol 'Ni'?",
        "Nickel",
        ["Nickel", "Neptunium", "Nobelium", "Niob"],
        "Dieses Metall ist bekannt für seine Verwendung in rostfreiem Stahl und in Münzen. Das chemische Element mit dem Symbol 'Ni' ist Nickel. Es wird auch in vielen Batterien und Elektrogeräten verwendet."
    ),
    (
        "Welches chemische Element hat das Symbol 'Sr'?",
        "Strontium",
        ["Scandium", "Strontium", "Silber", "Selen"],
        "Dieses Erdalkalimetall ist bekannt für seine Verwendung in Leuchtfeuern und Feuerwerkskörpern, wo es eine rote Flamme erzeugt. Das chemische Element mit dem Symbol 'Sr' ist Strontium. Es wird auch in Zahnpasten gegen empfindliche Zähne verwendet."
    ),
    (
        "Was ist die chemische Formel für Kohlendioxid?",
        "CO2",
        ["CO2", "CO", "C2O", "C2O2"],
        "Dieses farblose, geruchlose Gas entsteht bei der Verbrennung von Kohlenstoffverbindungen und wird von Pflanzen in der Photosynthese genutzt. Die chemische Formel für Kohlendioxid ist CO2. Es ist auch ein bedeutendes Treibhausgas."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element hat das Symbol 'Tl'?",
        "Thallium",
        ["Thallium", "Technetium", "Tellur", "Thorium"],
        "Dieses giftige Metall wird in einigen Glasarten und Elektronikgeräten verwendet. Das chemische Element mit dem Symbol 'Tl' ist Thallium. Es wurde früher als Rattengift eingesetzt."
    ),
    (
        "Welches chemische Element hat das Symbol 'Ra'?",
        "Radium",
        ["Radon", "Rhenium", "Rhodium", "Radium"],
        "Dieses hochradioaktive Metall wurde früher in Leuchtfarben und zur Behandlung von Krebs eingesetzt. Das chemische Element mit dem Symbol 'Ra' ist Radium. Es wurde von Marie Curie entdeckt."
    ),
    (
        "Was ist die chemische Formel für Calciumcarbonat?",
        "CaCO3",
        ["CaCO3", "CaCl2", "CaSO4", "CaO"],
        "Diese Verbindung ist der Hauptbestandteil von Kalkstein, Marmor und Kreide und wird in der Bau- und Papierindustrie verwendet. Die chemische Formel für Calciumcarbonat ist CaCO3. Es wird auch als Kalziumquelle in Nahrungsergänzungsmitteln verwendet."
    ),
    (
        "Welches chemische Element hat das Symbol 'Xe'?",
        "Xenon",
        ["Xenon", "Xylol", "Xenium", "Xanthium"],
        "Dieses Edelgas wird in speziellen Lampen und in der Medizin als Anästhetikum verwendet. Das chemische Element mit dem Symbol 'Xe' ist Xenon. Es wird auch in Autolampen für extrem helles Licht verwendet."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element hat das Symbol 'Rn'?",
        "Radon",
        ["Radium", "Rhenium", "Rhodium", "Radon"],
        "Dieses radioaktive Edelgas entsteht durch den Zerfall von Uran und kann sich in Gebäuden ansammeln, was ein Gesundheitsrisiko darstellt. Das chemische Element mit dem Symbol 'Rn' ist Radon. Es ist ein bedeutender Faktor für Lungenkrebsrisiken in Gebäuden."
    ),
    (
        "Welches chemische Element hat das Symbol 'Sc'?",
        "Scandium",
        ["Scandium", "Strontium", "Selen", "Silber"],
        "Dieses seltene Erdmetall wird in Legierungen zur Verstärkung von Aluminium verwendet und hat eine geringe Dichte. Das chemische Element mit dem Symbol 'Sc' ist Scandium. Es wird auch in Hochleistungs-Sportgeräten verwendet."
    ),
    (
        "Welches chemische Element hat das Symbol 'I'?",
        "Iod",
        ["Indium", "Iridium", "Iod", "Itenium"],
        "Dieses Halogen wird in der Medizin zur Desinfektion und zur Behandlung von Schilddrüsenerkrankungen verwendet. Das chemische Element mit dem Symbol 'I' ist Iod. Es ist auch wichtig für die Schilddrüsenfunktion."
    ),
    (
        "Welches chemische Element hat das Symbol 'Po'?",
        "Polonium",
        ["Polonium", "Plutonium", "Protactinium", "Palladium"],
        "Dieses hochradioaktive Element wurde von Marie Curie entdeckt und wird als Energiequelle in Satelliten verwendet. Das chemische Element mit dem Symbol 'Po' ist Polonium. Es ist eines der tödlichsten bekannten Elemente."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches chemische Element hat das Symbol 'Cd'?",
        "Kadmium",
        ["Kadmium", "Cäsium", "Cobalt", "Calcium"],
        "Dieses giftige Schwermetall wird in Batterien und als Korrosionsschutz verwendet. Das chemische Element mit dem Symbol 'Cd' ist Kadmium. Es ist ein Umweltgift, das sich in Organismen anreichern kann."
    ),
    (
        "Welches chemische Element hat das Symbol 'Se'?",
        "Selen",
        ["Silizium", "Selen", "Schwefel", "Strontium"],
        "Dieses Halbmetall wird in der Elektronik und als Nahrungsergänzungsmittel verwendet, da es antioxidative Eigenschaften besitzt. Das chemische Element mit dem Symbol 'Se' ist Selen. Es spielt eine Rolle im Schutz des Körpers vor freien Radikalen."
    )
    
]
        
class NAChemie(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(NAChemie, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Chemie"
        self.fragen = fragenchem

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

  
        
fragenphy = [
    
    ("Was ist die Einheit der Kraft im Internationalen Einheitensystem (SI)?",
     "Newton",
     ["Joule", "Pascal", "Newton", "Watt"],
     "Die Kraft, die benötigt wird, um eine Masse von einem Kilogramm mit einer Beschleunigung von einem Meter pro Sekunde im Quadrat zu bewegen, wird in einer speziellen Einheit gemessen. Diese Einheit ist nach Sir Isaac Newton benannt. Die Einheit der Kraft im SI-System ist Newton."),

    ("Was beschreibt die erste Newton'sche Bewegungsgesetz?",
     "Trägheit",
     ["Beschleunigung", "Trägheit", "Gravitation", "Energieerhaltung"],
     "Dieses physikalische Gesetz besagt, dass ein Körper in Ruhe bleibt oder sich gleichförmig bewegt, solange keine resultierende Kraft auf ihn einwirkt. Es ist eines der Grundprinzipien der klassischen Mechanik und wird als Trägheitsprinzip bezeichnet. Das erste Newton'sche Bewegungsgesetz beschreibt die Trägheit."),

    ("Was ist die Geschwindigkeit des Lichts im Vakuum?",
     "299,792 km/s",
     ["150,000 km/s", "299,792 km/s", "300,000 km/s", "250,000 km/s"],
     "Licht bewegt sich mit einer festen Geschwindigkeit im Vakuum, die als fundamentale Konstante der Physik betrachtet wird. Diese Geschwindigkeit beträgt etwa 299,792 Kilometer pro Sekunde."),

    ("Welche fundamentale Wechselwirkung ist verantwortlich für den Zusammenhalt des Atomkerns?",
     "Starke Kernkraft",
     ["Elektromagnetische Kraft", "Gravitationskraft", "Schwache Kernkraft", "Starke Kernkraft"],
     "Die Stabilität des Atomkerns wird durch eine spezielle Art der Wechselwirkung gewährleistet, die stark genug ist, um die positiv geladenen Protonen zusammenzuhalten. Diese Wechselwirkung wird als starke Kernkraft bezeichnet."),

    ("Welches Prinzip besagt, dass kein Elektron denselben Quantenzustand wie ein anderes Elektron im selben Atom haben kann?",
     "Pauli-Prinzip",
     ["Heisenberg-Prinzip", "Pauli-Prinzip", "Bohr-Prinzip", "Einstein-Prinzip"],
     "Ein grundlegendes Prinzip der Quantenmechanik besagt, dass zwei Elektronen im selben Atom nicht gleichzeitig denselben Quantenzustand einnehmen können. Dieses Prinzip ist nach dem österreichischen Physiker Wolfgang Pauli benannt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie lautet die Formel für die kinetische Energie eines bewegten Körpers?",
     "1/2 mv^2",
     ["mgh", "mv", "1/2 mv^2", "mc^2"],
     "Die kinetische Energie eines Objekts hängt von seiner Masse und der Geschwindigkeit ab, mit der es sich bewegt. Sie wird durch die Formel 1/2 mv^2 beschrieben, wobei m die Masse und v die Geschwindigkeit ist."),

    ("Welche Teilchen sind die Bausteine von Protonen und Neutronen?",
     "Quarks",
     ["Leptonen", "Bosonen", "Quarks", "Neutrinos"],
     "Protonen und Neutronen bestehen aus kleineren subatomaren Teilchen, die in der Teilchenphysik eine zentrale Rolle spielen. Diese Teilchen werden als Quarks bezeichnet."),

    ("Was ist die Einheit der elektrischen Ladung?",
     "Coulomb",
     ["Volt", "Ampere", "Ohm", "Coulomb"],
     "Die elektrische Ladung wird in einer bestimmten Einheit gemessen, die nach dem französischen Physiker Charles-Augustin de Coulomb benannt ist. Diese Einheit ist Coulomb."),

    ("Welche Theorie erklärt die Bewegung der Planeten um die Sonne?",
     "Keplersche Gesetze",
     ["Einsteinsche Relativitätstheorie", "Newtons Gravitationstheorie", "Keplersche Gesetze", "Heisenbergs Unschärferelation"],
     "Die Bewegung der Planeten um die Sonne wird durch eine Reihe von Gesetzen beschrieben, die nach einem deutschen Astronomen benannt sind. Diese Gesetze erklären die elliptischen Umlaufbahnen und andere Eigenschaften der Planetenbewegungen. Diese Theorie sind die Keplerschen Gesetze."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
        
    ("Was beschreibt das Ohmsche Gesetz?",
     "Verhältnis von Spannung, Strom und Widerstand",
     ["Verhältnis von Leistung, Energie und Zeit", "Verhältnis von Kraft, Masse und Beschleunigung", "Verhältnis von Druck, Volumen und Temperatur", "Verhältnis von Spannung, Strom und Widerstand"],
     "Ein grundlegendes Gesetz der Elektrizitätslehre beschreibt den Zusammenhang zwischen Spannung, Strom und Widerstand in einem elektrischen Leiter. Es besagt, dass die Spannung gleich dem Produkt aus Strom und Widerstand ist. Dieses Gesetz wird als Ohmsches Gesetz bezeichnet."),

    ("Was besagt das Prinzip der Energieerhaltung?",
     "Energie kann weder geschaffen noch vernichtet werden",
     ["Masse kann in Energie umgewandelt werden", "Kraft ist gleich Masse mal Beschleunigung", "Energie kann weder geschaffen noch vernichtet werden", "Jede Aktion hat eine gleiche und entgegengesetzte Reaktion"],
     "Ein fundamentales Prinzip der Physik besagt, dass die Gesamtenergie in einem abgeschlossenen System konstant bleibt. Es bedeutet, dass Energie nur von einer Form in eine andere umgewandelt werden kann, aber nicht erzeugt oder zerstört werden kann. Dieses Prinzip ist das Prinzip der Energieerhaltung."),

    ("Welche Art von Strahlung hat die höchste Frequenz?",
     "Gamma-Strahlung",
     ["Mikrowellenstrahlung", "Infrarotstrahlung", "Ultraviolettstrahlung", "Gamma-Strahlung"],
     "Die elektromagnetische Strahlung hat verschiedene Formen, die sich in ihrer Frequenz unterscheiden. Die Strahlung mit der höchsten Frequenz und damit der höchsten Energie ist die Gamma-Strahlung."),

    ("Wer entdeckte das Elektron?",
     "J.J. Thomson",
     ["Albert Einstein", "Isaac Newton", "Niels Bohr", "J.J. Thomson"],
     "Das Elektron, ein subatomares Teilchen mit negativer Ladung, wurde Ende des 19. Jahrhunderts entdeckt. Der britische Physiker J.J. Thomson führte diese Entdeckung durch."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Kraft wirkt auf alle Objekte mit Masse und zieht sie zueinander?",
     "Gravitation",
     ["Elektromagnetische Kraft", "Schwache Kernkraft", "Gravitation", "Starke Kernkraft"],
     "Eine fundamentale Kraft in der Natur sorgt dafür, dass alle Objekte mit Masse eine Anziehungskraft aufeinander ausüben. Diese universelle Kraft wird als Gravitation bezeichnet."),

    ("Welche physikalische Größe wird in Hertz (Hz) gemessen?",
     "Frequenz",
     ["Wellenlänge", "Amplitude", "Frequenz", "Geschwindigkeit"],
     "Die Anzahl der Schwingungen oder Zyklen pro Sekunde eines periodischen Vorgangs wird in einer speziellen Einheit gemessen. Diese Einheit ist Hertz (Hz), und sie misst die Frequenz."),

    ("Was ist der absolute Nullpunkt in der Temperaturmessung?",
     "-273.15°C",
     ["0°C", "-273.15°C", "100°C", "-100°C"],
     "In der Thermodynamik gibt es einen theoretischen Punkt, an dem die Teilchenbewegung minimal ist und keine Wärmeenergie vorhanden ist. Dieser Punkt wird als absoluter Nullpunkt bezeichnet und liegt bei -273.15°C."),

    ("Welche Physiker formulierte das Prinzip der Relativität?",
     "Albert Einstein",
     ["Isaac Newton", "Galileo Galilei", "Albert Einstein", "Niels Bohr"],
     "Das Prinzip der Relativität, das die Gesetze der Physik unabhängig vom Bezugssystem beschreibt, wurde im frühen 20. Jahrhundert formuliert. Der Physiker, der dieses Prinzip entwickelte, war Albert Einstein."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Was beschreibt die Heisenbergsche Unschärferelation?",
     "Unmöglichkeit, Ort und Impuls eines Teilchens gleichzeitig genau zu bestimmen",
     ["Energie und Masse sind äquivalent", "Kraft ist gleich Masse mal Beschleunigung", "Unmöglichkeit, Ort und Impuls eines Teilchens gleichzeitig genau zu bestimmen", "Energie kann weder geschaffen noch vernichtet werden"],
     "In der Quantenmechanik gibt es ein grundlegendes Prinzip, das besagt, dass es unmöglich ist, den genauen Ort und den genauen Impuls eines Teilchens gleichzeitig zu bestimmen. Dieses Prinzip ist als Heisenbergsche Unschärferelation bekannt."),
    
    ("Was ist der Energieerhaltungssatz?",
     "Energie kann weder erzeugt noch vernichtet werden, nur umgewandelt",
     ["Energie kann weder erzeugt noch vernichtet werden, nur umgewandelt", "Masse und Energie sind identisch", "Energie ist die Fähigkeit, Arbeit zu verrichten", "Energie kann in Materie umgewandelt werden"],
     "Ein fundamentales Prinzip in der Physik besagt, dass die Gesamtenergie in einem abgeschlossenen System konstant bleibt. Es kann zwar von einer Form in eine andere umgewandelt werden, aber nicht erzeugt oder vernichtet werden. Dies ist der Energieerhaltungssatz."),

    ("Welche Art von Wellen breiten sich durch das Vakuum aus?",
     "Elektromagnetische Wellen",
     ["Schallwellen", "Elektronenwellen", "Gravitationswellen", "Elektromagnetische Wellen"],
     "Elektromagnetische Wellen benötigen kein Medium für ihre Ausbreitung und können sich daher auch durch das Vakuum des Weltraums bewegen. Dies umfasst Radiowellen, Mikrowellen, Infrarotstrahlung, sichtbares Licht, Ultraviolettstrahlung, Röntgenstrahlung und Gammastrahlung."),
    
        (
        "Was beschreibt das Hooke'sche Gesetz?",
        "Zusammenhang zwischen Spannung und Dehnung",
        ["Zusammenhang zwischen Energie und Leistung", "Zusammenhang zwischen Spannung und Dehnung", "Zusammenhang zwischen Kraft und Masse", "Zusammenhang zwischen Temperatur und Widerstand"],
        "Das Hooke'sche Gesetz beschreibt den Zusammenhang zwischen der auf einen elastischen Körper ausgeübten Kraft und der resultierenden Dehnung. Es besagt, dass die Dehnung proportional zur Kraft ist, solange die Elastizitätsgrenze nicht überschritten wird."
    ),
         ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Wie lautet die Formel für die elektrische Leistung?",
        "P = IV",
        ["P = I^2R", "P = IV", "P = V^2/R", "P = mgh"],
        "Die elektrische Leistung wird durch das Produkt von Spannung (V) und Stromstärke (I) beschrieben. Die Formel lautet P = IV, wobei P die Leistung, I der Strom und V die Spannung ist."
    ),
    (
        "Was ist der Unterschied zwischen Geschwindigkeit und Beschleunigung?",
        "Geschwindigkeit ist der Weg pro Zeit, Beschleunigung ist die Änderung der Geschwindigkeit pro Zeit",
        ["Geschwindigkeit ist der Weg pro Zeit, Beschleunigung ist die Änderung der Geschwindigkeit pro Zeit", "Geschwindigkeit ist die Änderung des Ortes pro Zeit, Beschleunigung ist die Änderung der Geschwindigkeit pro Zeit", "Geschwindigkeit und Beschleunigung sind Synonyme", "Geschwindigkeit ist die Änderung des Ortes pro Zeit, Beschleunigung ist der Weg pro Zeit"],
        "Geschwindigkeit beschreibt, wie schnell sich ein Objekt bewegt, während Beschleunigung beschreibt, wie schnell sich die Geschwindigkeit eines Objekts ändert. Geschwindigkeit ist der Weg pro Zeit, während Beschleunigung die Änderung der Geschwindigkeit pro Zeit ist."
    ),
    (
        "Wie lautet die Formel für die Gravitationskraft zwischen zwei Massen?",
        "F = G(m1m2/r^2)",
        ["F = G(m1m2/r^2)", "F = m1m2G/r", "F = G(m1m2/r)", "F = m1m2G/r^2"],
        "Die Gravitationskraft zwischen zwei Massen wird durch das Gesetz der universellen Gravitation beschrieben, das besagt, dass die Kraft proportional zum Produkt der beiden Massen und umgekehrt proportional zum Quadrat ihres Abstands ist. Die Formel lautet F = G(m1m2/r^2)."
    ),
    (
        "Was beschreibt das Gesetz von Boyle?",
        "Das Volumen eines Gases ist bei konstantem Druck umgekehrt proportional zum Druck",
        ["Das Volumen eines Gases ist direkt proportional zum Druck", "Das Volumen eines Gases ist bei konstantem Druck umgekehrt proportional zum Druck", "Der Druck eines Gases ist direkt proportional zur Temperatur", "Die Temperatur eines Gases ist konstant bei verändertem Volumen"],
        "Das Gesetz von Boyle besagt, dass das Volumen eines Gases bei konstantem Druck umgekehrt proportional zum Druck ist. Dies bedeutet, dass bei konstantem Druck das Volumen eines Gases abnimmt, wenn der Druck erhöht wird."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Phänomen beschreibt die Relativitätstheorie von Albert Einstein?",
        "Die Beziehung zwischen Raum und Zeit",
        ["Die Beziehung zwischen Raum und Zeit", "Die Wirkung von Magnetfeldern auf bewegte Ladungen", "Die Bewegung von Planeten um die Sonne", "Die Entstehung von Kernreaktionen"],
        "Einsteins Relativitätstheorie beschreibt, wie Raum und Zeit miteinander verknüpft sind und wie sich die Zeit für verschiedene Beobachter relativ zum Raum verändern kann. Diese Theorie revolutionierte unser Verständnis von Raum und Zeit."
    ),
    (
        "Welche Größe wird in Joule gemessen?",
        "Energie",
        ["Energie", "Kraft", "Frequenz", "Ladung"],
        "Joule ist die Einheit für Energie im Internationalen Einheitensystem (SI). Sie misst die Arbeit, die verrichtet wird, wenn eine Kraft von einem Newton über eine Strecke von einem Meter wirkt."
    ),
    (
        "Welches Prinzip besagt, dass in einem geschlossenen System die Gesamtmenge an Impuls konstant bleibt?",
        "Impulserhaltungssatz",
        ["Impulserhaltungssatz", "Energieerhaltungssatz", "Gesetz von Newton", "Gesetz von Boyle"],
        "Der Impulserhaltungssatz besagt, dass der Gesamtimpuls in einem geschlossenen System konstant bleibt, solange keine äußeren Kräfte auf das System wirken. Dies bedeutet, dass Impuls nicht verloren geht, sondern lediglich von einem Objekt auf ein anderes übertragen wird."
    ),
    (
        "Was beschreibt die spezielle Relativitätstheorie?",
        "Die Relativität von Raum und Zeit bei hohen Geschwindigkeiten",
        ["Die Relativität von Raum und Zeit bei hohen Geschwindigkeiten", "Die Wechselwirkung von Licht und Materie", "Die Struktur des Atomkerns", "Die Bewegung von Planeten im Gravitationsfeld"],
        "Die spezielle Relativitätstheorie beschreibt, wie Raum und Zeit relativ sind, wenn sich Objekte mit hohen Geschwindigkeiten bewegen. Dies führt zu Effekten wie Zeitdilatation und Längenkontraktion, die bei hohen Geschwindigkeiten beobachtet werden."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Energie wird durch die Bewegung eines Körpers erzeugt?",
        "Kinetische Energie",
        ["Chemische Energie", "Kinetische Energie", "Wärmeenergie", "Potenzielle Energie"],
        "Kinetische Energie ist die Energie, die ein Körper aufgrund seiner Bewegung besitzt. Sie wird durch die Formel 1/2 mv^2 beschrieben, wobei m die Masse des Körpers und v seine Geschwindigkeit ist."
    ),
    (
        "Was ist die Formel für die Beschleunigung?",
        "a = Δv/Δt",
        ["a = Δv/Δt", "a = F/m", "a = v^2/r", "a = m/v"],
        "Die Beschleunigung eines Körpers ist die Änderung der Geschwindigkeit pro Zeit. Die Formel lautet a = Δv/Δt, wobei Δv die Änderung der Geschwindigkeit und Δt die Zeitspanne ist, in der diese Änderung erfolgt."
    ),
    (
        "Welches Gesetz beschreibt die Beziehung zwischen der Spannung, dem Strom und dem Widerstand in einem elektrischen Stromkreis?",
        "Ohmsches Gesetz",
        ["Ohmsches Gesetz", "Gesetz von Kirchhoff", "Faradaysches Gesetz", "Maxwell'sches Gesetz"],
        "Das Ohmsche Gesetz beschreibt die Beziehung zwischen Spannung (V), Strom (I) und Widerstand (R) in einem elektrischen Stromkreis. Es lautet V = IR, wobei die Spannung gleich dem Produkt aus Strom und Widerstand ist."
    ),
    (
        "Was ist der Unterschied zwischen Wärme und Temperatur?",
        "Wärme ist die Energieübertragung, Temperatur ist ein Maß für die Wärmeenergie",
        ["Wärme ist die Energieübertragung, Temperatur ist ein Maß für die Wärmeenergie", "Wärme und Temperatur sind dasselbe", "Wärme ist ein Maß für die Wärmeenergie, Temperatur ist die Energieübertragung", "Wärme ist die Energiemenge, Temperatur ist die Geschwindigkeit der Moleküle"],
        "Wärme ist die Energie, die zwischen Systemen aufgrund eines Temperaturunterschieds übertragen wird. Temperatur hingegen ist ein Maß für die durchschnittliche kinetische Energie der Teilchen in einem System."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Prinzip besagt, dass die Summe der Spannungen in einem geschlossenen Stromkreis gleich null ist?",
        "Kirchhoffsches Spannungsgesetz",
        ["Kirchhoffsches Spannungsgesetz", "Ohmsches Gesetz", "Kirchhoffsches Stromgesetz", "Faradaysches Gesetz"],
        "Das Kirchhoffsche Spannungsgesetz besagt, dass die Summe der Spannungen um jede geschlossene Schleife in einem elektrischen Stromkreis gleich null ist. Dies basiert auf der Erhaltung der Energie in einem elektrischen Netzwerk."
    ),
    (
        "Was ist der Unterschied zwischen elastischer und plastischer Verformung?",
        "Elastische Verformung ist reversibel, plastische Verformung ist irreversibel",
        ["Elastische Verformung ist reversibel, plastische Verformung ist irreversibel", "Elastische Verformung ist irreversibel, plastische Verformung ist reversibel", "Beide Verformungen sind reversibel", "Beide Verformungen sind irreversibel"],
        "Elastische Verformung ist die vorübergehende Änderung der Form eines Materials, die verschwindet, wenn die Kraft entfernt wird. Plastische Verformung hingegen ist eine dauerhafte Veränderung der Form, die nicht zurückgeht, wenn die Kraft entfernt wird."
    ),
    (
        "Was beschreibt das Hubble-Gesetz?",
        "Die Beziehung zwischen der Entfernung und der Geschwindigkeit von Galaxien",
        ["Die Beziehung zwischen der Entfernung und der Geschwindigkeit von Galaxien", "Die Beziehung zwischen der Temperatur und der Energie eines Sterns", "Die Beziehung zwischen der Entfernung und der Helligkeit von Sternen", "Die Beziehung zwischen der Masse und der Gravitationskraft"],
        "Das Hubble-Gesetz beschreibt, dass die Geschwindigkeit, mit der sich Galaxien voneinander entfernen, proportional zu ihrer Entfernung ist. Dies unterstützt die Theorie des sich ausdehnenden Universums."
    ),
    (
        "Wie lautet die Formel für die Energie eines Photons?",
        "E = hf",
        ["E = 1/2 mv^2", "E = hf", "E = PV", "E = mc^2"],
        "Die Energie eines Photons, das als Lichtquantum betrachtet wird, wird durch die Formel E = hf beschrieben, wobei h das Plancksche Wirkungsquantum und f die Frequenz des Photons ist."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt der Begriff 'Thermodynamik'?",
        "Die Wissenschaft der Wärmeübertragung und Energieumwandlung",
        ["Die Wissenschaft der Wärmeübertragung und Energieumwandlung", "Die Wissenschaft der Lichtbrechung", "Die Wissenschaft der elektrischen Ströme", "Die Wissenschaft der mechanischen Bewegungen"],
        "Thermodynamik ist die Wissenschaft, die sich mit Wärmeübertragung und der Umwandlung von Energie in verschiedenen Formen befasst. Sie untersucht, wie Energie zwischen Systemen übertragen wird und wie diese Systeme in verschiedene Zustände übergehen."
    ),
    (
        "Was beschreibt der Begriff 'Relativität' in der Physik?",
        "Die Abhängigkeit von Raum und Zeit vom Bewegungszustand des Beobachters",
        ["Die Abhängigkeit von Raum und Zeit vom Bewegungszustand des Beobachters", "Die Konstanz der Lichtgeschwindigkeit in verschiedenen Medien", "Die Unveränderlichkeit der Materie in einem geschlossenen System", "Die Wechselwirkung zwischen verschiedenen Teilchenarten"],
        "In der Physik beschreibt der Begriff 'Relativität' die Abhängigkeit von Raum und Zeit von dem Bewegungszustand des Beobachters, wie es in Einsteins Relativitätstheorie formuliert ist. Diese Theorie revolutionierte unser Verständnis der physikalischen Gesetze unter verschiedenen Bezugssystemen."
    ),
    (
        "Was beschreibt der Begriff 'Dopplereffekt'?",
        "Die Änderung der Frequenz von Wellen aufgrund der Bewegung der Quelle oder des Beobachters",
        ["Die Änderung der Frequenz von Wellen aufgrund der Bewegung der Quelle oder des Beobachters", "Die Erzeugung von Magnetfeldern durch elektrische Ströme", "Die Energieübertragung durch elektromagnetische Strahlung", "Die Veränderung des Drucks bei Temperaturänderungen"],
        "Der Dopplereffekt beschreibt die Änderung der Frequenz oder Wellenlänge von Wellen, die von einem sich bewegenden Beobachter oder einer sich bewegenden Quelle wahrgenommen wird. Dies führt dazu, dass der Ton eines sich annähernden Fahrzeugs höher klingt und der eines sich entfernten Fahrzeugs tiefer."
    ),
    (
        "Welche Größe wird in Watt gemessen?",
        "Leistung",
        ["Widerstand", "Energie", "Leistung", "Spannung"],
        "Watt ist die Einheit für Leistung im Internationalen Einheitensystem (SI). Es beschreibt die Rate, mit der Energie übertragen oder umgewandelt wird, und wird berechnet als Energie pro Zeit (Joule pro Sekunde)."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt die Formel E = mc^2?",
        "Die Äquivalenz von Energie und Masse",
        ["Die Frequenz eines elektromagnetischen Wellen", "Die Beziehung zwischen Energie und Arbeit", "Die Äquivalenz von Energie und Masse", "Die Geschwindigkeit eines sich bewegenden Körpers"],
        "Die Formel E = mc^2, entwickelt von Albert Einstein, beschreibt die Äquivalenz von Energie (E) und Masse (m), wobei c die Lichtgeschwindigkeit ist. Dies bedeutet, dass Masse in Energie umgewandelt werden kann und umgekehrt."
    ),
        (
        "Was beschreibt das Gesetz von Faraday in der Elektromagnetik?",
        "Die Induktion von elektrischer Spannung durch sich ändernde Magnetfelder",
        ["Die Änderung der Lichtgeschwindigkeit in verschiedenen Medien", "Die Beziehung zwischen elektrischer Stromstärke und Spannung", "Die Erzeugung von Magnetfeldern durch elektrische Ströme", "Die Induktion von elektrischer Spannung durch sich ändernde Magnetfelder"],
        "Das Gesetz von Faraday beschreibt, dass eine sich ändernde Magnetfeldstärke eine elektrische Spannung in einem Leiter induzieren kann. Dies bildet die Grundlage für Generatoren und Transformatoren."
    ),
    (
        "Welche physikalische Größe wird in Pascal gemessen?",
        "Druck",
        ["Energie", "Druck", "Temperatur", "Kraft"],
        "Pascal ist die Einheit für Druck im Internationalen Einheitensystem (SI). Ein Pascal entspricht einem Newton pro Quadratmeter."
    ),
    (
        "Wie lautet die Formel für den Impuls eines Körpers?",
        "p = mv",
        ["p = mv", "p = m/v", "p = 1/2 mv^2", "p = Fv"],
        "Der Impuls eines Körpers wird durch die Formel p = mv beschrieben, wobei m die Masse des Körpers und v seine Geschwindigkeit ist. Der Impuls ist ein Maß für die Bewegungsmenge eines Objekts."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist der Unterschied zwischen elastischem und inelastischem Stoß?",
        "Bei einem elastischen Stoß bleibt die kinetische Energie erhalten, bei einem inelastischen Stoß nicht",
        ["Bei einem elastischen Stoß ist die Geschwindigkeit gleich, bei einem inelastischen Stoß nicht", "Bei einem elastischen Stoß bleibt die kinetische Energie erhalten, bei einem inelastischen Stoß nicht", "Bei einem elastischen Stoß wird Wärme erzeugt, bei einem inelastischen Stoß nicht", "Bei einem elastischen Stoß werden die Körper verschmolzen, bei einem inelastischen Stoß nicht"],
        "Bei einem elastischen Stoß bleibt die Gesamtkinetische Energie vor und nach dem Stoß erhalten. Bei einem inelastischen Stoß wird ein Teil der kinetischen Energie in andere Energieformen, wie Wärme, umgewandelt."
    ),
    (
        "Wie lautet die Formel für den Druck in einem Flüssigkeitskessel?",
        "P = ρgh",
        ["P = ρgh", "P = F/A", "P = m/a", "P = V/T"],
        "Der Druck in einer Flüssigkeitssäule wird durch die Formel P = ρgh beschrieben, wobei ρ die Dichte der Flüssigkeit, g die Erdbeschleunigung und h die Höhe der Flüssigkeitssäule ist."
    ),
    (
        "Welches Gesetz beschreibt den Zusammenhang zwischen elektrischer Stromstärke, Spannung und Widerstand?",
        "Ohmsches Gesetz",
        ["Kirchhoffsches Gesetz", "Ohmsches Gesetz", "Maxwellsche Gleichungen", "Faradaysches Gesetz"],
        "Das Ohmsche Gesetz beschreibt, wie die Spannung (V) in einem elektrischen Stromkreis gleich dem Produkt aus Stromstärke (I) und Widerstand (R) ist. Die Formel lautet V = IR."
    ),
    (
        "Was ist die Formel für die Gravitationskonstante?",
        "G = 6.67430 × 10^−11 m^3 kg^−1 s^−2",
        ["G = 9.81 m/s^2", "G = 1.602 × 10^−19 C", "G = 8.314 J/(mol·K)", "G = 6.67430 × 10^−11 m^3 kg^−1 s^−2"],
        "Die Gravitationskonstante (G) ist eine fundamentale Konstante in der Physik, die in der Formel für die Gravitationskraft verwendet wird. Ihr Wert ist 6.67430 × 10^−11 m^3 kg^−1 s^−2."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt die Formel E = hf?",
        "Die Energie eines Photons",
        ["Die Energie eines Photons", "Die Energie eines Moleküls", "Die Energie eines Elektrons", "Die Energie eines Kernteilchens"],
        "Die Formel E = hf beschreibt die Energie eines Photons, wobei h das Plancksche Wirkungsquantum und f die Frequenz des Photons ist. Diese Formel zeigt, dass die Energie eines Photons direkt proportional zu seiner Frequenz ist."
    ),
    (
        "Was ist die Einheit für die elektromagnetische Kraft im SI-System?",
        "Newton",
        ["Coulomb", "Joule", "Newton", "Pascal"],
        "Die elektromagnetische Kraft, wie sie auf elektrische Ladungen wirkt, wird im Internationalen Einheitensystem (SI) in Newton gemessen, der Einheit für Kraft."
    ),
    (
        "Wie lautet das Gesetz von Hooke?",
        "F = kx",
        ["F = 1/2 mv^2", "F = kx", "F = ma", "F = G(m1m2/r^2)"],
        "Das Hooke'sche Gesetz beschreibt die lineare Beziehung zwischen der auf einen elastischen Körper wirkenden Kraft (F) und der resultierenden Dehnung (x). Es lautet F = kx, wobei k die Federkonstante ist."
    ),
    (
        "Was beschreibt der Begriff 'Quantenmechanik'?",
        "Die Physik von sehr kleinen Teilchen auf atomarer und subatomarer Ebene",
        ["Die Elektromagnetismus auf makroskopischer Ebene", "Die Physik von sehr kleinen Teilchen auf atomarer und subatomarer Ebene", "Die Mechanik von Makrosystemen", "Die Dynamik von Fluiden"],
        "Quantenmechanik ist die Theorie, die das Verhalten von Teilchen auf atomarer und subatomarer Ebene beschreibt. Sie erklärt Phänomene, die mit klassischen Mechaniken nicht erklärbar sind, wie das Verhalten von Elektronen in Atomen."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt die Formel v = u + at?",
        "Die Berechnung der Endgeschwindigkeit bei konstanter Beschleunigung",
        ["Die Berechnung der Endgeschwindigkeit bei konstanter Beschleunigung", "Die Berechnung des Weges bei konstanter Geschwindigkeit", "Die Berechnung der Beschleunigung bei konstantem Weg", "Die Berechnung der mittleren Geschwindigkeit bei variabler Beschleunigung"],
        "Die Formel v = u + at beschreibt die Endgeschwindigkeit (v) eines Körpers bei konstanter Beschleunigung (a) und Anfangsgeschwindigkeit (u) über eine Zeitspanne (t)."
    ),
    (
        "Welche Größe wird in Ampere gemessen?",
        "Stromstärke",
        ["Spannung", "Leistung", "Stromstärke", "Widerstand"],
        "Ampere ist die Einheit für die elektrische Stromstärke im Internationalen Einheitensystem (SI). Sie misst die Menge an Elektronen, die pro Sekunde durch einen Leiter fließen."
    ),
    (
        "Was beschreibt der Begriff 'Wellenlänge' in der Physik?",
        "Die Entfernung zwischen zwei aufeinander folgenden Wellenbergen oder -tälern",
        ["Die Entfernung zwischen zwei aufeinander folgenden Wellenbergen oder -tälern", "Die Geschwindigkeit einer Welle", "Die Energie einer Welle", "Die Frequenz einer Welle"],
        "Die Wellenlänge ist der Abstand zwischen zwei aufeinander folgenden Wellenbergen oder -tälern in einer Welle. Sie ist ein Maß für die Größe der Welle und steht in umgekehrtem Zusammenhang mit ihrer Frequenz."
    ),
    (
        "Wie lautet die Formel für die kinetische Energie eines Körpers?",
        "E_k = 1/2 mv^2",
        ["E_k = 1/2 kx^2", "E_k = 1/2 mv^2", "E_k = p^2/2m", "E_k = mgh"],
        "Die kinetische Energie eines Körpers, der sich mit einer Geschwindigkeit v bewegt, wird durch die Formel E_k = 1/2 mv^2 beschrieben, wobei m die Masse des Körpers ist."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt die Formel E = mc^2?",
        "Die Äquivalenz von Energie und Masse",
        ["Die Geschwindigkeit eines sich bewegenden Körpers", "Die Äquivalenz von Energie und Masse", "Die Beziehung zwischen Energie und Arbeit", "Die Frequenz eines elektromagnetischen Wellen"],
        "Die Formel E = mc^2 beschreibt die Äquivalenz von Energie (E) und Masse (m), wobei c die Lichtgeschwindigkeit ist. Diese Formel zeigt, dass Masse in Energie umgewandelt werden kann und umgekehrt."
    ),
    (
        "Was beschreibt der Begriff 'Inertialrahmen'?",
        "Ein Bezugssystem, in dem die Newton'schen Gesetze gelten",
        ["Ein Bezugssystem, das immer auf der Erde liegt", "Ein Bezugssystem, in dem Licht immer mit konstanter Geschwindigkeit reist", "Ein Bezugssystem, in dem keine Gravitation wirkt", "Ein Bezugssystem, in dem die Newton'schen Gesetze gelten"],
        "Ein Inertialrahmen ist ein Bezugssystem, in dem die Newton'schen Gesetze der Bewegung gelten, und in dem sich ein Körper ohne äußere Kräfte geradlinig und gleichförmig bewegt."
    ),
    (
        "Was beschreibt der Begriff 'Thermodynamik'?",
        "Die Wissenschaft der Wärmeübertragung und Energieumwandlung",
        ["Die Wissenschaft der Wärmeübertragung und Energieumwandlung", "Die Wissenschaft der Lichtbrechung", "Die Wissenschaft der elektrischen Ströme", "Die Wissenschaft der mechanischen Bewegungen"],
        "Thermodynamik ist die Wissenschaft, die sich mit Wärmeübertragung und der Umwandlung von Energie in verschiedenen Formen befasst. Sie untersucht, wie Energie zwischen Systemen übertragen wird und wie diese Systeme in verschiedene Zustände übergehen."
    ),
    (
        "Was beschreibt die Formel P = IV?",
        "Die Berechnung der elektrischen Leistung",
        ["Die Berechnung der elektrischen Energie", "Die Berechnung der elektrischen Leistung", "Die Berechnung des elektrischen Widerstands", "Die Berechnung der elektrischen Spannung"],
        "Die Formel P = IV beschreibt die elektrische Leistung (P), die in einem Stromkreis erzeugt wird, wobei I die Stromstärke und V die Spannung ist."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Prinzip beschreibt die Unveränderlichkeit der Gesamtmenge an Energie in einem geschlossenen System?",
        "Prinzip der Energieerhaltung",
        ["Prinzip der Energieerhaltung", "Prinzip der Impulserhaltung", "Prinzip der Entropie", "Prinzip der Relativität"],
        "Das Prinzip der Energieerhaltung besagt, dass die Gesamtenergie in einem geschlossenen System konstant bleibt. Energie kann nur von einer Form in eine andere umgewandelt, aber nicht geschaffen oder vernichtet werden."
    ),
    (
        "Wie lautet die Formel für die Geschwindigkeit eines Objekts bei konstanter Beschleunigung?",
        "v = u + at",
        ["v = 1/2 at^2", "v = u + gt", "v = d/t", "v = u + at"],
        "Die Formel v = u + at beschreibt die Geschwindigkeit (v) eines Objekts, das sich mit konstanter Beschleunigung (a) bewegt. u ist die Anfangsgeschwindigkeit und t ist die Zeit."
    ),
    (
        "Welches Prinzip beschreibt die Tatsache, dass Licht in verschiedenen Medien unterschiedliche Geschwindigkeiten hat?",
        "Brechungsgesetz",
        ["Gesetz der Energieerhaltung", "Brechungsgesetz", "Gesetz der Impulserhaltung", "Gesetz von Newton"],
        "Das Brechungsgesetz beschreibt, wie Licht seine Geschwindigkeit und Richtung ändert, wenn es von einem Medium in ein anderes übergeht. Es ist auch als Snellius-Gesetz bekannt."
    ),
        (
        "Welches Prinzip beschreibt die Erhaltung der Gesamtenergie in einem geschlossenen System?",
        "Gesetz der Energieerhaltung",
        ["Gesetz der Gravitation", "Gesetz der Energieerhaltung", "Gesetz der Thermodynamik", "Gesetz der Impulserhaltung"],
        "Das Gesetz der Energieerhaltung besagt, dass die Gesamtenergie eines geschlossenen Systems konstant bleibt, unabhängig von den in diesem System ablaufenden Prozessen. Energie kann nur von einer Form in eine andere umgewandelt werden, aber nicht erzeugt oder zerstört werden."
    ),
         ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Phänomen tritt auf, wenn Licht an einem Prisma gebrochen wird?",
        "Dispersion",
        ["Dispersion", "Beugung", "Reflexion", "Interferenz"],
        "Dispersion ist das Phänomen, bei dem Lichtstrahlen unterschiedlicher Wellenlängen unterschiedlich stark gebrochen werden, wodurch ein Spektrum von Farben entsteht. Dies ist die Grundlage für die Bildung von Regenbögen und die Analyse von Licht mit einem Prisma."
    ),
    (
        "Was beschreibt die Formel E = mc^2?",
        "Die Äquivalenz von Masse und Energie",
        ["Die Beziehung zwischen Kraft und Beschleunigung", "Die Geschwindigkeit des Lichtes im Vakuum", "Die Äquivalenz von Masse und Energie", "Die Energie eines Photons"],
        "Die Formel E = mc^2, formuliert von Albert Einstein, beschreibt die Äquivalenz von Masse (m) und Energie (E), wobei c die Lichtgeschwindigkeit ist. Diese Formel ist ein zentrales Ergebnis der Relativitätstheorie und zeigt, dass Masse und Energie ineinander umwandelbar sind."
    ),
    (
        "Wie lautet die Formel zur Berechnung des Schallpegels in Dezibel?",
        "L = 10 log10(I/I0)",
        ["L = F/v", "L = 10 log10(I/I0)", "L = 1/2 mv^2", "L = I/R"],
        "Der Schallpegel L in Dezibel wird mit der Formel L = 10 log10(I/I0) berechnet, wobei I die Schallintensität und I0 die Referenzintensität ist. Diese Formel verwendet den Logarithmus zur Darstellung der weiten Bandbreite an Schallintensitäten."
    ),
    (
        "Was besagt das zweite Newton'sche Gesetz?",
        "F = ma (Kraft ist gleich Masse mal Beschleunigung)",
        ["F = p/t (Kraft ist gleich Impulsänderung pro Zeit)", "F = ma (Kraft ist gleich Masse mal Beschleunigung)", "F = qE (Kraft auf eine Ladung in einem elektrischen Feld)", "F = G(m1m2/r^2) (Gravitationskraft)"],
        "Das zweite Newton'sche Gesetz besagt, dass die auf einen Körper wirkende Kraft (F) gleich der Masse (m) des Körpers multipliziert mit seiner Beschleunigung (a) ist. Dies ist die Grundlage der klassischen Mechanik und beschreibt, wie sich die Bewegung von Objekten unter dem Einfluss von Kräften ändert."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Welle ist ein Ultraschall?",
        "Mechanische Welle",
        ["Mechanische Welle", "Materiewelle", "Gravitationswelle", "Elektromagnetische Welle"],
        "Ultraschall ist eine mechanische Welle, die sich durch ein Medium wie Luft, Wasser oder feste Stoffe ausbreitet. Diese Wellen haben Frequenzen oberhalb des hörbaren Bereichs für das menschliche Ohr und werden in der Medizin und Technik zur Bildgebung und Materialprüfung eingesetzt."
    ),
    (
        "Welches Gesetz beschreibt die Beziehung zwischen dem elektrischen Strom und der Spannung in einem Widerstand?",
        "Ohmsches Gesetz",
        ["Faradaysches Gesetz", "Maxwellsche Gleichungen", "Ohmsches Gesetz", "Kirchhoffsches Gesetz"],
        "Das Ohmsche Gesetz beschreibt, dass die Spannung (V) über einem Widerstand (R) gleich dem Produkt des Stroms (I) und des Widerstands ist (V = IR). Es ist ein fundamentales Gesetz der Elektrotechnik, das hilft, elektrische Schaltungen zu analysieren."
    ),
    (
        "Welche Konstante beschreibt die Wechselwirkung zwischen zwei elektrisch geladenen Körpern?",
        "Coulombsches Gesetz",
        ["Ohmsches Gesetz", "Gravitationsgesetz", "Coulombsches Gesetz", "Faradaysches Gesetz"],
        "Das Coulombsche Gesetz beschreibt die elektrische Kraft zwischen zwei Punktladungen. Es besagt, dass die Kraft direkt proportional zum Produkt der Ladungen und umgekehrt proportional zum Quadrat des Abstands zwischen ihnen ist. Die Konstante in diesem Gesetz ist die elektrische Konstante."
    ),
    (
        "Was beschreibt die Formel P = IV?",
        "Leistung in einem elektrischen Stromkreis",
        ["Druck in einem Fluid", "Leistung in einem elektrischen Stromkreis", "Energie eines Teilchens", "Kraft eines Motors"],
        "Die Formel P = IV beschreibt die elektrische Leistung (P) in einem Stromkreis, wobei I die Stromstärke und V die Spannung ist. Diese Beziehung ist wichtig, um den Energieverbrauch und die Effizienz von elektrischen Geräten zu berechnen."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Art von Energie ist in einem gespannten Bogen gespeichert?",
        "Elastische Energie",
        ["Wärmeenergie", "Elastische Energie", "Potenzielle Energie", "Kinetische Energie"],
        "In einem gespannten Bogen ist die Energie, die durch die Dehnung der Bogenstange gespeichert wird, als elastische Energie bekannt. Diese Energie wird beim Loslassen des Bogens in kinetische Energie der Pfeilbewegung umgewandelt."
    ),
    (
        "Wie lautet die Formel für die Frequenz einer Welle?",
        "f = 1/T",
        ["f = λ/T", "f = 1/T", "f = v/λ", "f = T/λ"],
        "Die Frequenz (f) einer Welle ist der Kehrwert der Periodendauer (T), also f = 1/T. Sie gibt an, wie viele Wellenzyklen pro Sekunde auftreten. Diese Formel ist entscheidend für die Analyse von Schwingungen und Wellenphänomenen."
    ),
    (
        "Was beschreibt die Relativitätstheorie von Einstein in Bezug auf die Zeit?",
        "Die Zeit ist relativ und hängt vom Bewegungszustand des Beobachters ab",
        ["Die Zeit ist relativ und hängt vom Bewegungszustand des Beobachters ab", "Die Zeit ist konstant und immer gleich", "Die Zeit verlangsamt sich bei Erhöhung der Geschwindigkeit", "Die Zeit ist absolut und unabhängig vom Beobachter"],
        "Einstein's Relativitätstheorie besagt, dass die Zeit relativ ist und sich abhängig vom Bewegungszustand des Beobachters verändert. Dies bedeutet, dass Zeitdilatation auftritt, wenn sich Objekte mit hohen Geschwindigkeiten bewegen."
    ),
    (
        "Wie lautet das Gesetz von Kirchhoff zur Stromsumme in einem Knoten?",
        "Die Summe der Ströme, die in einen Knoten hineinfließen, ist gleich der Summe der Ströme, die aus dem Knoten herausfließen",
        ["Die Summe der Ströme, die in einen Knoten hineinfließen, ist gleich der Summe der Ströme, die aus dem Knoten herausfließen", "Die Summe der Kapazitäten in einer Reihe ist gleich null", "Die Summe der Widerstände in einem Parallelkreis ist gleich null", "Die Summe der Spannungen in einer Schleife ist gleich null"],
        "Kirchhoffs erstes Gesetz, auch als Knotenregel bekannt, besagt, dass in jedem elektrischen Knotenpunkt die Summe der zu- und abfließenden Ströme gleich null ist. Dies ist entscheidend für die Analyse komplexer Stromkreise."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Wie lautet die Formel zur Berechnung der Arbeit?",
        "W = Fd",
        ["W = F/v", "W = pV", "W = 1/2 mv^2", "W = Fd"],
        "Die Arbeit (W) wird berechnet als Produkt der aufgebrachten Kraft (F) und der zurückgelegten Strecke (d), also W = Fd. Arbeit ist eine grundlegende physikalische Größe, die beschreibt, wie Energie durch eine Kraft übertragen wird."
    ),
    (
        "Was beschreibt das Plancksche Gesetz?",
        "Die spektrale Verteilung der elektromagnetischen Strahlung eines schwarzen Körpers bei gegebener Temperatur",
        ["Die Bewegung von Elektronen in einem Atom", "Die spektrale Verteilung der elektromagnetischen Strahlung eines schwarzen Körpers bei gegebener Temperatur", "Die Geschwindigkeit von Licht in einem Medium", "Die Beziehung zwischen Energie und Frequenz eines Photons"],
        "Das Plancksche Gesetz beschreibt die Intensität der Strahlung eines idealen schwarzen Körpers in Abhängigkeit von Wellenlänge und Temperatur. Es ist zentral für das Verständnis der Thermodynamik und der Quantenmechanik."
    ),
    (
        "Was besagt das Archimedische Prinzip?",
        "Ein Körper in einer Flüssigkeit erfährt einen Auftrieb, der gleich dem Gewicht der verdrängten Flüssigkeit ist",
        ["Die Masse eines Körpers ist gleich der Gewichtskraft des Körpers", "Der Auftrieb eines Körpers ist gleich der Gewichtskraft des Körpers", "Die Zeit verlangsamt sich bei Erhöhung der Geschwindigkeit", "Ein Körper in einer Flüssigkeit erfährt einen Auftrieb, der gleich dem Gewicht der verdrängten Flüssigkeit ist"],
        "Das Archimedische Prinzip besagt, dass ein Körper, der in eine Flüssigkeit eingetaucht ist, einen Auftrieb erfährt, der gleich dem Gewicht der von ihm verdrängten Flüssigkeit ist. Dieses Prinzip erklärt, warum Gegenstände schwimmen oder sinken."
    ),
        (
        "Wie lautet das Gesetz von Boyle für Gase?",
        "p1V1 = p2V2 (Druck und Volumen eines Gases sind bei konstanter Temperatur konstant)",
        ["pV = nRT (Ideales Gasgesetz)", "p1V1/T1 = p2V2/T2 (Allgemeines Gasgesetz)", "p1V1 = p2V2 (Druck und Volumen eines Gases sind bei konstanter Temperatur konstant)", "p1V1 = p2V2 (Druck und Volumen eines Gases sind bei konstanter Temperatur konstant)"],
        "Das Gesetz von Boyle beschreibt, dass das Produkt von Druck (p) und Volumen (V) eines Gases konstant bleibt, solange die Temperatur konstant ist. Dieses Gesetz ist eine wichtige Grundlage für das Verständnis des Verhaltens von Gasen."
    ),
         ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Wie lautet die Formel zur Berechnung der Gravitationskraft?",
        "F = G(m1m2/r^2)",
        ["F = ma", "F = p/t", "F = G(m1m2/r^2)", "F = kx"],
        "Die Gravitationskraft zwischen zwei Massen wird durch das Gesetz von Newton beschrieben, das die Kraft (F) als proportional zum Produkt der beiden Massen (m1 und m2) und umgekehrt proportional zum Quadrat ihres Abstands (r) definiert."
    ),
    (
        "Welche Konstante beschreibt die Stärke der elektromagnetischen Wechselwirkung?",
        "Die elektrische Konstante (ε0)",
        ["Die magnetische Konstante (μ0)", "Die Planck-Konstante (h)", "Die elektrische Konstante (ε0)", "Die Gravitationskonstante (G)"],
        "Die elektrische Konstante (ε0), auch als Dielektrizitätskonstante bekannt, beschreibt die Stärke der elektromagnetischen Wechselwirkung in einem Vakuum. Sie spielt eine zentrale Rolle im Coulombschen Gesetz und in der Maxwell-Gleichungen."
    ),
    (
        "Welches Prinzip beschreibt das Verhalten von Licht, das an einem Glasprisma gebrochen wird?",
        "Brechung",
        ["Reflexion", "Brechung", "Absorption", "Streuung"],
        "Brechung tritt auf, wenn Lichtstrahlen die Grenze zwischen zwei Medien unterschiedlicher Dichte durchqueren und ihre Richtung ändern. Dies führt zur Aufspaltung von Licht in verschiedene Farben, was als Dispersion bezeichnet wird."
    ),
    (
        "Was beschreibt das Stefan-Boltzmann-Gesetz?",
        "Die Gesamtstrahlung eines schwarzen Körpers ist proportional zur vierten Potenz seiner Temperatur",
        ["Die Geschwindigkeit eines Gases ist direkt proportional zur Temperatur", "Die Temperatur eines Körpers ist direkt proportional zur absorbierten Energie", "Die Gesamtstrahlung eines schwarzen Körpers ist proportional zur vierten Potenz seiner Temperatur", "Der Druck eines Gases ist proportional zur Anzahl der Moleküle"],
        "Das Stefan-Boltzmann-Gesetz beschreibt, dass die gesamte Energie, die von einem schwarzen Körper abgestrahlt wird, proportional zur vierten Potenz seiner absoluten Temperatur ist. Es ist entscheidend für die Wärmeübertragung durch Strahlung."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Wie lautet die Formel für die Gravitationskonstante?",
        "G ≈ 6.674 × 10^-11 m^3 kg^-1 s^-2",
        ["G ≈ 9.81 m/s^2", "G ≈ 6.674 × 10^-11 m^3 kg^-1 s^-2", "G ≈ 8.854 × 10^-12 F/m", "G ≈ 3 × 10^8 m/s"],
        "Die Gravitationskonstante (G) ist eine fundamentale Konstante der Physik, die die Stärke der Gravitationskraft zwischen zwei Massen beschreibt. Ihr Wert beträgt etwa 6.674 × 10^-11 m^3 kg^-1 s^-2 und ist essentiell für das Gesetz der universellen Gravitation."
    ),
    (
        "Welche Formel beschreibt die kinetische Energie eines Objekts?",
        "E_k = 1/2 mv^2",
        ["E_k = 1/2 mv^2", "E_k = mgh", "E_k = pV", "E_k = qV"],
        "Die kinetische Energie (E_k) eines Objekts ist proportional zur Masse (m) und dem Quadrat seiner Geschwindigkeit (v). Die Formel lautet E_k = 1/2 mv^2 und beschreibt die Energie, die durch Bewegung eines Körpers erzeugt wird."
    ),
    (
        "Was besagt das Heisenbergsche Unschärfeprinzip?",
        "Es ist unmöglich, Ort und Impuls eines Teilchens gleichzeitig exakt zu bestimmen",
        ["Es ist unmöglich, Ort und Impuls eines Teilchens gleichzeitig exakt zu bestimmen", "Die Geschwindigkeit eines Teilchens kann nicht überschritten werden", "Die Frequenz eines Photons ist konstant", "Energie und Masse sind äquivalent"],
        "Das Heisenbergsche Unschärfeprinzip besagt, dass es grundsätzlich unmöglich ist, sowohl den genauen Ort als auch den Impuls eines Teilchens zur gleichen Zeit exakt zu messen. Diese Unsicherheit ist eine grundlegende Eigenschaft der Quantenmechanik."
    ),
    (
        "Was beschreibt das Faradaysche Gesetz der elektromagnetischen Induktion?",
        "Die Änderung des Magnetfelds erzeugt eine elektrische Spannung",
        ["Die Spannung in einem Leiter ist proportional zur Stromstärke", "Die Magnetkraft ist proportional zur elektrischen Ladung", "Die Wärme ist direkt proportional zur elektrischen Energie", "Die Änderung des Magnetfelds erzeugt eine elektrische Spannung"],
        "Das Faradaysche Gesetz besagt, dass eine Änderung des Magnetfelds in einer Spule eine elektrische Spannung induziert. Diese Beziehung ist die Grundlage für die Funktionsweise von Generatoren und Transformatoren."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt die Formel F = qE?",
        "Die Kraft auf eine Ladung in einem elektrischen Feld",
        ["Die Spannung über einen Widerstand", "Die Energie eines Photons", "Die Geschwindigkeit eines Elektrons in einem Magnetfeld", "Die Kraft auf eine Ladung in einem elektrischen Feld"],
        "Die Formel F = qE beschreibt die elektrische Kraft (F), die auf eine Ladung (q) in einem elektrischen Feld (E) wirkt. Diese Kraft ist entscheidend für das Verständnis der Bewegung von Ladungen in elektrischen Feldern."
    ),
    (
        "Was ist der Unterschied zwischen einer longitudinalen und einer transversalen Welle?",
        "Longitudinale Wellen bewegen sich parallel zur Ausbreitungsrichtung, transversale Wellen senkrecht dazu",
        ["Longitudinale Wellen bewegen sich parallel zur Ausbreitungsrichtung, transversale Wellen senkrecht dazu", "Longitudinale Wellen haben eine höhere Frequenz als transversale Wellen", "Longitudinale Wellen sind elektromagnetisch, transversale Wellen mechanisch", "Transversale Wellen benötigen ein Medium, longitudinale Wellen nicht"],
        "Longitudinale Wellen, wie Schallwellen, bewegen sich in Richtung der Ausbreitung der Welle, während transversale Wellen, wie Lichtwellen, senkrecht zur Ausbreitungsrichtung schwingen. Diese Unterscheidung ist wichtig für die Klassifizierung von Wellenphänomenen."
    ),
    (
        "Wie lautet das Gesetz von Newton zur Bewegung eines Körpers?",
        "F = ma (Kraft ist gleich Masse mal Beschleunigung)",
        ["F = ma (Kraft ist gleich Masse mal Beschleunigung)", "F = mgh (Kraft durch Schwerkraft)", "F = qE (Kraft durch elektrisches Feld)", "F = pV (Kraft durch Druckvolumen)"],
        "Newton's zweites Gesetz besagt, dass die auf einen Körper wirkende Kraft (F) gleich der Masse (m) des Körpers multipliziert mit seiner Beschleunigung (a) ist. Dies beschreibt, wie Kräfte die Bewegung von Objekten beeinflussen."
    ),
    (
        "Was beschreibt die Formel λ = c/f?",
        "Die Wellenlänge einer elektromagnetischen Welle",
        ["Die Wellenlänge einer elektromagnetischen Welle", "Die Frequenz einer Schallwelle", "Die Geschwindigkeit eines Objekts", "Die Energie eines Teilchens"],
        "Die Formel λ = c/f beschreibt die Wellenlänge (λ) einer elektromagnetischen Welle, wobei c die Lichtgeschwindigkeit und f die Frequenz der Welle ist. Diese Formel hilft bei der Analyse von Licht und anderen elektromagnetischen Wellen."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist die Grundannahme der klassischen Thermodynamik?",
        "Die Gesetze der Thermodynamik beschreiben die Beziehung zwischen Wärme, Arbeit und Energie",
        ["Die Gesetze der Thermodynamik beschreiben die Beziehung zwischen Wärme, Arbeit und Energie", "Energie kann nur von einer Form in eine andere umgewandelt werden", "Alle physikalischen Prozesse sind reversibel", "Die Geschwindigkeit eines Teilchens ist konstant"],
        "Die Thermodynamik befasst sich mit den Beziehungen zwischen Wärme, Arbeit und Energie. Ihre Gesetze helfen, das Verhalten von Systemen in verschiedenen Zuständen und unter verschiedenen Bedingungen zu verstehen."
    ),
    (
        "Welche Art von Strahlung hat die niedrigste Energie?",
        "Radiowellen",
        ["Gammastrahlen", "Ultraviolettstrahlen", "Röntgenstrahlen", "Radiowellen"],
        "Radiowellen haben die niedrigste Energie im elektromagnetischen Spektrum und die längste Wellenlänge. Sie werden in vielen Kommunikationssystemen verwendet und sind eine Form elektromagnetischer Strahlung."
    ),
    (
        "Wie lautet das Gesetz von Ohm?",
        "V = IR (Spannung ist gleich Strom mal Widerstand)",
        ["P = IV (Leistung ist gleich Strom mal Spannung)", "V = IR (Spannung ist gleich Strom mal Widerstand)", "I = V/R (Strom ist Spannung durch Widerstand)", "R = ρL/A (Widerstand ist spezifischer Widerstand mal Länge durch Fläche)"],
        "Das Ohmsche Gesetz beschreibt den Zusammenhang zwischen Spannung (V), Strom (I) und Widerstand (R) in einem elektrischen Schaltkreis. Es besagt, dass die Spannung gleich dem Produkt aus Strom und Widerstand ist."
    ),
    (
        "Was beschreibt der Begriff 'Kraft' in der Physik?",
        "Eine Wechselwirkung, die die Bewegung eines Körpers ändern kann",
        ["Die Geschwindigkeit eines Objekts", "Die Energie eines Systems", "Die Temperatur eines Körpers", "Eine Wechselwirkung, die die Bewegung eines Körpers ändern kann"],
        "Kraft ist eine grundlegende physikalische Größe, die bewirken kann, dass ein Körper beschleunigt, seine Richtung ändert oder seine Form verändert. Sie wird in Newton gemessen und ist ein zentraler Bestandteil der klassischen Mechanik."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was besagt das Gesetz der Energieerhaltung?",
        "Energie kann weder erzeugt noch vernichtet, nur umgewandelt werden",
        ["Die gesamte Energie eines Systems bleibt immer konstant", "Energie ist direkt proportional zur Masse eines Körpers", "Energie kann nur in Wärme umgewandelt werden", "Energie kann weder erzeugt noch vernichtet, nur umgewandelt werden"],
        "Das Gesetz der Energieerhaltung besagt, dass die Gesamtenergie in einem geschlossenen System konstant bleibt. Energie kann von einer Form in eine andere umgewandelt, aber nicht geschaffen oder zerstört werden."
    ),
    (
        "Wie lautet die Formel zur Berechnung der Geschwindigkeit eines Objekts?",
        "v = d/t (Geschwindigkeit ist Weg geteilt durch Zeit)",
        ["v = √(2gh) (Endgeschwindigkeit beim freien Fall)", "v = d/t (Geschwindigkeit ist Weg geteilt durch Zeit)", "v = √(p^2/m^2) (Geschwindigkeit in Bezug auf Impuls und Masse)", "v = at (Geschwindigkeit ist Beschleunigung mal Zeit)"],
        "Die Geschwindigkeit (v) eines Objekts wird durch die Formel v = d/t berechnet, wobei d die zurückgelegte Strecke und t die benötigte Zeit ist. Diese Formel beschreibt, wie schnell sich ein Objekt bewegt."
    ),
    (
        "Was beschreibt die Formel E = mc^2?",
        "Die Äquivalenz von Energie und Masse",
        ["Die Äquivalenz von Energie und Masse", "Die Berechnung der kinetischen Energie", "Die Beziehung zwischen Leistung und Energie", "Die Änderung der Energie bei einem chemischen Prozess"],
        "Die Formel E = mc^2, bekannt als Einsteins Energie-Masse-Äquivalenz, beschreibt, dass Energie (E) gleich der Masse (m) eines Objekts multipliziert mit der Lichtgeschwindigkeit zum Quadrat (c^2) ist. Diese Gleichung ist zentral für die Relativitätstheorie."
    ),
    (
        "Welche Art von Welle ist eine Schallwelle?",
        "Longitudinale Welle",
        ["Longitudinale Welle", "Transversale Welle", "Gravitationswelle", "Elektromagnetische Welle"],
        "Schallwellen sind longitudinale Wellen, bei denen die Teilchenbewegung parallel zur Ausbreitungsrichtung der Welle erfolgt. Diese Art von Welle benötigt ein Medium, um sich auszubreiten."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt das Hooke'sche Gesetz?",
        "Die Beziehung zwischen der Dehnung eines Materials und der darauf wirkenden Kraft",
        ["Die Beziehung zwischen der Dehnung eines Materials und der darauf wirkenden Kraft", "Die Temperaturabhängigkeit des Widerstands eines Materials", "Die Geschwindigkeit eines elastischen Objekts bei Konstanz der Energie", "Die Geschwindigkeit von Licht in verschiedenen Medien"],
        "Das Hooke'sche Gesetz beschreibt, dass die Dehnung eines elastischen Materials direkt proportional zur darauf wirkenden Kraft ist, solange die Dehnung innerhalb der elastischen Grenzen bleibt. Es ist grundlegend für das Verständnis von Elastizität."
    ),
    (
        "Welche Art von Strahlung hat die größte Wellenlänge?",
        "Radiowellen",
        ["Gamma-Strahlen", "Ultraviolettstrahlen", "Radiowellen", "Röntgenstrahlen"],
        "Radiowellen haben die größte Wellenlänge im elektromagnetischen Spektrum und damit die niedrigste Frequenz. Sie werden in der Kommunikationstechnologie häufig genutzt."
    ),
    (
        "Was ist der Unterschied zwischen Temperatur und Wärme?",
        "Temperatur ist ein Maß für die durchschnittliche kinetische Energie der Teilchen, Wärme ist die Energieübertragung",
        ["Temperatur ist die gesamte Energie eines Systems, Wärme ist die Energiemenge, die ein System aufnehmen kann", "Temperatur ist direkt proportional zur Energie eines Systems, Wärme ist konstant", "Temperatur und Wärme sind dasselbe und können austauschbar verwendet werden", "Temperatur ist ein Maß für die durchschnittliche kinetische Energie der Teilchen, Wärme ist die Energieübertragung"],
        "Temperatur ist ein Maß für die durchschnittliche kinetische Energie der Teilchen in einem System, während Wärme die Energieübertragung zwischen Systemen aufgrund eines Temperaturunterschieds beschreibt. Dies sind grundlegende Konzepte in der Thermodynamik."
    ),
    (
        "Wie lautet die Formel zur Berechnung der Arbeit?",
        "W = Fd cos(θ) (Arbeit ist die Kraft mal Weg mal Kosinus des Winkels)",
        ["W = 1/2 mv^2 (Arbeit ist die kinetische Energie)", "W = Fd cos(θ) (Arbeit ist die Kraft mal Weg mal Kosinus des Winkels)", "W = mgh (Arbeit ist gleich Gewicht mal Höhe)", "W = PΔt (Arbeit ist Leistung mal Zeit)"],
        "Die Arbeit (W) wird als Produkt der aufgebrachten Kraft (F), dem zurückgelegten Weg (d) und dem Kosinus des Winkels (θ) zwischen der Kraft und der Richtung des Weges berechnet. Diese Formel beschreibt die Energieübertragung durch mechanische Arbeit."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt der Begriff 'Impuls' in der Physik?",
        "Das Produkt aus Masse und Geschwindigkeit eines Körpers",
        ["Das Produkt aus Masse und Geschwindigkeit eines Körpers", "Die Energiemenge eines Systems", "Die Beschleunigung eines Objekts", "Die Änderung der Geschwindigkeit eines Körpers"],
        "Impuls ist ein physikalisches Konzept, das das Produkt der Masse eines Körpers und seiner Geschwindigkeit beschreibt. Er ist eine Erhaltungsgröße und entscheidend für die Analyse von Kollisionen und dynamischen Systemen."
    ),
    
]
        
class NAPhysik(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(NAPhysik, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Physik"
        self.fragen = fragenphy

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

  
fragenbio = [
    
    (
        "Was ist die kleinste strukturelle und funktionelle Einheit eines Organismus?",
        "Zelle",
        ["Zelle", "Gewebe", "Molekül", "Organ"],
        "Die grundlegenden Funktionen eines Organismus werden von Zellen ausgeführt, die als kleinste Bausteine aller lebenden Organismen gelten."
    ),
    (
        "Welcher Teil der Zelle ist hauptsächlich für die Steuerung der zellulären Aktivitäten verantwortlich?",
        "Zellkern",
        ["Endoplasmatisches Retikulum", "Zellkern", "Mitochondrien", "Zellmembran"],
        "Im Inneren der Zelle befindet sich ein Bereich, der das genetische Material enthält und für die Steuerung aller zellulären Aktivitäten verantwortlich ist."
    ),
    (
        "Welches Organ im menschlichen Körper ist für die Filtration des Blutes und die Entfernung von Abfallprodukten verantwortlich?",
        "Niere",
        ["Herz", "Lunge", "Niere", "Leber"],
        "Abfallprodukte und überschüssiges Wasser werden durch ein Organ gefiltert, das auch eine wichtige Rolle bei der Regulierung des Flüssigkeitshaushalts spielt."
    ),
    (
        "Welches der folgenden Organe ist Teil des menschlichen Verdauungssystems?",
        "Magen",
        ["Magen", "Herz", "Lunge", "Niere"],
        "Nahrung wird durch ein Organ verarbeitet, das Teil des Verdauungssystems ist und für die Freisetzung von Verdauungssäften verantwortlich ist."
    ),
    (
        "Welches der folgenden Organe ist Teil des menschlichen Atmungssystems?",
        "Lunge",
        ["Leber", "Herz", "Lunge", "Niere"],
        "Ein lebenswichtiges Organ sorgt dafür, dass Sauerstoff ins Blut gelangt und Kohlendioxid abgegeben wird, was essenziell für die Atmung ist."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches der folgenden Organe ist Teil des menschlichen Herz-Kreislauf-Systems?",
        "Herz",
        ["Lunge", "Herz", "Leber", "Niere"],
        "Blut wird durch den Körper gepumpt, um Nährstoffe und Sauerstoff zu transportieren, und ein bestimmtes Organ ist für diese Funktion entscheidend."
    ),
    (
        "Was ist die Hauptfunktion des menschlichen Immunsystems?",
        "Schutz vor Krankheiten",
        ["Schutz vor Krankheiten", "Verdauung von Nahrungsmitteln", "Transport von Sauerstoff", "Bewegung des Körpers"],
        "Das Immunsystem schützt den Körper vor Infektionen und bekämpft Krankheitserreger wie Viren, Bakterien und andere schädliche Eindringlinge."
    ),
    (
        "Welches Organ im menschlichen Körper ist für die Produktion von Insulin verantwortlich?",
        "Bauchspeicheldrüse",
        ["Leber", "Milz", "Bauchspeicheldrüse", "Gallenblase"],
        "Um den Blutzuckerspiegel zu regulieren, produziert ein bestimmtes Organ Insulin, das eine zentrale Rolle im Stoffwechsel des Körpers spielt."
    ),
    (
        "Welche Art von Gewebe bildet die äußere Schicht der Haut?",
        "Epithelgewebe",
        ["Muskelgewebe", "Bindegewebe", "Epithelgewebe", "Nervengewebe"],
        "Die äußere Schutzschicht der Haut besteht aus einem speziellen Gewebe, das den Körper vor äußeren Einflüssen schützt."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welches Organ ist für die Regulation des Blutzuckerspiegels im Körper verantwortlich?",
        "Bauchspeicheldrüse",
        ["Leber", "Milz", "Niere", "Bauchspeicheldrüse"],
        "Ein Organ spielt eine Schlüsselrolle bei der Regulation des Blutzuckerspiegels, indem es sowohl Insulin als auch Glukagon produziert."
    ),
    (
        "Was ist die Hauptfunktion der roten Blutkörperchen im menschlichen Körper?",
        "Sauerstofftransport",
        ["Nahrungsaufnahme", "Sauerstofftransport", "Krankheitsbekämpfung", "Entsorgung von Abfallprodukten"],
        "Der Sauerstoff, der von der Lunge aufgenommen wird, wird durch Zellen transportiert, die Hämoglobin enthalten und für die Versorgung des Körpers verantwortlich sind."
    ),
    (
        "Welches Organ ist für die Produktion von Harn verantwortlich?",
        "Niere",
        ["Leber", "Herz", "Niere", "Lunge"],
        "Die Entfernung von Abfallstoffen aus dem Blut und die Produktion von Harn erfolgt in einem Paar von Organen, die auch den Wasserhaushalt regulieren."
    ),
    (
        "Was ist die Hauptfunktion der weißen Blutkörperchen im menschlichen Körper?",
        "Krankheitsbekämpfung",
        ["Sauerstofftransport", "Nahrungsaufnahme", "Krankheitsbekämpfung", "Entsorgung von Abfallprodukten"],
        "Weiße Zellen im Blut sind für die Abwehr von Infektionen und Krankheiten verantwortlich, indem sie schädliche Mikroorganismen bekämpfen."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist der Hauptbestandteil der Zellmembran?",
        "Phospholipide",
        ["Phospholipide", "Proteine", "Kohlenhydrate", "Nukleinsäuren"],
        "Die Zellmembran besteht hauptsächlich aus einer speziellen Doppelschicht, die den Transport von Stoffen in und aus der Zelle reguliert."
    ),
    (
        "Welches Organ im menschlichen Körper ist für die Produktion von roten Blutkörperchen verantwortlich?",
        "Knochenmark",
        ["Herz", "Knochenmark", "Lunge", "Leber"],
        "Im Inneren der Knochen befindet sich ein Gewebe, das für die Bildung von roten und weißen Blutkörperchen sowie Blutplättchen zuständig ist."
    ),
    (
        "Was ist die Funktion von Chloroplasten in pflanzlichen Zellen?",
        "Photosynthese",
        ["Photosynthese", "Zellteilung", "Atmung", "Transpiration"],
        "Lichtenergie wird in pflanzlichen Zellen durch spezielle Organellen absorbiert und in chemische Energie umgewandelt, um Glukose zu erzeugen."
    ),
    (
        "Was ist die grundlegende Einheit der Vererbung?",
        "Gen",
        ["Gen", "Chromosom", "DNA", "Nukleotid"],
        "Die Übertragung von genetischen Informationen von den Eltern auf die Nachkommen erfolgt über bestimmte Einheiten, die die Merkmale eines Organismus bestimmen."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist die Funktion des Endoplasmatischen Retikulums in einer Zelle?",
        "Proteinsynthese",
        ["Proteinsynthese", "Energieproduktion", "Zellteilung", "Lipidsynthese"],
        "Ein Netzwerk von Kanälen innerhalb der Zelle ist maßgeblich an der Herstellung und dem Transport von Proteinen beteiligt."
    ),
    (
        "Was ist die Hauptfunktion von Mitochondrien in einer Zelle?",
        "Energieproduktion",
        ["Zellteilung", "Energieproduktion", "Proteinsynthese", "Lipidsynthese"],
        "Energie für die Zelle wird durch spezielle Organellen erzeugt, die Nährstoffe in ATP umwandeln, welches die Hauptenergiequelle der Zelle ist."
    ),
        (
        "Was ist die Hauptfunktion des Golgi-Apparats in einer Zelle?",
        "Modifizierung und Transport von Proteinen",
        ["Energieproduktion", "Modifizierung und Transport von Proteinen", "DNA-Speicherung", "Lipidabbau"],
        "Proteine werden im Golgi-Apparat modifiziert, verpackt und für den Transport vorbereitet, was für die Zellfunktion entscheidend ist."
    ),
    (
        "Welche Art von Zellen findet man nur in Pflanzen?",
        "Pflanzliche Zellen",
        ["Tierische Zellen", "Bakterienzellen", "Pilzzellen", "Pflanzliche Zellen"],
        "Nur pflanzliche Zellen besitzen Zellwände, Chloroplasten und eine zentrale Vakuole, die wichtige Funktionen wie die Photosynthese und Nährstoffspeicherung übernehmen."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Wie nennt man die kleinste funktionelle Einheit des Lebens?",
        "Zelle",
        ["Atom", "Molekül", "Zelle", "Organ"],
        "Die Zelle, als kleinste Einheit des Lebens, führt alle grundlegenden Prozesse des Lebens aus und bildet die Basis aller Organismen."
    ),
    (
        "Welche Art von Zellteilung führt zur Bildung von Geschlechtszellen?",
        "Meiose",
        ["Mitose", "Meiose", "Osmose", "Zytokinese"],
        "Zur Bildung von Gameten mit halbierter Chromosomenzahl führt die Meiose, ein Prozess, der genetische Vielfalt ermöglicht."
    ),
    (
        "Welche Strukturen in einer Zelle sind für den Transport von Molekülen verantwortlich?",
        "Endoplasmatisches Retikulum",
        ["Mitochondrien", "Ribosomen", "Endoplasmatisches Retikulum", "Zellkern"],
        "Moleküle werden im Endoplasmatischen Retikulum (ER) transportiert und verarbeitet, ein Netzwerk von Membrankanälen, das diese Aufgaben übernimmt."
    ),
    (
        "Was ist ein Gen?",
        "Eine Einheit der Erbinformation, die ein bestimmtes Merkmal codiert",
        ["Ein Protein", "Eine Einheit der Erbinformation, die ein bestimmtes Merkmal codiert", "Ein Enzym", "Ein Chromosom"],
        "Als eine Einheit der Erbinformation codiert ein Gen spezifische Merkmale und trägt die Information für die Synthese von Proteinen oder RNA-Molekülen."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt der Begriff „Tropismus“?",
        "Wachstumsbewegungen von Pflanzen als Reaktion auf Umwelteinflüsse",
        ["Wachstumsbewegungen von Pflanzen als Reaktion auf Umwelteinflüsse", "Die Verdunstung von Wasser", "Die Photosynthese", "Die Atmung von Pflanzen"],
        "Pflanzen zeigen gerichtete Wachstumsbewegungen, bekannt als Tropismus, die als Reaktion auf äußere Reize wie Licht oder Schwerkraft auftreten."
    ),
    (
        "Was ist die Funktion von Lysosomen in der Zelle?",
        "Abbau von Zellabfällen und fremden Substanzen",
        ["Proteinbiosynthese", "Abbau von Zellabfällen und fremden Substanzen", "Energieproduktion", "Speicherung von Nährstoffen"],
        "Für den Abbau von Abfallprodukten und Fremdstoffen in der Zelle sind die Lysosomen verantwortlich, die spezielle Enzyme enthalten."
    ),
    (
        "Welche Art von Bindung hält die Basenpaare in der DNA zusammen?",
        "Wasserstoffbrückenbindungen",
        ["Ionenbindungen", "Kovalente Bindungen", "Wasserstoffbrückenbindungen", "Van-der-Waals-Kräfte"],
        "Zwischen den Basenpaaren in der DNA stabilisieren Wasserstoffbrückenbindungen die Struktur und halten die Doppelhelix zusammen."
    ),
    (
        "Wie bezeichnet man die Gesamtheit aller chemischen Reaktionen, die in einem Organismus ablaufen?",
        "Stoffwechsel (Metabolismus)",
        ["Photosynthese", "Zellatmung", "Stoffwechsel (Metabolismus)", "Gärung"],
        "Die Gesamtheit der biochemischen Prozesse, die in einem Organismus Energie erzeugen und Nährstoffe umwandeln, bezeichnet man als Stoffwechsel."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt der Begriff „Nahrungskette“?",
        "Die lineare Abfolge von Organismen, die sich gegenseitig als Nahrung dienen",
        ["Die lineare Abfolge von Organismen, die sich gegenseitig als Nahrung dienen", "Ein Netzwerk von Nahrungsbeziehungen", "Der Energietransfer in Pflanzen", "Die Photosynthese von Pflanzen"],
        "In einer Nahrungskette wird der Energiefluss von einem Organismus zum nächsten dargestellt, wobei jeder Organismus eine Nahrungsquelle für den nächsten ist."
    ),
    (
        "Wie nennt man den Prozess, bei dem Pflanzen Sonnenlicht in chemische Energie umwandeln?",
        "Photosynthese",
        ["Zellatmung", "Gärung", "Photosynthese", "Chemosynthese"],
        "Pflanzen nutzen in der Photosynthese Lichtenergie, um Kohlendioxid und Wasser in Glukose und Sauerstoff umzuwandeln, was für ihre Ernährung essentiell ist."
    ),
    (
        "Welche Rolle spielt die Plasmamembran in der Zelle?",
        "Sie reguliert den Eintritt und Austritt von Stoffen",
        ["Sie produziert Proteine", "Sie speichert genetische Information", "Sie reguliert den Eintritt und Austritt von Stoffen", "Sie erzeugt Energie"],
        "Die Plasmamembran ist eine selektiv durchlässige Barriere, die den Transport von Substanzen in und aus der Zelle kontrolliert, um die Homöostase aufrechtzuerhalten."
    ),
    (
        "Wie nennt man das Hormon, das den Blutzuckerspiegel reguliert?",
        "Insulin",
        ["Adrenalin", "Insulin", "Thyroxin", "Cortisol"],
        "Den Blutzuckerspiegel im Körper reguliert das von der Bauchspeicheldrüse produzierte Hormon Insulin, indem es die Glukoseaufnahme in die Zellen fördert."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was beschreibt der Begriff „Symbiose“?",
        "Eine enge, oft vorteilhafte Beziehung zwischen zwei verschiedenen Arten",
        ["Eine Beziehung zwischen Raubtier und Beute", "Eine Konkurrenz zwischen zwei Arten", "Eine enge, oft vorteilhafte Beziehung zwischen zwei verschiedenen Arten", "Eine einseitige Nahrungsbeziehung"],
        "Symbiose bezeichnet eine Wechselbeziehung zwischen zwei verschiedenen Organismen, die häufig für beide vorteilhaft ist."
    ),
    (
        "Wie nennt man den Prozess, durch den Pflanzen Wasser durch ihre Blätter verdunsten?",
        "Transpiration",
        ["Respiration", "Transpiration", "Photosynthese", "Osmose"],
        "Durch Transpiration verdunstet Wasser aus den Blättern der Pflanzen in die Atmosphäre, was Teil des Wasserkreislaufs ist."
    ),
    (
        "Welche Struktur in der Zelle ist für die Herstellung von Ribosomen verantwortlich?",
        "Nukleolus",
        ["Golgi-Apparat", "Endoplasmatisches Retikulum", "Nukleolus", "Zellkern"],
        "Die Synthese von Ribosomen, die für die Proteinproduktion notwendig sind, erfolgt im Nukleolus, einer speziellen Region im Zellkern."
    ),
    (
        "Wie nennt man die Theorie, die die Entstehung neuer Arten durch natürliche Selektion erklärt?",
        "Evolutionstheorie",
        ["Kreationismus", "Evolutionstheorie", "Intelligent Design", "Panspermie"],
        "Die Evolutionstheorie beschreibt den Prozess, durch den neue Arten entstehen, basierend auf der natürlichen Selektion."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist die Funktion von Chloroplasten in pflanzlichen Zellen?",
        "Photosynthese",
        ["Energieproduktion", "Photosynthese", "Proteinbiosynthese", "Zellteilung"],
        "In den Chloroplasten, die Chlorophyll enthalten, findet die Photosynthese statt, bei der Lichtenergie in chemische Energie umgewandelt wird."
    ),
    (
        "Wie nennt man den Vorgang, bei dem ein Organismus Licht als Energiequelle nutzt, um chemische Verbindungen zu synthetisieren?",
        "Photosynthese",
        ["Zellatmung", "Gärung", "Photosynthese", "Chemosynthese"],
        "Lichtenergie wird in der Photosynthese genutzt, um chemische Verbindungen wie Glukose zu synthetisieren, was für Pflanzen lebensnotwendig ist."
    ),
        (
        "Was ist die Hauptaufgabe des Zellkerns?",
        "Genetische Info",
        ["Genetische Info", "Energie", "Transport", "Abbau"],
        "Die DNA wird im Zellkern aufbewahrt und geschützt. Die Hauptaufgabe ist die Speicherung und der Schutz der genetischen Information."
    ),
    (
        "Welche RNA transportiert Aminosäuren zu den Ribosomen?",
        "tRNA",
        ["snRNA", "rRNA", "tRNA", "mRNA"],
        "Um Aminosäuren zu den Ribosomen zu bringen, wird spezielle RNA verwendet. Diese RNA ist als tRNA bekannt."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Wie heißt die Phase des Zellzyklus, in der die DNA repliziert wird?",
        "Interphase",
        ["Mitose", "Zytokinese", "G1-Phase", "Interphase"],
        "Der Zellzyklus hat eine Phase, in der die DNA vervielfältigt wird. Diese Phase ist die Interphase."
    ),
    (
        "Welche Struktur schützt das Erbgut in der Zelle?",
        "Zellkern",
        ["Mitochondrien", "Golgi-Apparat", "Zellkern", "Zellmembran"],
        "Um die DNA vor Schäden zu bewahren, ist ein besonderer Bereich in der Zelle zuständig. Das ist der Zellkern."
    ),
    (
        "Was ist die Funktion von Ribosomen?",
        "Proteinsynthese",
        ["Energie", "Proteinsynthese", "DNA-Replikation", "Transport"],
        "Die Aufgabe von Ribosomen besteht darin, Proteine herzustellen. Dieser Prozess wird als Proteinsynthese bezeichnet."
    ),
    (
        "Was ist ein Mutagen?",
        "Verändert DNA",
        ["Krebsmedikament", "Verändert DNA", "Zellorganell", "DNA-Reparatur"],
        "Ein Mutagen ist eine Substanz, die genetische Veränderungen hervorrufen kann. Es verändert die DNA."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Zellteilung bildet zwei identische Tochterzellen?",
        "Mitose",
        ["Meiose", "Mitose", "Transpiration", "Osmose"],
        "Es gibt eine Art der Zellteilung, die zwei identische Tochterzellen produziert. Dies wird Mitose genannt."
    ),
    (
        "Welche Struktur synthetisiert Lipide?",
        "Glattes ER",
        ["Golgi-Apparat", "Kernhülle", "Glattes ER", "Ribosomen"],
        "Das glatte Endoplasmatische Retikulum hat die Aufgabe, Lipide zu synthetisieren. Diese Struktur ist das Glatte ER."
    ),
    (
        "Was ist die Funktion der Zellmembran?",
        "Reguliert Austausch",
        ["Reguliert Austausch", "Energieproduktion", "Speicherung", "Zellteilung"],
        "Die Zellmembran kontrolliert den Austausch von Stoffen zwischen der Zelle und ihrer Umgebung. Dies ist ihre Hauptfunktion."
    ),
    (
        "Was ist die Hauptfunktion der Mitochondrien?",
        "Energieproduktion",
        ["Proteinherstellung", "Gen-Speicherung", "Energieproduktion", "Transport"],
        "Mitochondrien sind für die Energieproduktion innerhalb der Zelle verantwortlich. Sie erzeugen ATP."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Struktur in der Zelle ist für die Photosynthese verantwortlich?",
        "Chloroplasten",
        ["Chloroplasten", "Ribosomen", "Endoplasmatisches Retikulum", "Mitochondrien"],
        "Die Photosynthese findet in speziellen Organellen statt, die als Chloroplasten bekannt sind."
    ),
    (
        "Welches Molekül speichert genetische Information?",
        "DNA",
        ["RNA", "Protein", "Lipide", "DNA"],
        "Die genetische Information in Zellen wird von einem speziellen Molekül gespeichert. Dieses Molekül ist die DNA."
    ),
    (
        "Wie nennt man die Fähigkeit von Zellen, auf ihre Umwelt zu reagieren?",
        "Reizbarkeit",
        ["Wachstum", "Reizbarkeit", "Regeneration", "Fortpflanzung"],
        "Wenn Zellen auf Umweltveränderungen reagieren, spricht man von Reizbarkeit. Dies ist ihre Fähigkeit zur Anpassung."
    ),
    (
        "Welche Struktur ist für den Transport innerhalb der Zelle zuständig?",
        "Zytoskelett",
        ["Mitochondrien", "Zellkern", "Zytoskelett", "Golgi-Apparat"],
        "Das Zytoskelett ist entscheidend für den Transport und die Struktur innerhalb der Zelle verantwortlich."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was sind die Bausteine der Proteine?",
        "Aminosäuren",
        ["Nukleotide", "Aminosäuren", "Fette", "Zucker"],
        "Proteine setzen sich aus spezifischen Molekülen zusammen. Diese Bausteine sind als Aminosäuren bekannt."
    ),
    (
        "Welches Organell ist für die Zellatmung verantwortlich?",
        "Mitochondrien",
        ["Chloroplasten", "Golgi-Apparat", "Ribosomen", "Mitochondrien"],
        "Das Organell, das für die Zellatmung zuständig ist, sind die Mitochondrien. Hier wird Energie produziert."
    ),
    (
        "Was ist die Funktion des Golgi-Apparates?",
        "Modifikation von Proteinen",
        ["Modifikation von Proteinen", "Energieproduktion", "Zellteilung", "DNA-Replikation"],
        "Der Golgi-Apparat ist verantwortlich für die Modifikation und das Verpacken von Proteinen für den Transport."
    ),
    (
        "Wie nennt man die Zellteilung zur Bildung von Gameten?",
        "Meiose",
        ["Mitose", "Mitosespaltung", "Endozytose", "Meiose"],
        "Zur Bildung von Gameten findet ein spezieller Zellteilungsprozess statt, der als Meiose bekannt ist."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Zellstruktur ist verantwortlich für die Produktion von Ribosomen?",
        "Nucleolus",
        ["Ribosomen", "Nucleolus", "Mitochondrien", "Golgi-Apparat"],
        "Im Zellkern gibt es eine Struktur, die für die Produktion von Ribosomen verantwortlich ist. Dies ist der Nucleolus."
    ),
    (
        "Welcher Prozess beschreibt die Zellaufnahme von Flüssigkeiten?",
        "Pinozytose",
        ["Exozytose", "Pinozytose", "Phagozytose", "Osmose"],
        "Der Prozess, bei dem Zellen Flüssigkeiten aufnehmen, wird als Pinozytose bezeichnet."
    ),
    (
        "Welches Molekül ist der Hauptenergiespeicher in Zellen?",
        "ATP",
        ["GTP", "ATP", "AMP", "ADP"],
        "In Zellen gibt es ein Hauptenergiemolekül, das als ATP bekannt ist und zur Energieversorgung dient."
    ),
    (
        "Was ist die Funktion von Lysosomen?",
        "Abbau von Abfällen",
        ["Abbau von Abfällen", "Proteinproduktion", "Transport", "Energieproduktion"],
        "Lysosomen sind für den Abbau von Zellabfällen und anderen Materialien innerhalb der Zelle zuständig."
    ),
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
        ("Was ist die Hauptaufgabe der Zellmembran?",
     "Reguliert Austausch",
     ["Energieproduktion", "Speicherung", "Reguliert Austausch", "Proteinsynthese"],
     "Die Zellmembran dient als Barriere, die den Stoffaustausch zwischen Zelle und Umgebung kontrolliert. Sie spielt auch eine wesentliche Rolle bei der Erhaltung der Zellstruktur."),

    ("Welche Zellorganellen sind für die Proteinproduktion verantwortlich?",
     "Ribosomen",
     ["Golgi-Apparat", "Lysosomen", "Mitochondrien", "Ribosomen"],
     "Die Synthese von Proteinen erfolgt in speziellen Zellorganellen. Diese können entweder frei im Cytoplasma vorliegen oder am endoplasmatischen Retikulum gebunden sein."),

    ("Welches Molekül trägt die genetische Information von der DNA zu den Ribosomen?",
     "mRNA",
     ["rRNA", "tRNA", "mRNA", "DNA"],
     "Das Molekül, das die genetische Information von der DNA zu den Ribosomen transportiert, spielt eine zentrale Rolle bei der Proteinbiosynthese."),

    ("Wie nennt man den Prozess, bei dem Zellen Energie aus Glucose gewinnen?",
     "Glykolyse",
     ["Glykolyse", "Fotosynthese", "Atmung", "Fermentation"],
     "Der Prozess, bei dem Glucose in Pyruvat gespalten wird, um Energie zu gewinnen, ist ein wichtiger Schritt in der Zellatmung."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Was ist der Hauptbestandteil der Zellwand in Pflanzenzellen?",
     "Cellulose",
     ["Lignin", "Chitin", "Peptidoglycan", "Cellulose"],
     "Die Zellwand von Pflanzenzellen besteht überwiegend aus einem bestimmten Stoff, der der Zelle ihre Struktur und Stabilität verleiht."),

    ("Welches Organell ist für die Herstellung von Lipiden zuständig?",
     "Glattes ER",
     ["Ribosomen", "Kernhülle", "Glattes ER", "Mitochondrien"],
     "Das Organell, das für die Synthese von Lipiden und Steroiden verantwortlich ist, spielt eine zentrale Rolle bei der Zellmembranproduktion."),

    ("Was bezeichnet man als den Prozess der Zellteilung zur Vermehrung von somatischen Zellen?",
     "Mitose",
     ["Mitose", "Fission", "Replikation", "Meiose"],
     "Der Prozess, durch den eine Zelle sich in zwei identische Tochterzellen teilt, wird als Mitose bezeichnet. Dieser Prozess ist wichtig für Wachstum und Heilung."),

    ("Welche Art von RNA ist in der Ribosomenstruktur enthalten?",
     "rRNA",
     ["sRNA", "tRNA", "mRNA", "rRNA"],
     "Ein bestimmter Typ von RNA, der in der Ribosomenstruktur enthalten ist, spielt eine wesentliche Rolle bei der Proteinbiosynthese."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie nennt man die Energieumwandlung in Mitochondrien?",
     "Zellatmung",
     ["Fotosynthese", "Glykolyse", "Fermentation", "Zellatmung"],
     "Die Energieumwandlung in Mitochondrien wandelt Glucose und Sauerstoff in ATP um, um Energie für die Zelle bereitzustellen."),

    ("Welches Molekül ist als Energiewährung der Zelle bekannt?",
     "ATP",
     ["ATP", "ADP", "GTP", "AMP"],
     "Das Molekül, das als Hauptenergiemolekül in Zellen fungiert, ist für viele biologische Prozesse unerlässlich."),

    ("Was ist die Funktion von Mikrotubuli im Zytoskelett?",
     "Stabilität",
     ["Stabilität", "Transport", "Signalweiterleitung", "Energieproduktion"],
     "Mikrotubuli tragen zur strukturellen Stabilität der Zelle bei und sind an der Zellteilung beteiligt."),

    ("Welche Struktur in der Zelle speichert Wasser und Nährstoffe?",
     "Vakuole",
     ["Mitochondrium", "Vakuole", "Zellkern", "Lysosom"],
     "Die Speicherung von Wasser, Nährstoffen und Abfallprodukten erfolgt in einer bestimmten Zellstruktur, die auch den Zellinnendruck aufrechterhält."),
     
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie nennt man den Prozess, bei dem Pflanzen Lichtenergie in chemische Energie umwandeln?",
     "Fotosynthese",
     ["Glykolyse", "Fotosynthese", "Zellatmung", "Fermentation"],
     "Pflanzen nutzen diesen Prozess, um Lichtenergie in chemische Energie umzuwandeln und Glucose zu produzieren."),

    ("Welche Struktur ist für den Abbau von Fettsäuren verantwortlich?",
     "Peroxisomen",
     ["Ribosomen", "Lysosomen", "Peroxisomen", "Mitochondrien"],
     "Die Abbaureaktion von Fettsäuren erfolgt in einem speziellen Zellorganell, das auch Wasserstoffperoxid abbaut."),

    ("Was beschreibt die Rolle von Enzymen in biochemischen Reaktionen?",
     "Beschleunigung",
     ["Hemmung", "Stabilisierung", "Beschleunigung", "Verlangsamung"],
     "Enzyme senken die Aktivierungsenergie von biochemischen Reaktionen und beschleunigen so deren Ablauf."),

    ("Wie nennt man die von einem Organismus produzierte Nachkommenschaft?",
     "Fortpflanzung",
     ["Zellteilung", "Mutationen", "Differenzierung", "Fortpflanzung"],
     "Der Prozess, bei dem Nachkommen produziert werden, sichert das Fortbestehen der Art und die Weitergabe von genetischem Material."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Art von Transport benötigt keine Energie?",
     "Passiver Transport",
     ["Endozytose", "Aktiver Transport", "Passiver Transport", "Exozytose"],
     "Dieser Transportmechanismus bewegt Moleküle durch die Zellmembran ohne Energieaufwand, entlang des Konzentrationsgradienten."),

    ("Welches Molekül liefert die Bausteine für die DNA-Synthese?",
     "Nukleotide",
     ["Nukleotide", "Aminosäuren", "Fettsäuren", "Zucker"],
     "Die Bausteine der DNA, die aus einer Base, einem Zucker und einem Phosphat bestehen, sind für die DNA-Synthese notwendig."),

    ("Wie nennt man den Prozess, bei dem Zellen spezifische Aufgaben übernehmen?",
     "Differenzierung",
     ["Differenzierung", "Regeneration", "Mitose", "Meiose"],
     "Zellen entwickeln sich zu spezialisierten Typen mit unterschiedlichen Funktionen durch einen Prozess, der als Differenzierung bekannt ist."),

    ("Was ist der Hauptbestandteil der Zellmembran?",
     "Phospholipide",
     ["Nukleinsäuren", "Kohlenhydrate", "Phospholipide", "Proteine"],
     "Die Zellmembran besteht hauptsächlich aus einer speziellen Art von Molekülen, die eine doppelschichtige Struktur bilden und den Stoffaustausch regulieren."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Organell ist für die Synthese von Steroidhormonen verantwortlich?",
     "Glattes ER",
     ["Glattes ER", "Ribosomen", "Mitochondrien", "Golgi-Apparat"],
     "Für die Synthese von Steroidhormonen und Lipiden ist ein bestimmtes Organell verantwortlich, das auch bei der Entgiftung der Zelle hilft."),

    ("Was passiert in der Metaphase der Mitose?",
     "Chromosomen reihen sich auf",
     ["Kernhülle zerfällt", "Zellplasma teilt sich", "Chromosomen reihen sich auf", "Chromosomen trennen sich"],
     "In der Metaphase ordnen sich die Chromosomen entlang der Zellmitte an. Dies ist wichtig für die korrekte Verteilung des genetischen Materials in die Tochterzellen."),

    ("Wie nennt man die Struktur, die das Erbgut in prokaryotischen Zellen enthält?",
     "Nucleoid",
     ["Nucleolus", "Kernhülle", "Zellkern", "Nucleoid"],
     "Das Erbgut in prokaryotischen Zellen befindet sich in einem Bereich ohne Membran, der als Nucleoid bekannt ist."),

    ("Welche Art von Zellteilung produziert vier haploide Zellen?",
     "Meiose",
     ["Meiose", "Mitose", "Klonierung", "Mitosespaltung"],
     "Die Meiose reduziert die Chromosomenzahl auf die Hälfte und produziert vier haploide Zellen, die für die sexuelle Fortpflanzung notwendig sind.")
    
]
        
class NABiologie(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(NABiologie, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Biologie"
        self.fragen = fragenbio

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

 
        
class Geschichte(Screen):
    def __init__(self, **kwargs):
        super(Geschichte, self).__init__(**kwargs)
        self.lyt = FloatLayout()
        
        self.label = Label (text="Starten = Themenbereich wählen", size_hint=(None, None), size=(100,100), pos_hint={"center_x":0.5,"center_y":0.65})
        self.lyt.add_widget(self.label) 
        
        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100,100),
                           pos_hint={"center_x":0.15,"y":0}
                           )                   
        self.btn1.bind(on_press=self.wechselmenu) 
        self.lyt.add_widget(self.btn1)  
                       
        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0}
                           )
        self.btn2.bind(on_press=self.wechseltrp)
        self.lyt.add_widget(self.btn2)
      
        self.btn3 = Button (background_normal='profile.png', background_down='profile.png',
                            size_hint=(None, None),
                            size=(100,100),
                            pos_hint={"center_x":0.85,"y":0}
                            )
        self.btn3.bind(on_press=self.wechselprfl)
        self.lyt.add_widget(self.btn3)
        
        self.lyt.add_widget(Image(source="logo-1.png",
                                     size_hint=(None,None),
                                     size=(150,150),
                                     pos_hint={'center_x': 0.5, 'top': 1.0}))
        
        self.themen = Button(text="Themenbereiche", background_color = '#069AF3',
                              size_hint=(None, None), size=(150,100), pos_hint={"center_x":0.5, "center_y":0.45})
        self.themen.bind(on_press=self.topic_list)
        
        self.lyt.add_widget(self.themen)
        
        self.add_widget(self.lyt)
        
    def wechselmenu (self,instance):
        self.manager.current ='menu'
        
    def wechseltrp (self, instance):
        self.manager.current = 'trophe'
        
    def wechselprfl (self, instance):
        self.manager.current = 'profile'
        
    def topic_list(self, instance):
        popup_content = GridLayout(cols=1, spacing = 10, size_hint_y=None)
        popup_content.bind(minimum_height=popup_content.setter("height"))
        
        topics = ["Erfindungen", "Kriege","Philosophie","Mythologie"]
        
        for topic in topics:
         btn = Button (text=str(topic), size_hint_y=None, height=40)
         btn.bind(on_press=self.switch_to_topic)
         popup_content.add_widget(btn)
        
        self.popup = Popup(title= 'Themenbereiche', size_hint=(None,None), size=(300, 400), auto_dismiss=True)
        self.popup.content = popup_content
        self.popup.open()
        
    def switch_to_topic(self, instance):
        self.popup.dismiss()
        topic_key = instance.text.lower().replace(' ', '_')
        questions = self.manager.fragen.get(topic_key, [])

        if questions:
            screen_name = f"{topic_key}_0"
            if not self.manager.has_screen(screen_name):
                for i, frage in enumerate(questions):
                    text, antwort, antwortmöglichkeiten, info_text = frage
                    screen_name = f"{topic_key}_{i}"
                    if topic_key == "erfindungen":
                        screen = GEErfindungen(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "kriege":
                        screen = GEKriege(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "philosophie":
                        screen = GEPhilosophie(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "mythologie":
                        screen = GEMythologie(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    
                    self.manager.add_widget(screen)
            
            self.manager.current = f"{topic_key}_0"
        
fragenerfind = [
    
    ("Wer erfand das erste funktionsfähige Flugzeug?",
     "Die Gebrüder Wright.",
     ["Leonardo da Vinci.", "Die Gebrüder Wright.", "Henry Ford.", "Thomas Edison."],
     "Die Gebrüder Wright, Orville und Wilbur, erfanden und flogen das erste motorbetriebene, kontrollierte Flugzeug. Dies geschah am 17. Dezember 1903 in Kitty Hawk, North Carolina. Ihr Erfolg markierte den Beginn der modernen Luftfahrt."),

    ("Wer gilt als Erfinder des Telefons?",
     "Alexander Graham Bell.",
     ["Alexander Graham Bell.", "Thomas Edison.", "Nikola Tesla.", "Guglielmo Marconi."],
     "Alexander Graham Bell erhielt 1876 das erste US-Patent für das Telefon. Sein Gerät konnte Töne über elektrische Drähte übertragen. Dies war ein Meilenstein in der Kommunikationstechnologie."),

    ("Wer entwickelte den ersten brauchbaren Automobil mit Verbrennungsmotor?",
     "Karl Benz.",
     ["Henry Ford.", "Nikolaus Otto.", "Karl Benz.", "Gottlieb Daimler."],
     "Karl Benz erhielt 1886 das Patent für das erste Automobil mit Verbrennungsmotor. Dieses Fahrzeug wurde in seiner Firma Benz & Cie. in Deutschland entwickelt. Es markierte den Beginn der modernen Automobilindustrie."),

    ("Wer erfand die Glühbirne?",
     "Thomas Edison.",
     ["Nikola Tesla.", "Thomas Edison.", "Alexander Graham Bell.", "James Watt."],
     "Thomas Edison erhielt 1879 das Patent für die erste kommerziell erfolgreiche Glühbirne. Diese Glühbirne hatte eine länger brennende Filament als frühere Versionen. Sein Erfolg revolutionierte die Beleuchtungstechnik."),

    ("Wer entwickelte den ersten funktionsfähigen Computer?",
     "Alan Turing.",
     ["Charles Babbage.", "Bill Gates.", "Alan Turing.", "Steve Jobs."],
     "Alan Turing entwickelte während des Zweiten Weltkriegs den Turing-Bombe, ein elektromechanisches Gerät zur Entschlüsselung deutscher Codes. Er gilt als einer der Väter der modernen Informatik. Seine Arbeit legte den Grundstein für die Entwicklung moderner Computer."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer gilt als Erfinder des Internets?",
     "Tim Berners-Lee.",
     ["Bill Gates.", "Steve Jobs.", "Tim Berners-Lee.", "Mark Zuckerberg."],
     "Tim Berners-Lee, ein britischer Informatiker, erfand 1989 das World Wide Web. Dieses System verbindet Hypertext-Dokumente über das Internet. Es hat die Art und Weise, wie wir Informationen austauschen, revolutioniert."),

    ("Wer erfand das Penicillin?",
     "Alexander Fleming.",
     ["Louis Pasteur.", "Alexander Fleming.", "Joseph Lister.", "Robert Koch."],
     "Alexander Fleming entdeckte 1928 das Antibiotikum Penicillin. Diese Entdeckung revolutionierte die Medizin und ermöglichte die Behandlung vieler bakterieller Infektionen. Fleming erhielt dafür den Nobelpreis."),

    ("Wer erfand die erste brauchbare Dampfmaschine?",
     "James Watt.",
     ["Thomas Newcomen.", "James Watt.", "George Stephenson.", "Robert Fulton."],
     "James Watt verbesserte in den 1760er Jahren die Dampfmaschine von Thomas Newcomen. Seine Verbesserungen machten die Dampfmaschine effizienter. Dies leitete die industrielle Revolution ein."),

    ("Wer entwickelte den ersten kommerziellen Fernseher?",
     "Philo Farnsworth.",
     ["John Logie Baird.", "Philo Farnsworth.", "Vladimir Zworykin.", "David Sarnoff."],
     "Philo Farnsworth, ein amerikanischer Erfinder, entwickelte 1927 den ersten vollelektronischen Fernseher. Dieses Gerät erzeugte Bilder mit einer Elektronenstrahlröhre. Farnsworths Erfindung war ein Meilenstein in der Fernsehgeschichte."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer gilt als Erfinder der modernen Nähmaschine?",
     "Isaac Singer.",
     ["Elias Howe.", "Isaac Singer.", "John Kay.", "James Hargreaves."],
     "Isaac Singer verbesserte 1851 das Design der Nähmaschine von Elias Howe. Seine Version wurde ein kommerzieller Erfolg. Dies revolutionierte die Textilindustrie."),

    ("Wer erfand den ersten mechanischen Computer?",
     "Charles Babbage.",
     ["Alan Turing.", "Charles Babbage.", "Konrad Zuse.", "Herman Hollerith."],
     "Charles Babbage entwarf in den 1830er Jahren den Analytical Engine. Dieser mechanische Computer enthielt grundlegende Elemente moderner Computer. Babbage gilt als Vater des Computers."),

    ("Wer entwickelte die erste funktionierende Glühlampe?",
     "Joseph Swan.",
     ["Thomas Edison.", "Joseph Swan.", "Nikola Tesla.", "Heinrich Goebel."],
     "Joseph Swan, ein britischer Physiker und Chemiker, entwickelte 1878 eine funktionsfähige Glühlampe. Diese Lampe hatte eine Kohlenstofffaser als Glühfaden. Swan war einer der Pioniere der elektrischen Beleuchtung."),

    ("Wer erfand das Rad?",
     "Unbekannt.",
     ["Leonardo da Vinci.", "Thomas Edison.", "Unbekannt.", "Archimedes."],
     "Die Erfindung des Rades geht auf die Zeit um 3500 v. Chr. zurück. Es wird verschiedenen antiken Kulturen zugeschrieben. Der genaue Erfinder ist jedoch unbekannt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer erfand den ersten funktionsfähigen Hubschrauber?",
     "Igor Sikorsky.",
     ["Leonardo da Vinci.", "Igor Sikorsky.", "Orville Wright.", "Ferdinand von Zeppelin."],
     "Igor Sikorsky, ein russisch-amerikanischer Luftfahrtpionier, entwickelte 1939 den VS-300. Dies war der erste praktische Hubschrauber mit einem Hauptrotor und einem Heckrotor. Sikorskys Arbeit legte den Grundstein für die moderne Hubschrauberentwicklung."),

    ("Wer entwickelte das erste Antibiotikum?",
     "Alexander Fleming.",
     ["Robert Koch.", "Louis Pasteur.", "Alexander Fleming.", "Joseph Lister."],
     "Alexander Fleming entdeckte 1928 das erste Antibiotikum, Penicillin. Diese Entdeckung ermöglichte die Behandlung vieler bakterieller Infektionen. Fleming erhielt dafür den Nobelpreis."),

    ("Wer erfand den ersten funktionsfähigen Motorwagen?",
     "Karl Benz.",
     ["Henry Ford.", "Karl Benz.", "Gottlieb Daimler.", "Rudolf Diesel."],
     "Karl Benz erhielt 1886 das Patent für den ersten benzinbetriebenen Motorwagen. Dieses Fahrzeug gilt als Vorläufer des modernen Autos. Benz' Erfindung war ein Meilenstein in der Automobilgeschichte."),

    ("Wer entwickelte die erste Programmiersprache?",
     "Ada Lovelace.",
     ["Alan Turing.", "Ada Lovelace.", "John von Neumann.", "Grace Hopper."],
     "Ada Lovelace schrieb im 19. Jahrhundert den ersten Algorithmus. Dieser Algorithmus war für die Verarbeitung von Daten durch eine Maschine, Charles Babbage's Analytical Engine, vorgesehen. Lovelace gilt als erste Programmiererin der Welt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer erfand das erste elektronische Computerprogramm?",
     "Tommy Flowers.",
     ["Alan Turing.", "John Atanasoff.", "Tommy Flowers.", "Konrad Zuse."],
     "Tommy Flowers, ein britischer Ingenieur, entwickelte während des Zweiten Weltkriegs den Colossus. Dies war der erste elektronische programmierbare Computer. Flowers' Arbeit half bei der Entschlüsselung deutscher Nachrichten."),

    ("Wer erfand den ersten funktionsfähigen Laser?",
     "Theodore Maiman.",
     ["Albert Einstein.", "Gordon Gould.", "Charles Townes.", "Theodore Maiman."],
     "1960 erfand Theodore Maiman den ersten funktionsfähigen Laser. Diese Erfindung hatte weitreichende Anwendungen in Medizin, Industrie und Kommunikation. Maiman wird oft als Pionier der Lasertechnologie angesehen."),

    ("Wer erfand das erste funktionierende Flugzeug?",
     "Die Gebrüder Wright.",
     ["Alberto Santos-Dumont.", "Die Gebrüder Wright.", "Otto Lilienthal.", "Samuel Langley."],
     "Die Gebrüder Wright führten 1903 den ersten erfolgreichen Flug eines motorisierten Flugzeugs durch. Sie gelten als Pioniere der Luftfahrt. Ihr Flugzeug, die Wright Flyer, war der Beginn der modernen Luftfahrt."),

    ("Wer erfand den ersten Benzinmotor?",
     "Nikolaus Otto.",
     ["Gottlieb Daimler.", "Karl Benz.", "Rudolf Diesel.", "Nikolaus Otto."],
     "Nikolaus Otto erfand 1876 den ersten funktionierenden Benzinmotor. Diese Erfindung revolutionierte den Transportsektor. Otto wird oft als Vater des modernen Verbrennungsmotors bezeichnet."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer erfand die erste brauchbare Dampfmaschine?",
     "James Watt.",
     ["Thomas Newcomen.", "George Stephenson.", "Richard Trevithick.", "James Watt."],
     "James Watt verbesserte 1769 die Dampfmaschine erheblich. Seine Verbesserungen machten die Dampfmaschine effizienter und vielseitiger. Watt's Erfindung trieb die Industrielle Revolution voran."),

    ("Wer erfand den ersten funktionierenden Telegrafen?",
     "Samuel Morse.",
     ["Alexander Graham Bell.", "Guglielmo Marconi.", "Thomas Edison.", "Samuel Morse."],
     "Samuel Morse entwickelte 1837 den ersten funktionierenden Telegrafen und den Morsecode. Der Morsecode ermöglichte schnelle Kommunikation über große Entfernungen. Morse gilt als Pionier der Telekommunikation."),

    ("Wer erfand das erste funktionierende Mikroskop?",
     "Antoni van Leeuwenhoek.",
     ["Robert Hooke.", "Zacharias Janssen.", "Joseph Lister.", "Antoni van Leeuwenhoek."],
     "Im 17. Jahrhundert entwickelte Antoni van Leeuwenhoek das erste funktionierende Mikroskop. Seine Entdeckungen von Mikroorganismen waren bahnbrechend. Er gilt als Vater der Mikrobiologie."),

    ("Wer erfand die erste brauchbare Schreibmaschine?",
     "Christopher Sholes.",
     ["Charles Thurber.", "Thomas Edison.", "Alexander Graham Bell.", "Christopher Sholes."],
     "Christopher Sholes entwickelte 1868 die erste brauchbare Schreibmaschine. Diese Erfindung revolutionierte das Büro- und Schreibwesen. Sholes gilt als Vater der modernen Schreibmaschine."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer erfand den ersten erfolgreichen mechanischen Webstuhl?",
     "Edmund Cartwright.",
     ["James Hargreaves.", "Samuel Crompton.", "Eli Whitney.", "Edmund Cartwright."],
     "Edmund Cartwright entwickelte 1784 den ersten erfolgreichen mechanischen Webstuhl. Sein Webstuhl war ein wichtiger Schritt in der Industriellen Revolution. Diese Erfindung erhöhte die Effizienz der Textilproduktion erheblich."),

    ("Wer erfand den ersten kommerziellen Fernsprechapparat?",
     "Alexander Graham Bell.",
     ["Thomas Edison.", "Guglielmo Marconi.", "Nikola Tesla.", "Alexander Graham Bell."],
     "Alexander Graham Bell erfand 1876 den ersten kommerziellen Fernsprechapparat. Diese Erfindung revolutionierte die Kommunikation weltweit. Bell gilt als einer der wichtigsten Pioniere der Telekommunikation."),

    ("Wer erfand den ersten kommerziellen Rechenapparat?",
     "Blaise Pascal.",
     ["Charles Babbage.", "Gottfried Wilhelm Leibniz.", "John Napier.", "Blaise Pascal."],
     "Blaise Pascal entwickelte 1642 den ersten kommerziellen Rechenapparat, die Pascaline. Pascal wird oft als einer der Väter des Rechnens bezeichnet. Diese Maschine konnte einfache mathematische Operationen durchführen."),

    ("Wer erfand den ersten erfolgreichen Fernseher?",
     "John Logie Baird.",
     ["Philo Farnsworth.", "Vladimir Zworykin.", "Paul Nipkow.", "John Logie Baird."],
     "John Logie Baird demonstrierte 1925 den ersten erfolgreichen Fernseher. Er gilt als Vater des Fernsehens. Bairds Erfindung legte den Grundstein für die moderne Fernsehtechnologie."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer erfand das erste brauchbare Antiseptikum?",
     "Joseph Lister.",
     ["Louis Pasteur.", "Robert Koch.", "Alexander Fleming.", "Joseph Lister."],
     "Joseph Lister entwickelte in den 1860er Jahren das erste brauchbare Antiseptikum. Lister gilt als einer der Begründer der modernen antiseptischen Chirurgie. Seine Arbeit revolutionierte die Chirurgie und reduzierte die Infektionsraten erheblich."),

    ("Wer erfand den ersten erfolgreichen Herzschrittmacher?",
     "Rune Elmqvist.",
     ["Paul Zoll.", "Earl Bakken.", "Wilson Greatbatch.", "Rune Elmqvist."],
     "Rune Elmqvist entwickelte 1958 den ersten erfolgreichen implantierbaren Herzschrittmacher. Diese Erfindung rettete unzählige Leben und revolutionierte die Kardiologie. Elmqvists Herzschrittmacher war ein Durchbruch in der Medizintechnik."),

    ("Wer erfand den ersten kommerziellen Kugelschreiber?",
     "László Bíró.",
     ["John Loud.", "Lewis Edson Waterman.", "Milton Reynolds.", "László Bíró."],
     "László Bíró patentierte 1938 den ersten kommerziellen Kugelschreiber. Bíró's Design ist noch heute die Grundlage für moderne Kugelschreiber. Seine Erfindung wurde schnell populär und revolutionierte das Schreiben."),

    ("Wer erfand den ersten funktionierenden Automobil mit Verbrennungsmotor?",
     "Karl Benz.",
     ["Henry Ford.", "Gottlieb Daimler.", "Rudolf Diesel.", "Karl Benz."],
     "1885 entwickelte Karl Benz das erste funktionierende Automobil mit Verbrennungsmotor. Benz gilt als einer der Väter des Automobils. Diese Erfindung markierte den Beginn der modernen Automobilindustrie."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer erfand die erste brauchbare Nähmaschine?",
     "Elias Howe.",
     ["Isaac Singer.", "Thomas Saint.", "Walter Hunt.", "Elias Howe."],
     "Elias Howe patentierte 1846 die erste brauchbare Nähmaschine. Diese Erfindung revolutionierte die Textilindustrie. Howes Nähmaschine war ein wichtiger Schritt in der Mechanisierung der Textilproduktion."),

    ("Wer erfand den ersten funktionsfähigen Fallschirm?",
     "André-Jacques Garnerin.",
     ["Leonardo da Vinci.", "Joseph-Michel Montgolfier.", "Jean-Pierre Blanchard.", "André-Jacques Garnerin."],
     "André-Jacques Garnerin führte 1797 den ersten erfolgreichen Fallschirmsprung durch. Garnerin gilt als der Vater des modernen Fallschirms. Seine Erfindung ermöglichte das sichere Abspringen aus großer Höhe."),

    ("Wer erfand den ersten praktischen Taschenrechner?",
     "Jack Kilby.",
     ["Blaise Pascal.", "William Hewlett.", "John Bardeen.", "Jack Kilby."],
     "Jack Kilby erfand 1967 den ersten praktischen Taschenrechner. Kilby gilt als Pionier der modernen Elektronik. Diese Erfindung revolutionierte das Rechnen und die Mathematik."),

    ("Wer erfand das erste funktionierende Elektronenmikroskop?",
     "Ernst Ruska.",
     ["Max Knoll.", "Louis de Broglie.", "Hans Busch.", "Ernst Ruska."],
     "Ernst Ruska entwickelte 1931 das erste funktionierende Elektronenmikroskop. Diese Erfindung ermöglichte die Untersuchung von Objekten auf atomarer Ebene. Ruskas Mikroskop war ein Meilenstein in der Mikroskopie."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer erfand den ersten funktionsfähigen Hubschrauber?",
     "Igor Sikorsky.",
     ["Paul Cornu.", "Henri Coandă.", "Leonardo da Vinci.", "Igor Sikorsky."],
     "Igor Sikorsky entwickelte 1939 den ersten funktionsfähigen Hubschrauber. Seine Erfindung legte den Grundstein für die moderne Hubschraubertechnologie. Sikorsky wird als Pionier der Hubschrauberentwicklung angesehen."),
    
        ("Welche Erfindung ermöglichte die industrielle Revolution in der Textilindustrie?",
     "Spinning Jenny",
     ["Fließband", "Dampfmaschine", "Webstuhl", "Spinning Jenny"],
     "Die rasante Steigerung der Garnproduktion und die grundlegende Veränderung der Textilherstellung sind durch eine bedeutende Erfindung erreicht worden. Diese Neuerung revolutionierte die gesamte Textilindustrie."),

    ("Welche Erfindung machte die elektrische Beleuchtung in Haushalten möglich?",
     "Glühbirne",
     ["Kohlensäurelampe", "Lampenöl", "Gaslicht", "Glühbirne"],
     "Die Möglichkeit, Innenräume nach Sonnenuntergang sicher und zuverlässig zu beleuchten, wurde durch eine bahnbrechende Technologie ermöglicht. Diese Erfindung beeinflusste sowohl Haushalte als auch Städte erheblich."),

    ("Welche Erfindung ermöglichte die schnelle Kommunikation über große Distanzen im 19. Jahrhundert?",
     "Telegraph",
     ["Morsecode", "Radio", "Telefon", "Telegraph"],
     "Die Art und Weise, wie Informationen über weite Strecken übermittelt werden konnten, wurde durch eine entscheidende Innovation verändert. Diese Erfindung ermöglichte eine nahezu sofortige Kommunikation über große Distanzen."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung veränderte die Art und Weise, wie Filme produziert und konsumiert werden?",
     "Filmprojektor",
     ["Filmprojektor", "Kamera", "Videokassette", "CD"],
     "Die Einführung einer Technologie, die die öffentliche Vorführung bewegter Bilder ermöglichte, führte zur Entstehung eines neuen Unterhaltungsmediums. Diese Erfindung veränderte die Filmindustrie grundlegend."),

    ("Welche Erfindung revolutionierte die Automobilproduktion durch Massenfertigung?",
     "Fließband",
     ["Automatisierter Motor", "Fließband", "Dampfmaschine", "Roboter"],
     "Ein fortschrittliches System zur schnellen und kostengünstigen Herstellung von Fahrzeugen senkte die Produktionskosten erheblich und machte Autos für die breite Bevölkerung zugänglich."),

    ("Welche Erfindung ermöglichte den Zugang zu medizinischen Bildgebungsverfahren?",
     "Röntgengerät",
     ["CT-Scanner", "MRT", "Röntgengerät", "Ultraschall"],
     "Die Fähigkeit, den Körper ohne chirurgische Eingriffe sichtbar zu machen, wurde durch eine bahnbrechende Technologie revolutioniert. Diese Erfindung verbesserte die Diagnostik und Behandlung erheblich."),

    ("Welche Erfindung ermöglichte die digitale Speicherung und Verarbeitung von Informationen?",
     "Transistor",
     ["Vakuumröhre", "Transistor", "CD-ROM", "Magnetband"],
     "Eine Schlüsseltechnologie, die die Miniaturisierung und Energieeffizienz in elektronischen Geräten ermöglichte, leitete das digitale Zeitalter ein. Diese Erfindung veränderte die Technologiebranche grundlegend."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung hat die Telekommunikation revolutioniert?",
     "Mobiltelefon",
     ["Funkgerät", "Telegraph", "Mobiltelefon", "Festnetztelefon"],
     "Die Möglichkeit, von überall aus drahtlos zu kommunizieren, veränderte die Art und Weise, wie Menschen vernetzt sind und miteinander kommunizieren. Diese Erfindung führte zu einer globalen Vernetzung."),

    ("Welche Erfindung ermöglichte die präzise Messung der Zeit über lange Distanzen?",
     "GPS",
     ["Kompass", "Radar", "GPS", "Uhr"],
     "Ein fortschrittliches System zur genauen Standortbestimmung und Zeitmessung revolutionierte die Navigation. Diese Erfindung hatte weitreichende Auswirkungen auf verschiedene Bereiche wie Luftfahrt und Schifffahrt."),

    ("Welche Erfindung ermöglichte die Massenerzeugung von Lebensmitteln?",
     "Konservendose",
     ["Einfrierverfahren", "Vakuumverpackung", "Konservendose", "Tiefkühltruhe"],
     "Eine neue Methode zur langfristigen Lagerung von Lebensmitteln vereinfachte den Transport und erhöhte die Verfügbarkeit von Nahrungsmitteln. Diese Erfindung verbesserte die Ernährung weltweit."),

    ("Welche Erfindung veränderte die Art der Energieerzeugung im 19. Jahrhundert?",
     "Dampfmaschine",
     ["Windkraft", "Dampfmaschine", "Elektrischer Generator", "Wasserkraft"],
     "Die Einführung einer neuen Methode zur mechanisierten Energieproduktion leitete eine industrielle Revolution ein. Diese Erfindung brachte bedeutende Fortschritte in Produktion und Transport."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung ermöglichte die Entwicklung der modernen Medizin durch genetische Forschung?",
     "DNA-Sequenzierung",
     ["Klonierung", "Mikroskop", "DNA-Sequenzierung", "Röntgengerät"],
     "Das Verständnis der genetischen Grundlage von Krankheiten und die Entwicklung gezielter Behandlungen wurden durch eine wichtige wissenschaftliche Entdeckung möglich gemacht. Diese Technologie revolutionierte die medizinische Forschung."),

    ("Welche Erfindung ermöglichte die sichere und schnelle Lieferung von Informationen über das Internet?",
     "E-Mail",
     ["E-Mail", "Post", "Telegraph", "Fax"],
     "Die Möglichkeit, Nachrichten und Dokumente weltweit in kurzer Zeit zu übermitteln, wurde durch eine bahnbrechende Innovation realisiert. Diese Erfindung veränderte die Kommunikation erheblich."),

    ("Welche Erfindung ermöglichte die sichere Speicherung und den Austausch von Daten über das Internet?",
     "Verschlüsselung",
     ["Firewalls", "Verschlüsselung", "Antivirus", "Cookies"],
     "Der Schutz von Daten durch eine spezielle Technik ermöglichte sichere Übertragungen und Speichermethoden im Internet. Diese Erfindung ist entscheidend für die Sicherheit von Informationen online."),

    ("Welche Erfindung ermöglichte die Aufnahme und Speicherung von bewegten Bildern?",
     "Videokamera",
     ["Fotokamera", "Filmprojektor", "Digitaler Recorder", "Videokamera"],
     "Die Fähigkeit, bewegte Bilder auf einem speicherbaren Medium aufzunehmen, führte zur Entstehung eines neuen Medienformats. Diese Erfindung veränderte die Unterhaltungsindustrie und den Heimvideomarkt."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung ermöglichte die Massenproduktion von Lebensmitteln und Medikamenten durch industrielle Prozesse?",
     "Mixer",
     ["Pürierer", "Mikrowelle", "Rührwerk", "Mixer"],
     "Ein Gerät zur schnellen und effizienten Verarbeitung von Zutaten ermöglichte die industrielle Herstellung von Lebensmitteln und Medikamenten. Diese Erfindung vereinfachte die Produktion in großem Maßstab."),

    ("Welche Erfindung machte es möglich, Daten in elektronischer Form zu speichern und abzurufen?",
     "Festplatte",
     ["Magnetband", "Floppy Disk", "CD-ROM", "Festplatte"],
     "Die Möglichkeit, große Datenmengen kompakt und zuverlässig zu speichern, wurde durch eine spezifische Speichertechnologie ermöglicht. Diese Erfindung revolutionierte die Datenverarbeitung und -speicherung."),

    ("Welche Erfindung ermöglichte die drahtlose Übertragung von Energie und Informationen?",
     "Funk",
     ["Telefon", "TV", "Glühbirne", "Funk"],
     "Die drahtlose Übertragung von Signalen über große Entfernungen wurde durch eine spezielle Technologie realisiert. Diese Erfindung führte zu bedeutenden Fortschritten in der Kommunikation und im Rundfunk."),

    ("Welche Erfindung ermöglichte die massenhafte Herstellung von Papier?",
     "Papiermaschine",
     ["Papiermaschine", "Handpresse", "Druckerpresse", "Vakuumpressen"],
     "Die Automatisierung des Papierherstellungsprozesses ermöglichte die Produktion in großen Mengen. Diese Erfindung trug wesentlich zur Verbreitung von Wissen und Bildung bei."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung ermöglichte die Verbesserung der medizinischen Diagnostik durch bildgebende Verfahren?",
     "CT-Scanner",
     ["Ultraschall", "MRI", "Röntgengerät", "CT-Scanner"],
     "Die detaillierte Bildgebung des Körpers ohne invasive Eingriffe wurde durch eine spezielle Technologie ermöglicht. Diese Erfindung verbesserte die Diagnostik und Behandlungsgenauigkeit in der Medizin."),

    ("Welche Erfindung ermöglichte die schnelle und präzise Herstellung von Metallen?",
     "Bessemer-Verfahren",
     ["Bessemer-Verfahren", "Gießverfahren", "Sinterverfahren", "Schmiedeverfahren"],
     "Ein neues Verfahren zur effizienten und kostengünstigen Herstellung von Stahl ermöglichte bedeutende Fortschritte in der Industrie. Diese Technologie war entscheidend für die Entwicklung von Infrastruktur und Bauwesen."),

    ("Welche Erfindung ermöglichte die automatische Steuerung von Maschinen und Prozessen?",
     "Automatisierungssystem",
     ["Relais", "Dampfmaschine", "Hydraulik", "Automatisierungssystem"],
     "Die Steuerung und Überwachung von Produktionsmaschinen durch computergestützte Systeme ermöglichte eine signifikante Effizienzsteigerung. Diese Technologie ist grundlegend für moderne Fertigungsprozesse."),

    ("Welche Erfindung ermöglichte die Speicherung von Informationen auf elektronischen Medien?",
     "CD-ROM",
     ["Floppy Disk", "Magnetband", "Festplatte", "CD-ROM"],
     "Die Speicherung großer Datenmengen auf einem kompakten Medium wurde durch eine spezielle Technologie ermöglicht. Diese Erfindung veränderte die Art und Weise, wie Daten gespeichert und abgerufen werden."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung ermöglichte die schnelle und drahtlose Übertragung von Daten?",
     "WLAN",
     ["Bluetooth", "WLAN", "Modem", "Ethernet"],
     "Die kabellose Übertragung von Daten in Netzwerken wurde durch eine fortschrittliche Technologie ermöglicht. Diese Erfindung ermöglichte eine flexible und mobile Nutzung von Computern und Geräten."),

    ("Welche Erfindung ermöglichte die Herstellung von genau geformten Teilen aus Metall?",
     "CNC-Fräse",
     ["Gießverfahren", "Schweißgerät", "CNC-Fräse", "Drehbank"],
     "Die präzise Bearbeitung von Metallteilen durch computergestützte Maschinen ermöglichte eine hohe Genauigkeit und Wiederholbarkeit in der Produktion. Diese Erfindung verbesserte die Fertigungsqualität erheblich."),

    ("Welche Erfindung ermöglichte die automatisierte Datenverarbeitung und -analyse?",
     "Computer",
     ["Rechenmaschine", "Computer", "Datenlogger", "Taschenrechner"],
     "Die Entwicklung eines Geräts zur schnellen und präzisen Verarbeitung von Daten führte zu großen Fortschritten in verschiedenen Bereichen. Diese Erfindung revolutionierte die Art und Weise, wie Daten verarbeitet werden."),

    ("Welche Erfindung ermöglichte die Erzeugung und Nutzung von Solarenergie?",
     "Solarzelle",
     ["Brennstoffzelle", "Windturbine", "Solarzelle", "Geothermiekraftwerk"],
     "Die Umwandlung von Sonnenlicht in elektrische Energie wurde durch eine spezielle Technologie ermöglicht. Diese Erfindung förderte den Einsatz erneuerbarer Energien und trug zur nachhaltigen Energieversorgung bei."),

     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung ermöglichte die präzise Navigation auf See und in der Luft?",
     "GPS",
     ["Kompass", "Radar", "GPS", "Odometer"],
     "Ein fortschrittliches System zur genauen Standortbestimmung und Navigation revolutionierte die Schifffahrt und Luftfahrt. Diese Erfindung ermöglichte eine präzise Navigation und Positionsbestimmung."),

    ("Welche Erfindung ermöglichte die Digitalisierung von Musik und Videos?",
     "MP3-Format",
     ["CD", "MP3-Format", "VHS", "Vinyl"],
     "Die Möglichkeit, Musik und Videos in digitaler Form zu speichern und zu übertragen, wurde durch eine spezifische Technologie ermöglicht. Diese Erfindung veränderte die Medienindustrie grundlegend."),

    ("Welche Erfindung ermöglichte die schnelle Bearbeitung von Dokumenten und Daten?",
     "Scanner",
     ["Drucker", "Scanner", "Fotokopierer", "Faxe"],
     "Ein Gerät zur digitalen Erfassung von Dokumenten ermöglichte die schnelle und effiziente Bearbeitung und Archivierung von Informationen. Diese Erfindung erleichterte die Dokumentenverwaltung erheblich."),
    
        ("Welche Erfindung ermöglichte den Einsatz von Computern zur Datenverarbeitung?",
     "Mikroprozessor",
     ["Festplatte", "Mikroprozessor", "CD-ROM", "RAM"],
     "Der Mikroprozessor revolutionierte die Computertechnik, indem er die zentrale Verarbeitungseinheit in einem einzigen Chip vereinte. Dies ermöglichte die Entwicklung von Personal Computern und deren Einsatz in vielen Alltagsanwendungen."),
        
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung ermöglichte die drahtlose Übertragung von Energie über kurze Distanzen?",
     "Induktionsherd",
     ["Elektroherd", "Gaskocher", "Induktionsherd", "Mikrowelle"],
     "Der Induktionsherd nutzt elektromagnetische Induktion, um Energie direkt auf das Kochgeschirr zu übertragen. Dies verbessert die Energieeffizienz und ermöglicht präzises Kochen ohne offene Flamme oder Heizdraht."),

    ("Welche Erfindung ermöglichte die effektive Speicherung von elektrischer Energie in tragbaren Geräten?",
     "Lithium-Ionen-Batterie",
     ["Lithium-Ionen-Batterie", "NiMH-Batterie", "Bleibatterie", "Akkumulator"],
     "Die Lithium-Ionen-Batterie ermöglichte die Entwicklung von tragbaren Elektronikgeräten mit langer Akkulaufzeit und hoher Energiedichte. Dies hat Smartphones, Laptops und viele andere tragbare Technologien revolutioniert."),

    ("Welche Erfindung ermöglichte die Massenerzeugung von elektrischen Geräten durch standardisierte Teile?",
     "Modularer Aufbau",
     ["Automatisierter Bau", "Fließband", "Roboter", "Modularer Aufbau"],
     "Der modulare Aufbau ermöglichte die Standardisierung und Massenerzeugung von elektrischen Geräten durch die Verwendung austauschbarer Teile. Dies vereinfachte die Produktion und Wartung von Geräten erheblich."),

    ("Welche Erfindung ermöglichte die Aufzeichnung von Ton und Musik auf einem tragbaren Medium?",
     "Schallplatte",
     ["CD", "MP3", "Schallplatte", "Kassette"],
     "Die Schallplatte ermöglichte die Aufnahme und Wiedergabe von Musik auf einem physischen Medium, das sich einfach vervielfältigen und verkaufen ließ. Diese Erfindung revolutionierte die Musikindustrie und den Musikgenuss."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung ermöglichte die Verbesserung der Luftfahrt durch effizientere Triebwerke?",
     "Turbofan-Triebwerk",
     ["Hubschrauber", "Turbofan-Triebwerk", "Kolbenmotor", "Jet-Triebwerk"],
     "Das Turbofan-Triebwerk ermöglichte effizientere und leisere Flugreisen im Vergleich zu älteren Triebwerkstypen. Diese Erfindung trug zur Verbesserung der Luftfahrtindustrie bei und machte kommerzielle Flüge zugänglicher."),

    ("Welche Erfindung ermöglichte die schnelle und präzise Bearbeitung von Texten?",
     "Textverarbeitungssystem",
     ["Druckerpresse", "Computer", "Textverarbeitungssystem", "Schreibmaschine"],
     "Das Textverarbeitungssystem ermöglichte die einfache Erstellung, Bearbeitung und Formatierung von Dokumenten. Dies vereinfachte die Büroarbeit und ermöglichte die schnelle Verbreitung und Verarbeitung von Informationen."),

    ("Welche Erfindung ermöglichte den Zugang zu Millionen von Büchern und wissenschaftlichen Arbeiten auf Knopfdruck?",
     "E-Book-Reader",
     ["Bibliothekskatalog", "E-Book-Reader", "Papierbuch", "CD-ROM"],
     "Der E-Book-Reader ermöglichte das Speichern und Lesen von Tausenden von Büchern auf einem einzigen Gerät. Dies machte den Zugang zu Literatur und wissenschaftlicher Arbeit bequemer und zugänglicher als je zuvor."),

    ("Welche Erfindung ermöglichte die Verbesserung der medizinischen Diagnostik durch detaillierte Bildgebung?",
     "Ultraschallgerät",
     ["CT-Scanner", "Röntgengerät", "MRT", "Ultraschallgerät"],
     "Das Ultraschallgerät ermöglichte die nicht-invasive Untersuchung von Geweben und Organen in Echtzeit. Dies verbesserte die medizinische Diagnostik und ermöglichte frühzeitige Erkennung und Überwachung von Krankheiten."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung ermöglichte eine drastische Reduzierung der Krankheitserreger in Wasserquellen?",
     "Wasserfilter",
     ["Wasserfilter", "Ultraviolett-Lampe", "Destillation", "Chemische Reinigung"],
     "Der Wasserfilter ermöglichte die Entfernung von Verunreinigungen und Krankheitserregern aus Wasserquellen. Dies hat weltweit die Trinkwasserqualität verbessert und zur Reduzierung wasserbedingter Krankheiten beigetragen."),

    ("Welche Erfindung ermöglichte die präzise Steuerung von elektronischen Geräten durch berührungslos gesteuerte Eingaben?",
     "Touchscreen",
     ["Maus", "Touchscreen", "Klickrad", "Tastatur"],
     "Der Touchscreen ermöglichte eine intuitive und direkte Interaktion mit elektronischen Geräten durch Berührungen auf einem Bildschirm. Dies führte zu einem neuen Standard in der Benutzeroberfläche für Smartphones, Tablets und andere Geräte."),

    ("Welche Erfindung ermöglichte die effiziente Umwandlung von Sonnenlicht in elektrische Energie?",
     "Solarzelle",
     ["Windkraftwerk", "Brennstoffzelle", "Geothermiekraftwerk", "Solarzelle"],
     "Die Solarzelle ermöglichte die Umwandlung von Sonnenlicht in elektrische Energie. Dies trug zur Entwicklung erneuerbarer Energiequellen bei und ermöglichte eine nachhaltigere Energieversorgung."),

    ("Welche Erfindung ermöglichte die Entwicklung der modernen Unterhaltungselektronik durch digitale Speicherung?",
     "DVD",
     ["CD", "VHS", "DVD", "Floppy Disk"],
     "Die DVD ermöglichte die Speicherung großer Datenmengen in einem kompakten Format, was die Entwicklung der modernen Unterhaltungselektronik und die Verbreitung von Filmen und Software erleichterte."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung ermöglichte den Zugang zu Informationen und Kommunikation übers Internet?",
     "Webbrowser",
     ["Modem", "Webbrowser", "Suchmaschine", "E-Mail"],
     "Der Webbrowser ermöglichte das Surfen im World Wide Web und den Zugriff auf Webseiten. Dies veränderte die Art und Weise, wie Menschen Informationen suchen, kommunizieren und online einkaufen."),

    ("Welche Erfindung ermöglichte die Herstellung von Textilien aus synthetischen Materialien?",
     "Nylon",
     ["Wolle", "Baumwolle", "Nylon", "Seide"],
     "Nylon war die erste vollständig synthetische Faser und ermöglichte die Herstellung von langlebigen und elastischen Textilien. Diese Erfindung revolutionierte die Modeindustrie und den Textilsektor."),

    ("Welche Erfindung ermöglichte die präzise Speicherung von Musik- und Sprachaufnahmen?",
     "Tonbandgerät",
     ["CD-Player", "Tonbandgerät", "MP3-Player", "Schallplatte"],
     "Das Tonbandgerät ermöglichte die Aufnahme und Wiedergabe von Ton auf Magnetbändern. Dies ermöglichte eine präzise und qualitativ hochwertige Speicherung von Musik und Sprache und beeinflusste die Musik- und Rundfunkindustrie."),

    ("Welche Erfindung ermöglichte den schnellen Zugang zu Informationen über digitale Netzwerke?",
     "Suchmaschine",
     ["Webbrowser", "Datenbank", "Suchmaschine", "Portal"],
     "Die Suchmaschine ermöglichte das schnelle Finden von Informationen im Internet, indem sie Webseiten nach Relevanz sortierte. Dies erleichterte den Zugang zu Wissen und veränderte die Informationssuche grundlegend."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Erfindung ermöglichte die effiziente Erzeugung von elektrischer Energie aus fossilen Brennstoffen?",
     "Kraftwerk",
     ["Kraftwerk", "Windkraftwerk", "Solarkraftwerk", "Geothermiekraftwerk"],
     "Das Kraftwerk ermöglichte die großflächige Erzeugung elektrischer Energie durch Verbrennung fossiler Brennstoffe. Dies trug zur Entwicklung moderner Energieinfrastruktur bei, hatte jedoch auch Auswirkungen auf Umwelt und Klima."),

    ("Welche Erfindung ermöglichte den effizienten Transport von Flüssigkeiten durch Rohrleitungen?",
     "Pumpen",
     ["Ventile", "Pumpen", "Kompressoren", "Rohre"],
     "Pumpen ermöglichten den Transport von Flüssigkeiten und Gasen durch Rohrleitungen über lange Strecken. Diese Erfindung war entscheidend für die Entwicklung von Wasser- und Ölversorgungssystemen."),

    ("Welche Erfindung ermöglichte die Entwicklung der modernen Luftfahrt durch Verbesserungen im Design von Flugzeugen?",
     "Jet-Triebwerk",
     ["Propeller", "Turbine", "Düsenantrieb", "Jet-Triebwerk"],
     "Das Jet-Triebwerk ermöglichte schnellere und effizientere Flugreisen, indem es die Luftfahrttechnik verbesserte. Diese Erfindung revolutionierte den Luftverkehr und ermöglichte internationale Reisen in kürzerer Zeit."),

    ("Welche Erfindung ermöglichte die automatisierte Verarbeitung von Informationen in der Datenverarbeitung?",
     "Computer",
     ["Computer", "Rechenmaschine", "Datenbank", "Kalkulator"],
     "Der Computer ermöglichte die automatisierte Verarbeitung und Speicherung von Informationen. Dies revolutionierte die Datenverarbeitung und eröffnete neue Möglichkeiten für Berechnungen, Programmierung und Informationsmanagement.")
]
            
class GEErfindungen(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(GEErfindungen, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Erfindungen"
        self.fragen = fragenerfind

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()
        

fragenkriege = [
    
    ("Welcher Krieg wurde durch den sogenannten „Prager Frühling“ in den 1960er Jahren ausgelöst?",
     "Keiner.",
     ["Vietnamkrieg.", "Zweiter Weltkrieg.", "Koreakrieg.", "Keiner."],
     "Der sogenannte „Prager Frühling“ in den 1960er Jahren löste keinen Krieg aus. Es war eine Periode politischer Liberalisierung in der Tschechoslowakei, die jedoch von der Sowjetunion gewaltsam unterdrückt wurde."),

    ("Welches Land war 1979 in den sowjetisch-afghanischen Krieg verwickelt?",
     "Afghanistan.",
     ["Iran.", "Pakistan.", "Indien.", "Afghanistan."],
     "1979 begann der sowjetisch-afghanische Krieg, als die Sowjetunion in Afghanistan intervenierte, um eine pro-sowjetische Regierung zu unterstützen. Dieser Konflikt dauerte fast ein Jahrzehnt und hatte weitreichende geopolitische Folgen."),

    ("In welchem Jahr begann der Amerikanische Bürgerkrieg?",
     "1861.",
     ["1850.", "1861.", "1870.", "1880."],
     "Der Amerikanische Bürgerkrieg begann 1861 und dauerte bis 1865. Er war ein blutiger Konflikt zwischen den Nord- und Südstaaten der USA über die Frage der Sklaverei. Der Krieg endete mit der Niederlage der Konföderation und der Abschaffung der Sklaverei."),

    ("Welches Land wurde im Falklandkrieg von 1982 von Argentinien angegriffen?",
     "Großbritannien.",
     ["Chile.", "Brasilien.", "Großbritannien.", "Uruguay."],
     "1982 griff Argentinien die Falklandinseln an, die von Großbritannien kontrolliert wurden. Dieser kurze Krieg führte zur Rückeroberung der Inseln durch britische Streitkräfte und stärkte die nationale Einheit in Großbritannien."),

    ("Wer war der Präsident der USA während des Spanisch-Amerikanischen Kriegs von 1898?",
     "William McKinley.",
     ["Theodore Roosevelt.", "Woodrow Wilson.", "William McKinley.", "Andrew Johnson."],
     "William McKinley war der Präsident der USA während des Spanisch-Amerikanischen Kriegs von 1898. Dieser Krieg begann als Konflikt zwischen Spanien und den Vereinigten Staaten aufgrund der Spanischen Kolonialherrschaft in Kuba."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Krieg wurde durch den Überfall auf Pearl Harbor im Jahr 1941 ausgelöst?",
     "Der Zweite Weltkrieg.",
     ["Der Erste Weltkrieg.", "Der Kalte Krieg.", "Der Vietnamkrieg.", "Der Zweite Weltkrieg."],
     "Der Überfall auf Pearl Harbor im Dezember 1941 führte zum Eintritt der Vereinigten Staaten in den Zweiten Weltkrieg. Dieser Überraschungsangriff durch Japan war ein Wendepunkt in der Geschichte und hatte weitreichende Auswirkungen auf den Kriegsverlauf."),

    ("In welchem Jahr fand die Kubakrise statt?",
     "1962.",
     ["1955.", "1962.", "1970.", "1980."],
     "Die Kubakrise fand im Oktober 1962 statt und war ein gefährliches Wettrüsten zwischen den USA und der Sowjetunion aufgrund der Stationierung sowjetischer Raketen auf Kuba. Die Krise endete mit einer Vereinbarung über den Rückzug der Raketen."),

    ("Wer war der Anführer der südafrikanischen Streitkräfte während des Zweiten Burenkriegs?",
     "Paul Kruger.",
     ["Winston Churchill.", "Cecil Rhodes.", "Paul Kruger.", "Nelson Mandela."],
     "Paul Kruger war ein Anführer der Buren während des Zweiten Burenkriegs (1899-1902). Der Konflikt zwischen den Burenrepubliken und dem britischen Empire hatte weitreichende Auswirkungen auf die Zukunft Südafrikas."),

    ("Welches Land griff 1956 den Suezkanal an?",
     "Israel, Großbritannien und Frankreich.",
     ["Ägypten.", "Saudi-Arabien.", "Libanon.", "Israel, Großbritannien und Frankreich."],
     "1956 griffen Israel, Großbritannien und Frankreich den Suezkanal an, nachdem Ägypten ihn nationalisiert hatte. Der Suezkrise folgte eine internationale Diplomatie, die zu einem Rückzug der Angreifer und zur Sicherstellung der internationalen Schifffahrt führte."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Schlacht gilt als der Wendepunkt im Amerikanischen Unabhängigkeitskrieg?",
     "Die Schlacht von Saratoga.",
     ["Die Schlacht von Bunker Hill.", "Die Schlacht von Yorktown.", "Die Schlacht von Lexington und Concord.", "Die Schlacht von Saratoga."],
     "Die Schlacht von Saratoga im Jahr 1777 gilt als Wendepunkt im Amerikanischen Unabhängigkeitskrieg."),
    
    ("Wer war der britische Premierminister während des Ersten Weltkriegs?",
     "David Lloyd George.",
     ["Winston Churchill.", "Herbert Henry Asquith.", "David Lloyd George.", "Stanley Baldwin."],
     "David Lloyd George war der britische Premierminister während des Ersten Weltkriegs. Er übernahm das Amt 1916 und führte das Vereinigte Königreich durch eine der schwersten Phasen seiner Geschichte."),

    ("In welchem Jahr fand die Invasion der Normandie im Zweiten Weltkrieg statt?",
     "1944.",
     ["1939.", "1941.", "1944.", "1945."],
     "Die Invasion der Normandie fand am 6. Juni 1944 statt. Dieser D-Day war der Beginn der Befreiung Westeuropas von der deutschen Besatzung während des Zweiten Weltkriegs."),

    ("Welche Schlacht gilt als Wendepunkt im Amerikanischen Unabhängigkeitskrieg?",
     "Die Schlacht von Saratoga.",
     ["Die Schlacht von Bunker Hill.", "Die Schlacht von Yorktown.", "Die Schlacht von Lexington und Concord.", "Die Schlacht von Saratoga."],
     "Die Schlacht von Saratoga im Jahr 1777 gilt als Wendepunkt im Amerikanischen Unabhängigkeitskrieg. Der Sieg der Amerikaner über die Briten überzeugte Frankreich, in den Krieg auf der Seite der Amerikaner einzutreten."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer war der Anführer der italienischen Streitkräfte im Ersten Weltkrieg?",
     "Luigi Cadorna.",
     ["Benito Mussolini.", "Giuseppe Garibaldi.", "Luigi Cadorna.", "Victor Emmanuel III."],
     "Luigi Cadorna war der Anführer der italienischen Streitkräfte im Ersten Weltkrieg. Er war bekannt für seine starre Kriegsführung, die zu schweren Verlusten auf Seiten Italiens führte."),

    ("Welches Ereignis löste den Koreakrieg aus?",
     "Die Invasion Nordkoreas in Südkorea.",
     ["Die Invasion Südkoreas in Nordkorea.", "Die Gründung Nordkoreas.", "Die Teilung Koreas.", "Die Invasion Nordkoreas in Südkorea."],
     "Der Koreakrieg begann 1950 mit der Invasion Nordkoreas in Südkorea. Dies führte zu einem internationalen Konflikt, der den Kalten Krieg beeinflusste und Millionen Menschenleben kostete."),

    ("Welche Stadt in den USA wurde während des Amerikanischen Bürgerkriegs als Hauptstadt der Konföderierten Staaten bezeichnet?",
     "Richmond, Virginia.",
     ["Atlanta, Georgia.", "Charleston, South Carolina.", "Richmond, Virginia.", "Montgomery, Alabama."],
     "Richmond, Virginia, wurde während des Amerikanischen Bürgerkriegs als Hauptstadt der Konföderierten Staaten von Amerika bezeichnet. Die Stadt spielte eine zentrale Rolle in der politischen und militärischen Führung der Konföderation."),

    ("Wer war der Präsident der USA während des Zweiten Weltkriegs?",
     "Franklin D. Roosevelt.",
     ["Harry S. Truman.", "Dwight D. Eisenhower.", "Franklin D. Roosevelt.", "Herbert Hoover."],
     "Franklin D. Roosevelt war der Präsident der USA während des Zweiten Weltkriegs. Er führte das Land durch die Große Depression und den Krieg und starb kurz vor dem Sieg der Alliierten."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land griff 1956 den Suezkanal an?",
     "Israel, Großbritannien und Frankreich.",
     ["Ägypten.", "Saudi-Arabien.", "Libanon.", "Israel, Großbritannien und Frankreich."],
     "1956 griffen Israel, Großbritannien und Frankreich den Suezkanal an, nachdem Ägypten ihn nationalisiert hatte. Der Suezkrise folgte eine internationale Diplomatie, die zu einem Rückzug der Angreifer und zur Sicherstellung der internationalen Schifffahrt führte."),

    ("Wer war der Anführer der deutschen Streitkräfte während des Ersten Weltkriegs?",
     "Kaiser Wilhelm II.",
     ["Paul von Hindenburg.", "Erich Ludendorff.", "Kaiser Wilhelm II.", "Otto von Bismarck."],
     "Kaiser Wilhelm II. war der Anführer der deutschen Streitkräfte während des Ersten Weltkriegs. Seine aggressive Außenpolitik und Militärstrategie trugen zum Ausbruch des Krieges und zur Eskalation in Europa bei."),

    ("Welches Land griff 1939 Polen an, was zum Beginn des Zweiten Weltkriegs führte?",
     "Deutschland.",
     ["Russland.", "Frankreich.", "Deutschland.", "Großbritannien."],
     "1939 griff Deutschland Polen an, was zum Beginn des Zweiten Weltkriegs führte. Dieser Angriff wurde durch den Molotow-Ribbentrop-Pakt mit der Sowjetunion unterstützt, der zu einer Teilung Polens zwischen Deutschland und der UdSSR führte."),

    ("Wer war der Oberbefehlshaber der alliierten Streitkräfte während des Zweiten Weltkriegs in Europa?",
     "Dwight D. Eisenhower.",
     ["Franklin D. Roosevelt.", "Winston Churchill.", "Dwight D. Eisenhower.", "Charles de Gaulle."],
     "Dwight D. Eisenhower war der Oberbefehlshaber der alliierten Streitkräfte während des Zweiten Weltkriegs in Europa. Er leitete die erfolgreiche Invasion in der Normandie und später den Sieg der Alliierten über Nazi-Deutschland."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Ereignis markierte das Ende des Kalten Krieges?",
     "Der Fall der Berliner Mauer.",
     ["Die Unterzeichnung des Warschauer Pakts.", "Der Bau der Berliner Mauer.", "Der Fall der Berliner Mauer.", "Die Kubakrise."],
     "Der Fall der Berliner Mauer im Jahr 1989 markierte das Ende des Kalten Krieges. Dieses Symbol des geteilten Europas wurde zum Höhepunkt der Forderung nach Freiheit und der Wiedervereinigung Deutschlands."),

    ("Welcher Krieg wurde durch den sogenannten „Prager Frühling“ in den 1960er Jahren ausgelöst?",
     "Keiner.",
     ["Vietnamkrieg.", "Zweiter Weltkrieg.", "Koreakrieg.", "Keiner."],
     "Der sogenannte „Prager Frühling“ in den 1960er Jahren löste keinen Krieg aus. Es war eine Periode politischer Liberalisierung in der Tschechoslowakei, die jedoch von der Sowjetunion gewaltsam unterdrückt wurde."),

    ("Welches Land war 1979 in den sowjetisch-afghanischen Krieg verwickelt?",
     "Afghanistan.",
     ["Iran.", "Pakistan.", "Indien.", "Afghanistan."],
     "1979 begann der sowjetisch-afghanische Krieg, als die Sowjetunion in Afghanistan intervenierte, um eine pro-sowjetische Regierung zu unterstützen. Dieser Konflikt dauerte fast ein Jahrzehnt und hatte weitreichende geopolitische Folgen."),

    ("In welchem Jahr begann der Amerikanische Bürgerkrieg?",
     "1861.",
     ["1850.", "1861.", "1870.", "1880."],
     "Der Amerikanische Bürgerkrieg begann 1861 und dauerte bis 1865. Er war ein blutiger Konflikt zwischen den Nord- und Südstaaten der USA über die Frage der Sklaverei. Der Krieg endete mit der Niederlage der Konföderation und der Abschaffung der Sklaverei."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer war der Präsident der USA während des Spanisch-Amerikanischen Kriegs von 1898?",
     "William McKinley.",
     ["Theodore Roosevelt.", "Woodrow Wilson.", "William McKinley.", "Andrew Johnson."],
     "William McKinley war der Präsident der USA während des Spanisch-Amerikanischen Kriegs von 1898. Dieser Krieg begann als Konflikt zwischen Spanien und den Vereinigten Staaten aufgrund der Spanischen Kolonialherrschaft in Kuba."),

    ("Welches Land wurde im Falklandkrieg von 1982 von Argentinien angegriffen?",
     "Großbritannien.",
     ["Chile.", "Brasilien.", "Großbritannien.", "Uruguay."],
     "1982 griff Argentinien die Falklandinseln an, die von Großbritannien kontrolliert wurden. Dieser kurze Krieg führte zur Rückeroberung der Inseln durch britische Streitkräfte und stärkte die nationale Einheit in Großbritannien."),

    ("Welcher Krieg wurde durch den Überfall auf Pearl Harbor im Jahr 1941 ausgelöst?",
     "Der Zweite Weltkrieg.",
     ["Der Erste Weltkrieg.", "Der Kalte Krieg.", "Der Vietnamkrieg.", "Der Zweite Weltkrieg."],
     "Der Überfall auf Pearl Harbor im Dezember 1941 führte zum Eintritt der Vereinigten Staaten in den Zweiten Weltkrieg. Dieser Überraschungsangriff durch Japan war ein Wendepunkt in der Geschichte und hatte weitreichende Auswirkungen auf den Kriegsverlauf."),

    ("In welchem Jahr fand die Kubakrise statt?",
     "1962.",
     ["1955.", "1962.", "1970.", "1980."],
     "Die Kubakrise fand im Oktober 1962 statt und war ein gefährliches Wettrüsten zwischen den USA und der Sowjetunion aufgrund der Stationierung sowjetischer Raketen auf Kuba. Die Krise endete mit einer Vereinbarung über den Rückzug der Raketen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer war der Anführer der südafrikanischen Streitkräfte während des Zweiten Burenkriegs?",
     "Paul Kruger.",
     ["Winston Churchill.", "Cecil Rhodes.", "Paul Kruger.", "Nelson Mandela."],
     "Paul Kruger war ein Anführer der Buren während des Zweiten Burenkriegs (1899-1902). Der Konflikt zwischen den Burenrepubliken und dem britischen Empire hatte weitreichende Auswirkungen auf die Zukunft Südafrikas."),

    ("Welches Land griff 1956 den Suezkanal an?",
     "Israel, Großbritannien und Frankreich.",
     ["Ägypten.", "Saudi-Arabien.", "Libanon.", "Israel, Großbritannien und Frankreich."],
     "1956 griffen Israel, Großbritannien und Frankreich den Suezkanal an, nachdem Ägypten ihn nationalisiert hatte. Der Suezkrise folgte eine internationale Diplomatie, die zu einem Rückzug der Angreifer und zur Sicherstellung der internationalen Schifffahrt führte."),

    ("Wer war der Anführer der deutschen Streitkräfte während des Ersten Weltkriegs?",
     "Kaiser Wilhelm II.",
     ["Paul von Hindenburg.", "Erich Ludendorff.", "Kaiser Wilhelm II.", "Otto von Bismarck."],
     "Kaiser Wilhelm II. war der Anführer der deutschen Streitkräfte während des Ersten Weltkriegs. Seine aggressive Außenpolitik und Militärstrategie trugen zum Ausbruch des Krieges und zur Eskalation in Europa bei."),

    ("Welches Land griff 1939 Polen an, was zum Beginn des Zweiten Weltkriegs führte?",
     "Deutschland.",
     ["Russland.", "Frankreich.", "Deutschland.", "Großbritannien."],
     "1939 griff Deutschland Polen an, was zum Beginn des Zweiten Weltkriegs führte. Dieser Angriff wurde durch den Molotow-Ribbentrop-Pakt mit der Sowjetunion unterstützt, der zu einer Teilung Polens zwischen Deutschland und der UdSSR führte."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land griff 1956 den Suezkanal an?",
     "Israel, Großbritannien und Frankreich.",
     ["Ägypten.", "Saudi-Arabien.", "Libanon.", "Israel, Großbritannien und Frankreich."],
     "1956 griffen Israel, Großbritannien und Frankreich den Suezkanal an, nachdem Ägypten ihn nationalisiert hatte. Der Suezkrise folgte eine internationale Diplomatie, die zu einem Rückzug der Angreifer und zur Sicherstellung der internationalen Schifffahrt führte."),

    ("Wer war der Anführer der deutschen Streitkräfte während des Ersten Weltkriegs?",
     "Kaiser Wilhelm II.",
     ["Paul von Hindenburg.", "Erich Ludendorff.", "Kaiser Wilhelm II.", "Otto von Bismarck."],
     "Kaiser Wilhelm II. war der Anführer der deutschen Streitkräfte während des Ersten Weltkriegs. Seine aggressive Außenpolitik und Militärstrategie trugen zum Ausbruch des Krieges und zur Eskalation in Europa bei."),

    ("Welches Land griff 1939 Polen an, was zum Beginn des Zweiten Weltkriegs führte?",
     "Deutschland.",
     ["Russland.", "Frankreich.", "Deutschland.", "Großbritannien."],
     "1939 griff Deutschland Polen an, was zum Beginn des Zweiten Weltkriegs führte. Dieser Angriff wurde durch den Molotow-Ribbentrop-Pakt mit der Sowjetunion unterstützt, der zu einer Teilung Polens zwischen Deutschland und der UdSSR führte."),

    ("Wer war der Oberbefehlshaber der alliierten Streitkräfte während des Zweiten Weltkriegs in Europa?",
     "Dwight D. Eisenhower.",
     ["Franklin D. Roosevelt.", "Winston Churchill.", "Dwight D. Eisenhower.", "Charles de Gaulle."],
     "Dwight D. Eisenhower war der Oberbefehlshaber der alliierten Streitkräfte während des Zweiten Weltkriegs in Europa. Er leitete die erfolgreiche Invasion in der Normandie und später den Sieg der Alliierten über Nazi-Deutschland."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Ereignis markierte das Ende des Kalten Krieges?",
     "Der Fall der Berliner Mauer.",
     ["Die Unterzeichnung des Warschauer Pakts.", "Der Bau der Berliner Mauer.", "Der Fall der Berliner Mauer.", "Die Kubakrise."],
     "Der Fall der Berliner Mauer im Jahr 1989 markierte das Ende des Kalten Krieges. Dieses Symbol des geteilten Europas wurde zum Höhepunkt der Forderung nach Freiheit und der Wiedervereinigung Deutschlands."),

    ("Welcher Krieg wurde durch den sogenannten „Prager Frühling“ in den 1960er Jahren ausgelöst?",
     "Keiner.",
     ["Vietnamkrieg.", "Zweiter Weltkrieg.", "Koreakrieg.", "Keiner."],
     "Der sogenannte „Prager Frühling“ in den 1960er Jahren löste keinen Krieg aus. Es war eine Periode politischer Liberalisierung in der Tschechoslowakei, die jedoch von der Sowjetunion gewaltsam unterdrückt wurde."),

    ("Welches Land war 1979 in den sowjetisch-afghanischen Krieg verwickelt?",
     "Afghanistan.",
     ["Iran.", "Pakistan.", "Indien.", "Afghanistan."],
     "1979 begann der sowjetisch-afghanische Krieg, als die Sowjetunion in Afghanistan intervenierte, um eine pro-sowjetische Regierung zu unterstützen. Dieser Konflikt dauerte fast ein Jahrzehnt und hatte weitreichende geopolitische Folgen."),

    ("In welchem Jahr begann der Amerikanische Bürgerkrieg?",
     "1861.",
     ["1850.", "1861.", "1870.", "1880."],
     "Der Amerikanische Bürgerkrieg begann 1861 und dauerte bis 1865. Er war ein blutiger Konflikt zwischen den Nord- und Südstaaten der USA über die Frage der Sklaverei. Der Krieg endete mit der Niederlage der Konföderation und der Abschaffung der Sklaverei."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer war der Präsident der USA während des Spanisch-Amerikanischen Kriegs von 1898?",
     "William McKinley.",
     ["Theodore Roosevelt.", "Woodrow Wilson.", "William McKinley.", "Andrew Johnson."],
     "William McKinley war der Präsident der USA während des Spanisch-Amerikanischen Kriegs von 1898. Dieser Krieg begann als Konflikt zwischen Spanien und den Vereinigten Staaten aufgrund der Spanischen Kolonialherrschaft in Kuba."),

    ("Welches Land wurde im Falklandkrieg von 1982 von Argentinien angegriffen?",
     "Großbritannien.",
     ["Chile.", "Brasilien.", "Großbritannien.", "Uruguay."],
     "1982 griff Argentinien die Falklandinseln an, die von Großbritannien kontrolliert wurden. Dieser kurze Krieg führte zur Rückeroberung der Inseln durch britische Streitkräfte und stärkte die nationale Einheit in Großbritannien."),

    ("Welcher Krieg wurde durch den Überfall auf Pearl Harbor im Jahr 1941 ausgelöst?",
     "Der Zweite Weltkrieg.",
     ["Der Erste Weltkrieg.", "Der Kalte Krieg.", "Der Vietnamkrieg.", "Der Zweite Weltkrieg."],
     "Der Überfall auf Pearl Harbor im Dezember 1941 führte zum Eintritt der Vereinigten Staaten in den Zweiten Weltkrieg. Dieser Überraschungsangriff durch Japan war ein Wendepunkt in der Geschichte und hatte weitreichende Auswirkungen auf den Kriegsverlauf."),

    ("In welchem Jahr fand die Kubakrise statt?",
     "1962.",
     ["1955.", "1962.", "1970.", "1980."],
     "Die Kubakrise fand im Oktober 1962 statt und war ein gefährliches Wettrüsten zwischen den USA und der Sowjetunion aufgrund der Stationierung sowjetischer Raketen auf Kuba. Die Krise endete mit einer Vereinbarung über den Rückzug der Raketen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer war der Anführer der südafrikanischen Streitkräfte während des Zweiten Burenkriegs?",
     "Paul Kruger.",
     ["Winston Churchill.", "Cecil Rhodes.", "Paul Kruger.", "Nelson Mandela."],
     "Paul Kruger war ein Anführer der Buren während des Zweiten Burenkriegs (1899-1902). Der Konflikt zwischen den Burenrepubliken und dem britischen Empire hatte weitreichende Auswirkungen auf die Zukunft Südafrikas."),

    ("Welches Land griff 1956 den Suezkanal an?",
     "Israel, Großbritannien und Frankreich.",
     ["Ägypten.", "Saudi-Arabien.", "Libanon.", "Israel, Großbritannien und Frankreich."],
     "1956 griffen Israel, Großbritannien und Frankreich den Suezkanal an, nachdem Ägypten ihn nationalisiert hatte. Der Suezkrise folgte eine internationale Diplomatie, die zu einem Rückzug der Angreifer und zur Sicherstellung der internationalen Schifffahrt führte."),

    ("Wer war der Anführer der deutschen Streitkräfte während des Ersten Weltkriegs?",
     "Kaiser Wilhelm II.",
     ["Paul von Hindenburg.", "Erich Ludendorff.", "Kaiser Wilhelm II.", "Otto von Bismarck."],
     "Kaiser Wilhelm II. war der Anführer der deutschen Streitkräfte während des Ersten Weltkriegs. Seine aggressive Außenpolitik und Militärstrategie trugen zum Ausbruch des Krieges und zur Eskalation in Europa bei."),

    ("Welches Land griff 1939 Polen an, was zum Beginn des Zweiten Weltkriegs führte?",
     "Deutschland.",
     ["Russland.", "Frankreich.", "Deutschland.", "Großbritannien."],
     "1939 griff Deutschland Polen an, was zum Beginn des Zweiten Weltkriegs führte. Dieser Angriff wurde durch den Molotow-Ribbentrop-Pakt mit der Sowjetunion unterstützt, der zu einer Teilung Polens zwischen Deutschland und der UdSSR führte."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer war der Anführer der alliierten Streitkräfte im Pazifikkrieg während des Zweiten Weltkriegs?",
     "Douglas MacArthur.",
     ["Dwight D. Eisenhower.", "George S. Patton.", "Douglas MacArthur.", "Chester W. Nimitz."],
     "Douglas MacArthur war der Anführer der alliierten Streitkräfte im Pazifikkrieg während des Zweiten Weltkriegs. Er spielte eine entscheidende Rolle bei der Rückeroberung der Philippinen und der Befreiung anderer besetzter Gebiete von Japan."),

    ("Welche Stadt war Schauplatz der Schlacht von Stalingrad während des Zweiten Weltkriegs?",
     "Stalingrad (heute: Wolgograd).",
     ["Moskau.", "Leningrad (heute: St. Petersburg).", "Kiew.", "Stalingrad (heute: Wolgograd)."],
     "Die Schlacht von Stalingrad (heute bekannt als Wolgograd) war eine der blutigsten Schlachten des Zweiten Weltkriegs. Sie dauerte von 1942 bis 1943 und endete mit einer entscheidenden Niederlage der deutschen Truppen."),

    ("Welcher Krieg wurde durch den Sturz der Monarchie in Russland im Jahr 1917 ausgelöst?",
     "Der Russische Bürgerkrieg.",
     ["Der Krimkrieg.", "Der Zweite Weltkrieg.", "Der Russische Bürgerkrieg.", "Der Syrienkrieg."],
     "Der Sturz der Monarchie in Russland im Jahr 1917 löste den Russischen Bürgerkrieg aus. Dieser Konflikt zwischen den Bolschewiki und den Weißen Armeen dauerte bis 1923 und hatte erhebliche Auswirkungen auf die russische und europäische Geschichte."),

    ("Wer war der US-Präsident während des Vietnamkriegs?",
     "Lyndon B. Johnson.",
     ["John F. Kennedy.", "Richard Nixon.", "Lyndon B. Johnson.", "Dwight D. Eisenhower."],
     "Lyndon B. Johnson war der US-Präsident während des Vietnamkriegs. Unter seiner Führung eskalierte die US-Beteiligung an diesem langwierigen Konflikt in Südostasien, der politische und gesellschaftliche Unruhen in den Vereinigten Staaten auslöste."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("In welchem Jahr begann der Erste Golfkrieg?",
     "1990.",
     ["1980.", "1990.", "2000.", "2010."],
     "Der Erste Golfkrieg begann im Jahr 1990, als der Irak Kuwait überfiel. Diese Invasion führte zu einer multinationalen Koalition unter der Führung der USA, die Kuwait befreite und den Irak zurückdrängte."),

    ("Welches Land führte die Operation Wüstensturm im Jahr 1991 durch?",
     "Die USA und ihre Verbündeten.",
     ["Israel.", "Iran.", "Saudi-Arabien.", "Die USA und ihre Verbündeten."],
     "Die Operation Wüstensturm im Jahr 1991 wurde von den USA und ihren Verbündeten durchgeführt, um den Irak aus Kuwait zu vertreiben. Dieser Konflikt war ein bedeutender Teil des Ersten Golfkriegs."),

    ("Wer war der Anführer der osmanischen Streitkräfte während des Ersten Weltkriegs?",
     "Enver Pascha.",
     ["Mustafa Kemal Atatürk.", "Sultan Mehmed V.", "Enver Pascha.", "Ismail Enver."],
     "Enver Pascha war der Anführer der osmanischen Streitkräfte während des Ersten Weltkriegs. Er war maßgeblich an der Entscheidung beteiligt, auf Seiten der Mittelmächte in den Krieg einzutreten, was zur Niederlage des Osmanischen Reiches führte."),

    ("Welches Land war Schauplatz der Schlacht von Waterloo im Jahr 1815?",
     "Belgien.",
     ["Frankreich.", "Niederlande.", "Deutschland.", "Belgien."],
     "Die Schlacht von Waterloo im Jahr 1815 fand in Belgien statt. Sie war entscheidend für das Ende der napoleonischen Herrschaft in Europa und markierte einen Wendepunkt in den napoleonischen Kriegen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer war der Anführer der napoleonischen Streitkräfte während der Schlacht von Waterloo?",
     "Napoleon Bonaparte.",
     ["Louis-Philippe I.", "Georg III.", "Napoleon Bonaparte.", "Alexander I."],
     "Napoleon Bonaparte war der Anführer der napoleonischen Streitkräfte während der Schlacht von Waterloo. Diese entscheidende Niederlage gegen eine koalitionierte europäische Armee beendete seine Herrschaft als Kaiser der Franzosen."),

    ("In welchem Jahr begann der Krimkrieg?",
     "1853.",
     ["1800.", "1853.", "1900.", "1950."],
     "Der Krimkrieg begann im Jahr 1853 und dauerte bis 1856. Er war ein Konflikt zwischen dem Russischen Kaiserreich einerseits und dem Osmanischen Reich, Frankreich, Großbritannien und Sardinien-Piemont andererseits, der auf der Krimhalbinsel ausgetragen wurde."),

    ("Welcher Krieg wurde durch die Besetzung des Ruhrgebiets im Jahr 1923 ausgelöst?",
     "Der Ruhrkrieg.",
     ["Der Spanische Bürgerkrieg.", "Der Erste Weltkrieg.", "Der Zweite Weltkrieg.", "Der Ruhrkrieg."],
     "Die Besetzung des Ruhrgebiets im Jahr 1923 durch französische und belgische Truppen führte zum sogenannten Ruhrkrieg zwischen Deutschland und den Besatzungsmächten. Dieser Konflikt hatte wirtschaftliche und politische Auswirkungen auf Deutschland und Europa."),

    ("Wer war der Anführer der US-Truppen während des Philippinisch-Amerikanischen Kriegs von 1899 bis 1902?",
     "Arthur MacArthur Jr.",
     ["William Howard Taft.", "George Dewey.", "Arthur MacArthur Jr.", "Theodore Roosevelt."],
     "Arthur MacArthur Jr. war ein General und der Anführer der US-Truppen während des Philippinisch-Amerikanischen Kriegs von 1899 bis 1902. Er spielte eine bedeutende Rolle bei der Niederschlagung der philippinischen Unabhängigkeitsbewegung."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("In welchem Jahr begann der Zweiundsiebzigtägige Krieg zwischen Israel und seinen Nachbarländern?",
     "1967.",
     ["1948.", "1967.", "1973.", "1982."],
     "Der Zweiundsiebzigtägige Krieg begann im Jahr 1967 zwischen Israel und seinen Nachbarländern Ägypten, Jordanien und Syrien. Israel erlangte während dieses Konflikts die Kontrolle über das Westjordanland, den Gazastreifen, Ostjerusalem, die Sinai-Halbinsel und die Golanhöhen."),

    ("Welches Land führte die Operation Barbarossa im Jahr 1941 durch?",
     "Deutschland.",
     ["Italien.", "Japan.", "Sowjetunion.", "Deutschland."],
     "Die Operation Barbarossa im Jahr 1941 war der deutsche Angriff auf die Sowjetunion während des Zweiten Weltkriegs. Dieser Überraschungsangriff markierte den Beginn eines verheerenden Krieges an der Ostfront."),

    ("Wer war der Anführer der polnischen Streitkräfte während des Polnisch-Sowjetischen Kriegs von 1919 bis 1921?",
     "Józef Piłsudski.",
     ["Ignacy Mościcki.", "Lech Wałęsa.", "Józef Piłsudski.", "Władysław Sikorski."],
     "Józef Piłsudski war der Anführer der polnischen Streitkräfte während des Polnisch-Sowjetischen Kriegs von 1919 bis 1921. Dieser Konflikt war eine bedeutende Auseinandersetzung zwischen der jungen Zweiten Polnischen Republik und der Sowjetunion um territoriale Grenzen und Einflusssphären."),
    
        ("Welcher Krieg wurde durch die Ermordung von Erzherzog Franz Ferdinand ausgelöst?",
     "Erster Weltkrieg",
     ["Zweiter Weltkrieg", "Koreakrieg", "Erster Weltkrieg", "Vietnamkrieg"],
     "1914 begann ein globaler Konflikt, nachdem Erzherzog Franz Ferdinand ermordet wurde. Dieser Krieg führte zu tiefgreifenden politischen Veränderungen und endete 1918."),
        
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Krieg war der Hauptkonflikt zwischen 1939 und 1945, an dem viele Nationen beteiligt waren?",
     "Zweiter Weltkrieg",
     ["Erster Weltkrieg", "Zweiter Weltkrieg", "Kalter Krieg", "Golfkrieg"],
     "Der Hauptkonflikt in der ersten Hälfte des 20. Jahrhunderts betraf viele Nationen und endete 1945. Die Ursachen waren weitreichende politische Spannungen und aggressive Expansionen."),

    ("Welcher Konflikt führte zur Unabhängigkeit der USA von Großbritannien?",
     "Amerikanischer Unabhängigkeitskrieg",
     ["Amerikanischer Unabhängigkeitskrieg", "Krieg von 1812", "Mexikanisch-Amerikanischer Krieg", "Bürgerkrieg"],
     "In der späten Hälfte des 18. Jahrhunderts führten Unzufriedenheit und Forderungen nach Selbstbestimmung zum Konflikt, der die amerikanischen Kolonien von Großbritannien befreite."),

    ("Welcher Krieg fand in den Jahren 1950 bis 1953 auf der koreanischen Halbinsel statt?",
     "Koreakrieg",
     ["Vietnamkrieg", "Koreakrieg", "Erster Weltkrieg", "Zweiter Weltkrieg"],
     "Zwischen Nord- und Südkorea entbrannte ein bewaffneter Konflikt, der internationale Mächte involvierte und 1953 endete. Der Krieg führte zu anhaltender Teilung auf der Halbinsel."),

    ("Welcher Krieg zwischen 1861 und 1865 führte zur Abschaffung der Sklaverei in den USA?",
     "Amerikanischer Bürgerkrieg",
     ["Krieg von 1812", "Amerikanischer Bürgerkrieg", "Mexikanisch-Amerikanischer Krieg", "Spanisch-Amerikanischer Krieg"],
     "Konflikte zwischen den Nord- und Südstaaten der USA führten zu tiefgreifenden sozialen und politischen Veränderungen, darunter die Abschaffung der Sklaverei."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Konflikt führte zum Sturz der Weimarer Republik und zur Gründung des Dritten Reiches?",
     "Machtergreifung durch die Nationalsozialisten",
     ["Kalter Krieg", "Machtergreifung durch die Nationalsozialisten", "Erster Weltkrieg", "Zweiter Weltkrieg"],
     "Im frühen 20. Jahrhundert ermöglichte eine politische Umwälzung die Etablierung eines totalitären Regimes in Deutschland, das tiefgreifende globale Auswirkungen hatte."),

    ("Welcher Krieg, der 1899 begann, war ein Kampf um die Unabhängigkeit der Philippinen von den USA?",
     "Philippinisch-Amerikanischer Krieg",
     ["Erster Weltkrieg", "Philippinisch-Amerikanischer Krieg", "Zweiter Weltkrieg", "Spanisch-Amerikanischer Krieg"],
     "Der Widerstand gegen koloniale Herrschaft in den letzten Jahren des 19. Jahrhunderts führte zu einem bedeutenden bewaffneten Konflikt zwischen den USA und einer asiatischen Nation."),

    ("Welcher Krieg führte zur Gründung des Staates Israel im Jahr 1948?",
     "Arabisch-Israelischer Krieg",
     ["Zweiter Weltkrieg", "Arabisch-Israelischer Krieg", "Erster Weltkrieg", "Koreakrieg"],
     "Nach dem Ende des britischen Mandats über Palästina kam es zu einem bedeutenden Konflikt, der zur Schaffung eines neuen Staates und langfristigen geopolitischen Spannungen führte."),

    ("Welcher Krieg zwischen 1812 und 1815 beinhaltete einen Konflikt zwischen den USA und dem Vereinigten Königreich?",
     "Krieg von 1812",
     ["Krieg von 1812", "Zweiter Weltkrieg", "Amerikanischer Bürgerkrieg", "Krieg von 1815"],
     "Handelsstreitigkeiten und politische Spannungen führten zu einem militärischen Konflikt zwischen den USA und Großbritannien in den frühen Jahren des 19. Jahrhunderts."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Konflikt führte zur Errichtung des Eisernen Vorhangs und der Teilung Deutschlands nach dem Zweiten Weltkrieg?",
     "Kalter Krieg",
     ["Kalter Krieg", "Zweiter Weltkrieg", "Vietnamkrieg", "Erster Weltkrieg"],
     "Die politische Spaltung Europas nach dem Zweiten Weltkrieg führte zu einem langen und geopolitisch bedeutsamen Konflikt, der die internationale Politik stark beeinflusste."),

    ("Welcher Krieg führte zur Unabhängigkeit Indiens von Großbritannien im Jahr 1947?",
     "Independence War",
     ["Independence War", "Kalter Krieg", "Zweiter Weltkrieg", "Indisch-Pakistanischer Krieg"],
     "Der jahrzehntelange Kampf um Selbstbestimmung endete mit der Loslösung von Großbritannien und der Schaffung zweier unabhängiger Nationen auf dem indischen Subkontinent."),

    ("Welcher Konflikt, der 1936 bis 1939 stattfand, war ein bewaffneter Kampf zwischen republikanischen und nationalistischen Kräften in Spanien?",
     "Spanischer Bürgerkrieg",
     ["Erster Weltkrieg", "Spanischer Bürgerkrieg", "Kalter Krieg", "Zweiter Weltkrieg"],
     "Ein erheblicher interner Konflikt in Spanien, der zwischen den republikanischen Kräften und einer nationalistischen Bewegung stattfand, führte zu weitreichenden politischen Veränderungen."),

    ("Welcher Krieg begann mit dem Überfall auf Pearl Harbor und führte zur Beteiligung der USA am Zweiten Weltkrieg?",
     "Pazifikkrieg",
     ["Pazifikkrieg", "Vietnamkrieg", "Zweiter Weltkrieg", "Koreakrieg"],
     "Ein überraschender Angriff auf eine wichtige militärische Basis führte dazu, dass die USA aktiv in einen globalen Krieg eintraten, der weite Teile Asiens und des Pazifikraums betraf."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    
    ("Welcher Konflikt führte zur Schaffung des Völkerbundes, der die Weltpolitik nach dem Ersten Weltkrieg prägen sollte?",
     "Erster Weltkrieg",
     ["Zweiter Weltkrieg", "Kalter Krieg", "Erster Weltkrieg", "Völkerbund-Konflikt"],
     "Der massive Konflikt, der große Teile Europas verwüstete, führte zu dem Versuch, eine internationale Organisation zur Friedenssicherung zu schaffen."),

    ("Welcher Konflikt im 19. Jahrhundert führte zur Vereinigung der italienischen Staaten unter der Führung von Garibaldi und Cavour?",
     "Italienische Einigungsbewegung",
     ["Französisch-Preußischer Krieg", "Italienische Einigungsbewegung", "Kalter Krieg", "Erster Weltkrieg"],
     "Durch eine Serie von militärischen und politischen Aktionen wurden die verschiedenen italienischen Staaten in der Mitte des 19. Jahrhunderts unter einer zentralen Regierung vereint."),

    ("Welcher Krieg zwischen 1954 und 1975 war ein bewaffneter Konflikt in Südostasien, der massive internationale Interventionen zur Folge hatte?",
     "Vietnamkrieg",
     ["Zweiter Weltkrieg", "Koreakrieg", "Vietnamkrieg", "Golfkrieg"],
     "Ein langwieriger und intensiver Konflikt in Südostasien zog zahlreiche internationale Akteure in den Kampf und führte zu weitreichenden politischen und sozialen Veränderungen."),

    ("Welcher Krieg endete mit dem Frieden von Versailles und dem Aufstieg des Nationalsozialismus?",
     "Erster Weltkrieg",
     ["Zweiter Weltkrieg", "Erster Weltkrieg", "Kalter Krieg", "Koreakrieg"],
     "Der umfassende Konflikt des frühen 20. Jahrhunderts führte zu einem Vertrag, der nicht nur die geopolitische Landschaft veränderte, sondern auch zu erheblichen politischen Unruhen in Europa führte."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Krieg führte zur Aufteilung des ehemaligen Jugoslawien in mehrere unabhängige Staaten?",
     "Jugoslawienkriege",
     ["Zweiter Weltkrieg", "Jugoslawienkriege", "Erster Weltkrieg", "Kalter Krieg"],
     "Ein mehrjähriger Konflikt in den 1990er Jahren führte zur Zerschlagung eines ehemaligen sozialistischen Staates und zur Bildung neuer Nationalstaaten in der Region."),

    ("Welcher Krieg zwischen 1967 und 1970 beinhaltete einen bewaffneten Konflikt zwischen Ägypten und Israel, der in der Region des Suezkanals stattfand?",
     "Sechstagekrieg",
     ["Zweiter Weltkrieg", "Sechstagekrieg", "Kalter Krieg", "Golfkrieg"],
     "Ein kurzer, aber entscheidender Konflikt zwischen israelischen und arabischen Streitkräften führte zu weitreichenden geopolitischen Veränderungen in der Region um den Suezkanal."),
    
        ("Welcher Krieg zwischen 1914 und 1918 wurde durch die Ermordung des Erzherzogs Franz Ferdinand ausgelöst?",
     "Erster Weltkrieg",
     ["Zweiter Weltkrieg", "Koreakrieg", "Erster Weltkrieg", "Vietnamkrieg"],
     "Der Erste Weltkrieg begann 1914 und wurde durch die Ermordung des österreichischen Erzherzogs Franz Ferdinand ausgelöst. Der Krieg führte zu massiven geopolitischen Veränderungen und legte den Grundstein für den Zweiten Weltkrieg."),

    ("Welcher Krieg führte 1941 zur direkten Beteiligung der USA nach dem Angriff auf Pearl Harbor?",
     "Zweiter Weltkrieg",
     ["Erster Weltkrieg", "Koreakrieg", "Vietnamkrieg", "Zweiter Weltkrieg"],
     "Der Zweite Weltkrieg begann 1939, aber der Angriff auf Pearl Harbor am 7. Dezember 1941 führte zur direkten Beteiligung der USA, was den Verlauf des Krieges maßgeblich beeinflusste."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Krieg von 1792 bis 1802 bestand zwischen Frankreich und verschiedenen europäischen Koalitionen?",
     "Französische Revolutionskriege",
     ["Napoleonische Kriege", "Siebenjähriger Krieg", "Krimkrieg", "Französische Revolutionskriege"],
     "Die Französischen Revolutionskriege waren ein Zeitraum von 1792 bis 1802, in dem die französische Revolution das gesamteuropäische Gleichgewicht herausforderte und zu einer Reihe von Konflikten führte."),

    ("Welcher Krieg von 1956 wurde durch die britisch-französische Invasion im Suezkanal ausgelöst?",
     "Sueskrise",
     ["Golfkrieg", "Indisch-Pakistanischer Krieg", "Sueskrise", "Vietnamkrieg"],
     "Die Sueskrise von 1956 war eine militärische Auseinandersetzung, die durch die britisch-französische Invasion des Suezkanals verursacht wurde und zu internationalem Druck auf die Invasoren führte."),

    ("Welcher Krieg führte 1812 zu einem Konflikt zwischen den USA und Großbritannien, der auch als zweiter Unabhängigkeitskrieg bekannt ist?",
     "Krieg von 1812",
     ["Krieg von 1812", "Mexikanisch-Amerikanischer Krieg", "Vietnamkrieg", "Unabhängigkeitskrieg"],
     "Der Krieg von 1812 war ein Konflikt zwischen den USA und Großbritannien, der wegen Handelsstreitigkeiten und dem Impressment amerikanischer Seemänner ausbrach und als zweiter Unabhängigkeitskrieg bekannt ist."),

    ("Welcher Krieg endete 1917 mit dem Vertrag von Brest-Litowsk und führte zur Beendigung der Kampfhandlungen zwischen Deutschland und Russland?",
     "Erster Weltkrieg",
     ["Zweiter Weltkrieg", "Koreakrieg", "Vietnamkrieg", "Erster Weltkrieg"],
     "Der Vertrag von Brest-Litowsk 1917 beendete die Kampfhandlungen zwischen dem Deutschen Kaiserreich und dem Russischen Kaiserreich im Ersten Weltkrieg und führte zur Abtrennung großer Teile des russischen Territoriums."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Krieg von 1815 führte zur endgültigen Niederlage Napoleons und zur Wiederherstellung der Monarchie in Frankreich?",
     "Wasserloo",
     ["Napoleonische Kriege", "Krimkrieg", "Wasserloo", "Französische Revolution"],
     "Die Schlacht von Waterloo 1815 führte zur endgültigen Niederlage Napoleons Bonaparte und markierte das Ende der napoleonischen Ära, was zur Wiederherstellung der Monarchie in Frankreich führte."),

    ("Welcher Krieg zwischen 1861 und 1865 führte zur Abschaffung der Sklaverei in den Vereinigten Staaten?",
     "Amerikanischer Bürgerkrieg",
     ["Krieg von 1812", "Mexikanisch-Amerikanischer Krieg", "Amerikanischer Bürgerkrieg", "Französisch-Indochinesischer Krieg"],
     "Der Amerikanische Bürgerkrieg führte 1861 bis 1865 zur Beendigung der Sklaverei in den USA und zur Stärkung der Union, indem er die secessionistischen Südstaaten besiegte."),

    ("Welcher Konflikt zwischen 1999 und 2001 war eine militärische Auseinandersetzung im Kosovo, die eine internationale Intervention erforderte?",
     "Kosovo-Krieg",
     ["Bosnienkrieg", "Golfkrieg", "Kosovo-Krieg", "Jugoslawienkriege"],
     "Der Kosovo-Krieg von 1999 war ein militärischer Konflikt zwischen der NATO und Jugoslawien, der zur internationalen Intervention führte und letztlich die Unabhängigkeit des Kosovo förderte."),

    ("Welcher Krieg, auch als der 'Zweite Indochinakrieg' bekannt, führte zum Sturz der französischen Kolonialherrschaft in Vietnam?",
     "Vietnamkrieg",
     ["Französisch-Indochinesischer Krieg", "Koreakrieg", "Golfkrieg", "Vietnamkrieg"],
     "Der Vietnamkrieg, der 1955 begann, setzte sich aus dem vorhergehenden Indochinakrieg fort und führte zur Unabhängigkeit Vietnams von der französischen Kolonialherrschaft und später zur Teilung des Landes."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Konflikt zwischen 2011 und 2012 war eine militärische Auseinandersetzung in Libyen, die zu einem internationalen Eingreifen führte?",
     "Libyenkrieg",
     ["Irakkrieg", "Syrischer Bürgerkrieg", "Ägyptische Revolution", "Libyenkrieg"],
     "Der Libyenkrieg 2011 begann mit einem internationalen militärischen Eingreifen, das zur Stürzung von Muammar al-Gaddafi führte und eine neue Phase der Unsicherheit in Libyen einleitete."),

    ("Welcher Krieg führte 1949 zur Gründung der NATO als militärisches Bündnis?",
     "Zweiter Weltkrieg",
     ["Erster Weltkrieg", "Koreakrieg", "Vietnamkrieg", "Zweiter Weltkrieg"],
     "Der Zweite Weltkrieg führte zur Gründung der NATO 1949 als Antwort auf die Bedrohung durch die Sowjetunion und als Teil der geopolitischen Neuordnung nach dem Krieg."),

    ("Welcher Krieg, der 1979 begann, war ein bewaffneter Konflikt zwischen der Sowjetunion und der afghanischen Regierung gegen die Mudschaheddin?",
     "Sowjetisch-Afghanischer Krieg",
     ["Vietnamkrieg", "Koreakrieg", "Golfkrieg", "Sowjetisch-Afghanischer Krieg"],
     "Der Sowjetisch-Afghanische Krieg von 1979 bis 1989 war ein Konflikt, bei dem die Sowjetunion versuchte, die kommunistische Regierung Afghanistans zu unterstützen, aber auf starken Widerstand der Mudschaheddin stieß."),

    ("Welcher Krieg zwischen 1947 und 1948 führte zur ersten Teilung von Palästina und zur Gründung des Staates Israel?",
     "Arabisch-Israelischer Krieg",
     ["Vietnamkrieg", "Suezkrise", "Koreakrieg", "Arabisch-Israelischer Krieg"],
     "Der Arabisch-Israelische Krieg von 1948 begann nach der Gründung des Staates Israel und führte zur Teilung Palästinas und zur Schaffung des Staates Israel."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    
    ("Welcher Krieg im Jahr 1868 bis 1871 war ein bewaffneter Konflikt zwischen den USA und den Sioux-Stämmen, der durch den Goldrausch ausgelöst wurde?",
     "Lakota-Krieg",
     ["Koreanischer Krieg", "Vietnamkrieg", "Krieg von 1812", "Lakota-Krieg"],
     "Der Lakota-Krieg war ein bewaffneter Konflikt, der durch die Expansion der US-amerikanischen Siedler und den Goldrausch ausgelöst wurde und zu bedeutenden Auseinandersetzungen zwischen den US-Streitkräften und den Sioux-Stämmen führte."),

    ("Welcher Krieg, auch als 'Zweiter Burenkrieg' bekannt, führte zur Bildung der Union Südafrika?",
     "Burenkrieg",
     ["Krimkrieg", "Napoleonische Kriege", "Opiumkrieg", "Burenkrieg"],
     "Der Burenkrieg, der von 1899 bis 1902 dauerte, war ein Konflikt zwischen britischen Truppen und Burenrepubliken in Südafrika, der zur Gründung der Union Südafrika und zur britischen Vorherrschaft führte."),

    ("Welcher Krieg von 1990 bis 1991 führte zur Befreiung Kuwaits und zur Beendigung der irakischen Invasion?",
     "Golfkrieg",
     ["Irakkrieg", "Bosnienkrieg", "Jugoslawienkriege", "Golfkrieg"],
     "Der Golfkrieg begann 1990 nach der irakischen Invasion in Kuwait. Die internationale Koalition unter Führung der USA intervenierte und befreite Kuwait im Februar 1991."),

    ("Welcher Krieg führte 1991 zur Unabhängigkeit Eritreas von Äthiopien?",
     "Eritreischer Unabhängigkeitskrieg",
     ["Bosnienkrieg", "Golfkrieg", "Kriegsverbrechen-Kriegsführung", "Eritreischer Unabhängigkeitskrieg"],
     "Der Eritreische Unabhängigkeitskrieg dauerte von 1961 bis 1991 und führte zur Unabhängigkeit Eritreas von Äthiopien. Der Krieg endete mit dem Abkommen von Asmara und der Anerkennung der Unabhängigkeit durch Äthiopien.")
    
]

class PopupView(ModalView):
    def __init__(self, title, content, **kw):
        super(PopupView, self).__init__(**kw)
        self.size_hint = (0.8, 0.3)
        self.pos_hint = {"center_x": 0.5, "center_y": 0.5}

        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)
        layout.add_widget(Label(text=title, halign="center"))
        layout.add_widget(content)

        self.add_widget(layout)
        
class GEKriege(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(GEKriege, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Kriege"
        self.fragen = fragenkriege

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

  
fragenphilo = [
    
        ("Welche Theorie besagt, dass Wissen nur durch Erfahrung erlangt werden kann?",
     "Empirismus",
     ["Empirismus", "Rationalismus", "Skeptizismus", "Idealismus"],
     "Ein zentraler Gedanke dieser Theorie ist, dass Wissen hauptsächlich durch Sinneserfahrungen und Beobachtungen erworben wird."),

    ("Welche philosophische Theorie behauptet, dass die Realität vollständig aus Gedanken besteht?",
     "Idealismus",
     ["Materialismus", "Idealismus", "Empirismus", "Rationalismus"],
     "Diese Theorie definiert die Realität durch geistige oder ideelle Prinzipien und nicht durch materielle Dinge."),

    ("Welche Philosophie lehrt, dass moralische Prinzipien universell und unveränderlich sind?",
     "Deontologie",
     ["Relativismus", "Empirismus", "Utilitarismus", "Deontologie"],
     "In dieser ethischen Theorie sind bestimmte moralische Prinzipien unabhängig von den Konsequenzen und gelten als universell."),

    ("Welcher Philosoph ist bekannt für seine Theorie des kategorischen Imperativs?",
     "Immanuel Kant",
     ["John Stuart Mill", "Immanuel Kant", "Aristoteles", "Platon"],
     "Der Entwickler dieser Theorie stellt vor, dass moralische Handlungen nach universellen Prinzipien beurteilt werden sollten."),

    ("Welche Theorie besagt, dass die Wahrheit von den Folgen einer Handlung abhängt?",
     "Utilitarismus",
     ["Idealismus", "Utilitarismus", "Deontologie", "Rationalismus"],
     "Diese ethische Theorie bewertet die moralische Richtigkeit einer Handlung anhand ihrer Folgen und dem Nutzen für die Mehrheit."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Was ist die philosophische Schule, die nach dem berühmten Lehrer Sokrates benannt ist?",
     "Die Sokratik.",
     ["Die Platonische Akademie.", "Die Epikureische Schule.", "Die Stoa.", "Die Sokratik."],
     "Sokrates gründete keine Schule im eigentlichen Sinne, aber seine Methode des Fragens und Diskutierens wurde als Sokratik bekannt und von seinen Schülern wie Platon fortgeführt."),

    ("Welcher Philosoph ist bekannt für seine Theorie des kategorischen Imperativs?",
     "Immanuel Kant.",
     ["Aristoteles.", "Thomas Hobbes.", "David Hume.", "Immanuel Kant."],
     "Immanuel Kant ist bekannt für seine Theorie des kategorischen Imperativs, die besagt, dass Handlungen nach Prinzipien erfolgen sollen, die universell gültig sind und ohne Ausnahme gelten."),

    ("Welcher Philosoph ist der Begründer des Existentialismus und Autor von Werken wie „Sein und Zeit“?",
     "Martin Heidegger.",
     ["Friedrich Nietzsche.", "Jean-Paul Sartre.", "Simone de Beauvoir.", "Martin Heidegger."],
     "Martin Heidegger ist bekannt als Begründer des Existentialismus und für sein Werk „Sein und Zeit“, das das menschliche Dasein und die Frage nach dem Sein untersucht."),

    ("Welcher antike griechische Philosoph war der Lehrer von Aristoteles und ein Schüler von Platon?",
     "Platon.",
     ["Heraklit.", "Epikur.", "Sokrates.", "Platon."],
     "Platon war der Lehrer von Aristoteles und ein Schüler von Sokrates. Seine Ideenlehre und Theorie der Formen hatten einen tiefgreifenden Einfluss auf die Philosophie der Antike."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche philosophische Strömung betont die Bedeutung der Vernunft und Logik bei der Untersuchung von Wissen und Erkenntnis?",
     "Der Rationalismus.",
     ["Der Empirismus.", "Der Konstruktivismus.", "Der Pragmatismus.", "Der Rationalismus."],
     "Der Rationalismus betont die Rolle der Vernunft und Logik bei der Erkenntnisgewinnung und der Untersuchung von Wissen, im Gegensatz zum Empirismus, der auf Erfahrung und Beobachtung basiert."),
    
    
    ("Wer war der antike griechische Philosoph, der für seine Dialoge bekannt ist, in denen er Fragen der Ethik und Erkenntnistheorie untersuchte?",
     "Platon.",
     ["Aristoteles.", "Sokrates.", "Epikur.", "Platon."],
     "Platon ist bekannt für seine Dialoge, in denen er Fragen der Ethik, Erkenntnistheorie und Metaphysik untersuchte. Er gründete die Platonische Akademie und war ein bedeutender Einfluss auf die westliche Philosophie."),

    ("Welcher Philosoph formulierte die Theorie der „unsichtbaren Hand“ in seinem Werk über den Wohlstand der Nationen?",
     "Adam Smith.",
     ["Karl Marx.", "John Locke.", "David Hume.", "Adam Smith."],
     "Adam Smith formulierte die Theorie der „unsichtbaren Hand“ in seinem Werk „Der Wohlstand der Nationen“. Diese Theorie beschreibt, wie individuelles Eigeninteresse zur Förderung des Allgemeinwohls führen kann."),

    ("Welcher deutsche Philosoph und Ökonom entwickelte die Theorien des historischen Materialismus und der dialektischen Entwicklung?",
     "Karl Marx.",
     ["Friedrich Engels.", "Max Weber.", "Michel Foucault.", "Karl Marx."],
     "Karl Marx entwickelte die Theorien des historischen Materialismus und der dialektischen Entwicklung. Er ist bekannt für seine Analyse des Kapitalismus und seine Rolle als einer der einflussreichsten Denker des 19. Jahrhunderts."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer war der deutsche Philosoph, der die Theorie der Lebenswelt und die phänomenologische Soziologie entwickelte?",
     "Alfred Schütz.",
     ["Hans-Georg Gadamer.", "Karl Jaspers.", "Edmund Husserl.", "Alfred Schütz."],
     "Alfred Schütz war ein deutscher Philosoph, der die Theorie der Lebenswelt und die phänomenologische Soziologie entwickelte. Er untersuchte die alltäglichen Erfahrungen der Menschen und die Bedeutungskonstruktion in der sozialen Interaktion."),
    
    ("Welcher Philosoph entwickelte die Theorie des „Wohlgepflegten Lebens“ als Ziel der Ethik?",
     "Aristoteles",
     ["Kant", "Hume", "Sokrates", "Aristoteles"],
     "In seiner Ethik betont dieser Philosoph, dass das Ziel moralischen Handelns in einem erfüllten und tugendhaften Leben liegt."),

    ("Welche Philosophie behauptet, dass Wissen vor allem durch den Verstand und nicht durch Sinneserfahrung erlangt wird?",
     "Rationalismus",
     ["Idealismus", "Empirismus", "Rationalismus", "Materialismus"],
     "Diese Theorie besagt, dass Wissen primär durch den Verstand und das Denken gewonnen wird und nicht durch Sinneserfahrungen."),

    ("Welcher Philosoph ist bekannt für seine Theorie des „Tabula Rasa“, die besagt, dass der menschliche Geist bei der Geburt ein unbeschriebenes Blatt ist?",
     "John Locke",
     ["René Descartes", "David Hume", "John Locke", "Immanuel Kant"],
     "Er stellte die Theorie vor, dass der menschliche Geist bei der Geburt leer ist und Wissen durch Erfahrung erworben wird."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Philosophie vertritt die Ansicht, dass moralische Werte subjektiv und von individuellen oder kulturellen Perspektiven abhängen?",
     "Relativismus",
     ["Deontologie", "Utilitarismus", "Relativismus", "Empirismus"],
     "Diese Ansicht besagt, dass moralische Werte und Wahrheiten relativ zu individuellen oder kulturellen Perspektiven sind."),


    
    ("Welcher antike griechische Philosoph war der Begründer der Eleatischen Schule und ist bekannt für seine Paradoxa der Bewegung und des Seins?",
     "Parmenides.",
     ["Demokrit.", "Anaximander.", "Heraklit.", "Parmenides."],
     "Parmenides war ein antiker griechischer Philosoph, der die Eleatische Schule gründete. Er ist bekannt für seine Paradoxa der Bewegung und des Seins, die die Natur der Realität und der Veränderung hinterfragten."),

    ("Welcher deutsche Philosoph war ein Schüler von Martin Heidegger und bekannt für sein Werk „Sein und Zeit“?",
     "Martin Heidegger.",
     ["Friedrich Nietzsche.", "Edmund Husserl.", "Jean-Paul Sartre.", "Martin Heidegger."],
     "Martin Heidegger war ein deutscher Philosoph, der für sein Werk „Sein und Zeit“ bekannt ist. Er untersuchte das menschliche Dasein und die Frage nach dem Sein, beeinflusste die Existenzphilosophie und die Phänomenologie."),
    
    ("Welcher französische Philosoph war ein zentraler Vertreter der Poststrukturalismus-Bewegung und verfasste das Werk „Das Begehren nach dem Text“?",
     "Roland Barthes.",
     ["Michel Foucault.", "Jacques Derrida.", "Jean-François Lyotard.", "Roland Barthes."],
     "Roland Barthes war ein französischer Philosoph und Literaturkritiker, bekannt für seine Arbeiten im Bereich des Poststrukturalismus. Sein Werk „Das Begehren nach dem Text“ untersuchte die Rolle von Sprache und Bedeutung in literarischen Werken und die Konstruktion von Textualität."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher antike griechische Philosoph war ein Schüler von Platon und Lehrer von Alexander dem Großen?",
     "Aristoteles.",
     ["Sokrates.", "Platon.", "Epikur.", "Aristoteles."],
     "Aristoteles war ein antiker griechischer Philosoph, der ein Schüler von Platon war und später als Lehrer von Alexander dem Großen fungierte. Er ist bekannt für seine umfassenden Untersuchungen in Bereichen wie Logik, Ethik, Politik und Naturwissenschaften."),
    
    ("Welcher französische Philosoph prägte den Begriff der Biopolitik und verfasste Werke wie „Überwachen und Strafen“?",
     "Michel Foucault.",
     ["Jacques Derrida.", "Roland Barthes.", "Jean-François Lyotard.", "Michel Foucault."],
     "Michel Foucault war ein französischer Philosoph, der den Begriff der Biopolitik prägte. Sein Werk „Überwachen und Strafen“ untersuchte die Entwicklung der modernen Gefängnisstrafe und die Mechanismen der sozialen Kontrolle."),

    ("Welcher antike griechische Philosoph war der Begründer der Kyrenaischen Schule und lehrte die Ethik des Hedonismus?",
     "Aristippos von Kyrene.",
     ["Epikur.", "Zenon von Kition.", "Pyrrhon von Elis.", "Aristippos von Kyrene."],
     "Aristippos von Kyrene war ein antiker griechischer Philosoph, der die Kyrenaische Schule gründete. Er lehrte die Ethik des Hedonismus und betonte das Streben nach Lust und das Vermeiden von Schmerz als Grundlage für ein gutes Leben."),
    
      ("Welche Theorie besagt, dass das Wissen über die Welt durch das Erkennen und Verstehen von Prinzipien und Strukturen erlangt wird?",
     "Strukturalismus",
     ["Konstruktivismus", "Empirismus", "Rationalismus", "Strukturalismus"],
     "Hierbei wird Wissen durch das Erkennen und Analysieren von zugrunde liegenden Prinzipien und Strukturen erworben."),
      
       ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
      
    ("Welcher Philosoph entwickelte die Theorie des „Skeptizismus“, die Zweifel an der Möglichkeit von sicherem Wissen äußert?",
     "Pyrrhon von Elis",
     ["Aristoteles", "Sokrates", "Platon", "Pyrrhon von Elis"],
     "Dieser Philosoph ist bekannt für seine Skeptizismus-Theorie, die die Möglichkeit des sicheren Wissens in Frage stellt."),

    ("Welche philosophische Theorie besagt, dass die Realität durch das bewusste Erleben und die Wahrnehmung des Individuums definiert wird?",
     "Phänomenologie",
     ["Idealismus", "Phänomenologie", "Rationalismus", "Empirismus"],
     "Hierbei wird die Realität durch die bewusste Erfahrung und Wahrnehmung des Individuums definiert und betont die subjektive Perspektive."),

    ("Welche Philosophie besagt, dass die Welt und ihre Phänomene nur in Bezug auf ihre Funktionalität verstanden werden können?",
     "Funktionalismus",
     ["Empirismus", "Funktionalismus", "Strukturalismus", "Idealismus"],
     "Diese Theorie besagt, dass die Welt durch die Funktion und Rolle ihrer Phänomene innerhalb eines Systems verstanden werden sollte."),

    ("Welcher Philosoph ist bekannt für die Entwicklung der Theorie des „Gesellschaftsvertrags“, der die Grundlage für die politische Philosophie liefert?",
     "Thomas Hobbes",
     ["Karl Marx", "John Locke", "Jean-Jacques Rousseau", "Thomas Hobbes"],
     "Er entwickelte die Theorie des „Gesellschaftsvertrags“, die besagt, dass politische Institutionen auf einem Vertrag zwischen Individuen basieren."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher deutsche Philosoph war ein Vertreter der Lebensphilosophie und bekannt für sein Werk „Die Welt als Wille und Vorstellung“?",
     "Arthur Schopenhauer.",
     ["Georg Wilhelm Friedrich Hegel.", "Friedrich Nietzsche.", "Immanuel Kant.", "Arthur Schopenhauer."],
     "Arthur Schopenhauer war ein deutscher Philosoph, bekannt für sein Werk „Die Welt als Wille und Vorstellung“. Er war ein bedeutender Vertreter der Lebensphilosophie und untersuchte die Natur des Willens und seine Auswirkungen auf menschliches Handeln und Leiden."),

    ("Welcher antike griechische Philosoph war ein Schüler von Sokrates und Lehrer von Aristoteles?",
     "Platon.",
     ["Epikur.", "Zenon von Kition.", "Parmenides.", "Platon."],
     "Platon war ein antiker griechischer Philosoph, der ein Schüler von Sokrates war und später Aristoteles unterrichtete. Er gründete die Akademie in Athen und lehrte die Theorie der Ideen sowie die Tugendlehre."),
    
    ("Welcher deutsche Philosoph war ein Vertreter des Konstruktivismus und bekannt für sein Werk „Erkenntnis für freie Menschen“?",
     "Friedrich von Schiller.",
     ["Immanuel Kant.", "Gottfried Wilhelm Leibniz.", "Johann Gottlieb Fichte.", "Friedrich von Schiller."],
     "Friedrich von Schiller war ein deutscher Philosoph und Schriftsteller, bekannt für sein Werk „Erkenntnis für freie Menschen“. Er war ein Vertreter des Konstruktivismus und untersuchte die ästhetische Bildung sowie die Freiheit des Denkens und Handelns."),

    ("Welcher antike griechische Philosoph war der Begründer der Stoischen Schule und lehrte die Ethik der Tugend?",
     "Zenon von Kition.",
     ["Epikur.", "Aristoteles.", "Pyrrhon von Elis.", "Zenon von Kition."],
     "Zenon von Kition war ein antiker griechischer Philosoph, der die Stoische Schule gründete. Er lehrte die Ethik der Tugend und betonte die Entwicklung moralischer Exzellenz durch rationale Kontrolle über Emotionen und äußere Umstände."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher deutsche Philosoph war ein Vertreter der Phänomenologie und bekannt für sein Werk „Sein und Zeit“?",
     "Martin Heidegger.",
     ["Edmund Husserl.", "Friedrich Nietzsche.", "Max Scheler.", "Martin Heidegger."],
     "Martin Heidegger war ein deutscher Philosoph, bekannt für sein Werk „Sein und Zeit“. Er war ein Vertreter der Phänomenologie und untersuchte das menschliche Dasein in seiner Beziehung zum Sein und zur Zeit."),

    ("Welcher antike griechische Philosoph war bekannt für seine epikureische Philosophie und die Lehre der Atome?",
     "Epikur.",
     ["Heraklit.", "Aristoteles.", "Sokrates.", "Epikur."],
     "Epikur war ein antiker griechischer Philosoph, bekannt für seine epikureische Philosophie. Er lehrte, dass das Streben nach Lust und das Vermeiden von Schmerz die höchsten Ziele im Leben sind, und dass die Welt aus unteilbaren Atomen besteht."),

    
    ("Welcher deutsche Philosoph war ein Vertreter der kritischen Theorie und Mitbegründer der Frankfurter Schule?",
     "Max Horkheimer.",
     ["Theodor W. Adorno.", "Herbert Marcuse.", "Jürgen Habermas.", "Max Horkheimer."],
     "Max Horkheimer war ein deutscher Philosoph und Soziologe, Mitbegründer der Frankfurter Schule und Vertreter der kritischen Theorie. Gemeinsam mit Theodor W. Adorno kritisierte er die modernen gesellschaftlichen und kulturellen Bedingungen."),

    ("Welcher antike griechische Philosoph war der Begründer der skeptischen Philosophie und lehrte die Aussetzung des Urteils?",
     "Pyrrhon von Elis.",
     ["Heraklit.", "Platon.", "Epikur.", "Pyrrhon von Elis."],
     "Pyrrhon von Elis war ein antiker griechischer Philosoph, der die skeptische Philosophie begründete. Er lehrte die Aussetzung des Urteils und die Überzeugung, dass es unmöglich ist, absolutes Wissen zu erlangen."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher deutsche Philosoph war ein Vertreter der Hermeneutik und bekannt für seine Werke über die philosophische Anthropologie?",
     "Arnold Gehlen.",
     ["Hans-Georg Gadamer.", "Karl Jaspers.", "Martin Heidegger.", "Arnold Gehlen."],
     "Arnold Gehlen war ein deutscher Philosoph, bekannt für seine Werke über philosophische Anthropologie. Er untersuchte die Natur des Menschen und seine kulturelle Entwicklung im Kontext der Evolution und der technischen Zivilisation."),

    ("Welcher antike griechische Philosoph war der Begründer der Schule der Skeptiker und lehrte die Aussetzung des Urteils?",
     "Pyrrhon von Elis.",
     ["Epikur.", "Aristoteles.", "Sokrates.", "Pyrrhon von Elis."],
     "Pyrrhon von Elis war ein antiker griechischer Philosoph, der die Schule der Skeptiker gründete. Er lehrte die Aussetzung des Urteils und betonte die Relativität von Wahrnehmungen und Überzeugungen."),
    
    ("Welcher deutsche Philosoph war ein Vertreter der Kritischen Theorie und verfasste Werke über die Ästhetik und die Theorie des kommunikativen Handelns?",
     "Jürgen Habermas.",
     ["Herbert Marcuse.", "Theodor W. Adorno.", "Max Horkheimer.", "Jürgen Habermas."],
     "Jürgen Habermas ist ein deutscher Philosoph, bekannt für seine Theorien über die Kritische Theorie und das kommunikative Handeln. Seine Werke zur Ästhetik und zur Theorie der Demokratie haben die moderne philosophische Diskussion stark beeinflusst."),
    
    ("Welcher deutsche Philosoph war ein Vertreter der philosophischen Anthropologie und bekannt für sein Werk „Mensch und Übermensch“?",
     "Arnold Gehlen.",
     ["Hans-Georg Gadamer.", "Karl Jaspers.", "Martin Heidegger.", "Arnold Gehlen."],
     "Arnold Gehlen war ein deutscher Philosoph, bekannt für seine Werke zur philosophischen Anthropologie. In seinem Werk „Mensch und Übermensch“ untersuchte er die Natur des Menschen und die kulturelle Evolution im Kontext der modernen Gesellschaft."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher antike griechische Philosoph war bekannt für seine Ontologie und seine Lehre der Vorsehung?",
     "Platon.",
     ["Aristoteles.", "Epikur.", "Zenon von Kition.", "Platon."],
     "Platon war ein antiker griechischer Philosoph, bekannt für seine Ontologie und seine Lehre der Vorsehung. Er lehrte, dass abstrakte Ideen die wahren Realitäten sind und dass die Welt von einem höheren Prinzip geordnet wird."),

    ("Welcher französische Philosoph war ein Vertreter der Dekonstruktion und verfasste das Werk „Grammatologie“?",
     "Jacques Derrida.",
     ["Michel Foucault.", "Roland Barthes.", "Jean-François Lyotard.", "Jacques Derrida."],
     "Jacques Derrida war ein französischer Philosoph, bekannt für seine Theorien zur Dekonstruktion. Sein Werk „Grammatologie“ untersuchte die Rolle der Sprache und der Schrift in der philosophischen Analyse und kritisierte die traditionelle Vorstellung von festen Bedeutungen."),

    ("Welcher antike griechische Philosoph war der Begründer der Akademie in Athen und ein Schüler von Sokrates?",
     "Platon.",
     ["Aristoteles.", "Epikur.", "Zenon von Kition.", "Platon."],
     "Platon war ein antiker griechischer Philosoph, der die Akademie in Athen gründete. Er war ein Schüler von Sokrates und lehrte eine Philosophie, die auf der Unterscheidung zwischen Wissen und Meinung basierte."),

    ("Welcher deutsche Philosoph war bekannt für seine Werke zur Rechtsphilosophie und Ethik, darunter „Grundlegung zur Metaphysik der Sitten“?",
     "Immanuel Kant.",
     ["Georg Wilhelm Friedrich Hegel.", "Friedrich Nietzsche.", "Arthur Schopenhauer.", "Immanuel Kant."],
     "Immanuel Kant war ein deutscher Philosoph, bekannt für seine Werke zur Rechtsphilosophie und Ethik. In seiner „Grundlegung zur Metaphysik der Sitten“ entwickelte er den kategorischen Imperativ als moralisches Prinzip."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
        ("Welche Theorie behauptet, dass die Realität aus einer unendlichen Anzahl von Teilchen besteht, die durch ihre Bewegungen und Wechselwirkungen die Welt konstituieren?",
     "Materialismus",
     ["Materialismus", "Idealismus", "Empirismus", "Rationalismus"],
     "Diese Theorie geht davon aus, dass die Welt aus materiellen Substanzen besteht, deren Wechselwirkungen alle Phänomene erklären."),

    ("Welche Theorie besagt, dass der Mensch nicht nur durch natürliche, sondern auch durch soziale und kulturelle Faktoren beeinflusst wird?",
     "Sozialkonstruktivismus",
     ["Idealismus", "Empirismus", "Sozialkonstruktivismus", "Rationalismus"],
     "Diese Theorie argumentiert, dass Wissen und Realität durch soziale Interaktionen und kulturelle Kontexte konstruiert werden."),

    ("Welcher Philosoph argumentierte, dass die Ethik auf dem Prinzip der praktischen Vernunft basiert, das universell anwendbar ist?",
     "Immanuel Kant",
     ["Immanuel Kant", "John Stuart Mill", "Aristoteles", "Sokrates"],
     "Dieser Philosoph argumentierte, dass die Ethik auf universell anwendbarer praktischer Vernunft basiert und als Grundlage für moralisches Handeln dient."),

    ("Welche Theorie behauptet, dass der Sinn des Lebens und die Werte in den individuellen Erfahrungen und der subjektiven Sichtweise jedes Einzelnen liegen?",
     "Existentialismus",
     ["Existentialismus", "Utilitarismus", "Rationalismus", "Deontologie"],
     "Hierbei wird der Sinn des Lebens und die Werte in der individuellen Existenz und subjektiven Erfahrung gefunden."),

     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher antike griechische Philosoph war der Begründer der Sophistik und lehrte die Kunst des rhetorischen Sprechens?",
     "Protagoras.",
     ["Diogenes von Sinope.", "Heraklit.", "Parmenides.", "Protagoras."],
     "Protagoras war ein antiker griechischer Philosoph, der als Begründer der Sophistik gilt. Er lehrte die Kunst des rhetorischen Sprechens und war bekannt für seinen Agnostizismus bezüglich der Götter und der Wahrheit."),

    ("Welcher französische Philosoph war ein Vertreter des Postmodernismus und verfasste das Werk „Das postmoderne Wissen“?",
     "Jean-François Lyotard.",
     ["Michel Foucault.", "Roland Barthes.", "Jacques Derrida.", "Jean-François Lyotard."],
     "Jean-François Lyotard war ein französischer Philosoph, bekannt für seine Arbeiten im Bereich des Postmodernismus. Sein Werk „Das postmoderne Wissen“ untersuchte die Rolle von Wissen und Macht in der postmodernen Gesellschaft."),
    
    
    ("Welcher antike griechische Philosoph war bekannt für seine Theorie der Atomistik und die Lehre des Determinismus?",
     "Demokratie.",
     ["Heraklit.", "Aristoteles.", "Sokrates.", "Demokratie."],
     "Demokrit war ein antiker griechischer Philosoph, bekannt für seine Theorie der Atomistik. Er lehrte, dass alle Dinge aus unteilbaren Atomen bestehen und dass die Ereignisse im Universum deterministisch ablaufen."),

    ("Welcher deutsche Philosoph war ein Vertreter der Philosophie des Geistes und bekannt für sein Werk „Phänomenologie des Geistes“?",
     "Georg Wilhelm Friedrich Hegel.",
     ["Immanuel Kant.", "Arthur Schopenhauer.", "Friedrich Nietzsche.", "Georg Wilhelm Friedrich Hegel."],
     "Georg Wilhelm Friedrich Hegel war ein deutscher Philosoph, bekannt für seine Philosophie des Geistes. In seiner „Phänomenologie des Geistes“ untersuchte er die Entwicklung des menschlichen Bewusstseins und die Dialektik der Geschichte."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher antike griechische Philosoph war bekannt für seine Schule der Freundschaft und das Prinzip des gegenseitigen Nutzens?",
     "Epikur.",
     ["Aristoteles.", "Platon.", "Zenon von Kition.", "Epikur."],
     "Epikur war ein antiker griechischer Philosoph, der die Schule der Freundschaft gründete. Er lehrte, dass wahres Glück durch Freundschaft und gegenseitigen Nutzen erreicht wird, und dass das Streben nach Lust und das Vermeiden von Schmerz die höchsten Ziele im Leben sind."),

    ("Welcher deutsche Philosoph war bekannt für seine Theorie des Willens zur Macht und die Lehre des Übermenschen?",
     "Friedrich Nietzsche.",
     ["Immanuel Kant.", "Arthur Schopenhauer.", "Georg Wilhelm Friedrich Hegel.", "Friedrich Nietzsche."],
     "Friedrich Nietzsche war ein deutscher Philosoph, bekannt für seine Theorie des Willens zur Macht. Er entwickelte die Lehre des Übermenschen und kritisierte die traditionellen moralischen Werte und die christliche Religion."),
    
    ("Welcher antike griechische Philosoph war bekannt für seine Schriften über das Wohlstandsideal und die Theorie der Ataraxie?",
     "Epikur.",
     ["Aristoteles.", "Platon.", "Zenon von Kition.", "Epikur."],
     "Epikur war ein antiker griechischer Philosoph, der das Wohlstandsideal und die Theorie der Ataraxie lehrte. Er betonte, dass wahres Glück durch inneren Frieden und die Freiheit von Angst und Schmerz erreicht wird."),

    ("Welcher deutsche Philosoph war ein Vertreter des Kritischen Rationalismus und bekannt für seine Falsifikationstheorie?",
     "Karl Popper.",
     ["Theodor W. Adorno.", "Max Horkheimer.", "Jürgen Habermas.", "Karl Popper."],
     "Karl Popper war ein österreichisch-britischer Philosoph, bekannt für seine Theorie des Kritischen Rationalismus. Seine Falsifikationstheorie besagt, dass wissenschaftliche Theorien widerlegbar sein müssen, um als wissenschaftlich zu gelten."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher antike griechische Philosoph war bekannt für seine Theorie der Natur und die Lehre vom Logos?",
     "Heraklit.",
     ["Parmenides.", "Aristoteles.", "Sokrates.", "Heraklit."],
     "Heraklit war ein antiker griechischer Philosoph, bekannt für seine Theorie der Natur und die Lehre vom Logos. Er prägte den Ausspruch „Alles fließt“ und betonte die ständige Veränderung und den Wandel der Welt."),

    ("Welcher deutsche Philosoph war ein Vertreter des deutschen Idealismus und bekannt für seine „Wissenschaftslehre“?",
     "Johann Gottlieb Fichte.",
     ["Friedrich Schelling.", "Georg Wilhelm Friedrich Hegel.", "Arthur Schopenhauer.", "Johann Gottlieb Fichte."],
     "Johann Gottlieb Fichte war ein deutscher Philosoph, bekannt für seine „Wissenschaftslehre“. Er war ein Vertreter des deutschen Idealismus und betonte die aktive Rolle des Ichs in der Konstruktion der Wirklichkeit."),
    
    ("Welcher antike griechische Philosoph war der Begründer der Atomtheorie und lehrte die Existenz von Atomen und Leere?",
     "Leukippos.",
     ["Demokrit.", "Heraklit.", "Parmenides.", "Leukippos."],
     "Leukippos war ein antiker griechischer Philosoph, der die Atomtheorie begründete. Er lehrte, dass das Universum aus Atomen und Leere besteht und dass alle Phänomene auf die Bewegung und Interaktion dieser Atome zurückzuführen sind."),

    ("Welcher deutsche Philosoph war bekannt für seine Theorie des „categorischen Imperativs“ und die Lehre der praktischen Vernunft?",
     "Immanuel Kant.",
     ["Friedrich Nietzsche.", "Arthur Schopenhauer.", "Georg Wilhelm Friedrich Hegel.", "Immanuel Kant."],
     "Immanuel Kant war ein deutscher Philosoph, bekannt für seine Theorie des „categorischen Imperativs“. Seine Lehre der praktischen Vernunft betont, dass moralische Handlungen durch universelle Prinzipien bestimmt werden sollten."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher antike griechische Philosoph war bekannt für seine Theorie der Tugend und das Konzept der „mesotes“ (Mitte)?",
     "Aristoteles.",
     ["Platon.", "Epikur.", "Sokrates.", "Aristoteles."],
     "Aristoteles war ein antiker griechischer Philosoph, bekannt für seine Theorie der Tugend und das Konzept der „mesotes“ (Mitte). Er lehrte, dass tugendhaftes Handeln das richtige Maß zwischen Übermaß und Mangel darstellt."),

    ("Welcher deutsche Philosoph war ein Vertreter der Frankfurter Schule und verfasste das Werk „Dialektik der Aufklärung“?",
     "Theodor W. Adorno.",
     ["Herbert Marcuse.", "Jürgen Habermas.", "Max Horkheimer.", "Theodor W. Adorno."],
     "Theodor W. Adorno war ein deutscher Philosoph und Soziologe, bekannt für seine Arbeiten zur Kritischen Theorie. Zusammen mit Max Horkheimer verfasste er das Werk „Dialektik der Aufklärung“, in dem sie die Paradoxien der modernen Gesellschaft analysierten."),
    
    ("Welcher antike griechische Philosoph war bekannt für seine Lehre der „Harmonia“ und das Konzept des „Logos“?",
     "Heraklit.",
     ["Platon.", "Aristoteles.", "Pythagoras.", "Heraklit."],
     "Heraklit war ein antiker griechischer Philosoph, bekannt für seine Lehre der „Harmonia“ und das Konzept des „Logos“. Er betonte die Einheit der Gegensätze und die Rolle des „Logos“ als ordnendes Prinzip im Universum."),

    ("Welcher deutsche Philosoph war bekannt für seine Theorie der Ästhetik und das Konzept des „Erhabenen“?",
     "Immanuel Kant.",
     ["Arthur Schopenhauer.", "Friedrich Nietzsche.", "Georg Wilhelm Friedrich Hegel.", "Immanuel Kant."],
     "Immanuel Kant war ein deutscher Philosoph, bekannt für seine Theorie der Ästhetik. Sein Konzept des „Erhabenen“ beschreibt die Erfahrung, die über die bloße Schönheit hinausgeht und eine tiefere, oft überwältigende emotionale Reaktion hervorruft."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher antike griechische Philosoph war bekannt für seine Theorie des „Unbewegten Bewegers“?",
     "Aristoteles.",
     ["Platon.", "Epikur.", "Sokrates.", "Aristoteles."],
     "Aristoteles war ein antiker griechischer Philosoph, der die Theorie des „Unbewegten Bewegers“ entwickelte. Er argumentierte, dass es eine erste Ursache geben muss, die selbst unbewegt ist und als Ursprung aller Bewegung im Universum dient."),

    ("Welcher deutsche Philosoph war bekannt für seine „Philosophie der Freiheit“ und das Werk „System der transzendentalen Idealismus“?",
     "Friedrich Wilhelm Joseph Schelling.",
     ["Georg Wilhelm Friedrich Hegel.", "Arthur Schopenhauer.", "Friedrich Nietzsche.", "Friedrich Wilhelm Joseph Schelling."],
     "Friedrich Wilhelm Joseph Schelling war ein deutscher Philosoph, bekannt für seine „Philosophie der Freiheit“. In seinem Werk „System der transzendentalen Idealismus“ untersuchte er die Beziehung zwischen Natur und Geist und die Rolle der menschlichen Freiheit."),
    
    
    ("Welcher antike griechische Philosoph war bekannt für seine Lehre der „Apatheia“ (Gleichmut) und das Prinzip der stoischen Weisheit?",
     "Zenon von Kition.",
     ["Platon.", "Aristoteles.", "Epikur.", "Zenon von Kition."],
     "Zenon von Kition war ein antiker griechischer Philosoph, der die Stoische Schule gründete. Er lehrte die Lehre der „Apatheia“ (Gleichmut) und das Prinzip der stoischen Weisheit, das die rationale Kontrolle über die Emotionen betont."),
    
    ("Welcher deutsche Philosoph war ein Vertreter der „Philosophie des Lebens“ und bekannt für sein Werk „Die Welt als Wille und Vorstellung“?",
     "Arthur Schopenhauer.",
     ["Georg Wilhelm Friedrich Hegel.", "Friedrich Nietzsche.", "Immanuel Kant.", "Arthur Schopenhauer."],
     "Arthur Schopenhauer war ein deutscher Philosoph, bekannt für sein Werk „Die Welt als Wille und Vorstellung“. Er war ein Vertreter der „Philosophie des Lebens“ und betonte die Bedeutung des Willens als treibende Kraft hinter allem Sein."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher antike griechische Philosoph war bekannt für seine Ethik der Eudaimonie und die Theorie der praktischen Vernunft?",
     "Aristoteles.",
     ["Platon.", "Epikur.", "Sokrates.", "Aristoteles."],
     "Aristoteles war ein antiker griechischer Philosoph, bekannt für seine Ethik der Eudaimonie. Seine Theorie der praktischen Vernunft betonte die Entwicklung tugendhaften Verhaltens als Mittel zum Erreichen von Glückseligkeit und persönlichem Wohlstand."),

    ("Welcher deutsche Philosoph war ein Vertreter der Lebensphilosophie und bekannt für sein Werk „Zur Genealogie der Moral“?",
     "Friedrich Nietzsche.",
     ["Immanuel Kant.", "Georg Wilhelm Friedrich Hegel.", "Arthur Schopenhauer.", "Friedrich Nietzsche."],
     "Friedrich Nietzsche war ein deutscher Philosoph, bekannt für sein Werk „Zur Genealogie der Moral“. Er war ein Vertreter der Lebensphilosophie und kritisierte die traditionellen Werte zugunsten einer Ethik, die auf individueller Macht und Selbstbestimmung basiert."),
    
    ("Welcher antike griechische Philosoph war bekannt für seine Theorie der Seelenwanderung und die Lehre der Tugend?",
     "Pythagoras.",
     ["Heraklit.", "Parmenides.", "Aristoteles.", "Pythagoras."],
     "Pythagoras war ein antiker griechischer Philosoph, bekannt für seine Theorie der Seelenwanderung. Er lehrte, dass die Seele unsterblich ist und sich durch viele Inkarnationen entwickelt, basierend auf den Tugenden und Sünden des vorherigen Lebens."),

    ("Welcher deutsche Philosoph war ein Vertreter der Hermeneutik und bekannt für sein Werk „Wahrheit und Methode“?",
     "Hans-Georg Gadamer.",
     ["Martin Heidegger.", "Edmund Husserl.", "Karl Jaspers.", "Hans-Georg Gadamer."],
     "Hans-Georg Gadamer war ein deutscher Philosoph, bekannt für sein Werk „Wahrheit und Methode“. Er war ein Vertreter der Hermeneutik und untersuchte die Natur der Interpretation und die Bedeutung von Vorurteilen in der philosophischen Analyse."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher antike griechische Philosoph war bekannt für seine Schriften über die Theorie der Wahrheit und die Logik des Arguments?",
     "Platon.",
     ["Aristoteles.", "Epikur.", "Zenon von Kition.", "Platon."],
     "Platon war ein antiker griechischer Philosoph, bekannt für seine Schriften über die Theorie der Wahrheit und die Logik des Arguments. Er entwickelte die Idee der abstrakten Ideen und ihre Beziehung zur realen Welt."),
    
       ("Welcher Philosoph ist bekannt für seine Theorie des „Gesellschaftsvertrags“ und seine Überzeugung, dass soziale Gerechtigkeit durch die Gleichheit aller Menschen erreicht werden sollte?",
     "Jean-Jacques Rousseau",
     ["Karl Marx", "John Locke", "Thomas Hobbes", "Jean-Jacques Rousseau"],
     "Dieser Philosoph entwickelte die Theorie des „Gesellschaftsvertrags“, die die Grundlage für soziale Gerechtigkeit und die Gleichheit aller Menschen betont."),

    ("Welche Philosophie besagt, dass der menschliche Geist nur durch logische Analysen und Vernunftkenntnisse den wahren Zustand der Welt erkennen kann?",
     "Rationalismus",
     ["Idealismus", "Rationalismus", "Skeptizismus", "Empirismus"],
     "Diese Philosophie betont, dass wahres Wissen durch Vernunft und logische Analysen erlangt wird und unabhängig von Erfahrung existieren kann."),

    ("Welche Philosophie besagt, dass ethische Werte von der Fähigkeit eines Individuums zur Vernunft und zur rationalen Überlegung abhängen?",
     "Rationalistische Ethik",
     ["Rationalistische Ethik", "Relativismus", "Utilitarismus", "Deontologie"],
     "Diese Theorie behauptet, dass ethische Werte durch die Fähigkeit zur Vernunft und rationalen Überlegung bestimmt werden."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Philosoph ist bekannt für seine Theorie des „Kategorischen Imperativs“, der das ethische Handeln auf universellen Prinzipien basieren lässt?",
     "Immanuel Kant",
     ["Immanuel Kant", "John Stuart Mill", "Aristoteles", "Sokrates"],
     "Dieser Philosoph ist bekannt für den „Kategorischen Imperativ“, der besagt, dass moralisches Handeln auf universellen Prinzipien basieren sollte.")
    
]
        
class GEPhilosophie(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(GEPhilosophie, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Philosophie"
        self.fragen = fragenphilo

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

   
                
    
fragenmytho = [
    
    ("Welcher griechische Gott ist der Herrscher über den Olymp und der Gott des Himmels?",
     "Zeus",
     ["Poseidon", "Zeus", "Apollo", "Hades"],
     "In der griechischen Mythologie ist Zeus der Herrscher über den Olymp und der Gott des Himmels. Er ist bekannt für seine Macht und Autorität über die anderen Götter und Menschen."),

    ("Welche griechische Göttin ist die Göttin der Weisheit, der Strategie und des Krieges?",
     "Athene",
     ["Hera", "Artemis", "Aphrodite.", "Athene"],
     "Athene ist in der griechischen Mythologie die Göttin der Weisheit, der Strategie und des Krieges. Sie ist bekannt für ihre Klugheit und ihre Unterstützung der Helden in Schlachten."),

    ("Welcher römische Gott ist der Gott des Krieges, des Äquivalents zur griechischen Athene?",
     "Minerva",
     ["Mars", "Jupiter", "Minerva", "Neptun"],
     "Minerva ist in der römischen Mythologie die Göttin des Krieges, der Weisheit und der Strategie. Sie entspricht der griechischen Athene und ist eine wichtige Schutzgöttin Roms."),

    ("Welcher griechische Gott ist der Gott des Meeres und der Bruder von Zeus?",
     "Poseidon.",
     ["Hades", "Apollo", "Hermes", "Poseidon"],
     "Poseidon ist in der griechischen Mythologie der Gott des Meeres, der Stürme und der Pferde. Er ist der Bruder von Zeus und Hera und teilt sich die Herrschaft über die Welt mit ihnen."),

    ("Welche griechische Göttin ist die Göttin der Liebe, der Schönheit und der sinnlichen Begierde?",
     "Aphrodite",
     ["Aphrodite", "Artemis", "Athene", "Hera"],
     "Aphrodite ist in der griechischen Mythologie die Göttin der Liebe, der Schönheit und der sinnlichen Begierde. Sie spielt eine zentrale Rolle in vielen mythologischen Erzählungen, die sich um Liebe und Leidenschaft drehen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher römische Gott ist der Gott des Krieges und der Äquivalent zur griechischen Athene?",
     "Mars",
     ["Jupiter", "Mars", "Vulkan", "Neptun"],
     "Mars ist in der römischen Mythologie der Gott des Krieges, der Fruchtbarkeit und des Ackerbaus. Er entspricht dem griechischen Gott Ares und ist einer der wichtigsten Kriegsgötter im römischen Pantheon."),

    ("Welcher griechische Gott ist der Gott der Unterwelt und der Bruder von Zeus und Poseidon?",
     "Hades",
     ["Dionysos", "Apollo", "Hermes", "Hades"],
     "Hades ist in der griechischen Mythologie der Gott der Unterwelt und der Toten. Er regiert über die Schattenwelt und teilt die Herrschaft über das Universum mit seinen Brüdern Zeus und Poseidon."),

    ("Welche griechische Göttin ist die Königin der Götter und die Göttin der Ehe?",
     "Hera",
     ["Artemis", "Athene", "Aphrodite", "Hera"],
     "Hera ist in der griechischen Mythologie die Königin der Götter und die Göttin der Ehe und der Familie. Sie ist die Schwester und Ehefrau von Zeus und eine mächtige Göttin im Olymp."),

    ("Welcher römische Gott ist der König der Götter und der Gott des Himmels?",
     "Jupiter",
     ["Mars", "Neptun", "Pluto", "Jupiter"],
     "Jupiter ist in der römischen Mythologie der König der Götter und der Gott des Himmels und des Wetters. Er entspricht dem griechischen Gott Zeus und ist der mächtigste Gott im römischen Pantheon."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher griechische Gott ist der Gott der Musik, des Lichts, der Heilung und der Weissagung?",
     "Apollo",
     ["Dionysos", "Hermes", "Ares", "Apollo"],
     "Apollo ist in der griechischen Mythologie der Gott der Musik, des Lichts, der Heilung und der Weissagung. Er ist bekannt für seine Schönheit, seine musikalischen Fähigkeiten und seine Rolle als Beschützer der Künste."),

    ("Welche griechische Göttin ist die Göttin der Jagd, der Wildnis und der Mondes?",
     "Artemis",
     ["Hera", "Aphrodite", "Hestia", "Artemis"],
     "Artemis ist in der griechischen Mythologie die Göttin der Jagd, der Wildnis und des Mondes. Sie ist bekannt für ihre Unabhängigkeit, ihre Jagdfähigkeiten und ihre enge Verbindung zur Natur."),

    ("Welcher römische Gott ist der Gott des Meeres und der Äquivalent zur griechischen Poseidon?",
     "Neptun",
     ["Jupiter", "Mars", "Pluto", "Neptun"],
     "Neptun ist in der römischen Mythologie der Gott des Meeres, der Stürme und der Pferde. Er entspricht dem griechischen Gott Poseidon und ist eine wichtige Figur im römischen Pantheon."),

    ("Welcher griechische Gott ist der Gott des Handels, der Reisenden und der Diebe?",
     "Hermes",
     ["Ares", "Dionysos", "Apollo", "Hermes"],
     "Er  ist in der griechischen Mythologie der Gott des Handels, der Reisenden, der Diebe und der Botschafter. Er ist bekannt für seine Schnelligkeit und List sowie seine Rolle als Vermittler zwischen Göttern und Menschen. Dabei trägt er sogar den Namen einer Modemarke"),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche griechische Göttin ist die Göttin der Familie, des Heims und des Herdfeuers?",
     "Hestia",
     ["Demeter", "Persephone", "Hera", "Hestia"],
     "Hestia ist in der griechischen Mythologie die Göttin der Familie, des Heims und des Herdfeuers. Sie wird oft als eine der sanftmütigsten und liebevollsten Göttinnen im Olymp angesehen."),

    ("Welcher griechische Gott ist der Gott des Weins, der Ekstase und der Freude?",
     "Dionysos",
     ["Hermes", "Apollo", "Ares", "Dionysos"],
     "Dionysos ist in der griechischen Mythologie der Gott des Weins, der Ekstase und der Freude. Er ist bekannt für seine wilden Feste, seine Transformationskraft und seine Verbindung zur Natur und zum Lebenszyklus."),

    ("Welche griechische Göttin ist die Göttin des Frühlings, der Natur und der Landwirtschaft?",
     "Demeter",
     ["Hera", "Aphrodite", "Artemis", "Demeter"],
     "Demeter ist in der griechischen Mythologie die Göttin des Frühlings, der Natur und der Landwirtschaft. Sie ist bekannt für ihre Verbindung zur Erde und ihre Fähigkeit, Fruchtbarkeit und Wachstum zu fördern."),

    ("Welcher griechische Gott ist der Gott des Krieges und der Gewalt?",
     "Ares",
     ["Dionysos", "Hermes", "Apollo", "Ares"],
     "Ares ist in der griechischen Mythologie der Gott des Krieges, der Gewalt und der Zerstörung. Er verkörpert die dunklere Seite des Krieges und wird oft als impulsiv und brutal dargestellt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche griechische Göttin ist die Göttin der Jugend, der Fröhlichkeit und der Frühlingsblumen?",
     "Persephone",
     ["Hestia", "Demeter", "Artemis", "Persephone"],
     "Persephone ist in der griechischen Mythologie die Göttin der Jugend, der Fröhlichkeit und der Frühlingsblumen. Sie ist bekannt für ihre Rolle als Königin der Unterwelt und ihre Rückkehr zur Erde im Frühling."),
    
        ("Welche Theorie besagt, dass Wissen nur durch Erfahrung erlangt werden kann?",
     "Empirismus",
     ["Rationalismus", "Idealismus", "Empirismus", "Skeptizismus"],
     "Ein zentraler Gedanke dieser Theorie ist, dass Wissen hauptsächlich durch Sinneserfahrungen und Beobachtungen erworben wird."),

    ("Welche philosophische Theorie behauptet, dass die Realität vollständig aus Gedanken besteht?",
     "Idealismus",
     ["Idealismus", "Materialismus", "Empirismus", "Rationalismus"],
     "Diese Theorie definiert die Realität durch geistige oder ideelle Prinzipien und nicht durch materielle Dinge."),

    ("Welche Philosophie lehrt, dass moralische Prinzipien universell und unveränderlich sind?",
     "Deontologie",
     ["Utilitarismus", "Relativismus", "Deontologie", "Empirismus"],
     "In dieser ethischen Theorie sind bestimmte moralische Prinzipien unabhängig von den Konsequenzen und gelten als universell."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Philosoph ist bekannt für seine Theorie des kategorischen Imperativs?",
     "Immanuel Kant",
     ["Aristoteles", "Platon", "Immanuel Kant", "John Stuart Mill"],
     "Der Entwickler dieser Theorie stellt vor, dass moralische Handlungen nach universellen Prinzipien beurteilt werden sollten."),

    ("Welche Theorie besagt, dass die Wahrheit von den Folgen einer Handlung abhängt?",
     "Utilitarismus",
     ["Idealismus", "Deontologie", "Utilitarismus", "Rationalismus"],
     "Diese ethische Theorie bewertet die moralische Richtigkeit einer Handlung anhand ihrer Folgen und dem Nutzen für die Mehrheit."),

    ("Welcher Philosoph entwickelte die Theorie des „Wohlgepflegten Lebens“ als Ziel der Ethik?",
     "Aristoteles",
     ["Kant", "Sokrates", "Aristoteles", "Hume"],
     "In seiner Ethik betont dieser Philosoph, dass das Ziel moralischen Handelns in einem erfüllten und tugendhaften Leben liegt."),

    ("Welche Philosophie behauptet, dass Wissen vor allem durch den Verstand und nicht durch Sinneserfahrung erlangt wird?",
     "Rationalismus",
     ["Idealismus", "Empirismus", "Materialismus", "Rationalismus"],
     "Diese Theorie besagt, dass Wissen primär durch den Verstand und das Denken gewonnen wird und nicht durch Sinneserfahrungen."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Philosoph ist bekannt für seine Theorie des „Tabula Rasa“, die besagt, dass der menschliche Geist bei der Geburt ein unbeschriebenes Blatt ist?",
     "John Locke",
     ["René Descartes", "Immanuel Kant", "John Locke", "David Hume"],
     "Er stellte die Theorie vor, dass der menschliche Geist bei der Geburt leer ist und Wissen durch Erfahrung erworben wird."),

    ("Welche Philosophie vertritt die Ansicht, dass moralische Werte subjektiv und von individuellen oder kulturellen Perspektiven abhängen?",
     "Relativismus",
     ["Empirismus", "Relativismus", "Deontologie", "Utilitarismus"],
     "Diese Ansicht besagt, dass moralische Werte und Wahrheiten relativ zu individuellen oder kulturellen Perspektiven sind."),

    ("Welche Theorie besagt, dass das Wissen über die Welt durch das Erkennen und Verstehen von Prinzipien und Strukturen erlangt wird?",
     "Strukturalismus",
     ["Empirismus", "Rationalismus", "Strukturalismus", "Konstruktivismus"],
     "Hierbei wird Wissen durch das Erkennen und Analysieren von zugrunde liegenden Prinzipien und Strukturen erworben."),

    ("Welcher Philosoph entwickelte die Theorie des „Skeptizismus“, die Zweifel an der Möglichkeit von sicherem Wissen äußert?",
     "Pyrrhon von Elis",
     ["Aristoteles", "Sokrates", "Pyrrhon von Elis", "Platon"],
     "Dieser Philosoph ist bekannt für seine Skeptizismus-Theorie, die die Möglichkeit des sicheren Wissens in Frage stellt."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche philosophische Theorie besagt, dass die Realität durch das bewusste Erleben und die Wahrnehmung des Individuums definiert wird?",
     "Phänomenologie",
     ["Idealismus", "Rationalismus", "Empirismus", "Phänomenologie"],
     "Hierbei wird die Realität durch die bewusste Erfahrung und Wahrnehmung des Individuums definiert und betont die subjektive Perspektive."),

    ("Welche Philosophie besagt, dass die Welt und ihre Phänomene nur in Bezug auf ihre Funktionalität verstanden werden können?",
     "Funktionalismus",
     ["Strukturalismus", "Funktionalismus", "Empirismus", "Idealismus"],
     "Diese Theorie besagt, dass die Welt durch die Funktion und Rolle ihrer Phänomene innerhalb eines Systems verstanden werden sollte."),

    ("Welcher Philosoph ist bekannt für die Entwicklung der Theorie des „Gesellschaftsvertrags“, der die Grundlage für die politische Philosophie liefert?",
     "Thomas Hobbes",
     ["John Locke", "Jean-Jacques Rousseau", "Karl Marx", "Thomas Hobbes"],
     "Er entwickelte die Theorie des „Gesellschaftsvertrags“, die besagt, dass politische Institutionen auf einem Vertrag zwischen Individuen basieren."),

    ("Welche Theorie behauptet, dass die Realität aus einer unendlichen Anzahl von Teilchen besteht, die durch ihre Bewegungen und Wechselwirkungen die Welt konstituieren?",
     "Materialismus",
     ["Idealismus", "Empirismus", "Materialismus", "Rationalismus"],
     "Diese Theorie geht davon aus, dass die Welt aus materiellen Substanzen besteht, deren Wechselwirkungen alle Phänomene erklären."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Theorie besagt, dass der Mensch nicht nur durch natürliche, sondern auch durch soziale und kulturelle Faktoren beeinflusst wird?",
     "Sozialkonstruktivismus",
     ["Idealismus", "Rationalismus", "Sozialkonstruktivismus", "Empirismus"],
     "Diese Theorie argumentiert, dass Wissen und Realität durch soziale Interaktionen und kulturelle Kontexte konstruiert werden."),

    ("Welcher Philosoph argumentierte, dass die Ethik auf dem Prinzip der praktischen Vernunft basiert, das universell anwendbar ist?",
     "Immanuel Kant",
     ["Aristoteles", "John Stuart Mill", "Sokrates", "Immanuel Kant"],
     "Dieser Philosoph argumentierte, dass die Ethik auf universell anwendbarer praktischer Vernunft basiert und als Grundlage für moralisches Handeln dient."),

    ("Welche Theorie behauptet, dass der Sinn des Lebens und die Werte in den individuellen Erfahrungen und der subjektiven Sichtweise jedes Einzelnen liegen?",
     "Existentialismus",
     ["Existentialismus", "Deontologie", "Utilitarismus", "Rationalismus"],
     "Hierbei wird der Sinn des Lebens und die Werte in der individuellen Existenz und subjektiven Erfahrung gefunden."),

    ("Welcher Philosoph ist bekannt für seine Theorie des „Gesellschaftsvertrags“ und seine Überzeugung, dass soziale Gerechtigkeit durch die Gleichheit aller Menschen erreicht werden sollte?",
     "Jean-Jacques Rousseau",
     ["John Locke", "Karl Marx", "Thomas Hobbes", "Jean-Jacques Rousseau"],
     "Dieser Philosoph entwickelte die Theorie des „Gesellschaftsvertrags“, die die Grundlage für soziale Gerechtigkeit und die Gleichheit aller Menschen betont."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Philosophie besagt, dass der menschliche Geist nur durch logische Analysen und Vernunftkenntnisse den wahren Zustand der Welt erkennen kann?",
     "Rationalismus",
     ["Idealismus", "Skeptizismus", "Empirismus", "Rationalismus"],
     "Diese Philosophie betont, dass wahres Wissen durch Vernunft und logische Analysen erlangt wird und unabhängig von Erfahrung existieren kann."),

    ("Welche Philosophie besagt, dass ethische Werte von der Fähigkeit eines Individuums zur Vernunft und zur rationalen Überlegung abhängen?",
     "Rationalistische Ethik",
     ["Relativismus", "Utilitarismus", "Rationalistische Ethik", "Deontologie"],
     "Diese Theorie behauptet, dass ethische Werte durch die Fähigkeit zur Vernunft und rationalen Überlegung bestimmt werden."),

    ("Welcher Philosoph ist bekannt für seine Theorie des „Kategorischen Imperativs“, der das ethische Handeln auf universellen Prinzipien basieren lässt?",
     "Immanuel Kant",
     ["Sokrates", "Aristoteles", "John Stuart Mill", "Immanuel Kant"],
     "Dieser Philosoph ist bekannt für den „Kategorischen Imperativ“, der besagt, dass moralisches Handeln auf universellen Prinzipien basieren sollte."),
    
        ("Was erklärt Mythologie hauptsächlich?",
     "Naturphänomene",
     ["Wissenschaft", "Politik", "Geschichte", "Naturphänomene"],
     "Mythologie erklärt Naturphänomene und menschliches Verhalten durch Geschichten und Götter. Diese Erklärungen helfen, die Weltanschauung und die kulturellen Werte der jeweiligen Gesellschaft zu verstehen."),
    
     ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),    
    
    ("Welche Funktion haben Mythen für soziale Normen?",
     "Normen vermitteln",
     ["Wissenschaft erklären", "Normen vermitteln", "Politik beeinflussen", "Geschichte dokumentieren"],
     "Mythen vermitteln soziale und moralische Normen und stärken das Gemeinschaftsgefühl. Sie bieten eine gemeinsame Grundlage für das Verständnis von richtigem und falschem Verhalten."),

    ("Wie erklären Mythen oft Naturkatastrophen?",
     "Durch Götter",
     ["Durch Tiere", "Durch Menschen", "Durch Wissenschaft", "Durch Götter"],
     "Naturkatastrophen werden oft durch die Handlungen von Göttern erklärt. Diese Erklärungen reflektieren oft den Glauben an eine höhere Macht, die über das Schicksal der Menschen bestimmt."),

    ("Welches Motiv zeigt häufig den Konflikt zwischen Menschen und Göttern?",
     "Götterkonflikte",
     ["Wissenschaftsfragen", "Götterkonflikte", "Politische Auseinandersetzungen", "Kulturelle Entwicklungen"],
     "Mythologien zeigen oft Konflikte zwischen Göttern und Menschen. Diese Konflikte symbolisieren häufig menschliche Herausforderungen und moralische Lektionen."),

    ("Was stellen Heldengeschichten in Mythologien dar?",
     "Tugenden",
     ["Wissenschaft", "Politik", "Tugenden", "Geschichte"],
     "Heldengeschichten zeigen Tugenden wie Mut und Weisheit. Sie dienen als moralische Vorbilder und inspirieren dazu, hohe ethische Standards zu verfolgen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Was beschreibt die Vorstellung von Schöpfung, Zerstörung und Erneuerung in Mythologien?",
     "Kosmischer Zyklus",
     ["Kosmischer Zyklus", "Evolution", "Politik", "Wirtschaft"],
     "Der kosmische Zyklus beschreibt Schöpfung, Zerstörung und Erneuerung. Diese Vorstellung spiegelt oft den natürlichen Rhythmus und die Wiedergeburt von Zyklen in der Natur wider."),

    ("Welche Art von Mythen erklärt Naturphänomene?",
     "Naturmythen",
     ["Schöpfungsgeschichten", "Naturmythen", "Göttergeschichten", "Heldensagen"],
     "Naturmythen erklären Phänomene wie Wetter und Jahreszeiten. Sie sind ein Versuch, die natürlichen Ereignisse durch übernatürliche Erklärungen verständlich zu machen."),

    ("Wie wird die Welt in vielen Mythologien geschaffen?",
     "Durch Götter",
     ["Durch Menschen", "Durch Götter", "Durch Natur", "Durch Wissenschaft"],
     "Die Welt wird oft durch einen göttlichen Schöpfungsakt erklärt. Dieser Akt verdeutlicht die zentrale Rolle der Götter in der Entstehung und Ordnung des Kosmos."),

    ("Welche Figuren repräsentieren oft Aspekte der Natur oder menschliche Erfahrungen?",
     "Götter",
     ["Helden", "Götter", "Orte", "Städte"],
     "Götter repräsentieren Aspekte der Natur und menschliche Erfahrungen. Sie verkörpern verschiedene Kräfte und Prinzipien, die das Leben und die Welt beeinflussen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie spiegeln Mythen oft soziale Strukturen wider?",
     "Durch Göttermacht",
     ["Durch Wissenschaft", "Durch Politik", "Durch Göttermacht", "Durch Geschichte"],
     "Mythen spiegeln soziale Strukturen durch Machtverhältnisse der Götter wider. Diese Darstellung reflektiert oft die Hierarchien und Werte der menschlichen Gesellschaft."),

    ("Welche Geschichten warnen oft vor zukünftigen Ereignissen?",
     "Endzeitmythen",
     ["Endzeitmythen", "Wissenschaft", "Politik", "Geschichte"],
     "Endzeitmythen warnen vor zukünftigen Katastrophen oder Ereignissen. Sie bieten eine präventive Perspektive, die die Menschen auf mögliche Herausforderungen vorbereitet."),

    ("Welches Symbol zeigt die Verbindung zwischen Mensch und Göttlichem?",
     "Weltbaum",
     ["Sterne", "Weltbaum", "Artefakte", "Orte"],
     "Der Weltbaum symbolisiert die Verbindung zwischen Mensch und Göttlichem. Er steht oft für die Achse des Kosmos und die Verbindung aller Welten."),

    ("Wie wird Schicksal oft in Mythologien dargestellt?",
     "Unveränderlich",
     ["Unveränderlich", "Veränderbar", "Nebensächlich", "Unwichtig"],
     "Schicksal wird oft als unveränderlich angesehen. Diese Vorstellung verdeutlicht die Unausweichlichkeit und das vorbestimmte Ende aller Dinge."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Was zeigt die Heldengeschichte in Mythologien häufig?",
     "Transformation",
     ["Wirtschaft", "Politik", "Transformation", "Geschichte"],
     "Heldengeschichten zeigen oft die persönliche Transformation des Helden. Dieser Wandel ist meist zentral für die moralische und ethische Lektion der Geschichte."),

    ("Welches Motiv haben Opfergaben in Ritualen?",
     "Götterwohlwollen",
     ["Wissenschaft", "Politik", "Wohlwollen der Götter", "Geschichte"],
     "Opfergaben sollen das Wohlwollen der Götter erlangen. Sie sind oft ein Akt der Hingabe, um göttliche Gunst oder Unterstützung zu erbitten."),

    ("Wie nennt man die Vorstellung einer göttlichen Ordnung in der Mythologie?",
     "Kosmische Ordnung",
     ["Politik", "Kosmische Ordnung", "Wirtschaft", "Gesellschaft"],
     "Die kosmische Ordnung beschreibt die göttliche oder kosmische Ordnung. Sie stellt sicher, dass das Universum in einem harmonischen und geregelten Zustand bleibt."),

    ("Wie werden Tiere und Naturphänomene oft in Mythen dargestellt?",
     "Als Symbole",
     ["Als historische Figuren", "Als politische Werkzeuge", "Als Symbole", "Als Objekte"],
     "Tiere und Naturphänomene werden oft als Symbole der Götter dargestellt. Diese Symbole repräsentieren bestimmte Eigenschaften oder Kräfte und helfen, komplexe Konzepte zu vermitteln."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Was symbolisieren die Themen von Tod und Wiedergeburt häufig?",
     "Zyklische Erneuerung",
     ["Zyklische Erneuerung", "Politik", "Wirtschaft", "Gesellschaft"],
     "Tod und Wiedergeburt symbolisieren oft zyklische Erneuerung. Diese Themen reflektieren den fortwährenden Zyklus von Leben, Tod und Erneuerung in der Natur und im menschlichen Leben."),

    ("Was beschreibt die Vorstellung von einem Weltbaum oder einer Weltachse?",
     "Verbindung zwischen Welten",
     ["Verbindung zwischen Welten", "Politik", "Gesellschaft", "Wirtschaft"],
     "Der Weltbaum oder die Weltachse beschreibt die Verbindung zwischen menschlicher und göttlicher Welt. Er dient als Mittel zur Verbindung und Kommunikation zwischen verschiedenen Ebenen der Existenz."),

    ("Wie helfen Schöpfungsmythen dem Selbstverständnis einer Kultur?",
     "Kulturelle Identität",
     ["Kulturelle Identität", "Wirtschaft", "Politik", "Wissenschaft"],
     "Schöpfungsmythen stärken die kulturelle Identität einer Gesellschaft. Sie bieten eine gemeinsame Geschichte und ein gemeinsames Erbe, das die Werte und Überzeugungen der Kultur prägt."),

    ("Wie erklärt Mythologie oft die Weltordnung?",
     "Durch göttliche Kräfte",
     ["Durch göttliche Kräfte", "Durch Geschichte", "Durch Wissenschaft", "Durch Politik"],
     "Mythologie erklärt die Weltordnung oft durch göttliche Kräfte und kosmische Prinzipien. Diese Erklärungen bieten einen Rahmen für das Verständnis von Ordnung und Chaos im Universum."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie werden in vielen Mythen die Schöpfung und das Ende der Welt dargestellt?",
     "Als zyklischer Prozess",
     ["Als einmaliges Ereignis", "Als zyklischer Prozess", "Als politische Umwälzung", "Als linearer Verlauf"],
     "Die Schöpfung und das Ende der Welt werden oft als zyklischer Prozess dargestellt. Dieser Zyklus zeigt, dass das Universum immer wieder erneuert wird und in einem ständigen Wandel begriffen ist."),
    
        ("Welche Mythologie enthält die Geschichten von Odin und Thor?",
     "Nordische Mythologie",
     ["Ägyptische Mythologie", "Nordische Mythologie", "Römische Mythologie", "Griechische Mythologie"],
     "Die nordische Mythologie enthält viele faszinierende Geschichten. Odin, Thor und andere Götter des Nordens prägen diese Kultur.") ,

    ("Welche mythologischen Figuren sind häufig die Verkörperungen von Naturgewalten?",
     "Elementargeister",
     ["Götter", "Helden", "Dämonen", "Elementargeister"],
     "In verschiedenen Mythologien gibt es Figuren, die besondere Naturkräfte darstellen. Elementargeister sind solche Wesen, die oft für Naturphänomene stehen.") ,

    ("Was beschreibt die Vorstellung von einem Elysium in der griechischen Mythologie?",
     "Elysium",
     ["Hölle", "Elysium", "Himmelsreich", "Erde"],
     "In der griechischen Mythologie ist Elysium ein Ort, wo besonders tugendhafte Seelen verweilen. Es ist eine Belohnung für ein gutes Leben.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie heißt der Schöpfergott der ägyptischen Mythologie?",
     "Atum",
     ["Osiris", "Ra", "Atum", "Isis"],
     "In der ägyptischen Mythologie wird der Schöpfergott als einer der ersten Götter verehrt. Atum wird oft mit der Erschaffung der Welt in Verbindung gebracht.") ,

    ("Was symbolisiert der Phönix in der Mythologie?",
     "Wiedergeburt",
     ["Zerstörung", "Wiedergeburt", "Schutz", "Macht"],
     "Der Phönix ist bekannt für seine Fähigkeit, aus der Asche neu zu erwachen. Er steht für die Vorstellung, dass nach einem Ende ein neuer Anfang folgt.") ,

    ("Welche Figur in der griechischen Mythologie kann in verschiedene Tiere verwandelt werden?",
     "Zeus",
     ["Zeus", "Ares", "Apollo", "Hades"],
     "Ein berühmter Gott in der griechischen Mythologie hat die Fähigkeit, seine Gestalt zu verändern. Zeus nutzt diese Fähigkeit oft, um seine Ziele zu erreichen.") ,

    ("Was ist der Hauptzweck von Orakeln in der Mythologie?",
     "Zukunft vorhersagen",
     ["Kunst schaffen", "Zukunft vorhersagen", "Politik beeinflussen", "Heilmittel finden"],
     "Orakel spielen eine wichtige Rolle in der Mythologie, indem sie göttliche Einsichten geben. Sie sind oft gefragt, um zukünftige Ereignisse zu deuten.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche mythologische Figur hat den Namen 'Herakles' und ist für ihre Stärke bekannt?",
     "Herkules",
     ["Achilles", "Theseus", "Herkules", "Perseus"],
     "Ein berühmter Held der griechischen Mythologie ist bekannt für seine beeindruckende Stärke. Herakles ist eine zentrale Figur mit zahlreichen Heldentaten.") ,

    ("Welcher Gott ist der Herr des Todes in der ägyptischen Mythologie?",
     "Osiris",
     ["Ra", "Horus", "Anubis", "Osiris"],
     "Der Gott, der mit dem Tod und der Unterwelt in der ägyptischen Mythologie verbunden ist, hat auch eine wichtige Rolle im Leben nach dem Tod. Osiris ist dieser Gott.") ,

    ("Welches Tier wird oft mit dem Gott Hermes in der griechischen Mythologie in Verbindung gebracht?",
     "Schlange",
     ["Löwe", "Pferd", "Schlange", "Adler"],
     "Hermes ist oft mit einem speziellen Tier auf seinem Stab dargestellt. Diese Schlange symbolisiert wichtige Aspekte seiner göttlichen Funktionen.") ,

    ("Welcher griechische Gott ist der Gott des Weins und der Fröhlichkeit?",
     "Dionysos",
     ["Ares", "Apollo", "Hermes", "Dionysos"],
     "Der Gott, der in der griechischen Mythologie für Fröhlichkeit und Wein zuständig ist, wird oft mit Festen und Ekstase in Verbindung gebracht. Dionysos verkörpert diese Aspekte.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wie werden in der römischen Mythologie die Götter Jupiter, Neptun und Pluto zusammengefasst?",
     "Capitoline Götter",
     ["Capitoline Götter", "Olympische Götter", "Dodoneische Götter", "Vesta Götter"],
     "In der römischen Mythologie gehören bestimmte wichtige Götter zu einer besonderen Gruppe. Jupiter, Neptun und Pluto sind Teil der Capitoline Götter.") ,

    ("Was beschreibt der Begriff 'Kreuzungspunkt' in der Mythologie?",
     "Magischer Ort",
     ["Götterversammlung", "Magischer Ort", "Kultureller Konflikt", "Heiliger Ort"],
     "Der Begriff 'Kreuzungspunkt' wird oft verwendet, um einen besonderen Ort zu beschreiben. Hier treffen verschiedene Kräfte oder Wesen aufeinander.") ,

    ("Welches Element ist häufig mit dem ägyptischen Gott Ra verbunden?",
     "Sonne",
     ["Erde", "Luft", "Wasser", "Sonne"],
     "Ein wichtiges Element in der ägyptischen Mythologie ist eng mit einem bestimmten Gott verbunden. Ra wird mit der Sonne assoziiert und ist der Sonnengott.") ,

    ("Wie werden mythologische Schöpfungsmythen oft dargestellt?",
     "Als Ursprungsgeschichten",
     ["Als moralische Geschichten", "Als Ursprungsgeschichten", "Als historische Berichte", "Als Naturphänomene"],
     "Schöpfungsmythen bieten Erklärungen für die Entstehung der Welt. Sie erklären die Ursprünge der Erde und der Menschheit in vielen Kulturen.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Gott ist in der griechischen Mythologie der Gott des Meeres und der Erdbeben?",
     "Poseidon",
     ["Zeus", "Poseidon", "Apollo", "Ares"],
     "In der griechischen Mythologie gibt es einen Gott, der für das Meer und Erdbeben zuständig ist. Poseidon ist dieser Gott, der die Wasserwelt beherrscht.") ,

    ("Was repräsentiert der Gott Hades in der griechischen Mythologie?",
     "Unterwelt",
     ["Himmel", "Meer", "Unterwelt", "Licht"],
     "Hades ist in der griechischen Mythologie der Herrscher eines besonderen Reiches. Er repräsentiert die Unterwelt, das Reich der Toten.") ,

    ("Welcher ägyptische Gott hat den Kopf eines Falken?",
     "Horus",
     ["Anubis", "Ra", "Horus", "Osiris"],
     "Ein ägyptischer Gott, der mit dem Kopf eines Falken dargestellt wird, spielt eine wichtige Rolle in der Mythologie. Horus ist dieser Gott, der für Himmel und Schutz steht.") ,

    ("Was symbolisiert der Minotaurus in der griechischen Mythologie?",
     "Labyrinth",
     ["Krieg", "Labyrinth", "Wissen", "Meer"],
     "Der Minotaurus ist ein Ungeheuer, das in einem komplexen Gebäude gefangen war. Dieses Labyrinth steht für die Herausforderung und Gefahr in der griechischen Mythologie.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Geschöpf ist ein Mischwesen aus Mensch und Tier in der Mythologie?",
     "Chimäre",
     ["Phoenix", "Hydra", "Gorgone", "Chimäre"],
     "Ein bemerkenswertes Mischwesen in der Mythologie ist die Chimäre. Sie vereint verschiedene Tiere in einem und symbolisiert die Kombination von Kräften.") ,

    ("Welcher Held kämpfte gegen die Hydra in der griechischen Mythologie?",
     "Herakles",
     ["Achilles", "Theseus", "Herakles", "Perseus"],
     "Ein berühmter Held der griechischen Mythologie stellte sich einem vielköpfigen Ungeheuer. Herakles besiegte die Hydra, eine seiner bekanntesten Heldentaten.") ,

    ("Welcher griechische Held war für das Fesseln des Prometheus bekannt?",
     "Herakles",
     ["Achilles", "Theseus", "Herakles", "Perseus"],
     "Ein griechischer Held, bekannt für seine Taten, befreite Prometheus von seinen Fesseln. Herakles vollbrachte diesen Akt der Befreiung in der Mythologie.") ,

    ("Welcher mythologische Charakter ist bekannt für das Tragen des goldenen Äpfels?",
     "Eris",
     ["Eris", "Hera", "Athene", "Aphrodite"],
     "Ein mythologischer Charakter brachte einen goldenen Apfel, der einen bedeutenden Konflikt auslöste. Eris, die Göttin der Zwietracht, spielte eine zentrale Rolle in diesem Ereignis.")

]

class GEMythologie(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(GEMythologie, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Mythologie"
        self.fragen = fragenmytho

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

    
class Geographie(Screen):
    def __init__(self, **kwargs):
        super(Geographie, self).__init__(**kwargs)
        self.lyt = FloatLayout()
        
        self.label = Label (text="Starten = Themenbereich wählen", size_hint=(None, None), size=(100,100), pos_hint={"center_x":0.5,"center_y":0.65})
        self.lyt.add_widget(self.label) 
        
        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100,100),
                           pos_hint={"center_x":0.15,"y":0}
                           )                   
        self.btn1.bind(on_press=self.wechselmenu) 
        self.lyt.add_widget(self.btn1)  
                       
        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0}
                           )
        self.btn2.bind(on_press=self.wechseltrp)
        self.lyt.add_widget(self.btn2)
      
        self.btn3 = Button (background_normal='profile.png', background_down='profile.png',
                            size_hint=(None, None),
                            size=(100,100),
                            pos_hint={"center_x":0.85,"y":0}
                            )
        self.btn3.bind(on_press=self.wechselprfl)
        self.lyt.add_widget(self.btn3)
        
        self.lyt.add_widget(Image(source="logo-1.png",
                                     size_hint=(None,None),
                                     size=(150,150),
                                     pos_hint={'center_x': 0.5, 'top': 1.0}))
        
        self.themen = Button(text="Themenbereiche", background_color = '#069AF3',
                              size_hint=(None, None), size=(150,100), pos_hint={"center_x":0.5, "center_y":0.45})
        self.themen.bind(on_press=self.topic_list)
        
        self.lyt.add_widget(self.themen)
        
        self.add_widget(self.lyt)
        
    def wechselmenu (self,instance):
        self.manager.current ='menu'
        
    def wechseltrp (self, instance):
        self.manager.current = 'trophe'
        
    def wechselprfl (self, instance):
        self.manager.current = 'profile'
        
    def topic_list(self, instance):
        popup_content = GridLayout(cols=1, spacing = 10, size_hint_y=None)
        popup_content.bind(minimum_height=popup_content.setter("height"))
        
        topics = ["Länder","Hauptstädte"]
        
        for topic in topics:
         btn = Button (text=str(topic), size_hint_y=None, height=40)
         btn.bind(on_press=self.switch_to_topic)
         popup_content.add_widget(btn)
         
        
        self.popup = Popup(title= 'Themenbereich', size_hint=(None,None), size=(300, 400), auto_dismiss=True)
        self.popup.content = popup_content
        self.popup.open()
        
    def switch_to_topic(self, instance):
        self.popup.dismiss()
        topic_key = instance.text.lower().replace(' ', '_')
        questions = self.manager.fragen.get(topic_key, [])

        if questions:
            screen_name = f"{topic_key}_0"
            if not self.manager.has_screen(screen_name):
                for i, frage in enumerate(questions):
                    text, antwort, antwortmöglichkeiten, info_text = frage
                    screen_name = f"{topic_key}_{i}"
                    if topic_key == "länder":
                        screen = GELänder(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "hauptstädte":
                        screen = GEHauptstädte(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    
                    
                    self.manager.add_widget(screen)
            
            self.manager.current = f"{topic_key}_0"

fragenländer = [
    
    ("Welches Land ist das flächenmäßig größte der Welt?",
     "a) Russland",
     ["a) Russland", "b) China", "c) USA", "d) Kanada"],
     "Russland erstreckt sich über Eurasien und ist mit einer Fläche von etwa 17,1 Millionen Quadratkilometern das größte Land der Welt."),

    ("Welches Land hat die meisten Einwohner?",
     "b) China",
     ["a) Indien", "b) China", "c) USA", "d) Russland"],
     "China ist das bevölkerungsreichste Land der Welt mit über 1,4 Milliarden Menschen."),

    ("In welchem Land befindet sich der Eiffelturm?",
     "b) Frankreich",
     ["a) Deutschland", "b) Frankreich", "c) Italien", "d) Spanien"],
     "Der Eiffelturm, eines der bekanntesten Wahrzeichen der Welt, steht in Frankreich."),

    ("Welches Land hat die höchste durchschnittliche Lebenserwartung?",
     "b) Japan",
     ["a) Deutschland", "b) Japan", "c) Kanada", "d) Australien"],
     "Japan hat mit einer durchschnittlichen Lebenserwartung von über 84 Jahren die höchste weltweit."),

    ("Wo befindet sich der Kilimandscharo, der höchste Berg Afrikas?",
     "b) Tansania",
     ["a) Kenia", "b) Tansania", "c) Ägypten", "d) Uganda"],
     "Der Kilimandscharo befindet sich in Tansania und ist mit einer Höhe von 5.895 Metern der höchste Berg Afrikas."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("In welchem Land befindet sich Machu Picchu, die historische Inka-Stadt?",
     "a) Peru",
     ["a) Peru", "b) Mexiko", "c) Brasilien", "d) Chile"],
     "Machu Picchu, eine der bedeutendsten archäologischen Stätten der Welt, liegt in Peru."),

    ("Wo liegt das Great Barrier Reef, das größte Korallenriff der Welt?",
     "b) Australien",
     ["a) Brasilien", "b) Australien", "c) Indonesien", "d) Philippinen"],
     "Das Great Barrier Reef erstreckt sich vor der Küste Australiens und ist das größte Korallenriff der Welt."),

    ("In welchem Land liegt das Taj Mahal, ein berühmtes UNESCO-Weltkulturerbe?",
     "a) Indien",
     ["a) Indien", "b) Pakistan", "c) Bangladesch", "d) Sri Lanka"],
     "Das Taj Mahal, ein Symbol der Liebe und eines der schönsten Bauwerke der Welt, befindet sich in Indien."),

    ("Welches Land ist für seine Tulpenfelder bekannt?",
     "b) Niederlande",
     ["a) Frankreich", "b) Niederlande", "c) Türkei", "d) Schweden"],
     "Die Niederlande sind bekannt für ihre farbenprächtigen Tulpenfelder, insbesondere während der Frühjahrsblüte."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wo befindet sich die Sahara-Wüste, die größte heiße Wüste der Welt?",
     "a) Afrika",
     ["a) Afrika", "b) Australien", "c) Südamerika", "d) Asien"],
     "Die Sahara-Wüste erstreckt sich über weite Teile Nordafrikas und ist die größte heiße Wüste der Welt."),

    ("Welches Land hat die längste Küstenlinie der Welt?",
     "a) Kanada",
     ["a) Kanada", "b) Russland", "c) USA", "d) Brasilien"],
     "Kanada verfügt über die längste Küstenlinie der Welt, die etwa 202.080 Kilometer lang ist."),

    ("In welchem Land befindet sich die Akropolis, ein antikes Wahrzeichen?",
     "b) Griechenland",
     ["a) Italien", "b) Griechenland", "c) Spanien", "d) Ägypten"],
     "Die Akropolis, ein Symbol der antiken griechischen Kultur, steht in Griechenland."),

    ("Wo liegt die Stadt Venedig, bekannt für ihre Kanäle und Gondeln?",
     "c) Italien",
     ["a) Spanien", "b) Frankreich", "c) Italien", "d) Portugal"],
     "Venedig, eine einzigartige Stadt mit Wasserstraßen statt Straßen, liegt in Italien."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land hat die größte Anzahl an Inseln?",
     "a) Indonesien",
     ["a) Indonesien", "b) Philippinen", "c) Japan", "d) Griechenland"],
     "Indonesien ist der Staat mit der größten Anzahl an Inseln, mehr als 17.000 sind bekannt."),

    ("Wo befindet sich der Mount Everest, der höchste Berg der Welt?",
     "d) China",
     ["a) Nepal", "b) Indien", "c) Bhutan", "d) China"],
     "Der Mount Everest liegt an der Grenze zwischen Nepal und China und ist mit 8.848 Metern der höchste Berg der Welt."),

    ("In welchem Land liegt das berühmte Opernhaus von Sydney?",
     "a) Australien",
     ["a) Australien", "b) Neuseeland", "c) Südafrika", "d) Kanada"],
     "Das Opernhaus von Sydney, ein architektonisches Wahrzeichen, befindet sich in Australien."),

    ("Wo liegt die Stadt Kyoto, bekannt für ihre traditionellen Tempel und Gärten?",
     "b) Japan",
     ["a) China", "b) Japan", "c) Südkorea", "d) Thailand"],
     "Kyoto, eine Stadt reich an historischen Tempeln und Gärten, liegt in Japan."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land hat die längste Mauer der Welt?",
     "a) China",
     ["a) China", "b) Deutschland", "c) Indien", "d) USA"],
     "Die Chinesische Mauer, die als längste Mauer der Welt gilt, erstreckt sich über Tausende von Kilometern in China."),

    ("In welchem Land liegt der Grand Canyon, eine berühmte Schlucht?",
     "b) USA",
     ["a) Kanada", "b) USA", "c) Mexiko", "d) Brasilien"],
     "Der Grand Canyon, eine ikonische Schlucht, befindet sich in den Vereinigten Staaten von Amerika."),

    ("Welches Land ist berühmt für seine traditionellen Karnevalsfeierlichkeiten?",
     "c) Brasilien",
     ["a) Italien", "b) Spanien", "c) Brasilien", "d) Argentinien"],
     "Brasilien ist bekannt für seine farbenfrohen und lebendigen Karnevalsfeierlichkeiten, besonders in Rio de Janeiro."),

    ("Wo befindet sich der Ayers Rock, ein heiliger Berg der Aborigines?",
     "a) Australien",
     ["a) Australien", "b) Neuseeland", "c) Papua-Neuguinea", "d) Indonesien"],
     "Der Ayers Rock, auch bekannt als Uluru, ist ein heiliger Berg der Aborigines und befindet sich in Australien."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("In welchem Land liegt der Amazonas-Regenwald, der größte Regenwald der Welt?",
     "a) Brasilien",
     ["a) Brasilien", "b) Kolumbien", "c) Peru", "d) Ecuador"],
     "Der Amazonas-Regenwald erstreckt sich über mehrere Länder, hat aber den größten Anteil in Brasilien."),

    ("Wo liegt Stonehenge, eine prähistorische Steinkreisanlage?",
     "b) England",
     ["a) Irland", "b) England", "c) Schottland", "d) Wales"],
     "Stonehenge, eine rätselhafte prähistorische Steinkreisanlage, liegt in England."),

    ("Welches Land ist bekannt für seine vielfältige Tierwelt, darunter Kängurus und Koalas?",
     "c) Australien",
     ["a) Südafrika", "b) Neuseeland", "c) Australien", "d) Argentinien"],
     "Australien ist bekannt für seine einzigartige Tierwelt, die viele endemische Arten wie Kängurus und Koalas umfasst."),
    
        ("Welches Land hat die größte Landfläche der Welt?",
     "Russland",
     ["Kanada", "Russland", "China", "Vereinigte Staaten"],
     "Das größte Land der Welt erstreckt sich über zwei Kontinente und hat eine Fläche von über 17 Millionen Quadratkilometern. Es umfasst eine Vielzahl von Klimazonen und Landschaften.") ,
        
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist bekannt als das Land der aufgehenden Sonne?",
     "Japan",
     ["China", "Thailand", "Japan", "Südkorea"],
     "Das Land, das östlich von China liegt und wo die Sonne als erstes aufgeht, wird als das Land der aufgehenden Sonne bezeichnet. Diese Bezeichnung spiegelt die kulturelle Bedeutung des Sonnenaufgangs wider.") ,

    ("In welchem Land befindet sich das berühmte historische Monument Petra?",
     "Jordanien",
     ["Ägypten", "Israel", "Jordanien", "Libanon"],
     "Eine antike Felsenstadt, bekannt für ihre in den Fels gehauenen Gebäude, liegt in einem Land, das einst die Hauptstadt des Nabatenreiches war und heute ein UNESCO-Weltkulturerbe ist.") ,

    ("Welches Land hat die meisten Inseln der Welt?",
     "Schweden",
     ["Norwegen", "Schweden", "Kanada", "Finnland"],
     "Das Land mit über 267.000 Inseln bietet viele unbewohnte und beeindruckende natürliche Landschaften. Diese Inseln prägen das Bild des Landes stark.") ,

    ("In welchem Land befindet sich der höchste Berg der Welt, der Mount Everest?",
     "Nepal",
     ["Bhutan", "Indien", "Nepal", "China"],
     "Der höchste Berg der Welt zieht viele Bergsteiger an und hat eine Höhe von 8.848 Metern. Er liegt an der Grenze zwischen zwei Ländern.") ,
    
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist als das Land der Pyramiden bekannt?",
     "Ägypten",
     ["Peru", "Ägypten", "Mexiko", "China"],
     "Ein Land, das für seine monumentalen Bauwerke aus der Zeit der Pharaonen bekannt ist, ist berühmt für seine Pyramiden. Diese Bauwerke sind ein Symbol der alten Zivilisation.") ,

    ("Welches europäische Land ist bekannt für seine vielen Kanäle und wird oft als 'Venedig des Nordens' bezeichnet?",
     "Schweden",
     ["Belgien", "Schweden", "Dänemark", "Niederlande"],
     "Ein europäisches Land, insbesondere dessen Hauptstadt, wird wegen seiner zahlreichen Wasserwege oft als 'Venedig des Nordens' bezeichnet. Diese Kanäle prägen die Stadt und ihre Umgebung.") ,

    ("Welches Land wird oft als 'Land des Lächelns' bezeichnet?",
     "Thailand",
     ["Vietnam", "Malaysia", "Thailand", "Indonesien"],
     "Ein Land, das für die freundliche und gastfreundliche Natur seiner Bevölkerung bekannt ist, wird oft als 'Land des Lächelns' bezeichnet. Diese Bezeichnung reflektiert die kulturelle Gastfreundschaft.") ,

    ("In welchem Land befindet sich die Hauptstadt Addis Abeba?",
     "Äthiopien",
     ["Eritrea", "Kenia", "Äthiopien", "Sudan"],
     "Eine bedeutende Stadt in Afrika, die auch ein wichtiges Zentrum für internationale Diplomatie ist, beherbergt die Afrikanische Union und verschiedene internationale Organisationen.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist bekannt für seine langen Fjorde?",
     "Norwegen",
     ["Island", "Schweden", "Dänemark", "Norwegen"],
     "Ein Land, das durch Gletscherbildung geformte lange, tiefe Fjorde aufweist, ist bekannt für diese spektakulären Landschaften, die ein beliebtes Touristenziel darstellen.") ,

    ("Welches Land ist das bevölkerungsreichste Land der Welt?",
     "China",
     ["Indonesien", "Indien", "China", "USA"],
     "Das bevölkerungsreichste Land der Welt stellt eine bedeutende demografische Kraft dar. Mit über 1,4 Milliarden Menschen ist es das größte Land nach Bevölkerung.") ,

    ("Welches Land ist für seine Kängurus und Koalas bekannt?",
     "Australien",
     ["Südafrika", "Kanada", "Neuseeland", "Australien"],
     "Ein Land, das für seine einzigartigen Tiere bekannt ist, ist auch bekannt für Kängurus und Koalas, die nur dort vorkommen und einen wichtigen Teil der Kultur darstellen.") ,

    ("Welches Land ist bekannt als das Land der 1000 Seen?",
     "Finnland",
     ["Schweiz", "Norwegen", "Finnland", "Schweden"],
     "Das Land, das für seine große Anzahl an Seen berühmt ist, hat eine prägende Seenlandschaft. Diese Seen spielen eine wichtige Rolle in der Natur und Freizeitkultur des Landes.") ,
    
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land hat die größte Bevölkerung in Afrika?",
     "Nigeria",
     ["Kenya", "Ägypten", "Nigeria", "Südafrika"],
     "Das bevölkerungsreichste Land in Afrika hat eine bedeutende Rolle in der wirtschaftlichen und kulturellen Landschaft des Kontinents. Es weist die größte Bevölkerung auf.") ,

    ("In welchem Land befindet sich die alte Stadt Machu Picchu?",
     "Peru",
     ["Chile", "Peru", "Bolivien", "Ecuador"],
     "Eine antike Stadt, die auf einer Bergspitze liegt und ein berühmtes touristisches Ziel ist, befindet sich in einem Land, das für die Inka-Zivilisation bekannt ist.") ,

    ("Welches Land ist bekannt für seine Schokolade und die Uhrenindustrie?",
     "Schweiz",
     ["Belgien", "Österreich", "Schweiz", "Schweden"],
     "Ein Land, das für hochwertige Schokolade und präzise Uhren berühmt ist, hat weltweit einen hervorragenden Ruf in diesen Industrien.") ,

    ("Welches Land hat die größte Anzahl an Vulkanen?",
     "Indonesien",
     ["Island", "Japan", "Indonesien", "Philippinen"],
     "Das Land, das sich im 'Feuerring' des Pazifiks befindet, hat die größte Anzahl an Vulkanen. Diese geologischen Merkmale prägen das Land erheblich.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land hat die meisten offiziellen Sprachen?",
     "Südafrika",
     ["Kanada", "Belgien", "Schweiz", "Südafrika"],
     "Ein Land, das für seine sprachliche Vielfalt bekannt ist, hat eine hohe Anzahl an offiziellen Sprachen. Diese Vielfalt reflektiert die kulturelle Diversität des Landes.") ,

    ("Welches Land ist für seine Oldtimer-Industrie bekannt und hat die Stadt Detroit als Zentrum?",
     "Vereinigte Staaten",
     ["Deutschland", "Kanada", "Vereinigte Staaten", "Mexiko"],
     "Eine Stadt in den Vereinigten Staaten ist bekannt als das Zentrum der Oldtimer-Industrie und wird oft als die 'Motor City' bezeichnet. Die Stadt hat eine lange Automobilproduktionstradition.") ,

    ("Welches Land wird oft als 'Land des langen weißen Wolkes' bezeichnet?",
     "Neuseeland",
     ["Samoa", "Fidschi", "Australien", "Neuseeland"],
     "Das Land, dessen Maori-Name 'Aotearoa' bedeutet, wird als 'Land des langen weißen Wolkes' bezeichnet. Dies beschreibt die häufigen Wolkenformationen über dem Land.") ,

    ("Welches Land hat die höchste Anzahl an UNESCO-Weltkulturerbestätten?",
     "Italien",
     ["Spanien", "Frankreich", "Italien", "Deutschland"],
     "Ein Land, das für seine historische und kulturelle Bedeutung bekannt ist, hat die meisten UNESCO-Weltkulturerbestätten. Dazu gehören berühmte Orte wie Rom und Venedig."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
        ("Welches Land ist der größte Produzent von Olivenöl?",
     "Spanien",
     ["Spanien", "Italien", "Griechenland", "Türkei"],
     "Olivenhaine und hochwertige Olivenöle sind in diesem Land weit verbreitet. Spanien ist der größte Produzent von Olivenöl der Welt und spielt eine zentrale Rolle in der globalen Olivenölproduktion.") ,

    ("Welches Land hat die höchste Anzahl an Inseln?",
     "Schweden",
     ["Finnland", "Kanada", "Norwegen", "Schweden"],
     "Entlang seiner Küste und in seinen Seen befinden sich unzählige kleine Eilande. Schweden hat die höchste Anzahl an Inseln, mit über 267.000 davon.") ,

    ("In welchem Land befindet sich das berühmte Bauwerk der Pyramiden von Gizeh?",
     "Ägypten",
     ["Griechenland", "Ägypten", "Indien", "Mexiko"],
     "Zu den bekanntesten antiken Bauwerken der Welt gehören diese Pyramiden. Die Pyramiden von Gizeh, die in Ägypten stehen, sind ein bedeutendes UNESCO-Weltkulturerbe.") ,

    ("Welches Land ist das größte der Welt nach Fläche?",
     "Russland",
     ["Russland", "China", "Kanada", "Vereinigte Staaten"],
     "Das Land erstreckt sich über zwei Kontinente und weist eine immense geographische Vielfalt auf. Russland ist das größte Land der Welt nach Fläche.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist bekannt für seine spektakulären Nordlichter, die Aurora Borealis?",
     "Norwegen",
     ["Norwegen", "Island", "Schweden", "Kanada"],
     "Besonders in den nördlichen Regionen des Landes sind diese beeindruckenden Lichterscheinungen sichtbar. Norwegen ist bekannt für seine spektakulären Nordlichter, die Aurora Borealis.") ,

    ("Welches Land ist der weltweit größte Exporteur von Kaffee?",
     "Brasilien",
     ["Vietnam", "Äthiopien", "Brasilien", "Kolumbien"],
     "Jährlich wird eine große Menge des weltweit konsumierten Kaffees aus diesem Land exportiert. Brasilien ist der weltweit größte Exporteur von Kaffee.") ,

    ("Welches Land ist für seine traditionelle Kimonokleidung und die Technologieindustrie bekannt?",
     "Japan",
     ["Japan", "China", "Südkorea", "Thailand"],
     "Hochentwickelte Technologie und traditionelle Mode sind zwei der Markenzeichen dieses Landes. Japan ist berühmt für seine traditionelle Kimono-Kleidung sowie für seine fortschrittliche Technologieindustrie.") ,

    ("In welchem Land befindet sich das historische Bauwerk Petra?",
     "Jordanien",
     ["Saudi-Arabien", "Jordanien", "Ägypten", "Türkei"],
     "Das antike Bauwerk ist in die Felsen gehauen und gilt als eines der neuen sieben Weltwunder. Petra befindet sich in Jordanien und zieht viele Besucher mit ihrer einzigartigen Architektur an.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land hat die längste Grenze mit den Vereinigten Staaten von Amerika?",
     "Kanada",
     ["Kanada", "China", "Russland", "Mexiko"],
     "Diese lange internationale Grenze umfasst sowohl städtische als auch abgelegene Gebiete. Kanada hat die längste Grenze mit den Vereinigten Staaten von Amerika.") ,

    ("Welches Land ist als 'Land des Lächelns' bekannt?",
     "Thailand",
     ["Thailand", "Japan", "Indien", "Sri Lanka"],
     "Die Freundlichkeit und Herzlichkeit der Menschen in diesem Land sind international bekannt. Thailand wird als 'Land des Lächelns' bezeichnet.") ,

    ("Welches Land ist für seine beeindruckenden Gletscherlandschaften in Patagonien bekannt?",
     "Argentinien",
     ["Neuseeland", "Argentinien", "Chile", "Kanada"],
     "Diese Region ist für ihre atemberaubenden Gletscherlandschaften bekannt. Argentinien ist berühmt für seine Gletscherlandschaften in Patagonien, einschließlich des Perito-Moreno-Gletschers.") ,

    ("Welches Land ist die Heimat des berühmten Taj Mahal?",
     "Indien",
     ["Nepal", "Bangladesch", "Indien", "Pakistan"],
     "Das bekannte Mausoleum wurde als Denkmal für die Frau eines Mogulherrschers erbaut. Das Taj Mahal befindet sich in Indien und ist ein ikonisches Bauwerk der Architektur.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("In welchem Land befindet sich die Stadt Istanbul, die auf zwei Kontinenten liegt?",
     "Türkei",
     ["Griechenland", "Türkei", "Ägypten", "Libanon"],
     "Diese bedeutende Stadt erstreckt sich über zwei Kontinente. Istanbul liegt in der Türkei und ist für ihre kulturelle und historische Bedeutung bekannt.") ,

    ("Welches Land ist für seine außergewöhnliche Artenvielfalt und den Regenwald im Amazonasgebiet bekannt?",
     "Brasilien",
     ["Peru", "Kolumbien", "Brasilien", "Ecuador"],
     "Ein großer Teil dieses riesigen Regenwalds befindet sich in diesem Land. Brasilien beherbergt den Amazonas-Regenwald, der für seine außergewöhnliche Artenvielfalt bekannt ist.") ,

    ("Welches Land hat die größte Anzahl an UNESCO-Weltkulturerbestätten?",
     "Italien",
     ["Frankreich", "Italien", "Spanien", "Deutschland"],
     "Diese Stätten umfassen viele historische und kulturelle Sehenswürdigkeiten. Italien hat die größte Anzahl an UNESCO-Weltkulturerbestätten.") ,

    ("Welches Land ist bekannt für seine traditionelle Baukunst der Ziegelarchitektur, wie sie in den Städten wie Bamberg zu finden ist?",
     "Deutschland",
     ["Schweiz", "Österreich", "Niederlande", "Deutschland"],
     "Historische Städte in diesem Land sind für ihre Ziegelarchitektur berühmt. Deutschland ist bekannt für seine traditionelle Baukunst der Ziegelarchitektur, besonders in Städten wie Bamberg.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist der größte Exporteur von Schokolade?",
     "Schweiz",
     ["Frankreich", "Belgien", "Schweiz", "Italien"],
     "Dieses Land hat einen internationalen Ruf für seine hervorragende Schokolade. Die Schweiz ist bekannt für ihre hochwertige Schokolade und zählt zu den größten Exporteuren weltweit.") ,

    ("Welches Land hat die höchste Dichte an Weltkulturerbestätten pro Quadratkilometer?",
     "Monaco",
     ["San Marino", "Monaco", "Vatican City", "Liechtenstein"],
     "Aufgrund seiner geringen Größe beherbergt dieses Land viele historische Stätten. Monaco hat die höchste Dichte an Weltkulturerbestätten pro Quadratkilometer.") ,

    ("Welches Land ist für seine schönen Fjorde und atemberaubenden Landschaften bekannt?",
     "Norwegen",
     ["Island", "Dänemark", "Norwegen", "Schweden"],
     "Wunderschöne natürliche Formationen prägen die Landschaft dieses Landes. Norwegen ist berühmt für seine beeindruckenden Fjorde und atemberaubenden Landschaften.") ,

    ("Welches Land ist für seine lange Tradition im Schokoladenherstellen und seine Qualitätsschokolade bekannt?",
     "Belgien",
     ["Niederlande", "Deutschland", "Schweiz", "Belgien"],
     "Dieses Land hat eine lange Geschichte in der Herstellung von hochwertiger Schokolade. Belgien ist bekannt für seine exzellente Schokolade und seine lange Tradition in der Schokoladenherstellung.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist die Wiege der Demokratie und bekannt für seine antiken Ruinen wie das Parthenon?",
     "Griechenland",
     ["Griechenland", "Türkei", "Ägypten", "Rom"],
     "Das Land ist berühmt für seine antiken Ruinen, die wichtige historische Stätten darstellen. Griechenland gilt als Wiege der Demokratie und ist bekannt für Ruinen wie das Parthenon.") ,

    ("Welches Land hat die größte Anzahl an Pyramiden?",
     "Sudan",
     ["Ägypten", "Sudan", "Peru", "Mexiko"],
     "Die meisten dieser antiken Monumente befinden sich in einer Region südlich des Nils. Der Sudan hat die größte Anzahl an Pyramiden, die aus der Zeit der altägyptischen und nubischen Königreiche stammen.") 
]

class GELänder(Screen):
    def __init__(self, frage, antwortmöglichkeiten, antwort, info_text, **kw):
        super(GELänder, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Länder"
        self.fragen = fragenländer

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

    
fragenhaupt = [
    
    ("Welche Hauptstadt liegt am Ufer des Flusses Seine?",
     "b) Paris",
     ["a) Rom", "b) Paris", "c) Berlin", "d) Madrid"],
     "Paris liegt am Ufer des Flusses Seine und ist die Hauptstadt Frankreichs."),

    ("In welcher Stadt befindet sich der Rote Platz und der Kreml?",
     "a) Moskau",
     ["a) Moskau", "b) St. Petersburg", "c) Kiew", "d) Warschau"],
     "Der Rote Platz und der Kreml befinden sich in Moskau, der Hauptstadt Russlands."),

    ("Welche Stadt ist die Hauptstadt von Australien?",
     "d) Canberra",
     ["a) Sydney", "b) Melbourne", "c) Brisbane", "d) Canberra"],
     "Canberra ist die Hauptstadt Australiens und liegt im Australian Capital Territory."),

    ("Wo befindet sich die Hauptstadt der Vereinigten Staaten von Amerika?",
     "c) Washington, D.C.",
     ["a) New York City", "b) Los Angeles", "c) Washington, D.C.", "d) Chicago"],
     "Die Hauptstadt der Vereinigten Staaten von Amerika ist Washington, D.C."),

    ("Welche Stadt ist die Hauptstadt von Deutschland?",
     "c) Berlin",
     ["a) München", "b) Frankfurt am Main", "c) Berlin", "d) Hamburg"],
     "Berlin ist die Hauptstadt Deutschlands und zugleich eines der kulturellen Zentren Europas."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("In welcher Stadt befindet sich der Vatikanstaat?",
     "b) Rom",
     ["a) Mailand", "b) Rom", "c) Neapel", "d) Florenz"],
     "Der Vatikanstaat befindet sich innerhalb der Stadt Rom, der Hauptstadt Italiens."),

    ("Wo liegt die Hauptstadt von Japan?",
     "a) Tokio",
     ["a) Tokio", "b) Osaka", "c) Kyoto", "d) Sapporo"],
     "Tokio ist die Hauptstadt Japans und eine der größten Metropolen der Welt."),

    ("Welche Stadt ist die Hauptstadt von Kanada?",
     "d) Ottawa",
     ["a) Toronto", "b) Montreal", "c) Vancouver", "d) Ottawa"],
     "Ottawa ist die Hauptstadt Kanadas und liegt im südöstlichen Teil der Provinz Ontario."),

    ("In welcher Stadt befindet sich der Tiananmen-Platz?",
     "c) Peking",
     ["a) Schanghai", "b) Hongkong", "c) Peking", "d) Guangzhou"],
     "Der Tiananmen-Platz befindet sich in Peking, der Hauptstadt der Volksrepublik China."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wo liegt die Hauptstadt von Südkorea?",
     "b) Seoul",
     ["a) Busan", "b) Seoul", "c) Incheon", "d) Daegu"],
     "Seoul ist die Hauptstadt von Südkorea und eine der größten Städte der Welt."),

    ("Welche Stadt ist die Hauptstadt von Südafrika?",
     "d) Pretoria",
     ["a) Kapstadt", "b) Johannesburg", "c) Durban", "d) Pretoria"],
     "Pretoria ist eine der Hauptstädte von Südafrika und die Verwaltungshauptstadt des Landes."),

    ("In welcher Stadt befindet sich der Taksim-Platz?",
     "c) Istanbul",
     ["a) Ankara", "b) Izmir", "c) Istanbul", "d) Antalya"],
     "Der Taksim-Platz befindet sich in Istanbul, der größten Stadt und wirtschaftlichen Hauptstadt der Türkei."),

    ("Wo liegt die Hauptstadt von Argentinien?",
     "b) Buenos Aires",
     ["a) Cordoba", "b) Buenos Aires", "c) Rosario", "d) Mendoza"],
     "Buenos Aires ist die Hauptstadt von Argentinien und eine der größten Städte Südamerikas."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Stadt ist die Hauptstadt von Ägypten?",
     "a) Kairo",
     ["a) Kairo", "b) Alexandria", "c) Luxor", "d) Assuan"],
     "Kairo ist die Hauptstadt von Ägypten und die größte Stadt im Nahen Osten und Afrika."),

    ("In welcher Stadt befindet sich der Königspalast von Spanien?",
     "b) Madrid",
     ["a) Barcelona", "b) Madrid", "c) Valencia", "d) Sevilla"],
     "Der Königspalast befindet sich in Madrid, der Hauptstadt Spaniens."),

    ("Wo liegt die Hauptstadt von Neuseeland?",
     "a) Wellington",
     ["a) Wellington", "b) Auckland", "c) Christchurch", "d) Hamilton"],
     "Wellington ist die Hauptstadt von Neuseeland und liegt am südlichsten Punkt der Nordinsel."),

    ("Welche Stadt ist die Hauptstadt von Thailand?",
     "c) Bangkok",
     ["a) Phuket", "b) Chiang Mai", "c) Bangkok", "d) Pattaya"],
     "Bangkok ist die Hauptstadt von Thailand und eine der am meisten besuchten Städte der Welt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("In welcher Stadt befindet sich das Weiße Haus?",
     "c) Washington, D.C.",
     ["a) New York City", "b) Los Angeles", "c) Washington, D.C.", "d) Chicago"],
     "Das Weiße Haus befindet sich in Washington, D.C., der Hauptstadt der Vereinigten Staaten von Amerika."),

    ("Wo liegt die Hauptstadt von Chile?",
     "a) Santiago",
     ["a) Santiago", "b) Valparaiso", "c) Concepcion", "d) La Serena"],
     "Santiago ist die Hauptstadt von Chile und das wirtschaftliche und kulturelle Zentrum des Landes."),

    ("Welche Stadt ist die Hauptstadt von Irland?",
     "b) Dublin",
     ["a) Belfast", "b) Dublin", "c) Cork", "d) Galway"],
     "Dublin ist die Hauptstadt von Irland und eine der ältesten Städte Europas."),

    ("In welcher Stadt befindet sich der Kreml?",
     "a) Moskau",
     ["a) Moskau", "b) St. Petersburg", "c) Kiew", "d) Warschau"],
     "Der Kreml befindet sich in Moskau, der Hauptstadt Russlands."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Stadt ist die Hauptstadt von Spanien?",
     "b) Madrid",
     ["a) Barcelona", "b) Madrid", "c) Valencia", "d) Sevilla"],
     "Madrid ist die Hauptstadt von Spanien und das kulturelle sowie politische Zentrum des Landes."),

    ("In welcher Stadt befindet sich der Petersdom?",
     "c) Rom",
     ["a) Mailand", "b) Neapel", "c) Rom", "d) Florenz"],
     "Der Petersdom befindet sich in Rom, der Hauptstadt Italiens und einem bedeutenden Zentrum des Christentums."),

    ("Wo liegt die Hauptstadt von Kanada?",
     "d) Ottawa",
     ["a) Toronto", "b) Montreal", "c) Vancouver", "d) Ottawa"],
     "Ottawa ist die Hauptstadt Kanadas und liegt im südöstlichen Teil der Provinz Ontario."),

    ("Welche Stadt ist die Hauptstadt von Südkorea?",
     "b) Seoul",
     ["a) Busan", "b) Seoul", "c) Incheon", "d) Daegu"],
     "Seoul ist die Hauptstadt von Südkorea und eine der größten Städte der Welt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("In welcher Stadt befindet sich die Christusstatue?",
     "a) Rio de Janeiro",
     ["a) Rio de Janeiro", "b) São Paulo", "c) Brasília", "d) Belo Horizonte"],
     "Die Christusstatue befindet sich in Rio de Janeiro, der zweitgrößten Stadt Brasiliens und Hauptstadt des gleichnamigen Bundesstaates."),

    ("Wo liegt die Hauptstadt von Thailand?",
     "c) Bangkok",
     ["a) Phuket", "b) Chiang Mai", "c) Bangkok", "d) Pattaya"],
     "Bangkok ist die Hauptstadt von Thailand und eine der am meisten besuchten Städte der Welt."),

    ("Welche Stadt ist die Hauptstadt von Ägypten?",
     "a) Kairo",
     ["a) Kairo", "b) Alexandria", "c) Luxor", "d) Assuan"],
     "Kairo ist die Hauptstadt von Ägypten und die größte Stadt im Nahen Osten und Afrika."),

    ("In welcher Stadt befindet sich die Blaue Moschee?",
     "d) Istanbul",
     ["a) Ankara", "b) Izmir", "c) Antalya", "d) Istanbul"],
     "Die Blaue Moschee befindet sich in Istanbul, der größten Stadt und wirtschaftlichen Hauptstadt der Türkei."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wo liegt die Hauptstadt von Neuseeland?",
     "a) Wellington",
     ["a) Wellington", "b) Auckland", "c) Christchurch", "d) Hamilton"],
     "Wellington ist die Hauptstadt von Neuseeland und liegt am südlichsten Punkt der Nordinsel."),

    ("Welche Stadt ist die Hauptstadt von Griechenland?",
     "b) Athen",
     ["a) Thessaloniki", "b) Athen", "c) Heraklion", "d) Patras"],
     "Athen ist die Hauptstadt von Griechenland und eine der ältesten Städte der Welt."),

    ("In welcher Stadt befindet sich der Sultan-Ahmed-Platz?",
     "d) Istanbul",
     ["a) Ankara", "b) Izmir", "c) Antalya", "d) Istanbul"],
     "Der Sultan-Ahmed-Platz, auch bekannt als Blaue Moschee-Platz, befindet sich in Istanbul, der größten Stadt der Türkei."),

    ("Wo liegt die Hauptstadt von Nigeria?",
     "b) Abuja",
     ["a) Lagos", "b) Abuja", "c) Kano", "d) Ibadan"],
     "Abuja ist die Hauptstadt von Nigeria und das politische Zentrum des Landes."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Stadt ist die Hauptstadt von Peru?",
     "a) Lima",
     ["a) Lima", "b) Arequipa", "c) Cusco", "d) Trujillo"],
     "Lima ist die Hauptstadt von Peru und eine der wichtigsten Städte in Südamerika."),

    ("In welcher Stadt befindet sich das Brandenburger Tor?",
     "c) Berlin",
     ["a) München", "b) Frankfurt am Main", "c) Berlin", "d) Hamburg"],
     "Das Brandenburger Tor, ein Symbol der deutschen Einheit, befindet sich in Berlin, der Hauptstadt Deutschlands."),

    ("Wo liegt die Hauptstadt von Irland?",
     "b) Dublin",
     ["a) Belfast", "b) Dublin", "c) Cork", "d) Galway"],
     "Dublin ist die Hauptstadt von Irland und eine der ältesten Städte Europas."),

    ("Welche Stadt ist die Hauptstadt von Südafrika?",
     "d) Pretoria",
     ["a) Kapstadt", "b) Johannesburg", "c) Durban", "d) Pretoria"],
     "Pretoria ist eine der Hauptstädte von Südafrika und die Verwaltungshauptstadt des Landes."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("In welcher Stadt befindet sich das Kapitol?",
     "a) Washington, D.C.",
     ["a) Washington, D.C.", "b) New York City", "c) Los Angeles", "d) Chicago"],
     "Das Kapitol, das Zentrum der Legislative der Vereinigten Staaten, befindet sich in Washington, D.C."),

    ("Wo liegt die Hauptstadt von Argentinien?",
     "b) Buenos Aires",
     ["a) Cordoba", "b) Buenos Aires", "c) Rosario", "d) Mendoza"],
     "Buenos Aires ist die Hauptstadt von Argentinien und eine der größten Städte Südamerikas."),

    ("Welche Stadt ist die Hauptstadt von Ungarn?",
     "c) Budapest",
     ["a) Debrecen", "b) Szeged", "c) Budapest", "d) Pécs"],
     "Budapest ist die Hauptstadt von Ungarn und eine bedeutende kulturelle und politische Metropole in Europa."),

    ("In welcher Stadt befindet sich die Charles Bridge?",
     "b) Prag",
     ["a) Bratislava", "b) Prag", "c) Budapest", "d) Wien"],
     "Die Charles Bridge befindet sich in Prag, der Hauptstadt der Tschechischen Republik."),
    
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
        ("Welches Land ist das größte Binnenland der Welt?",
     "Kasachstan",
     ["Indien", "China", "Kasachstan", "Russland"],
     "Ein Land ohne Zugang zum Meer ist Kasachstan, da es als das größte Binnenland der Welt gilt. Es ist nach Russland das größte Land der Welt und liegt in Zentralasien. Die Weite des Landes umfasst diverse Landschaften, von Wüsten bis zu Gebirgen.") ,

    ("Welches Land hat die längste Küstenlinie der Welt?",
     "Kanada",
     ["Kanada", "Russland", "Australien", "Vereinigte Staaten"],
     "Die Küstenlinie von Kanada erstreckt sich über 202.080 Kilometer, was sie zur längsten der Welt macht. Diese ausgedehnte Küstenlinie umfasst den Atlantik, Pazifik und Arktischen Ozean. Diese Länge resultiert aus den vielen Buchten und Inseln entlang der Küste.") ,

    ("Welches Land hat das älteste bestehende Parlament der Welt?",
     "Island",
     ["Vereinigtes Königreich", "Island", "Schweden", "Finnland"],
     "Das älteste bestehende Parlament der Welt ist das Althing, das 930 in Island gegründet wurde. Es hat eine lange Tradition der Demokratie und Gesetzgebung. Das Althing ist ein Symbol für die lange politische Geschichte des Landes.") ,

    ("In welchem Land befindet sich die berühmte Statue der Freiheit?",
     "Vereinigte Staaten",
     ["Vereinigte Staaten", "Kanada", "Brasilien", "Mexiko"],
     "Auf Liberty Island in New York City steht die Statue der Freiheit, ein Symbol für Freiheit und Demokratie. Die Statue wurde 1886 als Geschenk Frankreichs an die USA übergeben. Sie hat seitdem große Bedeutung für die amerikanische Geschichte.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist bekannt für seine berühmten Weinregionen Bordeaux und Champagne?",
     "Frankreich",
     ["Frankreich", "Spanien", "Italien", "Portugal"],
     "Weinregionen wie Bordeaux und Champagne sind in Frankreich besonders berühmt. Diese Regionen produzieren einige der weltweit renommiertesten Weine. Die französische Weintradition reicht mehrere Jahrhunderte zurück.") ,

    ("Welches Land ist als 'Land der Berge' bekannt und hat eine der höchsten durchschnittlichen Höhenlagen der Welt?",
     "Schweiz",
     ["Norwegen", "Schweden", "Österreich", "Schweiz"],
     "Das als 'Land der Berge' bekannte Land ist die Schweiz, die eine hohe durchschnittliche Höhenlage aufweist. Die Alpen prägen das Land und sind ein bedeutendes touristisches Ziel. Viele Skigebiete und Bergwanderungen ziehen Besucher aus der ganzen Welt an.") ,

    ("Welches Land hat die höchste Anzahl an aktiven Vulkanen?",
     "Indonesien",
     ["Indonesien", "Japan", "Philippinen", "Vanuatu"],
     "Aktive Vulkane sind in Indonesien besonders zahlreich, da das Land im 'Feuerring' des Pazifiks liegt. Diese Vulkane sind eine markante geologische Eigenschaft des Landes. Der Ring des Feuers ist eine seismisch aktive Zone rund um den Pazifik.") ,

    ("Welches Land hat das größte Tropenwaldgebiet?",
     "Brasilien",
     ["Brasilien", "Kolumbien", "Indonesien", "Demokratische Republik Kongo"],
     "Das Amazonas-Regenwaldgebiet ist das größte Tropenwaldgebiet der Welt und befindet sich hauptsächlich in Brasilien. Dieser Wald ist entscheidend für das globale Klima und die Biodiversität. Der Amazonas wird oft als 'Lunge der Erde' bezeichnet.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist bekannt für seine hohe Lebensqualität und ist oft in den Top 10 der weltweiten Lebensqualitätsrankings vertreten?",
     "Schweiz",
     ["Kanada", "Deutschland", "Schweiz", "Schweden"],
     "Die hohe Lebensqualität in der Schweiz umfasst ausgezeichnete Gesundheitsversorgung, Bildung und Sicherheit. Die Schweiz wird regelmäßig in den weltweiten Lebensqualitätsrankings berücksichtigt. Die politische Stabilität des Landes trägt ebenfalls zur hohen Lebensqualität bei.") ,

    ("In welchem Land befindet sich die berühmte historische Stätte Chichen Itza?",
     "Mexiko",
     ["El Salvador", "Honduras", "Guatemala", "Mexiko"],
     "Eine bedeutende archäologische Stätte der Maya ist Chichen Itza, die in Mexiko liegt. Sie war einst eine wichtige Stadt der Maya-Zivilisation und ist heute ein UNESCO-Weltkulturerbe. Die Stätte ist bekannt für ihre Pyramide, die als El Castillo bekannt ist.") ,

    ("Welches Land ist die Heimat des höchsten Wasserfalls der Welt, des Angel Falls?",
     "Venezuela",
     ["Brasilien", "Venezuela", "Kolumbien", "Peru"],
     "Mit einer Höhe von 3.212 Metern ist der Angel Falls der höchste Wasserfall der Welt und befindet sich in Venezuela. Der Wasserfall liegt im Canaima-Nationalpark. Er wurde nach dem amerikanischen Entdecker Jimmy Angel benannt.") ,

    ("Welches Land hat das größte Wirtschaftswachstum der Welt in den letzten zwei Jahrzehnten erlebt?",
     "China",
     ["Südafrika", "Brasilien", "China", "Indien"],
     "In den letzten zwei Jahrzehnten hat China das größte Wirtschaftswachstum weltweit erlebt. Das Land hat sich zu einer der größten Volkswirtschaften der Welt entwickelt. Dieses Wachstum hat auch zu einer Verbesserung der Lebensstandards beigetragen.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist das kleinste der Welt, sowohl nach Fläche als auch nach Bevölkerung?",
     "Vatican City",
     ["Liechtenstein", "San Marino", "Monaco", "Vatican City"],
     "Der kleinste Staat der Welt, sowohl nach Fläche als auch nach Bevölkerung, ist die Vatikanstadt. Es ist das Zentrum der römisch-katholischen Kirche. Der Vatikan hat eine bedeutende historische und kulturelle Bedeutung.") ,

    ("Welches Land hat die größte Anzahl an Nationalparks?",
     "Vereinigte Staaten",
     ["Brasilien", "Kanada", "Vereinigte Staaten", "Australien"],
     "In den Vereinigten Staaten gibt es die größte Anzahl an Nationalparks. Diese Parks schützen eine Vielzahl von Landschaften und Ökosystemen. Der Nationalparkservice verwaltet diese Parks und sorgt für deren Erhalt.") ,

    ("In welchem Land liegt das berühmte historische Monument Stonehenge?",
     "Vereinigtes Königreich",
     ["Irland", "Vereinigtes Königreich", "Frankreich", "Schottland"],
     "Ein prähistorisches Monument, bekannt für seine mysteriöse Geschichte und archäologische Bedeutung, ist Stonehenge im Vereinigten Königreich. Es zählt zu den bekanntesten prähistorischen Bauwerken der Welt. Die genauen Ursprünge und Zwecke sind noch immer Gegenstand von Forschungen.") ,

    ("Welches Land ist bekannt für seine traditionellen Schottischen Hochlandrinder?",
     "Schottland",
     ["England", "Wales", "Irland", "Schottland"],
     "Traditionelle Schottische Hochlandrinder sind in Schottland besonders bekannt. Diese Rinder sind für ihre Robustheit und lange, wellige Haare berühmt. Sie sind gut an das raue Klima der schottischen Highlands angepasst.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist berühmt für die Herstellung von Sushi und der Ursprung des Kabuki-Theaters?",
     "Japan",
     ["Japan", "Südkorea", "China", "Thailand"],
     "Das Sushi und das Kabuki-Theater sind bedeutende kulturelle Symbole Japans. Kabuki ist eine traditionelle Form der japanischen darstellenden Kunst, bekannt für seine dramatischen Darstellungen und prächtigen Kostüme. Sushi hat sich weltweit als beliebtes Gericht etabliert.") ,

    ("Welches Land ist als 'Land des Lächelns' bekannt und ist auch berühmt für seine Tempelanlagen in Angkor Wat?",
     "Kambodscha",
     ["Laos", "Thailand", "Vietnam", "Kambodscha"],
     "Kambodscha, bekannt als 'Land des Lächelns', hat auch die berühmte Tempelanlage Angkor Wat. Diese Tempelanlage ist ein bedeutendes archäologisches und kulturelles Erbe. Angkor Wat ist eines der größten religiösen Monumente der Welt.") ,

    ("Welches Land hat die größte Anzahl an offiziellen Sprachen weltweit?",
     "Südafrika",
     ["Südafrika", "Kanada", "Belgien", "Schweiz"],
     "Mit elf offiziellen Sprachen ist Südafrika das Land mit der größten Anzahl an offiziellen Sprachen. Diese Vielfalt spiegelt die kulturelle Diversität des Landes wider. Mehrsprachigkeit ist ein Ausdruck der vielfältigen Gesellschaft Südafrikas.") ,

    ("Welches Land hat die größte Fläche an Wüste, die als 'Gobi-Wüste' bekannt ist?",
     "Mongolei",
     ["Mongolei", "Ägypten", "Saudi-Arabien", "China"],
     "Die Gobi-Wüste erstreckt sich hauptsächlich über die Mongolei und Teile Chinas. Diese Wüste ist bekannt für ihre raue, karge Landschaft und gehört zu den größten Wüsten der Welt. Die extreme Temperaturdifferenz zwischen Sommer und Winter ist charakteristisch.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land ist die Heimat des größten künstlichen Hafens der Welt, dem Port of Shanghai?",
     "China",
     ["Singapur", "China", "Japan", "Südkorea"],
     "Der Port of Shanghai in China ist der größte künstliche Hafen der Welt. Er spielt eine bedeutende Rolle in der globalen Handelslogistik. Der Hafen ist ein zentraler Knotenpunkt für internationale Schifffahrt und Handel.") ,

    ("In welchem Land befindet sich die historische Stadt Timbuktu?",
     "Mali",
     ["Algerien", "Mauritanien", "Niger", "Mali"],
     "Timbuktu, eine alte Stadt in Mali, war im Mittelalter ein bedeutendes Zentrum für Handel und Bildung. Die Stadt ist bekannt für ihre alten Koranschulen und Bibliotheken. Sie war ein wichtiges kulturelles und religiöses Zentrum der islamischen Welt.") ,

    ("Welches Land hat den höchsten Berg Europas, den Mont Blanc?",
     "Frankreich",
     ["Italien", "Frankreich", "Schweiz", "Österreich"],
     "Der Mont Blanc, der höchste Berg Europas, liegt an der Grenze zwischen Frankreich und Italien. Er ist ein berühmtes Ziel für Bergsteiger und Alpinisten. Die Bergregion rund um den Mont Blanc ist auch für ihre atemberaubende Landschaft bekannt.") 

]
        
class GEHauptstädte(Screen):
    def __init__(self, antwort, frage, antwortmöglichkeiten, info_text, **kw):
        super(GEHauptstädte, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Hauptstädte"
        self.fragen = fragenhaupt

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

   
        
class Sport(Screen):
    def __init__(self, **kwargs):
        super(Sport, self).__init__(**kwargs)
        self.lyt = FloatLayout()
        
        self.label = Label (text="Starten = Themenbereiche wählen", size_hint=(None, None), size=(100,100), pos_hint={"center_x":0.5,"center_y":0.65})
        self.lyt.add_widget(self.label) 
        
        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100,100),
                           pos_hint={"center_x":0.15,"y":0}
                           )                   
        self.btn1.bind(on_press=self.wechselmenu) 
        self.lyt.add_widget(self.btn1)  
                       
        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0}
                           )
        self.btn2.bind(on_press=self.wechseltrp)
        self.lyt.add_widget(self.btn2)
      
        self.btn3 = Button (background_normal='profile.png', background_down='profile.png',
                            size_hint=(None, None),
                            size=(100,100),
                            pos_hint={"center_x":0.85,"y":0}
                            )
        self.btn3.bind(on_press=self.wechselprfl)
        self.lyt.add_widget(self.btn3)
        
        self.lyt.add_widget(Image(source="logo-1.png",
                                     size_hint=(None,None),
                                     size=(150,150),
                                     pos_hint={'center_x': 0.5, 'top': 1.0}))
        
        self.themen = Button(text="Themenbereiche", background_color = '#069AF3',
                              size_hint=(None, None), size=(150,100), pos_hint={"center_x":0.5, "center_y":0.45})
        self.themen.bind(on_press=self.topic_list)
        
        self.lyt.add_widget(self.themen)
        
        self.add_widget(self.lyt)
        
    def wechselmenu (self,instance):
        self.manager.current ='menu'
        
    def wechseltrp (self, instance):
        self.manager.current = 'trophe'
        
    def wechselprfl (self, instance):
        self.manager.current = 'profile'
        
    def topic_list(self, instance):
        popup_content = GridLayout(cols=1, spacing = 10, size_hint_y=None)
        popup_content.bind(minimum_height=popup_content.setter("height"))
        
        topics = ["Fußball","Basketball","Tennis","Fitness"]
        
        for topic in topics:
         btn = Button (text=str(topic), size_hint_y=None, height=40)
         btn.bind(on_press=self.switch_to_topic)
         popup_content.add_widget(btn)
        
        self.popup = Popup(title= 'Themenbereich', size_hint=(None,None), size=(300, 400), auto_dismiss=True)
        self.popup.content = popup_content
        self.popup.open()

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        topic_key = instance.text.lower().replace(' ', '_')
        questions = self.manager.fragen.get(topic_key, [])

        if questions:
            screen_name = f"{topic_key}_0"
            if not self.manager.has_screen(screen_name):
                for i, frage in enumerate(questions):
                    text, antwort, antwortmöglichkeiten, info_text = frage
                    screen_name = f"{topic_key}_{i}"
                    if topic_key == "fußball":
                        screen = SPFußball(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "basketball":
                        screen = SPBasketball(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "tennis":
                        screen = SPTennis(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "fitness":
                        screen = SPTennis(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    
                    self.manager.add_widget(screen)
            
            self.manager.current = f"{topic_key}_0"
    


fragenfuß = [
    
     ("Wer ist der Rekordtorschütze in der Geschichte der Fußball-Weltmeisterschaften?",
     "c) Miroslav Klose",
     ["a) Pelé", "b) Cristiano Ronaldo", "c) Miroslav Klose", "d) Lionel Messi"],
     "Miroslav Klose ist mit 16 Toren der Rekordtorschütze in der Geschichte der Fußball-Weltmeisterschaften."),

    ("Welches Land hat die meisten FIFA-Weltmeisterschaften gewonnen?",
     "a) Brasilien",
     ["a) Brasilien", "b) Deutschland", "c) Italien", "d) Argentinien"],
     "Brasilien hat mit insgesamt 5 Titeln die meisten FIFA-Weltmeisterschaften gewonnen."),

    ("Welcher Spieler hat die meisten Tore in der Geschichte der UEFA Champions League erzielt?",
     "b) Cristiano Ronaldo",
     ["a) Lionel Messi", "b) Cristiano Ronaldo", "c) Raúl González", "d) Karim Benzema"],
     "Cristiano Ronaldo ist der Rekordtorschütze in der Geschichte der UEFA Champions League."),

    ("Welches Team hat die UEFA Champions League 2021 gewonnen?",
     "c) Chelsea FC",
     ["a) Manchester City", "b) FC Bayern München", "c) Chelsea FC", "d) Paris Saint-Germain"],
     "Chelsea FC hat die UEFA Champions League im Jahr 2021 gewonnen."),

    ("Wer ist der Rekordspieler mit den meisten Länderspieleinsätzen?",
     "a) Ahmed Hassan",
     ["a) Ahmed Hassan", "b) Cristiano Ronaldo", "c) Gianluigi Buffon", "d) Lothar Matthäus"],
     "Ahmed Hassan aus Ägypten hält den Rekord für die meisten Länderspieleinsätze in der Fußballgeschichte."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land hat die meisten Frauen-Weltmeisterschaften gewonnen?",
     "a) USA",
     ["a) USA", "b) Deutschland", "c) Norwegen", "d) Japan"],
     "Die USA haben mit insgesamt 4 Titeln die meisten Frauen-Weltmeisterschaften gewonnen."),

    ("Welcher Spieler hat die meisten Tore in einer einzigen FIFA-Weltmeisterschaft erzielt?",
     "b) Just Fontaine",
     ["a) Pelé", "b) Just Fontaine", "c) Gerd Müller", "d) Ronaldo Nazário"],
     "Just Fontaine aus Frankreich hält den Rekord für die meisten Tore (13) in einer einzelnen FIFA-Weltmeisterschaft (1958)."),

    ("Welcher Verein hat die meisten UEFA Champions League Titel gewonnen?",
     "b) Real Madrid",
     ["a) FC Barcelona", "b) Real Madrid", "c) FC Bayern München", "d) AC Mailand"],
     "Real Madrid ist mit insgesamt 13 Titeln der Rekordgewinner der UEFA Champions League."),

    ("Wer hat den Ballon d'Or 2021 gewonnen?",
     "a) Lionel Messi",
     ["a) Lionel Messi", "b) Cristiano Ronaldo", "c) Robert Lewandowski", "d) Neymar"],
     "Lionel Messi hat den Ballon d'Or im Jahr 2021 gewonnen, seine siebte Auszeichnung insgesamt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land hat bei den Männer-Olympischen Spielen 2016 die Goldmedaille im Fußball gewonnen?",
     "b) Brasilien",
     ["a) Deutschland", "b) Brasilien", "c) Argentinien", "d) Spanien"],
     "Brasilien hat bei den Olympischen Spielen 2016 in Rio de Janeiro die Goldmedaille im Fußball gewonnen."),

    ("Welcher Spieler hält den Rekord für die meisten Tore in der Geschichte der Bundesliga?",
     "c) Gerd Müller",
     ["a) Robert Lewandowski", "b) Klaus Fischer", "c) Gerd Müller", "d) Jupp Heynckes"],
     "Gerd Müller, auch bekannt als 'Der Bomber der Nation', hält mit 365 Toren den Rekord für die meisten Tore in der Bundesliga."),

    ("Wer war der Torschützenkönig der FIFA-Weltmeisterschaft 2018?",
     "c) Harry Kane",
     ["a) Antoine Griezmann", "b) Kylian Mbappé", "c) Harry Kane", "d) Romelu Lukaku"],
     "Harry Kane aus England war der Torschützenkönig der FIFA-Weltmeisterschaft 2018 in Russland."),

    ("Welcher Spieler hält den Rekord für die meisten Spiele für den FC Barcelona?",
     "a) Xavi Hernández",
     ["a) Xavi Hernández", "b) Lionel Messi", "c) Andrés Iniesta", "d) Carles Puyol"],
     "Xavi Hernández hat mit 767 Spielen den Rekord für die meisten Einsätze für den FC Barcelona."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land gewann die UEFA Euro 2020?",
     "d) Italien",
     ["a) England", "b) Belgien", "c) Portugal", "d) Italien"],
     "Italien gewann die UEFA Euro 2020, ihren zweiten Europameisterschaftstitel."),

    ("Wer ist der jüngste Torschütze in der Geschichte der UEFA Champions League?",
     "b) Ansu Fati",
     ["a) Kylian Mbappé", "b) Ansu Fati", "c) Raúl González", "d) Lionel Messi"],
     "Ansu Fati aus Spanien ist der jüngste Torschütze in der Geschichte der UEFA Champions League."),

    ("Wer hat den Goldenen Schuh der UEFA Euro 2021 gewonnen?",
     "c) Cristiano Ronaldo",
     ["a) Harry Kane", "b) Romelu Lukaku", "c) Cristiano Ronaldo", "d) Patrik Schick"],
     "Cristiano Ronaldo gewann den Goldenen Schuh der UEFA Euro 2021 als bester Torschütze des Turniers."),

    ("Welcher Spieler hat die meisten Tore in der Geschichte der Copa América erzielt?",
     "a) Pelé",
     ["a) Pelé", "b) Lionel Messi", "c) Neymar", "d) Zico"],
     "Pelé ist mit 77 Toren der Rekordtorschütze in der Geschichte der Copa América."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wer ist der Rekordspieler mit den meisten Premier League Einsätzen?",
     "b) Gareth Barry",
     ["a) Ryan Giggs", "b) Gareth Barry", "c) Frank Lampard", "d) Steven Gerrard"],
     "Gareth Barry hat mit 653 Einsätzen den Rekord für die meisten Premier League Einsätze."),

    ("Welches Team hat die meisten Bundesliga-Titel gewonnen?",
     "b) FC Bayern München",
     ["a) Borussia Dortmund", "b) FC Bayern München", "c) Borussia Mönchengladbach", "d) Werder Bremen"],
     "Der FC Bayern München ist mit 31 Titeln Rekordmeister in der Bundesliga."),

    ("Wer ist der Rekordspieler mit den meisten Einsätzen für die deutsche Nationalmannschaft?",
     "a) Lothar Matthäus",
     ["a) Lothar Matthäus", "b) Miroslav Klose", "c) Philipp Lahm", "d) Bastian Schweinsteiger"],
     "Lothar Matthäus hat mit 150 Einsätzen den Rekord für die meisten Spiele in der deutschen Nationalmannschaft."),

    ("Welcher Spieler hat die meisten Tore in einer einzigen Premier League Saison erzielt?",
     "b) Alan Shearer",
     ["a) Cristiano Ronaldo", "b) Alan Shearer", "c) Thierry Henry", "d) Luis Suárez"],
     "Alan Shearer hält mit 34 Toren den Rekord für die meisten Tore in einer Premier League Saison (1994-95)."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),   
    
    ("Wer hat den Ballon d'Or 2020 gewonnen?",
     "a) Lionel Messi",
     ["a) Lionel Messi", "b) Robert Lewandowski", "c) Cristiano Ronaldo", "d) Neymar"],
     "Lionel Messi hat den Ballon d'Or im Jahr 2020 gewonnen, seine sechste Auszeichnung insgesamt."),

    ("Welches Land hat bei den Frauen-Olympischen Spielen 2020 die Goldmedaille im Fußball gewonnen?",
     "b) Kanada",
     ["a) Schweden", "b) Kanada", "c) USA", "d) Australien"],
     "Kanada hat bei den Olympischen Spielen 2020 in Tokio die Goldmedaille im Frauenfußball gewonnen."),
    
        ("Wann wurde die erste Fußball-Weltmeisterschaft ausgetragen?",
     "1930",
     ["1950", "1920", "1930", "1940"],
     "Das Turnier markierte den Beginn des globalen Wettbewerbs im Fußball. Die erste Fußball-Weltmeisterschaft wurde 1930 in Uruguay ausgetragen.") ,

    ("Welcher Spieler ist der Rekordtorschütze der Fußball-Weltmeisterschaften?",
     "Miroslav Klose",
     ["Pele", "Cristiano Ronaldo", "Miroslav Klose", "Lionel Messi"],
     "Mit insgesamt 16 Treffern hält dieser Spieler den Rekord für die meisten Tore in Fußball-Weltmeisterschaften. Miroslav Klose ist der Rekordtorschütze.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land gewann die erste Fußball-Weltmeisterschaft?",
     "Uruguay",
     ["Brasilien", "Argentinien", "Uruguay", "Deutschland"],
     "Dieser historische Meilenstein im internationalen Fußball wurde von diesem Land erreicht. Uruguay gewann die erste Fußball-Weltmeisterschaft 1930.") ,

    ("Welcher Verein gewann die erste UEFA Champions League?",
     "Real Madrid",
     ["Barcelona", "AC Milan", "Liverpool", "Real Madrid"],
     "1956 sicherte sich dieser Verein den ersten Titel im Wettbewerb, der damals Europapokal der Landesmeister hieß. Real Madrid gewann die erste UEFA Champions League.") ,

    ("Welcher Spieler hat die meisten Ballon d'Or-Auszeichnungen gewonnen?",
     "Lionel Messi",
     ["Cristiano Ronaldo", "Johan Cruyff", "Lionel Messi", "Michel Platini"],
     "Der Spieler hat insgesamt sieben Ehrungen als bester Spieler der Welt erhalten. Lionel Messi hat die meisten Ballon d'Or-Auszeichnungen gewonnen.") ,

    ("Welches Land hat die meisten Fußball-Europameisterschaften gewonnen?",
     "Deutschland",
     ["Spanien", "Frankreich", "Italien", "Deutschland"],
     "In Europa ist dieses Land ein führendes Team. Deutschland hat die meisten Fußball-Europameisterschaften gewonnen, insgesamt vier Mal.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Fußballspieler hält den Rekord für die meisten Tore in einer einzigen Premier League-Saison?",
     "Mohamed Salah",
     ["Alan Shearer", "Harry Kane", "Cristiano Ronaldo", "Mohamed Salah"],
     "Dieser Rekord wurde mit 32 Toren in einer Saison aufgestellt. Mohamed Salah hält den Rekord für die meisten Tore in einer Premier League-Saison.") ,

    ("Welches Land gewann die Fußball-Weltmeisterschaft 2018?",
     "Frankreich",
     ["Brasilien", "Deutschland", "Frankreich", "Kroatien"],
     "Im Finale dieses Turniers besiegte das Land Kroatien. Frankreich gewann die Fußball-Weltmeisterschaft 2018 in Russland.") ,

    ("Welche Position spielt ein Torwart im Fußball?",
     "Torwart",
     ["Verteidiger", "Mittelfeldspieler", "Stürmer", "Torwart"],
     "Diese Position ist verantwortlich für das Verhindern von Gegentoren. Der Torwart ist die einzige Position, die das Tor verteidigt.") ,

    ("Welcher Verein hat die meisten UEFA Champions League Titel gewonnen?",
     "Real Madrid",
     ["AC Milan", "Barcelona", "Manchester United", "Real Madrid"],
     "Mit insgesamt 14 Siegen hat dieser Verein den meisten Erfolg im Wettbewerb. Real Madrid hat die meisten UEFA Champions League Titel gewonnen.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Spieler ist für den berühmten 'Hand Gottes'-Tor bekannt?",
     "Diego Maradona",
     ["Zinedine Zidane", "Cristiano Ronaldo", "Diego Maradona", "Pele"],
     "Dieses historische Tor wurde bei der Weltmeisterschaft 1986 erzielt. Diego Maradona ist bekannt für das 'Hand Gottes'-Tor.") ,

    ("Welcher Verein hat die Premier League in der Saison 2015/16 gewonnen, obwohl sie als Außenseiter galten?",
     "Leicester City",
     ["Arsenal", "Chelsea", "Manchester City", "Leicester City"],
     "Der Verein schockierte die Fußballwelt mit diesem überraschenden Erfolg. Leicester City gewann die Premier League in der Saison 2015/16.") ,

    ("Welches Land gewann die erste Frauen-Weltmeisterschaft im Fußball?",
     "USA",
     ["Brasilien", "Norwegen", "USA", "Deutschland"],
     "Die erste Frauen-Weltmeisterschaft fand 1991 statt, und dieses Land sicherte sich den Titel. Die USA gewannen die erste Frauen-Weltmeisterschaft im Fußball.") ,

    ("Wer war der Trainer der deutschen Nationalmannschaft beim Gewinn der Weltmeisterschaft 2014?",
     "Joachim Löw",
     ["Jürgen Klopp", "Franz Beckenbauer", "Uli Hoeneß", "Joachim Löw"],
     "Der Erfolg bei diesem Turnier in Brasilien wurde von diesem Trainer geleitet. Joachim Löw war der Trainer der deutschen Nationalmannschaft, als sie 2014 die Weltmeisterschaft gewannen.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land hat die meisten Copa Libertadores Titel gewonnen?",
     "Club Atlético Independiente",
     ["Club Atlético Independiente", "Peñarol", "Boca Juniors", "River Plate"],
     "Der Verein aus diesem Land hat den Rekord für die meisten Titel in diesem südamerikanischen Wettbewerb. Der Club Atlético Independiente hat die meisten Copa Libertadores Titel gewonnen.") ,

    ("Welcher Verein hat die meisten Bundesliga-Titel gewonnen?",
     "Bayern München",
     ["Schalke 04", "Bayer Leverkusen", "Borussia Dortmund", "Bayern München"],
     "Dieser Verein ist der erfolgreichste in der Geschichte der deutschen Bundesliga. Bayern München hat die meisten Bundesliga-Titel gewonnen.") ,

    ("Welcher Spieler hielt den Weltrekord für die meisten internationalen Tore, bevor Cristiano Ronaldo diesen Rekord brach?",
     "Ali Daei",
     ["Gerd Müller", "Pele", "Lionel Messi", "Ali Daei"],
     "Dieser Spieler hielt lange Zeit den Rekord für die meisten Tore in internationalen Spielen. Ali Daei hielt den Weltrekord für die meisten internationalen Tore, bevor Cristiano Ronaldo diesen Rekord brach.") ,

    ("Welcher Verein hat den berühmten 'Camp Nou' als Heimstadion?",
     "Barcelona",
     ["Atletico Madrid", "Valencia", "Barcelona", "Real Madrid"],
     "Eines der größten Fußballstadien der Welt gehört zu diesem Verein. Der FC Barcelona hat das Camp Nou als sein Heimstadion.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Spieler wurde 2019 als FIFA-Weltfußballer des Jahres ausgezeichnet?",
     "Lionel Messi",
     ["Cristiano Ronaldo", "Kylian Mbappé", "Lionel Messi", "Virgil van Dijk"],
     "Dieser Spieler erhielt 2019 die Auszeichnung für herausragende Leistungen. Lionel Messi wurde 2019 als FIFA-Weltfußballer des Jahres ausgezeichnet.") ,

    ("Welches Land gewann die Fußball-Europameisterschaft 2016?",
     "Portugal",
     ["Spanien", "Deutschland", "Frankreich", "Portugal"],
     "Im Finale besiegte dieses Land den Gastgeber. Portugal gewann die Fußball-Europameisterschaft 2016, nachdem sie im Finale Frankreich besiegt haben.") ,

    ("Welcher Fußballer ist als 'König des Dribblings' bekannt?",
     "Ronaldinho",
     ["Cristiano Ronaldo", "David Beckham", "Zinedine Zidane", "Ronaldinho"],
     "Er ist berühmt für seine außergewöhnlichen Fähigkeiten im Dribbling. Ronaldinho ist als 'König des Dribblings' bekannt.") ,

    ("Welcher Fußballspieler wurde 2018 als FIFA-Weltmeister des Jahres ausgezeichnet?",
     "Luka Modrić",
     ["Kylian Mbappé", "Cristiano Ronaldo", "Eden Hazard", "Luka Modrić"],
     "Dieser Spieler erhielt 2018 die Auszeichnung für seine herausragende Leistung. Luka Modrić wurde 2018 als FIFA-Weltmeister des Jahres ausgezeichnet.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Land war 2022 Gastgeber der Fußball-Weltmeisterschaft?",
     "Katar",
     ["Vereinigte Arabische Emirate", "Saudi-Arabien", "Oman", "Katar"],
     "Das erste Weltmeisterschafts-Turnier im Nahen Osten fand in diesem Land statt. Katar war 2022 Gastgeber der Fußball-Weltmeisterschaft."),
    
        ("Welcher Fußballspieler ist für den 'Zidane-Kopfstoß' im WM-Finale 2006 bekannt?",
     "Zinedine Zidane",
     ["Cristiano Ronaldo", "Thierry Henry", "David Beckham", "Zinedine Zidane"],
     "Im Jahr 2006 erlebte die Weltmeisterschaft ein denkwürdiges Ereignis, als Zinedine Zidane aufgrund eines Vorfalls im Finale gegen Marco Materazzi vom Platz gestellt wurde.") ,

    ("Welcher Verein hat die meisten La Liga Titel gewonnen?",
     "Real Madrid",
     ["Atletico Madrid", "Sevilla", "Barcelona", "Real Madrid"],
     "Die spanische Liga hat im Laufe der Jahre zahlreiche Meister hervorgebracht, wobei Real Madrid sich durch eine beeindruckende Anzahl an Titeln auszeichnet.") ,

    ("Welcher Spieler war der erste, der drei Tore in einem einzigen WM-Finalspiel erzielte?",
     "Geoff Hurst",
     ["Johan Cruyff", "Pele", "Diego Maradona", "Geoff Hurst"],
     "Die Weltmeisterschaft 1966 wird besonders für einen herausragenden Spieler in Erinnerung behalten, der in einem Finalspiel drei Tore erzielte.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Trainer gewann die Champions League mit drei verschiedenen Vereinen?",
     "Carlo Ancelotti",
     ["José Mourinho", "Pep Guardiola", "Carlo Ancelotti", "Alex Ferguson"],
     "Ein Trainer hat sich durch die besondere Leistung ausgezeichnet, die Champions League mit verschiedenen Vereinen gewonnen zu haben.") ,

    ("Welcher Spieler war bekannt für den 'No-Look-Pass'?",
     "Johan Cruyff",
     ["Diego Maradona", "Johan Cruyff", "Zinedine Zidane", "Pele"],
     "Die Fähigkeit, den Ball ohne direkten Blick zu passen, wurde von einem legendären Spieler berühmt gemacht, der für seine Kreativität bekannt ist.") ,

    ("Welcher Fußballverband organisiert die UEFA Champions League?",
     "UEFA",
     ["FIFA", "CONCACAF", "CAF", "UEFA"],
     "Das wichtigste Vereinsfußballturnier in Europa wird von einem bestimmten Fußballverband organisiert, der die besten Teams des Kontinents vereint.") ,

    ("Welcher Spieler hat die meisten Tore in der Geschichte der Bundesliga erzielt?",
     "Gerd Müller",
     ["Gerd Müller", "Klaus Fischer", "Robert Lewandowski", "Rudi Völler"],
     "In der Bundesliga gibt es einen Rekord für die meisten Tore, der lange Zeit von einem legendären Spieler gehalten wurde.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Verein gewann die erste englische Premier League Saison?",
     "Manchester United",
     ["Chelsea", "Arsenal", "Manchester United", "Liverpool"],
     "Die Umbenennung der Football League First Division brachte einen neuen Meister hervor, der die erste Saison der Premier League gewann.") ,

    ("Welcher Spieler war der erste Afrikaner, der den Ballon d'Or gewann?",
     "George Weah",
     ["Yaya Touré", "Didier Drogba", "George Weah", "Samuel Eto'o"],
     "Ein bedeutender Preis im Fußball wurde erstmals an einen Spieler aus Afrika verliehen, der diesen prestigeträchtigen Titel gewann.") ,

    ("Welcher Verein hat das berühmte 'Anfield' als Heimstadion?",
     "Liverpool",
     ["Liverpool", "Everton", "Chelsea", "Manchester United"],
     "Ein bekanntes Stadion in England ist berühmt für seine leidenschaftlichen Fans und die berühmte Hymne, die dort gesungen wird.") ,

    ("Welcher Spieler erzielte das schnellste Tor in der Geschichte der Fußball-Weltmeisterschaften?",
     "Hakan Şükür",
     ["Cristiano Ronaldo", "Hakan Şükür", "Pele", "Kylian Mbappé"],
     "Ein Spieler stellte einen Rekord auf, indem er ein Tor in einem Weltmeisterschaftsspiel nur Sekunden nach dem Anpfiff erzielte.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Trainer führte Frankreich zum Gewinn der WM 1998 und der EM 2000?",
     "Aimé Jacquet",
     ["Didier Deschamps", "Raymond Domenech", "Laurent Blanc", "Aimé Jacquet"],
     "Frankreichs nationaler Erfolg in den späten 1990er und frühen 2000er Jahren ist eng mit dem Namen eines herausragenden Trainers verbunden.") ,

    ("Welcher Spieler ist der erste, der in fünf verschiedenen Weltmeisterschaften angetreten ist?",
     "Antonio Carbajal",
     ["Antonio Carbajal", "Cristiano Ronaldo", "Lionel Messi", "Pele"],
     "Ein außergewöhnlicher Spieler schaffte es, sich über mehrere Jahrzehnte hinweg in fünf Weltmeisterschaften zu präsentieren.") ,

    ("Welcher Verein hat die meisten FA Cups gewonnen?",
     "Arsenal",
     ["Arsenal", "Manchester United", "Liverpool", "Chelsea"],
     "Im ältesten Vereinswettbewerb im englischen Fußball hat sich ein Verein durch eine große Anzahl an Siegen hervorgetan.") ,

    ("Welcher Spieler hat die meisten Tore in einer einzigen Saison der La Liga erzielt?",
     "Lionel Messi",
     ["Lionel Messi", "Cristiano Ronaldo", "Raúl", "Telmo Zarra"],
     "Ein Rekord in der spanischen Liga für die meisten Tore in einer Saison wurde von einem außergewöhnlichen Spieler aufgestellt.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Verein hat den UEFA Europa League Rekord für die meisten Titel gewonnen?",
     "Sevilla",
     ["Barcelona", "Liverpool", "Sevilla", "Atletico Madrid"],
     "Ein Verein hat sich durch eine Reihe von Erfolgen im UEFA Europa League Wettbewerb hervorgetan und hält den Rekord für die meisten Titel.") ,

    ("Welcher Trainer führte den FC Barcelona zu einer 'Triple'-Saison im Jahr 2009?",
     "Pep Guardiola",
     ["Johan Cruyff", "Luis Enrique", "Frank Rijkaard", "Pep Guardiola"],
     "Ein Trainer erreichte im Jahr 2009 eine historische Leistung, indem er den FC Barcelona zu einem Triple-Sieg führte.") ,

    ("Welcher Spieler wurde als 'Schwalbenkönig' bekannt für seine häufigen Simulationen?",
     "Diving",
     ["Cristiano Ronaldo", "Lionel Messi", "Neymar", "Diving"]),
    
    ("Welcher Spieler erhielt den Goldenen Schuh für die meisten Tore in europäischen Ligen in der Saison 2019/20?",
     "Ciro Immobile",
     ["Robert Lewandowski", "Ciro Immobile", "Cristiano Ronaldo", "Lionel Messi"],
     "Der Goldene Schuh für die meisten Tore in europäischen Ligen in der Saison 2019/20 wurde an einen Spieler verliehen, der eine herausragende Leistung zeigte.") ,
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Verein hat die meisten Ligue 1 Titel gewonnen?",
     "AS Saint-Étienne",
     ["Marseille", "AS Saint-Étienne", "Paris Saint-Germain", "Olympique Lyon"],
     "Der Titel des besten französischen Vereins in der Ligue 1 gehört einem Verein, der in der Geschichte besonders erfolgreich war.") ,

    ("Welcher Spieler hielt den Rekord für die meisten Tore in einer einzigen Saison der Serie A, bevor dieser Rekord gebrochen wurde?",
     "Gunnar Nordahl",
     ["Paolo Rossi", "Cristiano Ronaldo", "Gunnar Nordahl", "Francesco Totti"],
     "In der Serie A gab es lange Zeit einen Rekord für die meisten Tore in einer Saison, der von einem bestimmten Spieler gehalten wurde.") ,

    ("Welches Land gewann die erste Frauen-Weltmeisterschaft im Fußball?",
     "USA",
     ["Brasilien", "USA", "Norwegen", "Deutschland"],
     "Die erste Frauen-Weltmeisterschaft im Fußball brachte einen Sieg für ein Land, das seitdem eine bedeutende Rolle im Frauenfußball spielt.")
 
]    


        
class SPFußball(Screen):
    def __init__(self, antwort, frage, antwortmöglichkeiten, info_text, **kw):
        super(SPFußball, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Fußball"
        self.fragen = fragenfuß

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

   
        
fragenbasket = [
    
    ("Welcher Spieler hat den Rekord für die meisten Dreipunktewürfe in einer NBA-Saison?",
     "b) Stephen Curry",
     ["a) Ray Allen", "b) Stephen Curry", "c) James Harden", "d) Klay Thompson"],
     "Stephen Curry hat den Rekord für die meisten Dreipunktewürfe in einer NBA-Saison. In der Saison 2015-2016 erzielte er 402 Dreipunktewürfe."),

    ("Welcher Spieler hat den Rekord für die meisten Assists in einer NBA-Saison?",
     "a) John Stockton",
     ["a) John Stockton", "b) Magic Johnson", "c) Steve Nash", "d) Chris Paul"],
     "John Stockton hat den Rekord für die meisten Assists in einer NBA-Saison. In der Saison 1990-1991 erzielte er insgesamt 1.164 Assists."),

    ("Welcher Spieler hat den Rekord für die meisten Rebounds in einer NBA-Saison?",
     "b) Wilt Chamberlain",
     ["a) Dennis Rodman", "b) Wilt Chamberlain", "c) Bill Russell", "d) Moses Malone"],
     "Wilt Chamberlain hat den Rekord für die meisten Rebounds in einer NBA-Saison. In der Saison 1960-1961 erzielte er insgesamt 2.149 Rebounds."),

    ("Welcher Spieler hat den Rekord für die meisten gestohlenen Bälle in einem NBA-Spiel?",
     "c) Kendall Gill",
     ["a) Michael Jordan", "b) Allen Iverson", "c) Kendall Gill", "d) Larry Kenon"],
     "Kendall Gill und Larry Kenon halten den Rekord für die meisten gestohlenen Bälle in einem NBA-Spiel. Beide erzielten jeweils 11 Steals."),

    ("Welcher Spieler hat den Rekord für die meisten Blocks in einer NBA-Saison?",
     "b) Mark Eaton",
     ["a) Hakeem Olajuwon", "b) Mark Eaton", "c) Manute Bol", "d) David Robinson"],
     "Mark Eaton hat den Rekord für die meisten Blocks in einer NBA-Saison. In der Saison 1984-1985 erzielte er insgesamt 456 Blocks."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Spieler hat den Rekord für die meisten Karriere-Assists in der NBA?",
     "c) John Stockton",
     ["a) Steve Nash", "b) Magic Johnson", "c) John Stockton", "d) Jason Kidd"],
     "John Stockton hat den Rekord für die meisten Karriere-Assists in der NBA. Insgesamt erzielte er 15.806 Assists."),

    ("Welcher Spieler hat den Rekord für die meisten Karriere-Blocks in der NBA?",
     "a) Hakeem Olajuwon",
     ["a) Hakeem Olajuwon", "b) Kareem Abdul-Jabbar", "c) Tim Duncan", "d) Shaquille O'Neal"],
     "Hakeem Olajuwon hat den Rekord für die meisten Karriere-Blocks in der NBA. Insgesamt erzielte er 3.830 Blocks."),

    ("Welcher Spieler hat den Rekord für die meisten Punkte in einem Rookie-Jahr?",
     "d) Wilt Chamberlain",
     ["a) Michael Jordan", "b) LeBron James", "c) Kareem Abdul-Jabbar", "d) Wilt Chamberlain"],
     "Wilt Chamberlain hat den Rekord für die meisten Punkte in einem Rookie-Jahr. In seinem ersten Jahr erzielte er insgesamt 2.707 Punkte."),

    ("Welcher Spieler hat den Rekord für die meisten Triple-Doubles in einer NBA-Saison?",
     "c) Russell Westbrook",
     ["a) Magic Johnson", "b) Oscar Robertson", "c) Russell Westbrook", "d) Jason Kidd"],
     "Russell Westbrook hat den Rekord für die meisten Triple-Doubles in einer NBA-Saison. In der Saison 2016-2017 erzielte er insgesamt 42 Triple-Doubles."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Team hält den Rekord für die längste Siegesserie in der NBA-Geschichte?",
     "a) Los Angeles Lakers",
     ["a) Los Angeles Lakers", "b) Chicago Bulls", "c) Golden State Warriors", "d) Miami Heat"],
     "Die Los Angeles Lakers halten den Rekord für die längste Siegesserie in der NBA-Geschichte. Sie gewannen 33 Spiele in Folge."),
    
    ("Welcher Spieler hat den Rekord für die meisten Freiwürfe in einer NBA-Saison erzielt?",
     "d) Jerry West",
     ["a) Karl Malone", "b) James Harden", "c) Kobe Bryant", "d) Jerry West"],
     "Jerry West hat den Rekord für die meisten Freiwürfe in einer NBA-Saison. In der Saison 1965-1966 erzielte er insgesamt 840 Freiwürfe."),

    ("Welcher Spieler hat den Rekord für die meisten Minuten in einem NBA-Spiel gespielt?",
     "d) Dale Ellis",
     ["a) Wilt Chamberlain", "b) Bill Russell", "c) Elgin Baylor", "d) Dale Ellis"],
     "Dale Ellis hat den Rekord für die meisten Minuten in einem NBA-Spiel gespielt. Er spielte 69 Minuten in einem Spiel zwischen den Seattle SuperSonics und den Milwaukee Bucks am 9. November 1989."),

    ("Welcher Spieler hat den Rekord für die meisten persönlichen Fouls in einem NBA-Spiel?",
     "d) Rasheed Wallace",
     ["a) Wilt Chamberlain", "b) Charles Barkley", "c) Karl Malone", "d) Rasheed Wallace"],
     "Rasheed Wallace hat den Rekord für die meisten technischen Fouls in einer NBA-Saison mit insgesamt 41 technischen Fouls in der Saison 2000-2001."),
    
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Team hat den Rekord für die meisten Saisonsiege in der NBA-Geschichte?",
     "b) Golden State Warriors",
     ["a) Chicago Bulls", "b) Golden State Warriors", "c) Los Angeles Lakers", "d) Boston Celtics"],
     "Die Golden State Warriors haben den Rekord für die meisten Saisonsiege in der NBA-Geschichte mit 73 Siegen in der Saison 2015-2016."),

    ("Welcher Spieler hat den Rekord für die meisten aufeinanderfolgenden Freiwürfe in der NBA?",
     "a) Michael Williams",
     ["a) Michael Williams", "b) Dirk Nowitzki", "c) Ray Allen", "d) Stephen Curry"],
     "Michael Williams hat den Rekord für die meisten aufeinanderfolgenden Freiwürfe in der NBA mit 97 aufeinanderfolgenden Freiwürfen in der Saison 1993."),

    ("Welcher Spieler hat den Rekord für die meisten Assists in einem NBA-Finale-Spiel?",
     "a) Magic Johnson",
     ["a) Magic Johnson", "b) LeBron James", "c) John Stockton", "d) Isiah Thomas"],
     "Magic Johnson hat den Rekord für die meisten Assists in einem NBA-Finale-Spiel mit 21 Assists."),

    ("Welcher Spieler hat den Rekord für die meisten Blocks in einem NBA-Finale-Spiel?",
     "d) Dwight Howard",
     ["a) Shaquille O'Neal", "b) Tim Duncan", "c) Bill Walton", "d) Dwight Howard"],
     "Dwight Howard hat den Rekord für die meisten Blocks in einem NBA-Finale-Spiel mit 9 Blocks."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Spieler hat den Rekord für die meisten Steals in einem NBA-Finale-Spiel?",
     "d) Robert Horry",
     ["a) Michael Jordan", "b) Scottie Pippen", "c) Allen Iverson", "d) Robert Horry"],
     "Robert Horry hat den Rekord für die meisten Steals in einem NBA-Finale-Spiel mit 7 Steals."),

    ("Welcher Spieler hat den Rekord für die meisten Freiwürfe in einem NBA-Finale-Spiel erzielt?",
     "d) Elgin Baylor",
     ["a) LeBron James", "b) Michael Jordan", "c) Shaquille O'Neal", "d) Elgin Baylor"],
     "Elgin Baylor hat den Rekord für die meisten Freiwürfe in einem NBA-Finale-Spiel mit 21 Freiwürfen."),

    ("Welcher Spieler hat den Rekord für die meisten Dreipunktewürfe in einem NBA-Finale-Spiel erzielt?",
     "a) Stephen Curry",
     ["a) Stephen Curry", "b) Ray Allen", "c) Klay Thompson", "d) Robert Horry"],
     "Stephen Curry hat den Rekord für die meisten Dreipunktewürfe in einem NBA-Finale-Spiel mit 9 Dreipunktewürfen."),

    ("Welches Team hält den Rekord für die meisten Playoff-Siege in einer einzigen NBA-Saison?",
     "b) Golden State Warriors",
     ["a) Los Angeles Lakers", "b) Golden State Warriors", "c) Chicago Bulls", "d) San Antonio Spurs"],
     "Die Golden State Warriors halten den Rekord für die meisten Playoff-Siege in einer einzigen NBA-Saison mit 16 Siegen in der Saison 2016-2017."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Spieler hat den Rekord für die meisten Punkte in einem einzelnen NBA-Playoff-Spiel?",
     "b) Michael Jordan",
     ["a) LeBron James", "b) Michael Jordan", "c) Wilt Chamberlain", "d) Elgin Baylor"],
     "Michael Jordan hat den Rekord für die meisten Punkte in einem einzelnen NBA-Playoff-Spiel mit 63 Punkten."),

    ("Welcher Spieler hat den Rekord für die meisten Assists in einem einzelnen NBA-Playoff-Spiel?",
     "a) Magic Johnson",
     ["a) Magic Johnson", "b) John Stockton", "c) Steve Nash", "d) Isiah Thomas"],
     "Magic Johnson hat den Rekord für die meisten Assists in einem einzelnen NBA-Playoff-Spiel mit 24 Assists."),

    ("Welcher Spieler hat den Rekord für die meisten Rebounds in einem einzelnen NBA-Playoff-Spiel?",
     "a) Wilt Chamberlain",
     ["a) Wilt Chamberlain", "b) Bill Russell", "c) Shaquille O'Neal", "d) Dennis Rodman"],
     "Wilt Chamberlain hat den Rekord für die meisten Rebounds in einem einzelnen NBA-Playoff-Spiel mit 41 Rebounds."),

    ("Welcher Spieler hat den Rekord für die meisten Blocks in einem einzelnen NBA-Playoff-Spiel?",
     "d) Mark Eaton",
     ["a) Hakeem Olajuwon", "b) Tim Duncan", "c) Patrick Ewing", "d) Mark Eaton"],
     "Mark Eaton hat den Rekord für die meisten Blocks in einem einzelnen NBA-Playoff-Spiel mit 10 Blocks."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Spieler hat den Rekord für die meisten Steals in einem einzelnen NBA-Playoff-Spiel?",
     "a) Allen Iverson",
     ["a) Allen Iverson", "b) Scottie Pippen", "c) Michael Jordan", "d) Gary Payton"],
     "Allen Iverson hat den Rekord für die meisten Steals in einem einzelnen NBA-Playoff-Spiel mit 10 Steals."),

    ("Welches Team hat den Rekord für die meisten aufeinanderfolgenden NBA-Titel?",
     "d) Boston Celtics",
     ["a) Los Angeles Lakers", "b) Chicago Bulls", "c) Golden State Warriors", "d) Boston Celtics"],
     "Die Boston Celtics halten den Rekord für die meisten aufeinanderfolgenden NBA-Titel. Sie gewannen von 1959 bis 1966 acht Titel in Folge."),

    ("Welcher Spieler hat den Rekord für die meisten Punkte in einem einzigen NBA-Spiel?",
     "d) Wilt Chamberlain",
     ["a) Kobe Bryant", "b) Michael Jordan", "c) LeBron James", "d) Wilt Chamberlain"],
     "Wilt Chamberlain hält den Rekord für die meisten Punkte in einem einzigen NBA-Spiel. Er erzielte 1962 insgesamt 100 Punkte in einem Spiel."),

    ("Welcher Spieler hat den Rekord für die meisten Karrierepunkte in der NBA?",
     "d) Kareem Abdul-Jabbar",
     ["a) Karl Malone", "b) LeBron James", "c) Michael Jordan", "d) Kareem Abdul-Jabbar"],
     "Kareem Abdul-Jabbar hält den Rekord für die meisten Karrierepunkte in der NBA. Er erzielte insgesamt 38.387 Punkte in seiner Karriere."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Spieler hat den Rekord für die meisten Karriere-Steals in der NBA?",
     "a) John Stockton",
     ["a) John Stockton", "b) Jason Kidd", "c) Michael Jordan", "d) Gary Payton"],
     "John Stockton hält den Rekord für die meisten Karriere-Steals in der NBA. Er erzielte insgesamt 3.265 Steals in seiner Karriere.")
    
]
            
class SPBasketball(Screen):
    def __init__(self, antwort, frage, antwortmöglichkeiten, info_text, **kw):
        super(SPBasketball, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Basketball"
        self.fragen = fragenbasket

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

    

fragentennis = [
    
    ("Welcher Tennisspieler hat die meisten Grand-Slam-Titel in seiner Karriere gewonnen?",
     "d) Rafael Nadal",
     ["a) Pete Sampras", "b) Roger Federer", "c) Novak Djokovic", "d) Rafael Nadal"],
     "Rafael Nadal hat die meisten Grand-Slam-Titel in seiner Karriere gewonnen. Er hat insgesamt 22 Grand-Slam-Turniere gewonnen."),

    ("Welcher Tennisspieler hat die längste Siegesserie in der Open Era auf Sand?",
     "b) Rafael Nadal",
     ["a) Björn Borg", "b) Rafael Nadal", "c) Guillermo Vilas", "d) Ivan Lendl"],
     "Rafael Nadal hält die längste Siegesserie in der Open Era auf Sand mit 81 aufeinanderfolgenden Siegen."),

    ("Welcher Tennisspieler hat die meisten Wimbledon-Titel in der Open Era gewonnen?",
     "c) Roger Federer",
     ["a) Pete Sampras", "b) Novak Djokovic", "c) Roger Federer", "d) Björn Borg"],
     "Roger Federer hat die meisten Wimbledon-Titel in der Open Era gewonnen. Er hat insgesamt 8 Wimbledon-Titel gewonnen."),

    ("Welcher Tennisspieler hat die meisten Australian Open Titel in der Open Era gewonnen?",
     "d) Novak Djokovic",
     ["a) Andre Agassi", "b) Roger Federer", "c) Rafael Nadal", "d) Novak Djokovic"],
     "Novak Djokovic hat die meisten Australian Open Titel in der Open Era gewonnen. Er hat insgesamt 9 Australian Open Titel gewonnen."),

    ("Welcher Tennisspieler hat die meisten US Open Titel in der Open Era gewonnen?",
     "a) Jimmy Connors",
     ["a) Jimmy Connors", "b) Pete Sampras", "c) Roger Federer", "d) Rafael Nadal"],
     "Jimmy Connors hat die meisten US Open Titel in der Open Era gewonnen. Er hat insgesamt 5 US Open Titel gewonnen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Tennisspieler hat die längste Siegesserie in der Open Era?",
     "d) Novak Djokovic",
     ["a) Rod Laver", "b) Björn Borg", "c) Roger Federer", "d) Novak Djokovic"],
     "Novak Djokovic hat die längste Siegesserie in der Open Era. Er hat insgesamt 43 aufeinanderfolgende Spiele gewonnen."),

    ("Welcher Tennisspieler hat die meisten Masters 1000 Titel gewonnen?",
     "c) Novak Djokovic",
     ["a) Rafael Nadal", "b) Roger Federer", "c) Novak Djokovic", "d) Andre Agassi"],
     "Novak Djokovic hat die meisten Masters 1000 Titel gewonnen. Er hat insgesamt 36 Masters 1000 Titel gewonnen."),

    ("Welcher Tennisspieler hat die meisten Wochen als Nummer 1 der ATP-Weltrangliste verbracht?",
     "d) Novak Djokovic",
     ["a) Pete Sampras", "b) Roger Federer", "c) Ivan Lendl", "d) Novak Djokovic"],
     "Novak Djokovic hat die meisten Wochen als Nummer 1 der ATP-Weltrangliste verbracht. Er hat insgesamt über 360 Wochen an der Spitze verbracht."),

    ("Welcher Tennisspieler hat die meisten Karriere-Siege in der Open Era erzielt?",
     "b) Jimmy Connors",
     ["a) Ivan Lendl", "b) Jimmy Connors", "c) Roger Federer", "d) Rafael Nadal"],
     "Jimmy Connors hat die meisten Karriere-Siege in der Open Era erzielt. Er hat insgesamt 1.274 Matches gewonnen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welcher Tennisspieler hat die meisten Davis Cup Titel mit seinem Team gewonnen?",
     "a) Rafael Nadal",
     ["a) Rafael Nadal", "b) Roger Federer", "c) Andy Murray", "d) Novak Djokovic"],
     "Rafael Nadal hat die meisten Davis Cup Titel mit seinem Team gewonnen. Er hat insgesamt 5 Davis Cup Titel mit Spanien gewonnen."),
    
    ("Welche Tennisspielerin hat die meisten Grand-Slam-Titel in ihrer Karriere gewonnen?",
     "c) Serena Williams",
     ["a) Steffi Graf", "b) Martina Navratilova", "c) Serena Williams", "d) Margaret Court"],
     "Serena Williams hat die meisten Grand-Slam-Titel in ihrer Karriere gewonnen. Sie hat insgesamt 23 Grand-Slam-Turniere gewonnen."),

    ("Welche Tennisspielerin hat die längste Siegesserie in der Open Era?",
     "a) Martina Navratilova",
     ["a) Martina Navratilova", "b) Steffi Graf", "c) Serena Williams", "d) Chris Evert"],
     "Martina Navratilova hält die längste Siegesserie in der Open Era mit 74 aufeinanderfolgenden Siegen."),

    ("Welche Tennisspielerin hat die meisten Wimbledon-Titel in der Open Era gewonnen?",
     "d) Martina Navratilova",
     ["a) Steffi Graf", "b) Serena Williams", "c) Venus Williams", "d) Martina Navratilova"],
     "Martina Navratilova hat die meisten Wimbledon-Titel in der Open Era gewonnen. Sie hat insgesamt 9 Wimbledon-Titel gewonnen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welche Tennisspielerin hat die meisten Australian Open Titel in der Open Era gewonnen?",
     "d) Serena Williams",
     ["a) Steffi Graf", "b) Martina Navratilova", "c) Margaret Court", "d) Serena Williams"],
     "Serena Williams hat die meisten Australian Open Titel in der Open Era gewonnen. Sie hat insgesamt 7 Australian Open Titel gewonnen."),

    ("Welche Tennisspielerin hat die meisten US Open Titel in der Open Era gewonnen?",
     "b) Chris Evert",
     ["a) Serena Williams", "b) Chris Evert", "c) Steffi Graf", "d) Martina Navratilova"],
     "Chris Evert hat die meisten US Open Titel in der Open Era gewonnen. Sie hat insgesamt 6 US Open Titel gewonnen."),

    ("Welche Tennisspielerin hat die längste Zeit als Nummer 1 der WTA-Weltrangliste verbracht?",
     "a) Steffi Graf",
     ["a) Steffi Graf", "b) Serena Williams", "c) Martina Navratilova", "d) Chris Evert"],
     "Steffi Graf hat die längste Zeit als Nummer 1 der WTA-Weltrangliste verbracht. Sie war insgesamt 377 Wochen an der Spitze."),

    ("Welche Tennisspielerin hat die meisten Karriere-Siege in der Open Era erzielt?",
     "a) Martina Navratilova",
     ["a) Martina Navratilova", "b) Chris Evert", "c) Serena Williams", "d) Steffi Graf"],
     "Martina Navratilova hat die meisten Karriere-Siege in der Open Era erzielt. Sie hat insgesamt 1.442 Matches gewonnen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welche Tennisspielerin hat die meisten French Open Titel in der Open Era gewonnen?",
     "c) Chris Evert",
     ["a) Serena Williams", "b) Steffi Graf", "c) Chris Evert", "d) Justine Henin"],
     "Chris Evert hat die meisten French Open Titel in der Open Era gewonnen. Sie hat insgesamt 7 French Open Titel gewonnen."),

    ("Welche Tennisspielerin hat die meisten Fed Cup Titel mit ihrem Team gewonnen?",
     "a) Chris Evert",
     ["a) Chris Evert", "b) Serena Williams", "c) Steffi Graf", "d) Martina Navratilova"],
     "Chris Evert hat die meisten Fed Cup Titel mit ihrem Team gewonnen. Sie hat insgesamt 8 Fed Cup Titel mit den USA gewonnen."),

    ("Welcher Tennisspieler hat die meisten Asche-Titel in der Open Era gewonnen?",
     "a) Guillermo Vilas",
     ["a) Guillermo Vilas", "b) Rafael Nadal", "c) Björn Borg", "d) Ivan Lendl"],
     "Guillermo Vilas hat die meisten Asche-Titel in der Open Era gewonnen. Er hat insgesamt 49 Titel auf Asche gewonnen."),
    
    ("Welches ist das größte Tennisstadion der Welt nach Sitzplatzkapazität?",
     "d) Arthur Ashe Stadium",
     ["a) Wimbledon Centre Court", "b) Rod Laver Arena", "c) Philippe Chatrier Court", "d) Arthur Ashe Stadium"],
     "Das Arthur Ashe Stadium ist das größte Tennisstadion der Welt nach Sitzplatzkapazität. Es bietet Platz für über 23.000 Zuschauer."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Tennisspieler wird oft als 'King of Clay' bezeichnet?",
     "b) Rafael Nadal",
     ["a) Roger Federer", "b) Rafael Nadal", "c) Björn Borg", "d) Gustavo Kuerten"],
     "Rafael Nadal wird oft als 'King of Clay' bezeichnet. Er hat den Rekord für die meisten French Open Titel mit insgesamt 14 Siegen."),

    ("Welcher Tennisspieler war bekannt für seinen kraftvollen Aufschlag und seine explosive Spielweise?",
     "d) Pete Sampras",
     ["a) Andre Agassi", "b) Ivan Lendl", "c) Boris Becker", "d) Pete Sampras"],
     "Pete Sampras war bekannt für seinen kraftvollen Aufschlag und seine explosive Spielweise. Er gewann insgesamt 14 Grand-Slam-Titel."),
    
    ("In welchem Stadion wird das Finale der French Open ausgetragen?",
     "b) Philippe Chatrier Court",
     ["a) Suzanne Lenglen Court", "b) Philippe Chatrier Court", "c) Court 1", "d) Court 2"],
     "Das Finale der French Open wird im Philippe Chatrier Court ausgetragen. Dieser Hauptplatz von Roland Garros bietet eine beeindruckende Kulisse für das Turnier."),

    ("In welchem Stadion finden die Australian Open statt?",
     "d) Melbourne Park",
     ["a) Sydney Olympic Park", "b) Brisbane Tennis Centre", "c) Perth Arena", "d) Melbourne Park"],
     "Die Australian Open finden im Melbourne Park statt. Das Hauptstadion dort ist die Rod Laver Arena."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("In welchem Tennisstadion findet das Wimbledon-Turnier statt?",
     "c) All England Lawn Tennis and Croquet Club",
     ["a) Queen's Club", "b) The O2 Arena", "c) All England Lawn Tennis and Croquet Club", "d) Crystal Palace"],
     "Das Wimbledon-Turnier findet im All England Lawn Tennis and Croquet Club statt. Es ist das älteste und prestigeträchtigste Tennisturnier der Welt."),

    ("Welches Tennisstadion ist bekannt für sein einzigartiges blaues Spielfeld?",
     "a) Caja Mágica",
     ["a) Caja Mágica", "b) Foro Italico", "c) Monte Carlo Country Club", "d) Indian Wells Tennis Garden"],
     "Die Caja Mágica ist bekannt für ihr einzigartiges blaues Spielfeld. Sie ist der Austragungsort des Madrid Open."),

    ("Welches Tennisstadion befindet sich in der Nähe des Eiffelturms in Paris?",
     "b) Stade Roland Garros",
     ["a) Stade Pierre de Coubertin", "b) Stade Roland Garros", "c) Stade Jean Bouin", "d) Parc des Princes"],
     "Das Stade Roland Garros befindet sich in der Nähe des Eiffelturms in Paris. Es ist der Austragungsort der French Open."),

    ("Welches Tennisstadion ist für sein versenkbares Dach bekannt?",
     "a) Wimbledon Centre Court",
     ["a) Wimbledon Centre Court", "b) Rod Laver Arena", "c) Arthur Ashe Stadium", "d) Mercedes-Benz Arena"],
     "Der Wimbledon Centre Court ist für sein versenkbares Dach bekannt. Es ermöglicht das Spiel auch bei Regen fortzusetzen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("In welchem Stadion wird das Finale der ATP Finals ausgetragen?",
     "d) The O2 Arena",
     ["a) Madison Square Garden", "b) Foro Italico", "c) Stade Roland Garros", "d) The O2 Arena"],
     "Das Finale der ATP Finals wird in der The O2 Arena in London ausgetragen. Es ist ein Indoor-Hartplatz-Turnier."),

    ("Welches Stadion ist bekannt für das größte Center Court-Dach der Welt?",
     "c) Arthur Ashe Stadium",
     ["a) Wimbledon Centre Court", "b) Rod Laver Arena", "c) Arthur Ashe Stadium", "d) Philippe Chatrier Court"],
     "Das Arthur Ashe Stadium ist bekannt für das größte Center Court-Dach der Welt. Es wurde 2016 installiert."),

    ("In welchem Stadion fand das erste Nachttennisspiel der US Open statt?",
     "d) Louis Armstrong Stadium",
     ["a) Arthur Ashe Stadium", "b) Grandstand Stadium", "c) Court 17", "d) Louis Armstrong Stadium"],
     "Das erste Nachttennisspiel der US Open fand im Louis Armstrong Stadium statt. Dieses historische Ereignis fand 1975 statt."),
    
    ("In welchem Land wurde Tennis ursprünglich erfunden?",
     "d) Frankreich",
     ["a) England", "b) Spanien", "c) Italien", "d) Frankreich"],
     "Tennis wurde ursprünglich in Frankreich erfunden. Das Spiel, bekannt als Jeu de Paume, wurde im 12. Jahrhundert gespielt und entwickelte sich später zum modernen Tennis."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wann wurde das erste Wimbledon-Turnier ausgetragen?",
     "b) 1877",
     ["a) 1868", "b) 1877", "c) 1885", "d) 1890"],
     "Das erste Wimbledon-Turnier wurde 1877 ausgetragen. Es ist das älteste Tennisturnier der Welt und fand im All England Club in London statt."),

    ("Welcher Tennisspieler gilt als der Begründer des modernen Tennis?",
     "a) Major Walter Clopton Wingfield",
     ["a) Major Walter Clopton Wingfield", "b) René Lacoste", "c) Bill Tilden", "d) Rod Laver"],
     "Major Walter Clopton Wingfield gilt als der Begründer des modernen Tennis. Er standardisierte die Regeln und verbreitete das Spiel im späten 19. Jahrhundert."),

    ("Wann wurde das erste Davis Cup Turnier ausgetragen?",
     "c) 1900",
     ["a) 1890", "b) 1895", "c) 1900", "d) 1910"],
     "Das erste Davis Cup Turnier wurde 1900 ausgetragen. Es war ein Wettbewerb zwischen den USA und Großbritannien."),

    ("Welches Jahr gilt als Gründungsjahr der Open Era im Tennis?",
     "d) 1968",
     ["a) 1950", "b) 1958", "c) 1964", "d) 1968"],
     "Das Jahr 1968 gilt als Gründungsjahr der Open Era im Tennis. In diesem Jahr durften erstmals Profis an Grand Slam Turnieren teilnehmen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Wann wurde der erste Tenniswettkampf der Olympischen Spiele ausgetragen?",
     "a) 1896",
     ["a) 1896", "b) 1900", "c) 1920", "d) 1924"],
     "Der erste Tenniswettkampf der Olympischen Spiele wurde 1896 ausgetragen. Tennis war eine der neun Sportarten der ersten modernen Olympischen Spiele in Athen."),

    ("Welche Tennisspielerin war die erste, die alle vier Grand Slam Titel in einem Kalenderjahr gewann?",
     "b) Maureen Connolly",
     ["a) Suzanne Lenglen", "b) Maureen Connolly", "c) Margaret Court", "d) Steffi Graf"],
     "Maureen Connolly war die erste Tennisspielerin, die alle vier Grand Slam Titel in einem Kalenderjahr gewann. Sie erreichte dieses Kunststück 1953."),

    ("Wann wurde das erste US Open Turnier ausgetragen?",
     "d) 1881",
     ["a) 1875", "b) 1879", "c) 1880", "d) 1881"],
     "Das erste US Open Turnier wurde 1881 ausgetragen. Es fand im Newport Casino in Rhode Island statt."),

    ("Welche Tennisspielerin war die erste, die während ihrer Karriere mehr als 100 Einzeltitel gewann?",
     "c) Chris Evert",
     ["a) Martina Navratilova", "b) Steffi Graf", "c) Chris Evert", "d) Billie Jean King"],
     "Chris Evert war die erste Tennisspielerin, die während ihrer Karriere mehr als 100 Einzeltitel gewann. Sie beendete ihre Karriere mit insgesamt 157 Titeln."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Tennisspieler war der erste, der in der Open Era den Grand Slam gewann?",
     "a) Rod Laver",
     ["a) Rod Laver", "b) Ken Rosewall", "c) Björn Borg", "d) Andre Agassi"],
     "Rod Laver war der erste Tennisspieler, der in der Open Era den Grand Slam gewann. Er erreichte dieses Kunststück 1969.")

    
]

class SPTennis(Screen):
    def __init__(self,frage, antwort, antwortmöglichkeiten, info_text, **kw):
        super(SPTennis, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Tennis"
        self.fragen = fragentennis

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

    

fragenfitness = [
    
    ("Wann begann die moderne Fitnessbewegung in den USA?",
     "b) Ende des 19. Jahrhunderts",
     ["a) Mitte des 18. Jahrhunderts", "b) Ende des 19. Jahrhunderts", "c) Anfang des 20. Jahrhunderts", "d) Mitte des 20. Jahrhunderts"],
     "Die moderne Fitnessbewegung begann Ende des 19. Jahrhunderts, als gesundheitsfördernde Aktivitäten wie Gymnastik und Krafttraining populär wurden."),

    ("Welcher Athlet gilt als Pionier der modernen Fitnessbewegung?",
     "c) Jack LaLanne",
     ["a) Arnold Schwarzenegger", "b) Jane Fonda", "c) Jack LaLanne", "d) Joe Weider"],
     "Jack LaLanne gilt als Pionier der modernen Fitnessbewegung. Er war ein Vorreiter für Fitnessübungen im Fernsehen und förderte gesunde Lebensgewohnheiten."),

    ("Welche Sportart war maßgeblich für die Entwicklung des Cross-Trainings?",
     "a) Triathlon",
     ["a) Triathlon", "b) Leichtathletik", "c) Rudern", "d) Tennis"],
     "Der Triathlon war maßgeblich für die Entwicklung des Cross-Trainings, da er Ausdauer, Kraft und Flexibilität in verschiedenen Disziplinen vereint."),

    ("Welches Jahrzehnt prägte den Aufstieg der Fitnessstudios in den USA?",
     "d) 1980er Jahre",
     ["a) 1950er Jahre", "b) 1960er Jahre", "c) 1970er Jahre", "d) 1980er Jahre"],
     "Die 1980er Jahre prägten den Aufstieg der Fitnessstudios in den USA, als Aerobic- und Krafttrainingsprogramme populär wurden."),

    ("Wer entwickelte das Konzept des High Intensity Interval Trainings (HIIT)?",
     "b) Dr. Izumi Tabata",
     ["a) Joe Weider", "b) Dr. Izumi Tabata", "c) Jane Fonda", "d) Arnold Schwarzenegger"],
     "Dr. Izumi Tabata entwickelte das Konzept des High Intensity Interval Trainings (HIIT), das kurze intensive Trainingseinheiten mit kurzen Erholungsphasen kombiniert."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Fitnessbewegung betont das Training mit dem eigenen Körpergewicht?",
     "c) Calisthenics",
     ["a) Pilates", "b) Zumba", "c) Calisthenics", "d) CrossFit"],
     "Calisthenics betont das Training mit dem eigenen Körpergewicht, das Kraft, Ausdauer und Flexibilität verbessern kann."),

    ("Welche Persönlichkeit war bekannt für ihre Rolle in Fitnessvideos in den 1980er Jahren?",
     "a) Jane Fonda",
     ["a) Jane Fonda", "b) Sylvester Stallone", "c) Bruce Lee", "d) Richard Simmons"],
     "Jane Fonda war bekannt für ihre Rolle in Fitnessvideos in den 1980er Jahren, die Aerobic-Übungen und Fitness-Routinen populär machten."),

    ("Welche Fitnessbewegung fördert das Training unter Anleitung eines persönlichen Trainers?",
     "d) Personal Training",
     ["a) Yoga", "b) Tai Chi", "c) Pilates", "d) Personal Training"],
     "Personal Training fördert das individuelle Training unter Anleitung eines persönlichen Trainers, der auf die spezifischen Bedürfnisse und Ziele des Einzelnen eingeht."),

    ("Welche Sportart kombiniert Elemente aus Turnen, Akrobatik und Tanz?",
     "b) Pole Dance",
     ["a) Boxen", "b) Pole Dance", "c) Golf", "d) Schwimmen"],
     "Pole Dance kombiniert Elemente aus Turnen, Akrobatik und Tanz, wobei eine vertikale Stange als Trainingsgerät verwendet wird."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Art von Fitnessgerät simuliert das Treppensteigen?",
     "b) Stair Climber",
     ["a) Rudergerät", "b) Stair Climber", "c) Crosstrainer", "d) Liegefahrrad"],
     "Ein Stair Climber simuliert das Treppensteigen und ist eine effektive Cardio-Übung zur Verbesserung der Ausdauer und Beinkraft."),

    ("Welche Fitnessbewegung kombiniert Krafttraining und Cardio in einem hochintensiven Zirkeltraining?",
     "d) CrossFit",
     ["a) Yoga", "b) Pilates", "c) Tai Chi", "d) CrossFit"],
     "CrossFit kombiniert Krafttraining, Cardio und funktionelle Bewegungen in einem hochintensiven Zirkeltraining zur Steigerung von Kraft, Ausdauer und Flexibilität."),

    ("Welche Übungsmethode ist bekannt für ihre Verwendung von elastischen Bändern zur Stärkung der Muskeln?",
     "a) Pilates",
     ["a) Pilates", "b) Zumba", "c) Kickboxen", "d) Bodypump"],
     "Pilates ist bekannt für seine Verwendung von elastischen Bändern und anderen Geräten zur Stärkung der Muskeln und Verbesserung der Flexibilität."),

    ("Welche Fitnessbewegung fördert das Training mit schweren Gewichten zur Steigerung der Muskelmasse?",
     "c) Bodybuilding",
     ["a) Jogging", "b) Schwimmen", "c) Bodybuilding", "d) Tanz"],
     "Bodybuilding fördert das Training mit schweren Gewichten und spezifischen Übungen zur Steigerung der Muskelmasse und Definition der Muskeln."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Fitnessübung konzentriert sich auf die Verbesserung der Balance und Stärkung der Kernmuskulatur?",
     "b) Standwaage",
     ["a) Liegestütze", "b) Standwaage", "c) Kniebeugen", "d) Ausfallschritte"],
     "Die Standwaage konzentriert sich auf die Verbesserung der Balance und Stärkung der Kernmuskulatur durch das Halten einer ausbalancierten Position."),

    ("Welche Art von Training nutzt Schwimmen als Hauptübung zur Verbesserung von Ausdauer und Kraft?",
     "a) Aquafitness",
     ["a) Aquafitness", "b) Boxen", "c) Jogging", "d) Radfahren"],
     "Aquafitness nutzt Schwimmen als Hauptübung zur Verbesserung von Ausdauer, Kraft und Flexibilität im Wasser."),

    ("Welche Fitnessbewegung verwendet eine Kombination aus Tanzschritten und Aerobic-Übungen?",
     "b) Zumba",
     ["a) Karate", "b) Zumba", "c) Volleyball", "d) Tischtennis"],
     "Zumba verwendet eine Kombination aus Tanzschritten und Aerobic-Übungen, um die Fitness zu verbessern und gleichzeitig Spaß zu haben."),

    ("Welche Sportart kombiniert Atemtechniken mit Bewegungen zur Förderung von Entspannung und Flexibilität?",
     "c) Tai Chi",
     ["a) Spinning", "b) Boxen", "c) Tai Chi", "d) Rudern"],
     "Tai Chi kombiniert Atemtechniken mit fließenden Bewegungen zur Förderung von Entspannung, Flexibilität und innerem Gleichgewicht."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welche Fitnessbewegung fördert die Steigerung der Herz-Kreislauf-Fitness durch rhythmisches Training?",
     "d) Stepp-Aerobic",
     ["a) Kickboxen", "b) Bodybuilding", "c) Yoga", "d) Stepp-Aerobic"],
     "Stepp-Aerobic fördert die Steigerung der Herz-Kreislauf-Fitness durch rhythmisches Training auf einer erhöhten Plattform."),
    
    ("Welche Fitnessbewegung fördert die Verbesserung der Balance und Koordination durch Übungen auf einem instabilen Untergrund?",
     "c) Functional Training",
     ["a) Step-Aerobic", "b) Bodypump", "c) Functional Training", "d) Piloxing"],
     "Functional Training fördert die Verbesserung der Balance und Koordination durch Übungen auf einem instabilen Untergrund, um die funktionelle Fitness zu steigern."),

    ("Welche Trainingsmethode kombiniert Kraftübungen mit gymnastischen Elementen, wie Klimmzügen und Muscle-ups?",
     "b) Calisthenics",
     ["a) Rhythmische Sportgymnastik", "b) Calisthenics", "c) Bouldern", "d) Langhanteltraining"],
     "Calisthenics kombiniert Kraftübungen mit gymnastischen Elementen wie Klimmzügen und Muscle-ups, die ohne zusätzliche Gewichte ausgeführt werden."),

    ("Welche Sportart konzentriert sich auf die Verbesserung von Flexibilität und Muskelkontrolle durch fließende Bewegungen?",
     "a) Pilates",
     ["a) Pilates", "b) Boxen", "c) Mountainbiking", "d) Langlauf"],
     "Pilates konzentriert sich auf die Verbesserung von Flexibilität und Muskelkontrolle durch fließende Bewegungen und spezifische Atemtechniken."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welche Fitnessbewegung kombiniert Krafttraining, Ausdauer und Flexibilität mit dem Einsatz von Widerstandsbändern?",
     "b) TRX-Training",
     ["a) Capoeira", "b) TRX-Training", "c) Tennis", "d) Feldhockey"],
     "TRX-Training kombiniert Krafttraining, Ausdauer und Flexibilität unter Verwendung von Widerstandsbändern und dem eigenen Körpergewicht."),

    ("Welche Art von Training verwendet das Körpergewicht und Geschwindigkeit zur Verbesserung der Sprungkraft?",
     "d) Plyometrisches Training",
     ["a) Stretching", "b) Piloxing", "c) Salsa-Tanz", "d) Plyometrisches Training"],
     "Plyometrisches Training verwendet das Körpergewicht und Geschwindigkeit zur Verbesserung der Sprungkraft und explosiven Kraft."),

    ("Welche Fitnessbewegung fördert die Ausdauer und Geschwindigkeit durch Sprint- und Intervalltraining?",
     "c) Lauftraining",
     ["a) Golf", "b) Klettern", "c) Lauftraining", "d) Judo"],
     "Lauftraining fördert die Ausdauer und Geschwindigkeit durch Sprint- und Intervalltraining auf unterschiedlichen Distanzen."),

    ("Welche Trainingsmethode verwendet ein spezielles Gerät zum simulierten Rudern?",
     "a) Rudergerät",
     ["a) Rudergerät", "b) Vibrationsplatte", "c) Battle Rope", "d) Springseil"],
     "Ein Rudergerät verwendet ein spezielles Gerät zum simulierten Rudern und bietet ein effektives Cardio-Training zur Verbesserung von Ausdauer und Kraft."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),

    ("Welche Fitnessbewegung kombiniert traditionelle Yoga-Posen mit Akrobatik und Partnerübungen?",
     "b) Acro-Yoga",
     ["a) Salsa", "b) Acro-Yoga", "c) Jiu Jitsu", "d) Beachvolleyball"],
     "Acro-Yoga kombiniert traditionelle Yoga-Posen mit Akrobatik und Partnerübungen, um Kraft, Flexibilität und Vertrauen zu fördern."),
    
]

class SPFitness(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, frage, info_text, **kw):
        super(SPFitness, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Fitness"
        self.fragen = fragenfitness

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

class Gesunheit(Screen):
    def __init__(self, **kwargs):
        super(Gesunheit, self).__init__(**kwargs)
        self.lyt = FloatLayout()
        
        self.label = Label (text="Starten = Themenbereiche wählen", size_hint=(None, None), size=(100,100), pos_hint={"center_x":0.5,"center_y":0.65})
        self.lyt.add_widget(self.label) 
        
        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100,100),
                           pos_hint={"center_x":0.15,"y":0}
                           )                   
        self.btn1.bind(on_press=self.wechselmenu) 
        self.lyt.add_widget(self.btn1)  
                       
        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0}
                           )
        self.btn2.bind(on_press=self.wechseltrp)
        self.lyt.add_widget(self.btn2)
      
        self.btn3 = Button (background_normal='profile.png', background_down='profile.png',
                            size_hint=(None, None),
                            size=(100,100),
                            pos_hint={"center_x":0.85,"y":0}
                            )
        self.btn3.bind(on_press=self.wechselprfl)
        self.lyt.add_widget(self.btn3)
        
        self.lyt.add_widget(Image(source="logo-1.png",
                                     size_hint=(None,None),
                                     size=(150,150),
                                     pos_hint={'center_x': 0.5, 'top': 1.0}))
        
        self.themen = Button(text="Themenbereiche", background_color = '#069AF3',
                              size_hint=(None, None), size=(150,100), pos_hint={"center_x":0.5, "center_y":0.45})
        self.themen.bind(on_press=self.topic_list)
        
        self.lyt.add_widget(self.themen)
        
        self.add_widget(self.lyt)
        
    def wechselmenu (self,instance):
        self.manager.current ='menu'
        
    def wechseltrp (self, instance):
        self.manager.current = 'trophe'
        
    def wechselprfl (self, instance):
        self.manager.current = 'profile'
        
    def topic_list(self, instance):
        popup_content = GridLayout(cols=1, spacing = 10, size_hint_y=None)
        popup_content.bind(minimum_height=popup_content.setter("height"))
        
        topics = ["Psychologie","Ernährung","Körper"]
        
        for topic in topics:
         btn = Button (text=str(topic), size_hint_y=None, height=40)
         btn.bind(on_press=self.switch_to_topic)
         popup_content.add_widget(btn)
        
        self.popup = Popup(title= 'Themenbereich', size_hint=(None,None), size=(300, 400), auto_dismiss=True)
        self.popup.content = popup_content
        self.popup.open()
    
    def switch_to_topic(self, instance):
        self.popup.dismiss()
        topic_key = instance.text.lower().replace(' ', '_')
        questions = self.manager.fragen.get(topic_key, [])

        if questions:
            screen_name = f"{topic_key}_0"
            if not self.manager.has_screen(screen_name):
                for i, frage in enumerate(questions):
                    text, antwort, antwortmöglichkeiten, info_text = frage
                    screen_name = f"{topic_key}_{i}"
                    if topic_key == "psychologie":
                        screen = GEPSsychologie(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "ernährung":
                        screen = GEErnährung(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                    elif topic_key == "körper":
                        screen = GEKörper(name=screen_name, frage=text, antwort=antwort,
                        antwortmöglichkeiten=antwortmöglichkeiten, info_text=info_text)
                        
                    self.manager.add_widget(screen)
            
            self.manager.current = f"{topic_key}_0"
        
fragenpsy = [
    ("Was ist Psychologie?",
     "Die wissenschaftliche Untersuchung des Verhaltens und der mentalen Prozesse.",
     ["Die Lehre von den psychischen Krankheiten.",
      "Die Wissenschaft der sozialen Interaktionen.",
      "Die wissenschaftliche Untersuchung des Verhaltens und der mentalen Prozesse.",
      "Die Untersuchung von Gehirnstrukturen."],
     "Psychologie ist die wissenschaftliche Untersuchung des Verhaltens und der mentalen Prozesse. Sie umfasst das Studium von Gedanken, Gefühlen und Verhaltensweisen und untersucht, wie sie durch biologische, soziale und kulturelle Faktoren beeinflusst werden."),

    ("Welche der folgenden ist keine der Hauptperspektiven in der Psychologie?",
     "Mythologische Perspektive.",
     ["Biologische Perspektive.",
      "Kognitive Perspektive.",
      "Mythologische Perspektive.",
      "Sozial-kulturelle Perspektive."],
     "Die Hauptperspektiven in der Psychologie sind die biologische, kognitive, behavioristische, psychodynamische, humanistische und sozial-kulturelle Perspektive. Jede bietet unterschiedliche Erklärungen für menschliches Verhalten und mentale Prozesse."),

    ("Wer wird oft als 'Vater der modernen Psychologie' bezeichnet?",
     "Wilhelm Wundt.",
     ["Sigmund Freud.",
      "B.F. Skinner.",
      "Carl Rogers.",
      "Wilhelm Wundt."],
     "Wilhelm Wundt wird oft als 'Vater der modernen Psychologie' bezeichnet, weil er 1879 das erste Labor für experimentelle Psychologie in Leipzig gründete und damit die Psychologie als eigenständige Wissenschaft etablierte."),

    ("Was ist das Hauptziel der kognitiven Psychologie?",
     "Das Studium der mentalen Prozesse wie Denken, Erinnern und Problemlösen.",
     ["Die Untersuchung von Gehirnstrukturen.",
      "Das Studium des Verhaltens ohne Berücksichtigung mentaler Prozesse.",
      "Das Studium der mentalen Prozesse wie Denken, Erinnern und Problemlösen.",
      "Die Erforschung der menschlichen Sexualität."],
     "Die kognitive Psychologie befasst sich mit der Untersuchung der mentalen Prozesse, die dem Denken, Erinnern, Problemlösen, Wahrnehmen und Lernen zugrunde liegen. Diese Perspektive erforscht, wie Menschen Informationen verarbeiten und verstehen."),

    ("Welche Art von Konditionierung beschrieb B.F. Skinner?",
     "Operante Konditionierung.",
     ["Klassische Konditionierung.",
      "Latentes Lernen.",
      "Operante Konditionierung.",
      "Sozial-kognitive Theorie."],
     "B.F. Skinner ist bekannt für seine Arbeit zur operanten Konditionierung, bei der Verhalten durch Verstärkungen oder Bestrafungen beeinflusst wird. Positive Verstärkung erhöht die Wahrscheinlichkeit eines Verhaltens, während Bestrafung es verringert."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
        ("Welche Theorie beschreibt menschliche Motivation durch eine Bedürfnishierarchie?",
     "Maslows Bedürfnishierarchie",
     ["Eriksons Entwicklungstheorie",
      "Maslows Bedürfnishierarchie",
      "Pavlovs Konditionierungstheorie",
      "Freuds Psychoanalyse"],
     "Diese Theorie erklärt, dass Menschen durch verschiedene Stufen von Bedürfnissen motiviert werden, beginnend mit physiologischen Bedürfnissen und hin zu höheren Bedürfnissen wie Selbstverwirklichung. Der Psychologe Abraham Maslow ist bekannt für dieses Modell."),

    ("Welcher Psychologe führte ein Experiment mit neutralem und unkonditioniertem Reiz durch?",
     "Iwan Pawlow",
     ["John Watson",
      "Carl Rogers",
      "Iwan Pawlow",
      "Sigmund Freud"],
     "Ein bekanntes Experiment zeigte, wie Tiere lernen können, auf einen neutralen Reiz mit einer spezifischen Reaktion zu antworten, wenn dieser Reiz wiederholt mit einer Belohnung kombiniert wird. Iwan Pawlow ist der Psychologe hinter diesem Experiment."),

    ("Welcher Psychologe unterteilte die kognitive Entwicklung von Kindern in verschiedene Stadien?",
     "Jean Piaget",
     ["Erik Erikson",
      "Jean Piaget",
      "Carl Jung",
      "Lawrence Kohlberg"],
     "Jean Piaget entwickelte eine Theorie, die beschreibt, wie Kinder durch verschiedene Entwicklungsstadien hindurchgehen, wobei sie von einfachen zu komplexeren Denkprozessen übergehen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welches Experiment zeigt, dass ein neutraler Reiz selbst eine Reaktion auslösen kann?",
     "Pawlows Hund",
     ["Skinner-Box",
      "Milgram-Experiment",
      "Pawlows Hund",
      "Zimbardo-Gefängnisexperiment"],
     "Ein berühmtes Experiment zeigte, dass ein neutraler Reiz, wenn er wiederholt mit einem natürlichen Reiz gekoppelt wird, selbst eine spezifische Reaktion auslösen kann. Dieses Experiment wird oft mit Iwan Pawlow in Verbindung gebracht."),

    ("Welche Theorie betont unbewusste Prozesse in der Beeinflussung des Verhaltens?",
     "Freuds Psychoanalyse",
     ["Behaviorismus",
      "Freuds Psychoanalyse",
      "Humanistische Psychologie",
      "Kognitive Theorie"],
     "Die Theorie, die den Einfluss von unbewussten Prozessen auf das Verhalten und die psychische Gesundheit betont, ist die Psychoanalyse. Sie wurde von Sigmund Freud entwickelt."),

    ("Welcher Forscher zeigte, dass Menschen Autoritätsanweisungen folgen, auch wenn sie anderen schaden?",
     "Stanley Milgram",
     ["Philip Zimbardo",
      "Stanley Milgram",
      "John Watson",
      "B.F. Skinner"],
     "Ein Experiment zur Gehorsamkeit zeigte, wie weit Menschen bereit sind zu gehen, um den Anweisungen einer Autoritätsperson zu folgen, auch wenn diese ethisch fragwürdig sind. Stanley Milgram ist der Psychologe hinter diesem Experiment."),

    ("Welcher Psychologe entwickelte die Theorie der operanten Konditionierung?",
     "B.F. Skinner",
     ["Carl Rogers",
      "John Watson",
      "B.F. Skinner",
      "Erik Erikson"],
     "Die Theorie, die erklärt, wie Verhalten durch Verstärkungen oder Bestrafungen geformt wird, wurde von B.F. Skinner entwickelt und ist als operante Konditionierung bekannt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Forscherin ist für ihre Studien zur Geschlechterentwicklung bekannt?",
     "Sandra Bem",
     ["Anna Freud",
      "Mary Ainsworth",
      "Sandra Bem",
      "Karen Horney"],
     "Sandra Bem hat sich intensiv mit der Rolle von Geschlechterstereotypen und deren Einfluss auf das Verhalten beschäftigt. Ihre Forschung zur Geschlechterentwicklung ist sehr einflussreich."),

    ("Welche Theorie beschreibt Lernen durch Beobachtung und Nachahmung?",
     "Modelllernen",
     ["Klassische Konditionierung",
      "Modelllernen",
      "Selbstverwirklichung",
      "Kognitive Dissonanz"],
     "Das Modelllernen beschreibt, wie Menschen durch das Beobachten und Nachahmen des Verhaltens anderer lernen. Albert Bandura ist bekannt für diese Theorie."),
    
        ("Welche Theorie beschreibt das Leben als Serie von Krisen?",
     "Eriksons Theorie der psychosozialen Entwicklung",
     ["Freuds Theorie der psychosexuellen Entwicklung",
      "Eriksons Theorie der psychosozialen Entwicklung",
      "Piagets Stufen der kognitiven Entwicklung",
      "Kohlbergs Theorie der Moralentwicklung"],
     "Erik Eriksons Theorie beschreibt, dass die Persönlichkeit durch das Bewältigen spezifischer Krisen in verschiedenen Lebensphasen geformt wird."),

    ("Welcher Psychologe untersuchte Gehorsam gegenüber Autoritäten?",
     "Stanley Milgram",
     ["Philip Zimbardo",
      "Stanley Milgram",
      "John Watson",
      "B.F. Skinner"],
     "Stanley Milgram führte ein Experiment durch, das den Einfluss von Autoritäten auf das Verhalten untersuchte."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welcher Psychologe betonte Selbstverwirklichung als höchste Motivation?",
     "Abraham Maslow",
     ["Carl Rogers",
      "Abraham Maslow",
      "Sigmund Freud",
      "Albert Ellis"],
     "Abraham Maslow entwickelte die Theorie, die Selbstverwirklichung als höchste Form menschlicher Motivation beschreibt."),

    ("Welcher Ansatz in der Psychologie betont subjektives Erleben?",
     "Humanistische Psychologie",
     ["Behaviorismus",
      "Humanistische Psychologie",
      "Psychoanalyse",
      "Kognitive Psychologie"],
     "Die humanistische Psychologie legt großen Wert auf subjektives Erleben und persönliche Erfahrungen als Schlüssel zum Verständnis des Verhaltens."),

    ("Welche Gedächtnisart speichert Informationen kurzzeitig?",
     "Kurzzeitgedächtnis",
     ["Langzeitgedächtnis",
      "Kurzzeitgedächtnis",
      "Arbeitsgedächtnis",
      "Sensorisches Gedächtnis"],
     "Das Kurzzeitgedächtnis speichert Informationen für kurze Zeit, bevor sie verarbeitet oder vergessen wird."),

    ("Welcher Begriff beschreibt die Neigung, Persönlichkeit zu überschätzen und äußere Umstände zu unterschätzen?",
     "Fundamentaler Attributionsfehler",
     ["Selbstwertdienliche Verzerrung",
      "Fundamentaler Attributionsfehler",
      "Kognitive Dissonanz",
      "Halo-Effekt"],
     "Der fundamentale Attributionsfehler beschreibt die Tendenz, Verhalten aufgrund der Persönlichkeit zu erklären und situative Faktoren zu unterschätzen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Theorie erklärt die Anpassung von Gedanken und Verhalten zur Reduzierung innerer Spannungen?",
     "Kognitive Dissonanz",
     ["Behaviorismus",
      "Kognitive Dissonanz",
      "Selbstwahrnehmungstheorie",
      "Operante Konditionierung"],
     "Kognitive Dissonanz erklärt, wie Menschen innere Spannungen reduzieren, indem sie Überzeugungen oder Verhalten anpassen, wenn diese im Widerspruch stehen."),

    ("Welcher Psychologe entwickelte die Bindungstheorie?",
     "John Bowlby",
     ["Mary Ainsworth",
      "John Bowlby",
      "Sigmund Freud",
      "Erik Erikson"],
     "John Bowlby entwickelte die Bindungstheorie, die erklärt, wie frühe Bindungen die spätere emotionale und soziale Entwicklung beeinflussen."),

    ("Welche Theorie besagt, dass Wahrnehmungen durch persönliche Erfahrungen konstruiert werden?",
     "Konstruktivismus",
     ["Behaviorismus",
      "Konstruktivismus",
      "Humanistische Psychologie",
      "Psychoanalyse"],
     "Der Konstruktivismus erklärt, dass unsere Wahrnehmung durch individuelle Erfahrungen und Interaktionen geformt wird."),

    ("Welcher Psychologe betonte die Rolle sozialer Interaktionen in der kognitiven Entwicklung?",
     "Lev Wygotski",
     ["Jean Piaget",
      "Lev Wygotski",
      "Erik Erikson",
      "Sigmund Freud"],
     "Lev Wygotski betonte, dass soziale Interaktionen und Sprache eine zentrale Rolle in der kognitiven Entwicklung spielen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    
      ("Welche Theorie beschreibt, wie Menschen aufgrund ihrer Erfahrungen mit Belohnungen und Bestrafungen Verhaltensmuster entwickeln, die sie im Laufe der Zeit wiederholen oder vermeiden?",
     "Operante Konditionierung",
     ["Klassische Konditionierung",
      "Operante Konditionierung",
      "Soziales Lernen",
      "Kognitive Dissonanz"],
     "Die Theorie der operanten Konditionierung, entwickelt von B.F. Skinner, erklärt, wie Verhalten durch Verstärkungen oder Bestrafungen beeinflusst wird."),
    
    
    ("Welche Art von Gedächtnis ermöglicht es einem, sehr detaillierte Erinnerungen an spezifische Ereignisse zu speichern, oft mit emotionaler Bedeutung?",
     "Episodisches Gedächtnis",
     ["Semantisches Gedächtnis",
      "Episodisches Gedächtnis",
      "Sensorisches Gedächtnis",
      "Kurzzeitgedächtnis"],
     "Das episodische Gedächtnis ist verantwortlich für die Speicherung von Erinnerungen an spezifische Ereignisse, oft verbunden mit emotionalen Erlebnissen und Kontextinformationen."),

    ("Welche Theorie erklärt, wie Menschen ihre emotionalen Reaktionen durch die Art und Weise beeinflussen können, wie sie Situationen interpretieren und bewerten?",
     "Kognitive Bewertungstheorie",
     ["Soziale Lerntheorie",
      "Kognitive Bewertungstheorie",
      "Behaviorismus",
      "Bindungstheorie"],
     "Die kognitive Bewertungstheorie beschreibt, wie unsere emotionale Reaktion auf eine Situation durch die Art und Weise beeinflusst wird, wie wir diese Situation bewerten und interpretieren."),

    ("Welcher Psychologe ist bekannt für die Entwicklung einer Theorie, die das soziale Lernen durch Nachahmung und Beobachtung von Modellen beschreibt?",
     "Albert Bandura",
     ["John Watson",
      "B.F. Skinner",
      "Albert Bandura",
      "Lev Wygotski"],
     "Albert Bandura ist bekannt für seine Theorie des sozialen Lernens, die erklärt, wie Menschen durch Beobachtung und Nachahmung von Verhaltensmodellen lernen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Theorie besagt, dass Menschen eine Reihe von Entwicklungsstadien durchlaufen?",
     "Eriksons Theorie der psychosozialen Entwicklung",
     ["Freuds Theorie der psychosexuellen Entwicklung",
      "Eriksons Theorie der psychosozialen Entwicklung",
      "Piagets kognitive Entwicklungsstufen",
      "Kohlbergs moralische Entwicklungsstufen"],
     "Erik Erikson entwickelte eine Theorie, die die menschliche Entwicklung als einen Prozess von Krisen beschreibt, die in verschiedenen Lebensphasen bewältigt werden müssen."),
    
    ("Welches Konzept beschreibt die Tendenz, unsere eigenen Erfolge übermäßiger zu bewerten und unsere Misserfolge durch externe Faktoren zu erklären?",
     "Selbstwertdienliche Verzerrung",
     ["Selbstwertdienliche Verzerrung",
      "Fundamentaler Attributionsfehler",
      "Kognitive Dissonanz",
      "Halo-Effekt"],
     "Selbstwertdienliche Verzerrung beschreibt die Tendenz, Erfolge den eigenen Fähigkeiten zuzuschreiben und Misserfolge auf äußere Faktoren zu schieben, um das eigene Selbstwertgefühl zu schützen."),

    ("Welches Experiment zeigte, dass Menschen oft bereit sind, sich gegen ihre eigene Moral und Ethik zu verhalten, wegen einer Autoritätsperson ?",
     "Milgram-Experiment",
     ["Pawlows Hund",
      "Asch-Konformitätsexperiment",
      "Skinner-Box",
      "Milgram-Experiment"],
     "Das Milgram-Experiment demonstrierte, wie weit Menschen bereit sind zu gehen, um den Anweisungen einer Autorität zu folgen, selbst wenn dies moralisch fragwürdig ist."),

    ("Welcher Psychologe ist bekannt für seine Theorie, die die Entwicklung des Ichs als ein Ergebnis der internen Konflikte und deren Auflösung beschreibt?",
     "Sigmund Freud",
     ["Carl Rogers",
      "John Bowlby",
      "Sigmund Freud",
      "B.F. Skinner"],
     "Sigmund Freud entwickelte eine Theorie, die das Ich und seine Entwicklung als Ergebnis der Auseinandersetzung mit inneren Konflikten und deren Auflösung beschreibt."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Theorie beschreibt, wie Menschen lernen, indem sie die Konsequenzen ihrer Handlungen beobachten und darauf reagieren?",
     "Operante Konditionierung",
      ["Modelllernen",
      "Klassische Konditionierung",
      "Modelllernen",
      "Kognitive Dissonanz"],
     "Die Theorie der operanten Konditionierung, entwickelt von B.F. Skinner, beschreibt, wie Menschen lernen, indem sie die Konsequenzen ihrer Handlungen beobachten und darauf reagieren."),
    

    ("Welche Art von Gedächtnis ist für das vorübergehende Festhalten von Informationen zuständig, die für aktuelle Aufgaben benötigt werden?",
     "Arbeitsgedächtnis",
     ["Langzeitgedächtnis",
      "Kurzzeitgedächtnis",
      "Arbeitsgedächtnis",
      "Sensorisches Gedächtnis"],
     "Das Arbeitsgedächtnis ist für die vorübergehende Speicherung und Verarbeitung von Informationen zuständig, die für aktuelle Aufgaben benötigt werden."),
    
        ("Welcher Psychologe untersuchte soziale Rollen und Machtstrukturen in einem Gefängnismodell?",
     "Philip Zimbardo",
     ["Stanley Milgram",
      "John Watson",
      "Philip Zimbardo",
      "B.F. Skinner"],
     "Philip Zimbardo führte das Stanford-Gefängnisexperiment durch, um zu untersuchen, wie soziale Rollen und Machtstrukturen das Verhalten beeinflussen."),

    ("Welcher Begriff beschreibt die Tendenz, Informationen zur Bestätigung der eigenen Erwartungen auszuwählen?",
     "Bestätigungsfehler",
     ["Fundamentaler Attributionsfehler",
      "Selbstwertdienliche Verzerrung",
      "Bestätigungsfehler",
      "Halo-Effekt"],
     "Der Bestätigungsfehler beschreibt die Neigung, Informationen selektiv zu interpretieren, um bestehende Überzeugungen zu bestätigen."),
    
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    
    ("Welche Theorie beschreibt die Übereinstimmung von Werten und Handlungen zur Vermeidung von innerer Spannung?",
     "Kognitive Dissonanz",
     ["Soziale Lerntheorie",
      "Kognitive Dissonanz",
      "Behaviorismus",
      "Humanistische Psychologie"],
     "Die kognitive Dissonanz-Theorie erklärt, wie Menschen versuchen, innere Spannungen durch Anpassung ihrer Überzeugungen oder Handlungen zu reduzieren."),

    ("Welcher Psychologe erforschte die Bindungstheorie und deren Einfluss auf die emotionale Entwicklung?",
     "John Bowlby",
     ["Mary Ainsworth",
      "John Bowlby",
      "Lev Wygotski",
      "Carl Rogers"],
     "John Bowlby entwickelte die Bindungstheorie, die beschreibt, wie frühe Bindungen die emotionale und soziale Entwicklung von Kindern beeinflussen."),

    ("Welche Theorie beschreibt Lernen durch Beobachtung und Nachahmung von Vorbildern?",
     "Modelllernen",
     ["Modelllernen",
      "Operante Konditionierung",
      "Klassische Konditionierung",
      "Selbstwahrnehmungstheorie"],
     "Das Modelllernen beschreibt, wie Menschen durch Beobachtung und Nachahmung des Verhaltens anderer lernen."),

    ("Welcher Begriff bezeichnet die Tendenz, eigenes Verhalten unkritisch zu betrachten und Misserfolge extern zu erklären?",
     "Selbstwertdienliche Verzerrung",
     ["Fundamentaler Attributionsfehler",
      "Kognitive Dissonanz",
      "Selbstwertdienliche Verzerrung",
      "Halo-Effekt"],
     "Selbstwertdienliche Verzerrung beschreibt die Tendenz, eigene Fehler auf äußere Faktoren zu schieben, um das Selbstwertgefühl zu schützen."),
    
]
        
class GEPSsychologie(Screen):
    def __init__(self, antwort, frage, antwortmöglichkeiten, info_text, **kw):
        super(GEPSsychologie, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Psychologie"
        self.fragen = fragenpsy

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            # Save progress after answering
            #self.save_progress()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
          # Ensure changes are saved
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

fragenernähr = [
    (
        "Welche Nährstoffe liefern die meiste Energie pro Gramm?",
        "Fette",
        ["Kohlenhydrate", "Proteine", "Fette", "Vitamine"],
        "Fette liefern mit 9 Kalorien pro Gramm mehr Energie als Kohlenhydrate und Proteine, die jeweils 4 Kalorien pro Gramm liefern. Diese Nährstoffe sind essenziell für die Energieversorgung des Körpers."
    ),
    (
        "Welche Funktion haben Ballaststoffe in der Ernährung?",
        "Fördern die Verdauung und unterstützen die Darmgesundheit",
        ["Liefern Energie für den Körper", "Fördern die Verdauung und unterstützen die Darmgesundheit", "Erhöhen den Blutzuckerspiegel", "Stärken das Immunsystem"],
        "Ballaststoffe unterstützen die Verdauung und tragen zur Gesundheit des Darms bei. Sie helfen, die Darmtätigkeit zu regulieren und Verstopfung zu verhindern."
    ),
    (
        "Warum sind Vitamine essenziell für den Körper?",
        "Vitamine unterstützen wichtige Körperfunktionen",
        ["Sie liefern Energie", "Sie sind die Hauptquelle für Proteine", "Sie unterstützen wichtige Körperfunktionen", "Sie machen den größten Teil der Muskelmasse aus"],
        "Vitamine unterstützen zahlreiche Körperfunktionen, einschließlich des Zellstoffwechsels und der Immunabwehr. Sie müssen in kleinen Mengen über die Nahrung aufgenommen werden."
    ),
    (
        "Welche Lebensmittel sind reich an ungesättigten Fettsäuren?",
        "Pflanzliche Öle und Nüsse",
        ["Butter und Sahne", "Rindfleisch und Schweinefleisch", "Pflanzliche Öle und Nüsse", "Vollmilchprodukte"],
        "Ungesättigte Fettsäuren, die als gesündere Fettquellen gelten, kommen hauptsächlich in pflanzlichen Ölen, Nüssen und Fisch vor. Sie können zur Senkung des Cholesterinspiegels beitragen."
    ),
    (
        "Was versteht man unter dem glykämischen Index (GI)?",
        "Der Einfluss eines Lebensmittels auf den Blutzuckerspiegel",
        ["Der Fettgehalt eines Lebensmittels", "Der Einfluss eines Lebensmittels auf den Blutzuckerspiegel", "Die Menge an Ballaststoffen in einem Lebensmittel", "Der Kaloriengehalt eines Lebensmittels"],
        "Der glykämische Index gibt an, wie schnell ein Lebensmittel den Blutzuckerspiegel ansteigen lässt. Lebensmittel mit hohem GI führen zu einem schnellen Anstieg des Blutzuckerspiegels."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Funktion hat Protein im Körper?",
        "Sind Baustoffe für Gewebe und unterstützen viele Körperfunktionen",
        ["Speichern Energie", "Regulieren den Blutzuckerspiegel", "Sind Baustoffe für Gewebe und unterstützen viele Körperfunktionen", "Erhöhen den Blutdruck"],
        "Proteine sind entscheidend für den Aufbau und die Reparatur von Gewebe. Sie sind auch für die Produktion von Enzymen und Hormonen notwendig."
    ),
    (
        "Warum ist Wasser so wichtig für den Körper?",
        "Es transportiert Nährstoffe und reguliert die Körpertemperatur",
        ["Es liefert Energie", "Es ist die Hauptquelle von Proteinen", "Es transportiert Nährstoffe und reguliert die Körpertemperatur", "Es hilft, Muskeln aufzubauen"],
        "Wasser reguliert die Körpertemperatur und transportiert Nährstoffe. Es ist unerlässlich für die Hydratation und das Funktionieren des gesamten Körpers."
    ),
    (
        "Welche Rolle spielen Antioxidantien in der Ernährung?",
        "Sie schützen die Zellen vor Schäden",
        ["Sie liefern Energie", "Sie stärken die Knochen", "Sie schützen die Zellen vor Schäden", "Sie erhöhen den Blutzuckerspiegel"],
        "Antioxidantien schützen die Zellen vor Schäden durch freie Radikale, die zu chronischen Krankheiten und Alterungsprozessen beitragen können."
    ),
    (
        "Welche Funktion hat Eisen im Körper?",
        "Es ist notwendig für den Sauerstofftransport im Blut",
        ["Es stärkt die Knochen", "Es ist notwendig für den Sauerstofftransport im Blut", "Es reguliert den Blutzuckerspiegel", "Es unterstützt die Verdauung"],
        "Eisen ist notwendig für den Sauerstofftransport im Blut. Es ist ein zentraler Bestandteil des Hämoglobins in den roten Blutkörperchen."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was versteht man unter essentiellen Aminosäuren?",
        "Aminosäuren, die über die Nahrung aufgenommen werden müssen",
        ["Aminosäuren, die der Körper selbst herstellen kann", "Aminosäuren, die über die Nahrung aufgenommen werden müssen", "Aminosäuren, die keine Funktion im Körper haben", "Aminosäuren, die nur in pflanzlichen Lebensmitteln vorkommen"],
        "Essentielle Aminosäuren können vom Körper nicht selbst produziert werden und müssen über die Nahrung aufgenommen werden. Sie sind wichtig für den Aufbau von Proteinen."
    ),
    (
        "Welche Lebensmittel sind Hauptquellen für Kalzium?",
        "Milchprodukte und grünes Blattgemüse",
        ["Fleisch und Fisch", "Milchprodukte und grünes Blattgemüse", "Getreide und Hülsenfrüchte", "Obst und Nüsse"],
        "Kalzium ist wichtig für die Knochengesundheit und findet sich hauptsächlich in Milchprodukten wie Milch, Käse und Joghurt."
    ),
    (
        "Welche Nährstoffe sind wichtig für die Unterstützung des Immunsystems?",
        "Vitamin C, Vitamin D und Zink",
        ["Fette und Kohlenhydrate", "Vitamin C, Vitamin D und Zink", "Ballaststoffe und Proteine", "Wasser und Salz"],
        "Vitamin C, Vitamin D und Zink spielen eine wichtige Rolle bei der Stärkung des Immunsystems und helfen dem Körper, Infektionen zu bekämpfen."
    ),
    (
        "Warum sind Omega-3-Fettsäuren wichtig für den Körper?",
        "Sie haben entzündungshemmende Eigenschaften und fördern die Herzgesundheit",
        ["Sie liefern schnell Energie", "Sie unterstützen den Muskelaufbau", "Sie haben entzündungshemmende Eigenschaften und fördern die Herzgesundheit", "Sie sind Hauptbestandteile von Kohlenhydraten"],
        "Omega-3-Fettsäuren haben entzündungshemmende Eigenschaften und fördern die Herzgesundheit. Sie kommen hauptsächlich in Fisch, Leinsamen und Walnüssen vor."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Vitamine sind fettlöslich?",
        "Vitamin A, D, E und K",
        ["Vitamin C und Vitamin B", "Vitamin A, D, E und K", "Vitamin B12 und Folsäure", "Vitamin C und K"],
        "Fettlösliche Vitamine wie Vitamin A, D, E und K werden im Körperfett gespeichert und spielen eine wichtige Rolle in der Knochengesundheit und dem Immunsystem."
    ),
    (
        "Welche Mineralstoffe sind entscheidend für die Knochengesundheit?",
        "Kalzium und Phosphor",
        ["Eisen und Zink", "Kalzium und Phosphor", "Natrium und Kalium", "Magnesium und Fluorid"],
        "Kalzium und Phosphor sind die wichtigsten Mineralstoffe für starke und gesunde Knochen. Diese sind in Milchprodukten und grünem Blattgemüse reichlich vorhanden."
    ),
    (
        "Welche Lebensmittel sind eine gute Quelle für pflanzliches Protein?",
        "Hülsenfrüchte, Nüsse und Tofu",
        ["Fisch und Meeresfrüchte", "Hülsenfrüchte, Nüsse und Tofu", "Rindfleisch und Geflügel", "Milchprodukte und Eier"],
        "Pflanzliche Proteine sind in Lebensmitteln wie Hülsenfrüchten, Nüssen und Tofu reichlich vorhanden und sind besonders wichtig für Vegetarier und Veganer."
    ),
    (
        "Was sind die Hauptfunktionen von Kohlenhydraten im Körper?",
        "Liefern Energie für den Körper",
        ["Bilden Muskeln auf", "Liefern Energie für den Körper", "Stärken das Immunsystem", "Unterstützen den Fettabbau"],
        "Kohlenhydrate sind die primäre Energiequelle des Körpers. Sie werden in Glukose umgewandelt, die für die Energieversorgung der Zellen genutzt wird."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Rolle spielt Vitamin D in der Gesundheit?",
        "Es unterstützt die Kalziumaufnahme und Knochengesundheit",
        ["Es unterstützt den Muskelaufbau", "Es fördert die Eisenaufnahme", "Es unterstützt die Kalziumaufnahme und Knochengesundheit", "Es reguliert den Blutzuckerspiegel"],
        "Vitamin D unterstützt die Kalziumaufnahme und ist entscheidend für die Knochengesundheit. Es wird in der Haut durch Sonnenlicht produziert und kann auch aus bestimmten Lebensmitteln gewonnen werden."
    ),
    (
        "Welche Lebensmittel sind reich an Antioxidantien?",
        "Beeren, Nüsse und grünes Blattgemüse",
        ["Rotes Fleisch und Wurstwaren", "Beeren, Nüsse und grünes Blattgemüse", "Vollkornprodukte und Hülsenfrüchte", "Milch und Käse"],
        "Antioxidantienreiche Lebensmittel wie Beeren, Nüsse und grünes Blattgemüse helfen, die Zellen vor Schäden zu schützen, die durch freie Radikale verursacht werden."
    ),
    (
        "Welche Bedeutung hat Kalium für den Körper?",
        "Es reguliert den Flüssigkeitshaushalt und unterstützt die Nerven- und Muskelfunktion",
        ["Es stärkt die Knochen", "Es reguliert den Flüssigkeitshaushalt und unterstützt die Nerven- und Muskelfunktion", "Es erhöht den Blutzuckerspiegel", "Es ist notwendig für die Verdauung"],
        "Kalium ist ein essenzielles Mineral, das zur Regulierung des Flüssigkeitshaushalts und zur Unterstützung der Nerven- und Muskelfunktion beiträgt. Es ist in vielen Obst- und Gemüsesorten enthalten."
    ),
    
        (
        "Welche Nährstoffe sind notwendig für den Muskelaufbau?",
        "Proteine sind notwendig für den Aufbau und die Reparatur von Muskelgewebe",
        ["Fette", "Kohlenhydrate", "Proteine", "Vitamine"],
        "Proteine sind entscheidend für den Aufbau und die Reparatur von Muskelgewebe. Sie unterstützen auch viele andere Körperfunktionen."
    ),
        ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Lebensmittel sind reich an Vitamin C?",
        "Zitrusfrüchte, Paprika und Brokkoli",
        ["Zitrusfrüchte, Paprika und Brokkoli", "Milchprodukte", "Vollkornprodukte", "Rotes Fleisch"],
        "Vitamin C ist ein starkes Antioxidans, das das Immunsystem stärkt und in Zitrusfrüchten, Paprika und Brokkoli reichlich vorhanden ist."
    ),
    (
        "Welche Rolle spielen ungesättigte Fettsäuren in der Ernährung?",
        "Sie helfen, den Cholesterinspiegel zu senken und das Herz zu schützen",
        ["Sie liefern schnelle Energie", "Sie helfen, den Cholesterinspiegel zu senken und das Herz zu schützen", "Sie bauen Muskelmasse auf", "Sie speichern Kalzium"],
        "Ungesättigte Fettsäuren sind gesunde Fette, die den Cholesterinspiegel senken und das Risiko von Herzkrankheiten reduzieren können."
    ),
    (
        "Was versteht man unter dem Grundumsatz?",
        "Der Grundumsatz ist die Energiemenge, die der Körper in Ruhe benötigt",
        ["Die Menge an Kalorien, die beim Sport verbrannt wird", "Der Grundumsatz ist die Energiemenge, die der Körper in Ruhe benötigt", "Die Kalorien, die durch Nahrung aufgenommen werden", "Die Energie, die für Verdauung aufgewendet wird"],
        "Der Grundumsatz ist die Energiemenge, die der Körper benötigt, um grundlegende Funktionen wie Atmung und Kreislauf in Ruhe aufrechtzuerhalten."
    ),
    (
        "Welche Funktion hat Vitamin B12 im Körper?",
        "Es unterstützt die Bildung roter Blutkörperchen und die Funktion des Nervensystems",
        ["Es stärkt die Knochen", "Es unterstützt die Bildung roter Blutkörperchen und die Funktion des Nervensystems", "Es fördert den Muskelaufbau", "Es reguliert den Blutzuckerspiegel"],
        "Vitamin B12 ist entscheidend für die Bildung roter Blutkörperchen und die Funktion des Nervensystems. Ein Mangel kann zu Anämie und neurologischen Störungen führen."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Warum sind Ballaststoffe wichtig für die Gesundheit?",
        "Sie fördern die Verdauung und helfen, den Blutzuckerspiegel zu regulieren",
        ["Sie liefern Energie", "Sie fördern die Verdauung und helfen, den Blutzuckerspiegel zu regulieren", "Sie stärken die Knochen", "Sie erhöhen den Blutdruck"],
        "Ballaststoffe fördern eine gesunde Verdauung und helfen, den Blutzuckerspiegel zu regulieren, was das Risiko von Diabetes und Herzkrankheiten senken kann."
    ),
    (
        "Welche Lebensmittel enthalten viele Omega-3-Fettsäuren?",
        "Fettreiche Fische wie Lachs und Makrele",
        ["Rotes Fleisch und Geflügel", "Vollkornprodukte", "Fettreiche Fische wie Lachs und Makrele", "Milchprodukte"],
        "Omega-3-Fettsäuren sind in fettreichen Fischen wie Lachs und Makrele reichlich vorhanden und tragen zur Herzgesundheit bei."
    ),
    (
        "Welche Mineralstoffe sind wichtig für die Funktion der Muskeln und Nerven?",
        "Kalium und Magnesium sind entscheidend für die Funktion von Muskeln und Nerven",
        ["Kalzium und Phosphor", "Eisen und Zink", "Kalium und Magnesium", "Natrium und Chlorid"],
        "Kalium und Magnesium sind entscheidend für die Funktion von Muskeln und Nerven und helfen, Muskelkrämpfe und Müdigkeit zu verhindern."
    ),
    (
        "Was versteht man unter dem Begriff 'Makronährstoffe'?",
        "Makronährstoffe sind Nährstoffe, die der Körper in großen Mengen benötigt",
        ["Nährstoffe, die der Körper in geringen Mengen benötigt", "Vitamine und Mineralstoffe", "Makronährstoffe sind Nährstoffe, die der Körper in großen Mengen benötigt", "Enzyme und Hormone"],
        "Makronährstoffe wie Kohlenhydrate, Fette und Proteine sind die Hauptquellen der Energie für den Körper und werden in größeren Mengen benötigt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Warum sind Antioxidantien wichtig für die Gesundheit?",
        "Antioxidantien schützen die Zellen vor Schäden durch freie Radikale",
        ["Sie liefern Energie", "Sie stärken die Muskeln", "Antioxidantien schützen die Zellen vor Schäden durch freie Radikale", "Sie erhöhen den Blutzuckerspiegel"],
        "Antioxidantien schützen die Zellen vor Schäden durch freie Radikale, die zu chronischen Krankheiten und dem Alterungsprozess beitragen können."
    ),
    (
        "Welche Lebensmittel sind eine gute Quelle für Eisen?",
        "Rotes Fleisch, Bohnen und Spinat",
        ["Rotes Fleisch, Bohnen und Spinat", "Milchprodukte", "Zitrusfrüchte", "Vollkornprodukte"],
        "Eisen ist entscheidend für den Sauerstofftransport im Blut und kommt in Lebensmitteln wie rotem Fleisch, Bohnen und Spinat vor."
    ),
    (
        "Welche Vitamine sind wasserlöslich?",
        "Vitamine der B-Gruppe und Vitamin C",
        ["Vitamine A, D, E und K", "Vitamine der B-Gruppe und Vitamin C", "Vitamin D und Calcium", "Vitamin B12 und Eisen"],
        "Wasserlösliche Vitamine wie die B-Vitamine und Vitamin C werden vom Körper nicht gespeichert und müssen regelmäßig durch die Nahrung aufgenommen werden."
    ),
    (
        "Welche Bedeutung hat Zink für den Körper?",
        "Zink ist wichtig für das Immunsystem und die Wundheilung",
        ["Es stärkt die Knochen", "Es reguliert den Blutzuckerspiegel", "Zink ist wichtig für das Immunsystem und die Wundheilung", "Es fördert den Muskelaufbau"],
        "Zink ist entscheidend für das Immunsystem und spielt eine wichtige Rolle bei der Wundheilung und Zellteilung."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was sind Transfette und warum sind sie ungesund?",
        "Transfette erhöhen das Risiko von Herzkrankheiten",
        ["Transfette erhöhen das Risiko von Herzkrankheiten", "Sie sind essentiell für den Muskelaufbau", "Sie liefern wichtige Vitamine", "Sie regulieren den Blutdruck"],
        "Transfette sind eine ungesunde Art von Fett, die das Risiko von Herzkrankheiten und Schlaganfällen erhöhen kann. Sie kommen häufig in verarbeiteten Lebensmitteln vor."
    ),
    (
        "Welche Lebensmittel sind reich an Ballaststoffen?",
        "Vollkornprodukte, Hülsenfrüchte und Obst",
        ["Rotes Fleisch", "Milchprodukte", "Vollkornprodukte, Hülsenfrüchte und Obst", "Fettreiche Fische"],
        "Ballaststoffe sind unverdauliche Teile von pflanzlichen Lebensmitteln, die eine gesunde Verdauung fördern. Sie kommen in Vollkornprodukten, Hülsenfrüchten und Obst vor."
    ),
    (
        "Was versteht man unter dem Body-Mass-Index (BMI)?",
        "Der BMI ist ein Maß für das Verhältnis von Gewicht zu Körpergröße",
        ["Eine Methode zur Messung des Körperfetts", "Der BMI ist ein Maß für das Verhältnis von Gewicht zu Körpergröße", "Ein Maß für den Muskelanteil im Körper", "Ein Maß für den Wasseranteil im Körper"],
        "Der Body-Mass-Index (BMI) ist ein Maß für das Verhältnis von Gewicht zu Körpergröße und wird oft verwendet, um festzustellen, ob eine Person unter-, normal- oder übergewichtig ist."
    ),
    (
        "Welche Lebensmittel enthalten viel Kalzium?",
        "Milchprodukte wie Milch, Käse und Joghurt",
        ["Fleisch und Fisch", "Vollkornprodukte", "Milchprodukte wie Milch, Käse und Joghurt", "Obst und Nüsse"],
        "Kalzium ist wichtig für die Knochengesundheit und kommt in hohen Mengen in Milchprodukten wie Milch, Käse und Joghurt vor."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Warum ist eine ausreichende Flüssigkeitszufuhr wichtig?",
        "Wasser ist notwendig für die Regulierung der Körpertemperatur und die Unterstützung vieler Körperfunktionen",
        ["Es liefert Energie", "Es hilft beim Muskelaufbau", "Wasser ist notwendig für die Regulierung der Körpertemperatur und die Unterstützung vieler Körperfunktionen", "Es erhöht den Blutzuckerspiegel"],
        "Eine ausreichende Flüssigkeitszufuhr ist wichtig für die Regulierung der Körpertemperatur, die Hydratation und das ordnungsgemäße Funktionieren von Zellen und Organen."
    ),
    
        (
        "Was versteht man unter einem 'Vollkornprodukt'?",
        "Ein Vollkornprodukt enthält das gesamte Korn, einschließlich Kleie, Keim und Endosperm.",
        ["Ein Vollkornprodukt enthält das gesamte Korn, einschließlich Kleie, Keim und Endosperm.", "Ein Produkt aus nur dem Endosperm des Korns", "Ein Produkt, das aus raffiniertem Zucker besteht", "Ein Produkt ohne Nährstoffe"],
        "Vollkornprodukte sind solche, bei denen das gesamte Korn verarbeitet wird, was bedeutet, dass sie mehr Ballaststoffe, Vitamine und Mineralstoffe enthalten als raffinierte Produkte."
    ),
    (
        "Warum sind Omega-3-Fettsäuren wichtig für die Gesundheit?",
        "Omega-3-Fettsäuren unterstützen die Herzgesundheit und die Gehirnfunktion.",
        ["Sie stärken das Immunsystem", "Sie unterstützen die Herzgesundheit und die Gehirnfunktion.", "Sie fördern den Muskelaufbau", "Sie erhöhen die Knochendichte"],
        "Omega-3-Fettsäuren sind essentielle Fette, die eine wichtige Rolle bei der Aufrechterhaltung der Herzgesundheit und der Gehirnfunktion spielen. Sie können auch Entzündungen im Körper reduzieren."
    ),
    (
        "Welche Bedeutung hat der glykämische Index für die Ernährung?",
        "Der glykämische Index misst, wie schnell Lebensmittel den Blutzuckerspiegel erhöhen.",
        ["Er misst die Menge an Kalorien in Lebensmitteln", "Der glykämische Index misst, wie schnell Lebensmittel den Blutzuckerspiegel erhöhen.", "Er zeigt die Menge an Protein in Lebensmitteln an", "Er gibt die Menge an Ballaststoffen in Lebensmitteln an"],
        "Der glykämische Index hilft zu verstehen, wie schnell verschiedene Lebensmittel den Blutzuckerspiegel erhöhen, was wichtig für das Management von Diabetes und das Vermeiden von Blutzuckerspitzen ist."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Nährstoffe sind besonders wichtig für Schwangere?",
        "Folsäure, Eisen und Kalzium sind besonders wichtig für Schwangere.",
        ["Vitamin A, D und K", "Folsäure, Eisen und Kalzium sind besonders wichtig für Schwangere.", "Omega-3-Fettsäuren", "Kohlenhydrate und Proteine"],
        "Schwangere Frauen benötigen zusätzliche Mengen an Folsäure, Eisen und Kalzium, um die gesunde Entwicklung des Babys zu unterstützen und mögliche Komplikationen zu vermeiden."
    ),
    (
        "Was ist der Unterschied zwischen gesättigten und ungesättigten Fetten?",
        "Gesättigte Fette sind oft fest bei Raumtemperatur, während ungesättigte Fette meist flüssig sind.",
        ["Gesättigte Fette sind meist flüssig, ungesättigte Fette fest", "Gesättigte Fette sind oft fest bei Raumtemperatur, während ungesättigte Fette meist flüssig sind.", "Ungesättigte Fette enthalten mehr Kalorien", "Gesättigte Fette kommen nur in pflanzlichen Lebensmitteln vor"],
        "Gesättigte Fette sind in der Regel bei Raumtemperatur fest und kommen häufig in tierischen Produkten vor, während ungesättigte Fette, die oft in pflanzlichen Ölen vorkommen, flüssig sind."
    ),
    (
        "Welche Rolle spielt Wasser in der Ernährung?",
        "Wasser ist essentiell für alle Körperfunktionen und unterstützt die Hydratation.",
        ["Es liefert Kalorien", "Wasser ist essentiell für alle Körperfunktionen und unterstützt die Hydratation.", "Es hilft bei der Fettverbrennung", "Es erhöht den Blutzuckerspiegel"],
        "Wasser ist lebenswichtig für die Aufrechterhaltung aller Körperfunktionen, einschließlich Temperaturregulation, Nährstofftransport und Ausscheidung von Abfallstoffen."
    ),
    (
        "Was versteht man unter einer 'ausgewogenen Ernährung'?",
        "Eine ausgewogene Ernährung enthält eine Vielzahl von Lebensmitteln in den richtigen Mengen, um alle Nährstoffe zu erhalten.",
        ["Eine Ernährung, die nur Früchte enthält", "Eine ausgewogene Ernährung enthält eine Vielzahl von Lebensmitteln in den richtigen Mengen, um alle Nährstoffe zu erhalten.", "Eine Ernährung, die nur Proteine enthält", "Eine Ernährung ohne Kohlenhydrate"],
        "Eine ausgewogene Ernährung stellt sicher, dass der Körper alle notwendigen Nährstoffe erhält, indem sie eine Vielzahl von Lebensmitteln in den richtigen Verhältnissen umfasst."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Lebensmittel sind gute Quellen für Ballaststoffe?",
        "Vollkornprodukte, Hülsenfrüchte und Obst sind reich an Ballaststoffen.",
        ["Rotes Fleisch", "Vollkornprodukte, Hülsenfrüchte und Obst sind reich an Ballaststoffen.", "Milchprodukte", "Fertiggerichte"],
        "Ballaststoffe sind unverdauliche Teile pflanzlicher Lebensmittel, die für die Verdauung wichtig sind und in Vollkornprodukten, Hülsenfrüchten und Obst vorkommen."
    ),
    (
        "Warum sind Mineralstoffe wie Eisen wichtig für den Körper?",
        "Eisen ist wichtig für die Bildung von roten Blutkörperchen und den Sauerstofftransport im Blut.",
        ["Es unterstützt die Verdauung", "Eisen ist wichtig für die Bildung von roten Blutkörperchen und den Sauerstofftransport im Blut.", "Es stärkt die Knochen", "Es erhöht die Muskelmasse"],
        "Mineralstoffe wie Eisen sind entscheidend für die Bildung roter Blutkörperchen und den Transport von Sauerstoff im Blut. Ein Mangel kann zu Anämie führen."
    ),
    (
        "Welche Auswirkungen hat ein Mangel an Vitamin D?",
        "Ein Mangel an Vitamin D kann zu Knochenschwäche und Osteoporose führen.",
        ["Erhöhte Muskelmasse", "Ein Mangel an Vitamin D kann zu Knochenschwäche und Osteoporose führen.", "Erhöhter Blutzuckerspiegel", "Verbesserte Verdauung"],
        "Vitamin D ist wichtig für die Knochengesundheit, und ein Mangel kann zu Knochenschwäche und einem erhöhten Risiko für Osteoporose führen."
    ),
    (
        "Welche Lebensmittel sind eine gute Quelle für komplexe Kohlenhydrate?",
        "Vollkornprodukte und Hülsenfrüchte sind gute Quellen für komplexe Kohlenhydrate.",
        ["Zuckerhaltige Snacks", "Vollkornprodukte und Hülsenfrüchte sind gute Quellen für komplexe Kohlenhydrate.", "Weißbrot und raffinierte Getreideprodukte", "Frittierte Lebensmittel"],
        "Komplexe Kohlenhydrate liefern länger anhaltende Energie und sind in Vollkornprodukten und Hülsenfrüchten enthalten, im Gegensatz zu einfachen Zuckerarten, die schnell verdaut werden."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Warum ist es wichtig, eine ausreichende Zufuhr von Vitamin A sicherzustellen?",
        "Vitamin A ist wichtig für die Sehkraft und das Immunsystem.",
        ["Es reguliert den Blutzuckerspiegel", "Vitamin A ist wichtig für die Sehkraft und das Immunsystem.", "Es unterstützt die Muskelregeneration", "Es erhöht die Knochendichte"],
        "Vitamin A spielt eine Schlüsselrolle bei der Erhaltung der Sehkraft und der Unterstützung des Immunsystems. Ein Mangel kann zu Sehproblemen und einem geschwächten Immunsystem führen."
    ),
    (
        "Welche Wirkung haben Probiotika auf den Körper?",
        "Probiotika fördern eine gesunde Verdauung und unterstützen das Immunsystem.",
        ["Sie stärken die Knochen", "Probiotika fördern eine gesunde Verdauung und unterstützen das Immunsystem.", "Sie helfen beim Muskelaufbau", "Sie regulieren den Blutzuckerspiegel"],
        "Probiotika sind lebende Mikroorganismen, die eine gesunde Verdauung fördern und das Immunsystem unterstützen können. Sie kommen in fermentierten Lebensmitteln vor."
    ),
    (
        "Was sind die Hauptquellen für Vitamin E?",
        "Nüsse, Samen und pflanzliche Öle sind reich an Vitamin E.",
        ["Milchprodukte", "Nüsse, Samen und pflanzliche Öle sind reich an Vitamin E.", "Rotes Fleisch", "Weißbrot"],
        "Vitamin E ist ein fettlösliches Vitamin, das in Nüssen, Samen und pflanzlichen Ölen vorkommt und als Antioxidans wirkt, das Zellen vor Schäden schützt."
    ),
    (
        "Wie beeinflusst Zucker den Körper langfristig?",
        "Langfristig kann ein hoher Zuckerkonsum zu Gewichtszunahme und Diabetes führen.",
        ["Er verbessert die Verdauung", "Langfristig kann ein hoher Zuckerkonsum zu Gewichtszunahme und Diabetes führen.", "Er stärkt das Immunsystem", "Er senkt den Blutdruck"],
        "Ein übermäßiger Zuckerkonsum kann langfristig zu gesundheitlichen Problemen wie Übergewicht, Insulinresistenz und Typ-2-Diabetes führen."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Funktion haben Essentielle Fettsäuren im Körper?",
        "Essentielle Fettsäuren sind wichtig für die Zellmembranen und das Herz-Kreislaufsystem.",
        ["Sie speichern Energie", "Essentielle Fettsäuren sind wichtig für die Zellmembranen und das Herz-Kreislaufsystem.", "Sie stärken die Knochen", "Sie regulieren den Blutzuckerspiegel"],
        "Essentielle Fettsäuren sind für den Körper notwendig, da sie eine wichtige Rolle bei der Bildung von Zellmembranen und der Unterstützung des Herz-Kreislaufsystems spielen."
    ),
    (
        "Was sind gute pflanzliche Quellen für Protein?",
        "Hülsenfrüchte, Nüsse und Samen sind gute pflanzliche Quellen für Protein.",
        ["Milchprodukte", "Hülsenfrüchte, Nüsse und Samen sind gute pflanzliche Quellen für Protein.", "Rotes Fleisch", "Fisch"],
        "Pflanzliche Proteine, die in Hülsenfrüchten, Nüssen und Samen vorkommen, sind wichtig für den Muskelaufbau und die Reparatur von Gewebe."
    ),
    (
        "Welche Wirkung haben Antioxidantien auf den Körper?",
        "Antioxidantien helfen, freie Radikale zu neutralisieren und Zellschäden zu verhindern.",
        ["Sie erhöhen die Kalorienaufnahme", "Antioxidantien helfen, freie Radikale zu neutralisieren und Zellschäden zu verhindern.", "Sie stärken das Immunsystem", "Sie verbessern die Verdauung"],
        "Antioxidantien schützen die Zellen vor Schäden durch freie Radikale und können das Risiko für chronische Krankheiten verringern."
    ),
    (
        "Wie kann man den Eisenbedarf durch Ernährung decken?",
        "Durch den Verzehr von roten Fleischsorten, Hülsenfrüchten und grünen Blattgemüsen.",
        ["Durch den Verzehr von nur Obst", "Durch den Verzehr von roten Fleischsorten, Hülsenfrüchten und grünen Blattgemüsen.", "Durch den Konsum von Zucker", "Durch den Verzehr von Weißbrot"],
        "Eisen kann durch Lebensmittel wie rotes Fleisch, Hülsenfrüchte und grünes Blattgemüse aufgenommen werden, was zur Vermeidung von Anämie beiträgt."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist die Hauptfunktion von Vitamin C?",
        "Vitamin C ist wichtig für das Immunsystem und die Kollagenbildung.",
        ["Es stärkt die Knochen", "Vitamin C ist wichtig für das Immunsystem und die Kollagenbildung.", "Es unterstützt die Verdauung", "Es hilft bei der Muskelregeneration"],
        "Vitamin C spielt eine wesentliche Rolle bei der Unterstützung des Immunsystems und der Bildung von Kollagen, das für gesunde Haut und Gewebe wichtig ist."
    ),
    (
        "Welche Lebensmittel sind reich an Vitamin B12?",
        "Fleisch, Fisch und Milchprodukte sind reich an Vitamin B12.",
        ["Grünes Blattgemüse", "Fleisch, Fisch und Milchprodukte sind reich an Vitamin B12.", "Obst", "Hülsenfrüchte"],
        "Vitamin B12 ist wichtig für die Bildung roter Blutkörperchen und die Funktion des Nervensystems. Es kommt vor allem in tierischen Produkten wie Fleisch, Fisch und Milchprodukten vor."
    ),
    (
        "Warum ist es wichtig, ausreichend Zink zu konsumieren?",
        "Zink unterstützt das Immunsystem und die Zellteilung.",
        ["Es reguliert den Blutzuckerspiegel", "Zink unterstützt das Immunsystem und die Zellteilung.", "Es stärkt die Knochen", "Es erhöht die Muskelmasse"],
        "Zink ist ein Mineral, das für eine starke Immunabwehr und für die Zellteilung notwendig ist. Ein Mangel kann das Risiko für Infektionen erhöhen."
    ),
    (
        "Welche Funktion haben Kohlenhydrate in der Ernährung?",
        "Kohlenhydrate sind die Hauptenergiequelle des Körpers.",
        ["Sie liefern Vitamine", "Kohlenhydrate sind die Hauptenergiequelle des Körpers.", "Sie unterstützen die Verdauung", "Sie erhöhen die Knochendichte"],
        "Kohlenhydrate sind die primäre Energiequelle für den Körper und werden in Glukose umgewandelt, die von den Zellen als Brennstoff genutzt wird."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist der Unterschied zwischen einfachen und komplexen Kohlenhydraten?",
        "Einfache Kohlenhydrate werden schnell verdaut und erhöhen den Blutzuckerspiegel schnell, während komplexe Kohlenhydrate langsamer verdaut werden und länger Energie liefern.",
        ["Einfache Kohlenhydrate enthalten mehr Ballaststoffe", "Einfache Kohlenhydrate werden schnell verdaut und erhöhen den Blutzuckerspiegel schnell, während komplexe Kohlenhydrate langsamer verdaut werden und länger Energie liefern.", "Komplexe Kohlenhydrate sind süßer", "Einfache Kohlenhydrate haben keinen Einfluss auf den Blutzuckerspiegel"],
        "Einfacher Zucker wird schnell in den Blutkreislauf aufgenommen und kann zu schnellen Blutzuckerspitzen führen, während komplexe Kohlenhydrate eine gleichmäßigere Energieversorgung bieten."
    ),
    (
        "Welche Rolle spielen Antioxidantien in der Ernährung?",
        "Antioxidantien schützen die Zellen vor Schäden durch freie Radikale.",
        ["Sie erhöhen den Blutzuckerspiegel", "Antioxidantien schützen die Zellen vor Schäden durch freie Radikale.", "Sie unterstützen den Muskelaufbau", "Sie fördern die Gewichtszunahme"],
        "Antioxidantien neutralisieren freie Radikale, die Zellschäden verursachen können, und tragen zur allgemeinen Gesundheit und Krankheitsvorbeugung bei."
    ),
    (
        "Wie können Omega-3-Fettsäuren in die Ernährung integriert werden?",
        "Durch den Verzehr von fettem Fisch wie Lachs oder durch pflanzliche Quellen wie Chiasamen und Walnüsse.",
        ["Durch den Konsum von Zucker", "Durch den Verzehr von fettem Fisch wie Lachs oder durch pflanzliche Quellen wie Chiasamen und Walnüsse.", "Durch den Verzehr von Weißbrot", "Durch den Konsum von Fertiggerichten"],
        "Omega-3-Fettsäuren können durch den Verzehr von fettem Fisch oder pflanzlichen Quellen wie Chiasamen und Walnüssen aufgenommen werden, um Herz-Kreislauf-Erkrankungen vorzubeugen."
    ),
    (
        "Welche Funktion haben Ballaststoffe in der Ernährung?",
        "Ballaststoffe unterstützen die Verdauung und fördern einen regelmäßigen Stuhlgang.",
        ["Sie liefern Energie", "Ballaststoffe unterstützen die Verdauung und fördern einen regelmäßigen Stuhlgang.", "Sie erhöhen den Blutzuckerspiegel", "Sie stärken die Knochen"],
        "Ballaststoffe sind unverdauliche Pflanzenteile, die für eine gesunde Verdauung wichtig sind und den Stuhlgang regulieren können."
    )
    
]
         
class GEErnährung(Screen):
    def __init__(self, antwort, antwortmöglichkeiten, info_text, frage, **kw):
        super(GEErnährung, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Ernährung"
        self.fragen = fragenernähr

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                # Correct answer popup
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                # Update correct answer and total questions count
                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                # Wrong answer popup
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                # Update wrong answer and total questions count
                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()
       
fragenkörper = [
    (
        "Was ist die Hauptfunktion des Herz-Kreislaufsystems?",
        "Das Herz-Kreislaufsystem transportiert Blut.",
        ["Es produziert Hormone", "Es speichert Energie", "Das Herz-Kreislaufsystem transportiert Blut.", "Es reguliert die Verdauung"],
        "Das Herz-Kreislaufsystem pumpt Blut durch den Körper, um Sauerstoff und Nährstoffe zu liefern und Abfallstoffe zu entfernen."
    ),
    (
        "Wie funktioniert die Atmung?",
        "Die Atmung tauscht Gase aus.",
        ["Sie reguliert die Körpertemperatur", "Sie produziert Energie", "Die Atmung tauscht Gase aus.", "Sie speichert Nährstoffe"],
        "Beim Atmen wird Sauerstoff aufgenommen und Kohlendioxid abgegeben, um den Gasaustausch im Blut zu gewährleisten."
    ),
    (
        "Was ist die Hauptaufgabe der Nieren?",
        "Die Nieren filtern Abfallstoffe.",
        ["Sie regulieren den Blutdruck", "Die Nieren filtern Abfallstoffe.", "Sie speichern Energie", "Sie produzieren Hormone"],
        "Die Nieren entfernen Abfallprodukte und überschüssige Flüssigkeit aus dem Blut und produzieren Urin."
    ),
    (
        "Wie reguliert der Körper die Temperatur?",
        "Durch Schwitzen und Zittern.",
        ["Durch den Konsum heißer Getränke", "Durch Schwitzen und Zittern.", "Durch das Vermeiden von Kälte", "Durch das Tragen warmer Kleidung"],
        "Der Körper nutzt Schwitzen zur Abkühlung und Zittern zur Erwärmung, um die Temperatur konstant zu halten."
    ),
    (
        "Welche Funktion hat das Nervensystem?",
        "Es steuert Körperfunktionen.",
        ["Es reguliert den Blutdruck", "Es speichert Nährstoffe", "Es steuert Körperfunktionen.", "Es produziert Energie"],
        "Das Nervensystem verarbeitet Informationen und koordiniert die Reaktionen auf Reize, um den Körper zu steuern."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist die Hauptaufgabe der Muskulatur?",
        "Die Muskulatur ermöglicht Bewegung.",
        ["Sie reguliert die Verdauung", "Die Muskulatur ermöglicht Bewegung.", "Sie produziert Hormone", "Sie speichert Nährstoffe"],
        "Muskeln sorgen für Bewegung und Stabilität des Körpers, indem sie sich kontrahieren und entspannen."
    ),
    (
        "Wie wird die Energie im Körper gespeichert?",
        "Als Fett und Glykogen.",
        ["Als Wasser", "Als Fett und Glykogen.", "Als Eiweiß", "Als Mineralien"],
        "Überschüssige Energie wird in Fett und Glykogen gespeichert, um bei Bedarf genutzt zu werden."
    ),
    (
        "Was ist die Hauptfunktion der Haut?",
        "Die Haut schützt den Körper.",
        ["Sie produziert Energie", "Die Haut schützt den Körper.", "Sie speichert Nährstoffe", "Sie reguliert den Blutzuckerspiegel"],
        "Die Haut wirkt als Barriere gegen physische und chemische Einflüsse und hilft bei der Temperaturregulation."
    ),
    (
        "Wie funktioniert das Immunsystem?",
        "Es bekämpft Krankheitserreger.",
        ["Es reguliert die Körpertemperatur", "Es bekämpft Krankheitserreger.", "Es speichert Nährstoffe", "Es produziert Energie"],
        "Das Immunsystem schützt den Körper vor Infektionen und Krankheiten, indem es Eindringlinge erkennt und bekämpft."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Rolle spielt die Leber?",
        "Die Leber entgiftet das Blut.",
        ["Sie speichert Energie", "Die Leber entgiftet das Blut.", "Sie reguliert die Körpertemperatur", "Sie produziert Hormone"],
        "Die Leber filtert schädliche Substanzen aus dem Blut und produziert wichtige Proteine wie Albumin und Gerinnungsfaktoren."
    ),
    (
        "Was ist die Hauptaufgabe des Verdauungssystems?",
        "Es zerlegt Nahrung.",
        ["Es reguliert den Blutzuckerspiegel", "Es zerlegt Nahrung.", "Es produziert Hormone", "Es speichert Energie"],
        "Das Verdauungssystem spaltet Nahrung in kleinere Moleküle, die vom Körper aufgenommen werden können."
    ),
    (
        "Wie wirkt sich körperliche Aktivität auf das Herz-Kreislaufsystem aus?",
        "Körperliche Aktivität stärkt das Herz-Kreislaufsystem.",
        ["Es hat keinen Einfluss", "Körperliche Aktivität stärkt das Herz-Kreislaufsystem.", "Es schwächt das Herz-Kreislaufsystem", "Es erhöht den Blutzuckerspiegel"],
        "Regelmäßige Bewegung verbessert die Blutzirkulation und stärkt das Herz, was zur besseren Funktion des Herz-Kreislaufsystems beiträgt."
    ),
    (
        "Welche Funktion hat die Bauchspeicheldrüse?",
        "Sie produziert Verdauungsenzyme und Insulin.",
        ["Sie speichert Nährstoffe", "Sie produziert Verdauungsenzyme und Insulin.", "Sie reguliert die Körpertemperatur", "Sie produziert Hormone"],
        "Die Bauchspeicheldrüse hilft bei der Verdauung durch Enzyme und reguliert den Blutzucker mit Insulin."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Was ist die Hauptaufgabe des Skelettsystems?",
        "Es gibt Struktur und ermöglicht Bewegung.",
        ["Es produziert Hormone", "Es gibt Struktur und ermöglicht Bewegung.", "Es speichert Nährstoffe", "Es filtert Blut"],
        "Das Skelettsystem stützt den Körper, schützt Organe und ermöglicht Bewegungen durch Gelenke und Knochen."
    ),
    (
        "Wie funktioniert das Hormonsystem?",
        "Es reguliert Körperprozesse durch Hormone.",
        ["Es produziert Energie", "Es reguliert Körperprozesse durch Hormone.", "Es speichert Nährstoffe", "Es reguliert die Körpertemperatur"],
        "Das Hormonsystem besteht aus Drüsen, die Hormone freisetzen, um verschiedene Körperfunktionen zu steuern."
    ),
    (
        "Wie hilft die Muskulatur bei der Verdauung?",
        "Sie bewegt Nahrung durch den Verdauungstrakt.",
        ["Sie reguliert die Körpertemperatur", "Sie bewegt Nahrung durch den Verdauungstrakt.", "Sie speichert Nährstoffe", "Sie produziert Hormone"],
        "Muskeln im Verdauungstrakt bewegen die Nahrung weiter und helfen bei der Verdauung."
    ),
    (
        "Wie unterstützt das Herz die Blutzirkulation?",
        "Es pumpt Blut durch den Körper.",
        ["Es speichert Energie", "Es pumpt Blut durch den Körper.", "Es filtert Abfallstoffe", "Es produziert Hormone"],
        "Das Herz sorgt durch regelmäßiges Pumpen für den Blutfluss, der Sauerstoff und Nährstoffe transportiert."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Welche Funktion hat die Milz?",
        "Die Milz filtert Blut und unterstützt das Immunsystem.",
        ["Sie speichert Energie", "Die Milz filtert Blut und unterstützt das Immunsystem.", "Sie reguliert die Körpertemperatur", "Sie produziert Verdauungsenzyme"],
        "Die Milz entfernt alte Blutzellen und hilft bei der Bekämpfung von Infektionen durch Immunzellen."
    ),
    (
        "Wie wird Eiweiß verdaut?",
        "Es wird in Aminosäuren zerlegt.",
        ["Es wird in Zucker umgewandelt", "Es wird in Aminosäuren zerlegt.", "Es wird direkt in Energie umgewandelt", "Es wird in Fette umgewandelt"],
        "Eiweiß wird durch Enzyme im Magen und Dünndarm in Aminosäuren zerlegt, die dann vom Körper aufgenommen werden."
    ),
    (
        "Wie schützt die Haut den Körper?",
        "Sie wirkt als Barriere gegen Eindringlinge.",
        ["Sie speichert Energie", "Sie wirkt als Barriere gegen Eindringlinge.", "Sie reguliert die Verdauung", "Sie produziert Hormone"],
        "Die Haut schützt den Körper vor mechanischen, chemischen und biologischen Gefahren und reguliert die Temperatur."
    ),
    (
        "Was macht das Verdauungssystem im Magen?",
        "Es zerkleinert und mischt Nahrung.",
        ["Es produziert Insulin", "Es zerkleinert und mischt Nahrung.", "Es filtert Blut", "Es reguliert die Körpertemperatur"],
        "Im Magen wird die Nahrung durch Muskelkontraktionen und Magensäure zerkleinert und vermischt, um die Verdauung einzuleiten."
    ),
    ("Frage",
     "??",
     ["  ",
      "??",
      "  ",
      "  "],
     "    "),
    (
        "Wie wird Blutdruck reguliert?",
        "Durch das Herz und die Blutgefäße.",
        ["Durch die Haut", "Durch das Herz und die Blutgefäße.", "Durch die Muskulatur", "Durch die Nieren"],
        "Der Blutdruck wird durch das Herz, das Blut pumpt, und die Blutgefäße, die den Widerstand regulieren, kontrolliert."
    ),
    (
        "Welche Funktion hat die Lunge?",
        "Sie tauscht Gase im Blut aus.",
        ["Sie speichert Nährstoffe", "Sie tauscht Gase im Blut aus.", "Sie produziert Hormone", "Sie filtert Blut"],
        "Die Lungen sind für den Austausch von Sauerstoff und Kohlendioxid zwischen dem Blut und der Luft verantwortlich."
    )
] 
           
class GEKörper(Screen):
    def __init__(self, antwortmöglichkeiten, frage, antwort, info_text, **kw):
        super(GEKörper, self).__init__(**kw)
        self.user_id = ""
        self.frage_index = 0
        self.topic = "Körper"
        self.fragen = fragenkörper

        self.layout = BoxLayout(orientation='vertical', padding=10, spacing=10)
        self.float_layout = FloatLayout()

        self.back_to_menu = Button(
            background_normal="pfeil.png", background_down="pfeil.png",
            size=(200, 150), size_hint_y=None, size_hint_x=None,
            pos_hint={'center_x': 0.05, 'center_y': 0.75}
        )
        self.back_to_menu.bind(on_press=self.back_menu)
        self.float_layout.add_widget(self.back_to_menu)
        self.layout.add_widget(self.float_layout)

        self.info_label = Label(text=info_text, size_hint_y=None, height=250, halign="center", valign="middle")
        self.info_label.bind(size=self.info_label.setter('text_size'))
        self.layout.add_widget(self.info_label)

        self.frage_label = Label(text=frage, size_hint_y=None, height=60, halign="center", valign="middle")
        self.frage_label.bind(size=self.frage_label.setter("text_size"))
        self.layout.add_widget(self.frage_label)

        self.answer_buttons = []
        for antwortmöglichkeit in antwortmöglichkeiten:
            btn = Button(text=antwortmöglichkeit, size_hint_y=None, height=70, halign="center", valign="middle")
            btn.bind(on_release=self.check_answer)
            btn.bind(size=btn.setter("text_size"))
            self.layout.add_widget(btn)
            self.answer_buttons.append(btn)

        self.answer = antwort
        self.add_widget(self.layout)

    def on_pre_enter(self):
        print("on_pre_enter called")  # Debugging-Ausgabe
        username = self.manager.username  # Abrufen des Benutzernamens aus dem ScreenManager
        self.user_id = self.get_user_id_from_db(username)
        print(f"Username: {username}, UserID: {self.user_id}")  # Debugging-Ausgabe
        if self.user_id:
            self.load_progress()
        else:
            print(f"Benutzername {username} nicht in der Datenbank gefunden.")

    def get_user_id_from_db(self, username):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
        result = cursor.fetchone()
        conn.close()
        return result[0] if result else None

    def load_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT current_question FROM progress WHERE user_id = ? AND topic = ?', (self.user_id, self.topic))
        result = cursor.fetchone()
        if result:
            self.frage_index = result[0] + 1
        else:
            self.frage_index = 0

        conn.close()
        print(f"Frageindex: {self.frage_index}")  # Debugging-Ausgabe
        self.switch_question()

    def back_menu(self, instance):
        self.manager.current = "menu"

    def check_answer(self, instance):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()

        cursor.execute('SELECT premium FROM users WHERE id = ?', (self.user_id,))
        user_data = cursor.fetchone()

        if user_data:
            premium = user_data[0]

            if instance.text == self.answer:
                correct_popup = PopupView(title="Richtig!", content=Button(text="Nächste Frage", on_press=self.to_close_popup))
                correct_popup.open()
                self.popup = correct_popup

                cursor.execute('UPDATE users SET correct_answers = correct_answers + 1, total_questions = total_questions + 1 WHERE id = ?', (self.user_id,))
                cursor.execute('INSERT INTO questions_log (user_id, question_id, answer, is_correct) VALUES (?, ?, ?, ?)', (self.user_id, self.frage_index, instance.text, True))
            else:
                wrong_popup = PopupView(title="Falsch!", content=Button(text="Erneut versuchen", on_press=self.close_popup))
                wrong_popup.open()
                self.popup = wrong_popup

                cursor.execute('UPDATE users SET wrong_answers = wrong_answers + 1  WHERE id = ?', (self.user_id,))
            
            conn.commit()
            conn.close()
            self.switch_question()
            self.new_progress()

        else:
            print(f"Benutzer mit ID {self.user_id} nicht gefunden.")
        

    def to_close_popup(self, instance):
        self.popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()
        
    def close_popup(self, instance):
        self.popup.dismiss()

    def switch_question(self, *args):
        if self.frage_index < len(self.fragen):
            frage, antwort, antwortmöglichkeiten, info_text = self.fragen[self.frage_index]

            self.frage_label.text = frage
            self.info_label.text = info_text
            self.answer = antwort

            for btn, antwortmöglichkeit in zip(self.answer_buttons, antwortmöglichkeiten):
                btn.text = antwortmöglichkeit

        # Verzögere die Aktualisierung des Layouts um einen Frame
            Clock.schedule_once(self.update_layout, 0)
        
            if self.frage_index % 5 == 0 and self.frage_index != 0:  
                 self.show_round_completed_popup()
        else:
            self.frage_label.text = "Keine weiteren Fragen vorhanden."
            self.info_label.text = "Bitte wählen Sie ein neues Thema."
            for btn in self.answer_buttons:
                btn.text = ""

    def update_layout(self, *args):
        self.info_label.texture_update()
        self.info_label.size = self.info_label.texture_size
        self.layout.do_layout()

    def show_round_completed_popup(self):
        layout = BoxLayout(orientation="vertical", padding=10, spacing=10)

        dne = Label(text="Fragerunde abgeschlossen:")
        dne.bind(size=self.info_label.setter('text_size'))
        layout.add_widget(dne)

        btn_continue = Button(text="Weiter", size_hint_y=None, height=50)
        btn_continue.bind(on_press=self.close_and_continue_round)
        layout.add_widget(btn_continue)

        btn_change_topic = Button(text="Thema wechseln", size_hint_y=None, height=50)
        btn_change_topic.bind(on_press=self.close_and_change_topic)
        layout.add_widget(btn_change_topic)

        self.round_completed_popup = ModalView(size_hint=(0.5, 0.5))
        self.round_completed_popup.add_widget(layout)
        self.round_completed_popup.open()

    def close_and_continue_round(self, instance):
        self.round_completed_popup.dismiss()
        self.frage_index += 1  # Increment question index
        self.switch_question()

    def close_and_change_topic(self, instance):
        self.round_completed_popup.dismiss()
        self.manager.current = "menu"

    def switch_to_topic(self, instance):
        self.popup.dismiss()
        self.manager.current = "topic_selection"
    
    def new_progress(self):
        conn = sqlite3.connect("locked.db")
        cursor = conn.cursor()
        
        cursor.execute('''
        INSERT INTO progress (user_id, topic, current_question)
        VALUES (?, ?, ?)
        ON CONFLICT(user_id, topic) DO UPDATE SET
        current_question=excluded.current_question;
        ''',(self.user_id, self.topic, self.frage_index))
        conn.commit()
        conn.close()

    
           
class Profile(Screen):
    def __init__(self, **kwargs):
        super(Profile, self).__init__(**kwargs)

        self.prfl = FloatLayout()

        self.prfl.add_widget(Image(
            source="logo-1.png",
            size_hint=(None, None),
            size=(150, 150),
            pos_hint={'center_x': 0.5, 'top': 1.0}
        ))

        self.home_btn = Button(
            background_normal='image.png',
            background_down='home.png',
            size_hint=(None, None),
            size=(100, 100),
            pos_hint={"center_x": 0.15, "y": 0}
        )
        self.home_btn.bind(on_press=self.wechselmenu)
        self.prfl.add_widget(self.home_btn)

        self.trophe_btn = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0}
                           )
        self.trophe_btn.bind(on_press=self.wechseltrp)
        self.prfl.add_widget(self.trophe_btn)

        # Profil-Button
        self.profile_btn = Button(
            background_normal='profile.png',
            background_down='profile.png',
            size_hint=(None, None),
            size=(100, 100),
            pos_hint={"center_x": 0.85, "y": 0}
        )
        self.prfl.add_widget(self.profile_btn)

        self.layout = BoxLayout(
            orientation='vertical',
            padding=10,
            spacing=10,
            size_hint=(0.8, 0.4),
            pos_hint={"center_x": 0.5, "center_y": 0.5}
        )

        self.delete_account_btn = Button(
            text="Konto löschen",
            size_hint=(1, 0.2),
            background_color=(1, 0, 0, 1)  # Rot
        )
        self.delete_account_btn.bind(on_press=self.delete_account)
        self.layout.add_widget(self.delete_account_btn)

        self.reset_progress_btn = Button(
            text="Fortschritt zurücksetzen",
            size_hint=(1, 0.2),
            background_color=(0, 0, 0.5, 1)  # Dunkelblau
        )
        self.reset_progress_btn.bind(on_press=self.reset_progress)
        self.layout.add_widget(self.reset_progress_btn)

        self.prfl.add_widget(self.layout)
        self.add_widget(self.prfl)

    def delete_account(self, instance):
        """Öffnet ein Bestätigungspopup, um das Konto zu löschen."""
        self.confirmation_popup(
            "Konto löschen",
            "Möchten Sie Ihr Konto wirklich löschen?",
            self.confirm_delete_account
        )

    def confirm_delete_account(self):
        """Löscht das Benutzerkonto nach Bestätigung."""
        username = self.manager.username  # Angenommen, Sie haben Zugriff auf den Benutzernamen
        self.delete_user_account(username)
        self.manager.current = "start"  # Benutzer zum Login-Bildschirm zurückführen

    def reset_progress(self, instance):
        """Öffnet ein Popup zur Auswahl des Themas, um den Fortschritt zurückzusetzen."""
        self.topic_selection_popup(
            "Fortschritt zurücksetzen",
            "Wählen Sie ein Thema:",
            self.confirm_reset_progress
        )

    def confirm_reset_progress(self, topic):
        """Setzt den Fortschritt für ein bestimmtes Thema nach Bestätigung zurück."""
        username = self.manager.username
        self.reset_progress_for_topic(username, topic)
        self.manager.current = "menu"  

    def confirmation_popup(self, title, message, confirm_callback):
        """Erzeugt ein einfaches Bestätigungspopup."""
        layout = BoxLayout(orientation='vertical', padding=10, spacing=10)

        label = Label(text=message, halign="center")
        layout.add_widget(label)

        button_layout = BoxLayout(size_hint=(1, 0.3))

        yes_button = Button(text="Ja")
        yes_button.bind(on_press=lambda *args: (confirm_callback(), popup.dismiss()))
        button_layout.add_widget(yes_button)

        no_button = Button(text="Nein")
        no_button.bind(on_press=lambda *args: popup.dismiss())
        button_layout.add_widget(no_button)

        layout.add_widget(button_layout)

        popup = Popup(title=title, content=layout, size_hint=(0.8, 0.4))
        popup.open()

    def topic_selection_popup(self, title, message, confirm_callback):
        """Erzeugt ein Popup zur Auswahl des Themas."""
        layout = BoxLayout(orientation='vertical', padding=10, spacing=10)

        label = Label(text=message, halign="center")
        layout.add_widget(label)

        # Beispielthemenliste
        topics = ['Systeme und Regierungsformen', 'Internationale Beziehungen', 'Ideologien und Werte', 'Wirtschaft', 'Faszinierende Fakten', 'Geografische Fakten', 'Daten Festtage', 'Preisträger', 'Bücher', 'Reisen', 'Kunst',
                  'Sports', 'Astronomie', 'Chemie', 'Physik', 'Biologie', 'Erfinungen', 'Krieg', 'Philosophie', 'Mythologie', 'Länder', 'Haupstädte', "Fußball", 'Baskebtall', 'Tennis', 'Fitness', 'Psychologie', 'Körper', 'Ernährung']

        dropdown = Spinner(text='Wählen Sie ein Thema', values=topics, size_hint=(1, 0.3))
        layout.add_widget(dropdown)

        button_layout = BoxLayout(size_hint=(1, 0.3))

        ok_button = Button(text="OK")
        ok_button.bind(on_press=lambda *args: (confirm_callback(dropdown.text), popup.dismiss()))
        button_layout.add_widget(ok_button)

        cancel_button = Button(text="Abbrechen")
        cancel_button.bind(on_press=lambda *args: popup.dismiss())
        button_layout.add_widget(cancel_button)

        layout.add_widget(button_layout)

        popup = Popup(title=title, content=layout, size_hint=(0.8, 0.5))
        popup.open()

    def delete_user_account(self, username):
        """Löscht das Benutzerkonto und alle zugehörigen Daten."""
        try:
            with sqlite3.connect("locked.db") as conn:
                cursor = conn.cursor()

                cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
                user_data = cursor.fetchone()

                if user_data:
                    user_id = user_data[0]

                    cursor.execute('DELETE FROM users WHERE id = ?', (user_id,))

                    cursor.execute('DELETE FROM progress WHERE user_id = ?', (user_id,))

                    cursor.execute('DELETE FROM questions_log WHERE user_id = ?', (user_id,))

                    conn.commit()
                    print("Benutzerkonto und zugehörige Daten erfolgreich gelöscht.")
                else:
                    print("Benutzer nicht gefunden.")
        except sqlite3.Error as e:
            print(f"Datenbankfehler beim Löschen des Kontos: {e}")
            
    def reset_progress_for_topic(self, username, topic):
        try:
            with sqlite3.connect("locked.db") as conn:
                cursor = conn.cursor()

                cursor.execute('SELECT id FROM users WHERE username = ?', (username,))
                user_data = cursor.fetchone()

                if user_data:
                    user_id = user_data[0]

                    cursor.execute('DELETE FROM progress WHERE user_id = ? AND topic = ?', (user_id, topic))
                
                    cursor.execute('DELETE FROM questions_log WHERE user_id = ?', (user_id,))

                    conn.commit()
                    print(f"Fortschritt für das Thema '{topic}' erfolgreich zurückgesetzt.")
                else:
                    print("Benutzer nicht gefunden.")
        except sqlite3.Error as e:
            print(f"Datenbankfehler: {e}")

    def wechselmenu(self, instance):
        self.manager.current = 'menu'
        
    def wechseltrp(self, instance):
        self.manager.current = 'trophe'





def fetch_user_data(username):
    try:
        with sqlite3.connect("locked.db") as conn:
            cursor = conn.cursor()
            cursor.execute('SELECT correct_answers, wrong_answers, id FROM users WHERE username = ?', (username,))
            result = cursor.fetchone()
            if result:
                correct_answers, wrong_answers, user_id = result
                return correct_answers, wrong_answers, user_id
            else:
                return 0, 0, None 
    except sqlite3.Error as e:
        print(f"Datenbankfehler: {e}")
        return 0, 0, None

def fetch_last_seven_days_data(user_id):
    try:
        with sqlite3.connect("locked.db") as conn:
            cursor = conn.cursor()
            cursor.execute('''
                SELECT DATE(timestamp) as date, COUNT(*) as total_questions
                FROM questions_log
                WHERE user_id = ? AND timestamp >= DATE('now', '-6 days')
                GROUP BY DATE(timestamp)
            ''', (user_id,))
            result = cursor.fetchall()

            last_seven_days = [(datetime.now() - timedelta(days=i)).strftime('%Y-%m-%d') for i in range(6, -1, -1)]
            date_to_questions = {date: 0 for date in last_seven_days}  # Default-Werte

            for date, total_questions in result:
                if date in date_to_questions:
                    date_to_questions[date] = total_questions

            dates = list(date_to_questions.keys())
            total_questions = list(date_to_questions.values())

            return dates, total_questions

    except sqlite3.Error as e:
        print(f"Datenbankfehler: {e}")
        return [], []

def create_user_progress_chart(correct_answers, wrong_answers):
    kategorien = ['Richtige Antworten', 'Falsche Antworten']
    werte = [correct_answers, wrong_answers]

    fig, ax = plt.subplots()
    ax.bar(kategorien, werte, color=['green', 'red'])
    ax.set_title('Benutzerfortschritt')
    ax.patch.set_facecolor("#069AF3")
    fig.patch.set_facecolor('#069AF3')  
    return fig

def create_last_seven_days_chart(dates, total_questions):
    fig, ax = plt.subplots()
    ax.plot(dates, total_questions, marker='o', linestyle='-')

    ax.set_title('Anzahl der beantworteten Fragen in den letzten 7 Tagen')
    ax.grid(True)
    ax.patch.set_facecolor("#069AF3")
    fig.patch.set_facecolor("#069AF3")
    
    plt.xticks(rotation=45) 
    plt.tight_layout()

    return fig


class Trophe(Screen):
    def __init__(self, **kwargs):
        super(Trophe, self).__init__(**kwargs)
        self.prfl = FloatLayout()

        self.prfl.add_widget(Image(source="logo-1.png",
                                   size_hint=(None, None),
                                   size=(150, 150),
                                   pos_hint={'center_x': 0.5, 'top': 1.0}))

        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100, 100),
                           pos_hint={"center_x": 0.15, "y": 0}
                           )
        self.btn1.bind(on_press=self.wechselmenu)
        self.prfl.add_widget(self.btn1)

        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x": 0.5, "y": 0} 
                           )
        self.prfl.add_widget(self.btn2)

        self.btn3 = Button(background_normal='profile.png', background_down='profile.png',
                           size_hint=(None, None),
                           size=(100, 100),
                           pos_hint={"center_x": 0.85, "y": 0}
                           )
        self.btn3.bind(on_press=self.wechselprfl)
        self.prfl.add_widget(self.btn3)

        self.add_widget(self.prfl)

    def on_enter(self):
        scroll_view = ScrollView(size_hint=(1, None), size=(self.width, self.height * 0.85),
                                 pos_hint={"center_x": 0.5, "top": 0.9})

        graph_layout = BoxLayout(orientation='vertical', size_hint_y=None)
        graph_layout.bind(minimum_height=graph_layout.setter('height'))

        username = self.manager.username
        correct_answers, wrong_answers, user_id = fetch_user_data(username)
        self.user_id = user_id

        fig = create_user_progress_chart(correct_answers, wrong_answers)

        self.chart_widget = FigureCanvasKivy(fig)
        self.chart_widget.size_hint = (1, None)
        self.chart_widget.height = 500
        graph_layout.add_widget(self.chart_widget)

        dates, total_questions = fetch_last_seven_days_data(self.user_id)

        fig_last_seven_days = create_last_seven_days_chart(dates, total_questions)

        self.chart_widget_last_seven_days = FigureCanvasKivy(fig_last_seven_days)
        self.chart_widget_last_seven_days.size_hint = (1, None)
        self.chart_widget_last_seven_days.height = 500
        graph_layout.add_widget(self.chart_widget_last_seven_days)

        scroll_view.add_widget(graph_layout)
        self.prfl.add_widget(scroll_view)
        
        self.prfl.add_widget(Image(source="logo-1.png",
                                   size_hint=(None, None),
                                   size=(150, 150),
                                   pos_hint={'center_x': 0.5, 'top': 1.0}))

        self.btn1 = Button(background_normal='image.png', background_down='image.png',
                           size_hint=(None, None),
                           size=(100, 100),
                           pos_hint={"center_x": 0.15, "y": 0}
                           )
        self.btn1.bind(on_press=self.wechselmenu)
        self.prfl.add_widget(self.btn1)

        self.btn2 = Button(background_normal="Trophe.png", background_down="Trophe.png",
                           size_hint=(None, None),
                           size=(98, 98),
                           pos_hint={"center_x":0.5, "y":0}
                           )
        self.prfl.add_widget(self.btn2)

        self.btn3 = Button(background_normal='profile.png', background_down='profile.png',
                           size_hint=(None, None),
                           size=(100, 100),
                           pos_hint={"center_x": 0.85, "y": 0}
                           )
        self.btn3.bind(on_press=self.wechselprfl)
        self.prfl.add_widget(self.btn3)


    def wechselmenu(self, instance):
        self.manager.current = "menu"

    def wechselprfl(self, instance):
        self.manager.current = "profile"


class MyScreenManager(ScreenManager):
    def __init__(self, **kwargs):
        super(MyScreenManager, self).__init__(**kwargs)
        self.username = StringProperty()
        self.fragen = {
            'systeme_und_regierungsformen': fragenpol,
            'internationale_beziehungen': frageninter,
            'ideologien_und_werte': fragenideo,
            'wirtschaft': fragenwirt,
            'faszinierende_fakten': fragenmenfakten,
            'geografische_fakten': fragengeofak,
            'daten_festtage': fragendatenfest,
            'preisträger': fragenpreisfak,
            'bücher': fragenhobbücher,
            'reisen': fragenhobreisen,
            'kunst': fragenhobkunst,
            'sports': fragenhobsport,
            'astronomie': fragenastro,
            "chemie": fragenchem,
            "physik": fragenphy,
            "biologie": fragenphy,
            "erfindungen": fragenerfind,
            "krieg": fragenkriege,
            "philosophie": fragenphilo,
            "mythologie": fragenmytho,
            "länder": fragenländer,
            "hauptstädte": fragenhaupt,
            "fußball": fragenfuß,
            "basketball": fragenbasket,
            "tennis": fragentennis,
            "fitness": fragenfitness,
            "psychologie": fragenpsy,
            "körper": fragenkörper,
            "ernährung": fragenernähr,
        }



class ScreenManagerApp(App):
    def build(self):
        window_manager = MyScreenManager()  
        
        window_manager.add_widget(Start(name='start'))
        window_manager.add_widget(Menu(name='menu'))
        window_manager.add_widget(Profile(name='profile'))
        window_manager.add_widget(Trophe(name='trophe'))
        
        window_manager.add_widget(Politik(name='politik')) 
        window_manager.add_widget(Fakten(name='fakten'))    
        window_manager.add_widget(Hobbys(name='hobbys'))
        window_manager.add_widget(Naturwissenschaften(name='naturwissenschaften'))
        window_manager.add_widget(Geschichte(name='geschichte'))
        window_manager.add_widget(Geographie(name='geographie'))
        window_manager.add_widget(Sport(name='sport'))
        window_manager.add_widget(Gesunheit(name='gesundheit'))
            
        return window_manager
    
if __name__ == "__main__":
     ScreenManagerApp().run()
    
                    
        
        
        